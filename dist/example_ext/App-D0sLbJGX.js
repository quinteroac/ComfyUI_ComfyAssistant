var ob=Object.defineProperty;var zl=e=>{throw TypeError(e)};var lb=(e,t,n)=>t in e?ob(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t,n)=>lb(e,typeof t!="symbol"?t+"":t,n),Ll=(e,t,n)=>t.has(e)||zl("Cannot "+n);var hr=(e,t,n)=>(Ll(e,t,"read from private field"),n?n.call(e):t.get(e)),fr=(e,t,n)=>t.has(e)?zl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pr=(e,t,n,r)=>(Ll(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{c as In,u as $e,j as p,a as Us,b as di,d as bn,P as Me,e as J,f as an,g as Zs,h as Ft,i as Od,D as jd,k as ub,l as Dd,R as cb,A as db,m as hb,C as fb,n as pb,o as bo,p as mb,q as gb,S as yb,r as K,T as zd,s as Ld,t as bb,v as $d}from"./main.js";import{d as Pe,r as b,g as hi,R as vb,c as Vs}from"./vendor-DnkcwNY-.js";function Fd(e){const t=e+"CollectionProvider",[n,r]=In(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:v,children:g}=y,_=Pe.useRef(null),x=Pe.useRef(new Map).current;return p.jsx(s,{scope:v,itemMap:x,collectionRef:_,children:g})};a.displayName=t;const o=e+"CollectionSlot",l=Us(o),u=Pe.forwardRef((y,v)=>{const{scope:g,children:_}=y,x=i(o,g),T=$e(v,x.collectionRef);return p.jsx(l,{ref:T,children:_})});u.displayName=o;const c=e+"CollectionItemSlot",d="data-radix-collection-item",h=Us(c),f=Pe.forwardRef((y,v)=>{const{scope:g,children:_,...x}=y,T=Pe.useRef(null),E=$e(v,T),I=i(c,g);return Pe.useEffect(()=>(I.itemMap.set(T,{ref:T,...x}),()=>void I.itemMap.delete(T))),p.jsx(h,{[d]:"",ref:E,children:_})});f.displayName=c;function m(y){const v=i(e+"CollectionConsumer",y);return Pe.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const x=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((I,P)=>x.indexOf(I.ref.current)-x.indexOf(P.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:u,ItemSlot:f},m,r]}var fi="Collapsible",[xb,sF]=In(fi),[_b,vo]=xb(fi),Bd=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:a,...o}=e,[l,u]=di({prop:r,defaultProp:s??!1,onChange:a,caller:fi});return p.jsx(_b,{scope:n,disabled:i,contentId:bn(),open:l,onOpenToggle:b.useCallback(()=>u(c=>!c),[u]),children:p.jsx(Me.div,{"data-state":_o(l),"data-disabled":i?"":void 0,...o,ref:t})})});Bd.displayName=fi;var Ud="CollapsibleTrigger",Zd=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=vo(Ud,n);return p.jsx(Me.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":_o(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:J(e.onClick,s.onOpenToggle)})});Zd.displayName=Ud;var xo="CollapsibleContent",Vd=b.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=vo(xo,e.__scopeCollapsible);return p.jsx(an,{present:n||s.open,children:({present:i})=>p.jsx(wb,{...r,ref:t,present:i})})});Vd.displayName=xo;var wb=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=e,a=vo(xo,n),[o,l]=b.useState(r),u=b.useRef(null),c=$e(t,u),d=b.useRef(0),h=d.current,f=b.useRef(0),m=f.current,y=a.open||o,v=b.useRef(y),g=b.useRef(void 0);return b.useEffect(()=>{const _=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(_)},[]),Zs(()=>{const _=u.current;if(_){g.current=g.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const x=_.getBoundingClientRect();d.current=x.height,f.current=x.width,v.current||(_.style.transitionDuration=g.current.transitionDuration,_.style.animationName=g.current.animationName),l(r)}},[a.open,r]),p.jsx(Me.div,{"data-state":_o(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!y,...i,ref:c,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:y&&s})});function _o(e){return e?"open":"closed"}var kb=Bd,Sb=b.createContext(void 0);function qd(e){const t=b.useContext(Sb);return e||t||"ltr"}var $i="focusScope.autoFocusOnMount",Fi="focusScope.autoFocusOnUnmount",$l={bubbles:!1,cancelable:!0},Ib="FocusScope",wo=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[o,l]=b.useState(null),u=Ft(s),c=Ft(i),d=b.useRef(null),h=$e(t,y=>l(y)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let y=function(x){if(f.paused||!o)return;const T=x.target;o.contains(T)?d.current=T:qt(d.current,{select:!0})},v=function(x){if(f.paused||!o)return;const T=x.relatedTarget;T!==null&&(o.contains(T)||qt(d.current,{select:!0}))},g=function(x){if(document.activeElement===document.body)for(const E of x)E.removedNodes.length>0&&qt(o)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const _=new MutationObserver(g);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),_.disconnect()}}},[r,o,f.paused]),b.useEffect(()=>{if(o){Bl.add(f);const y=document.activeElement;if(!o.contains(y)){const g=new CustomEvent($i,$l);o.addEventListener($i,u),o.dispatchEvent(g),g.defaultPrevented||(Tb(Pb(Hd(o)),{select:!0}),document.activeElement===y&&qt(o))}return()=>{o.removeEventListener($i,u),setTimeout(()=>{const g=new CustomEvent(Fi,$l);o.addEventListener(Fi,c),o.dispatchEvent(g),g.defaultPrevented||qt(y??document.body,{select:!0}),o.removeEventListener(Fi,c),Bl.remove(f)},0)}}},[o,u,c,f]);const m=b.useCallback(y=>{if(!n&&!r||f.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(v&&g){const _=y.currentTarget,[x,T]=Cb(_);x&&T?!y.shiftKey&&g===T?(y.preventDefault(),n&&qt(x,{select:!0})):y.shiftKey&&g===x&&(y.preventDefault(),n&&qt(T,{select:!0})):g===_&&y.preventDefault()}},[n,r,f.paused]);return p.jsx(Me.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});wo.displayName=Ib;function Tb(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(qt(r,{select:t}),document.activeElement!==n)return}function Cb(e){const t=Hd(e),n=Fl(t,e),r=Fl(t.reverse(),e);return[n,r]}function Hd(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Fl(e,t){for(const n of e)if(!Eb(n,{upTo:t}))return n}function Eb(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Rb(e){return e instanceof HTMLInputElement&&"select"in e}function qt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Rb(e)&&t&&e.select()}}var Bl=Ab();function Ab(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Ul(e,t),e.unshift(t)},remove(t){var n;e=Ul(e,t),(n=e[0])==null||n.resume()}}}function Ul(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Pb(e){return e.filter(t=>t.tagName!=="A")}var Bi=0;function Wd(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Zl()),document.body.insertAdjacentElement("beforeend",e[1]??Zl()),Bi++,()=>{Bi===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Bi--}},[])}function Zl(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Et=function(){return Et=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Et.apply(this,arguments)};function Gd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Mb(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Ms="right-scroll-bar-position",Ns="width-before-scroll-bar",Nb="with-scroll-bars-hidden",Ob="--removed-body-scroll-bar-size";function Ui(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jb(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var Db=typeof window<"u"?b.useLayoutEffect:b.useEffect,Vl=new WeakMap;function zb(e,t){var n=jb(null,function(r){return e.forEach(function(s){return Ui(s,r)})});return Db(function(){var r=Vl.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(o){i.has(o)||Ui(o,null)}),i.forEach(function(o){s.has(o)||Ui(o,a)})}Vl.set(n,e)},[e]),n}function Lb(e){return e}function $b(e,t){t===void 0&&(t=Lb);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(i),a=n}var l=function(){var c=a;a=[],c.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){a.push(c),u()},filter:function(c){return a=a.filter(c),n}}}};return s}function Fb(e){e===void 0&&(e={});var t=$b(null);return t.options=Et({async:!0,ssr:!1},e),t}var Jd=function(e){var t=e.sideCar,n=Gd(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Et({},n))};Jd.isSideCarExport=!0;function Bb(e,t){return e.useMedium(t),Jd}var Kd=Fb(),Zi=function(){},pi=b.forwardRef(function(e,t){var n=b.useRef(null),r=b.useState({onScrollCapture:Zi,onWheelCapture:Zi,onTouchMoveCapture:Zi}),s=r[0],i=r[1],a=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,m=e.noIsolation,y=e.inert,v=e.allowPinchZoom,g=e.as,_=g===void 0?"div":g,x=e.gapMode,T=Gd(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,I=zb([n,t]),P=Et(Et({},T),s);return b.createElement(b.Fragment,null,c&&b.createElement(E,{sideCar:Kd,removeScrollBar:u,shards:d,noRelative:f,noIsolation:m,inert:y,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),a?b.cloneElement(b.Children.only(o),Et(Et({},P),{ref:I})):b.createElement(_,Et({},P,{className:l,ref:I}),o))});pi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pi.classNames={fullWidth:Ns,zeroRight:Ms};var Ub=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Zb(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ub();return t&&e.setAttribute("nonce",t),e}function Vb(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qb(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Hb=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Zb())&&(Vb(t,n),qb(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Wb=function(){var e=Hb();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Yd=function(){var e=Wb(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},Gb={left:0,top:0,right:0,gap:0},Vi=function(e){return parseInt(e||"",10)||0},Jb=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Vi(n),Vi(r),Vi(s)]},Kb=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Gb;var t=Jb(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Yb=Yd(),Un="data-scroll-locked",Xb=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Nb,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Un,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ms,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Ns,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Ms," .").concat(Ms,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ns," .").concat(Ns,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Un,`] {
    `).concat(Ob,": ").concat(o,`px;
  }
`)},ql=function(){var e=parseInt(document.body.getAttribute(Un)||"0",10);return isFinite(e)?e:0},Qb=function(){b.useEffect(function(){return document.body.setAttribute(Un,(ql()+1).toString()),function(){var e=ql()-1;e<=0?document.body.removeAttribute(Un):document.body.setAttribute(Un,e.toString())}},[])},ev=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;Qb();var i=b.useMemo(function(){return Kb(s)},[s]);return b.createElement(Yb,{styles:Xb(i,!t,s,n?"":"!important")})},Pa=!1;if(typeof window<"u")try{var ps=Object.defineProperty({},"passive",{get:function(){return Pa=!0,!0}});window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{Pa=!1}var Nn=Pa?{passive:!1}:!1,tv=function(e){return e.tagName==="TEXTAREA"},Xd=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!tv(e)&&n[t]==="visible")},nv=function(e){return Xd(e,"overflowY")},rv=function(e){return Xd(e,"overflowX")},Hl=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Qd(e,r);if(s){var i=eh(e,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sv=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},iv=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Qd=function(e,t){return e==="v"?nv(t):rv(t)},eh=function(e,t){return e==="v"?sv(t):iv(t)},av=function(e,t){return e==="h"&&t==="rtl"?-1:1},ov=function(e,t,n,r,s){var i=av(e,window.getComputedStyle(t).direction),a=i*r,o=n.target,l=t.contains(o),u=!1,c=a>0,d=0,h=0;do{if(!o)break;var f=eh(e,o),m=f[0],y=f[1],v=f[2],g=y-v-i*m;(m||g)&&Qd(e,o)&&(d+=g,h+=m);var _=o.parentNode;o=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(c&&Math.abs(d)<1||!c&&Math.abs(h)<1)&&(u=!0),u},ms=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Wl=function(e){return[e.deltaX,e.deltaY]},Gl=function(e){return e&&"current"in e?e.current:e},lv=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uv=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cv=0,On=[];function dv(e){var t=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(cv++)[0],i=b.useState(Yd)[0],a=b.useRef(e);b.useEffect(function(){a.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Mb([e.lockRef.current],(e.shards||[]).map(Gl),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=b.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var g=ms(y),_=n.current,x="deltaX"in y?y.deltaX:_[0]-g[0],T="deltaY"in y?y.deltaY:_[1]-g[1],E,I=y.target,P=Math.abs(x)>Math.abs(T)?"h":"v";if("touches"in y&&P==="h"&&I.type==="range")return!1;var N=window.getSelection(),q=N&&N.anchorNode,C=q?q===I||q.contains(I):!1;if(C)return!1;var L=Hl(P,I);if(!L)return!0;if(L?E=P:(E=P==="v"?"h":"v",L=Hl(P,I)),!L)return!1;if(!r.current&&"changedTouches"in y&&(x||T)&&(r.current=E),!E)return!0;var F=r.current||E;return ov(F,v,y,F==="h"?x:T)},[]),l=b.useCallback(function(y){var v=y;if(!(!On.length||On[On.length-1]!==i)){var g="deltaY"in v?Wl(v):ms(v),_=t.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&lv(E.delta,g)})[0];if(_&&_.should){v.cancelable&&v.preventDefault();return}if(!_){var x=(a.current.shards||[]).map(Gl).filter(Boolean).filter(function(E){return E.contains(v.target)}),T=x.length>0?o(v,x[0]):!a.current.noIsolation;T&&v.cancelable&&v.preventDefault()}}},[]),u=b.useCallback(function(y,v,g,_){var x={name:y,delta:v,target:g,should:_,shadowParent:hv(g)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(T){return T!==x})},1)},[]),c=b.useCallback(function(y){n.current=ms(y),r.current=void 0},[]),d=b.useCallback(function(y){u(y.type,Wl(y),y.target,o(y,e.lockRef.current))},[]),h=b.useCallback(function(y){u(y.type,ms(y),y.target,o(y,e.lockRef.current))},[]);b.useEffect(function(){return On.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Nn),document.addEventListener("touchmove",l,Nn),document.addEventListener("touchstart",c,Nn),function(){On=On.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Nn),document.removeEventListener("touchmove",l,Nn),document.removeEventListener("touchstart",c,Nn)}},[]);var f=e.removeScrollBar,m=e.inert;return b.createElement(b.Fragment,null,m?b.createElement(i,{styles:uv(s)}):null,f?b.createElement(ev,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function hv(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const fv=Bb(Kd,dv);var ko=b.forwardRef(function(e,t){return b.createElement(pi,Et({},e,{ref:t,sideCar:fv}))});ko.classNames=pi.classNames;var pv=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},jn=new WeakMap,gs=new WeakMap,ys={},qi=0,th=function(e){return e&&(e.host||th(e.parentNode))},mv=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=th(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},gv=function(e,t,n,r){var s=mv(t,Array.isArray(e)?e:[e]);ys[n]||(ys[n]=new WeakMap);var i=ys[n],a=[],o=new Set,l=new Set(s),u=function(d){!d||o.has(d)||(o.add(d),u(d.parentNode))};s.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))c(h);else try{var f=h.getAttribute(r),m=f!==null&&f!=="false",y=(jn.get(h)||0)+1,v=(i.get(h)||0)+1;jn.set(h,y),i.set(h,v),a.push(h),y===1&&m&&gs.set(h,!0),v===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",h,g)}})};return c(t),o.clear(),qi++,function(){a.forEach(function(d){var h=jn.get(d)-1,f=i.get(d)-1;jn.set(d,h),i.set(d,f),h||(gs.has(d)||d.removeAttribute(r),gs.delete(d)),f||d.removeAttribute(n)}),qi--,qi||(jn=new WeakMap,jn=new WeakMap,gs=new WeakMap,ys={})}},nh=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=pv(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),gv(r,s,n,"aria-hidden")):function(){return null}},mi="Dialog",[rh,iF]=In(mi),[yv,kt]=rh(mi),sh=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,o=b.useRef(null),l=b.useRef(null),[u,c]=di({prop:r,defaultProp:s??!1,onChange:i,caller:mi});return p.jsx(yv,{scope:t,triggerRef:o,contentRef:l,contentId:bn(),titleId:bn(),descriptionId:bn(),open:u,onOpenChange:c,onOpenToggle:b.useCallback(()=>c(d=>!d),[c]),modal:a,children:n})};sh.displayName=mi;var ih="DialogTrigger",ah=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=kt(ih,n),i=$e(t,s.triggerRef);return p.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":To(s.open),...r,ref:i,onClick:J(e.onClick,s.onOpenToggle)})});ah.displayName=ih;var So="DialogPortal",[bv,oh]=rh(So,{forceMount:void 0}),lh=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=kt(So,t);return p.jsx(bv,{scope:t,forceMount:n,children:b.Children.map(r,a=>p.jsx(an,{present:n||i.open,children:p.jsx(Od,{asChild:!0,container:s,children:a})}))})};lh.displayName=So;var qs="DialogOverlay",uh=b.forwardRef((e,t)=>{const n=oh(qs,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=kt(qs,e.__scopeDialog);return i.modal?p.jsx(an,{present:r||i.open,children:p.jsx(xv,{...s,ref:t})}):null});uh.displayName=qs;var vv=Us("DialogOverlay.RemoveScroll"),xv=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=kt(qs,n);return p.jsx(ko,{as:vv,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Me.div,{"data-state":To(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),xn="DialogContent",ch=b.forwardRef((e,t)=>{const n=oh(xn,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=kt(xn,e.__scopeDialog);return p.jsx(an,{present:r||i.open,children:i.modal?p.jsx(_v,{...s,ref:t}):p.jsx(wv,{...s,ref:t})})});ch.displayName=xn;var _v=b.forwardRef((e,t)=>{const n=kt(xn,e.__scopeDialog),r=b.useRef(null),s=$e(t,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return nh(i)},[]),p.jsx(dh,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:J(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:J(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:J(e.onFocusOutside,i=>i.preventDefault())})}),wv=b.forwardRef((e,t)=>{const n=kt(xn,e.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return p.jsx(dh,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),dh=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,o=kt(xn,n),l=b.useRef(null),u=$e(t,l);return Wd(),p.jsxs(p.Fragment,{children:[p.jsx(wo,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(jd,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":To(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(Sv,{titleId:o.titleId}),p.jsx(Tv,{contentRef:l,descriptionId:o.descriptionId})]})]})}),Io="DialogTitle",hh=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=kt(Io,n);return p.jsx(Me.h2,{id:s.titleId,...r,ref:t})});hh.displayName=Io;var fh="DialogDescription",kv=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=kt(fh,n);return p.jsx(Me.p,{id:s.descriptionId,...r,ref:t})});kv.displayName=fh;var ph="DialogClose",mh=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=kt(ph,n);return p.jsx(Me.button,{type:"button",...r,ref:t,onClick:J(e.onClick,()=>s.onOpenChange(!1))})});mh.displayName=ph;function To(e){return e?"open":"closed"}var gh="DialogTitleWarning",[aF,yh]=ub(gh,{contentName:xn,titleName:Io,docsSlug:"dialog"}),Sv=({titleId:e})=>{const t=yh(gh),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Iv="DialogDescriptionWarning",Tv=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yh(Iv).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Cv=sh,Ev=ah,Rv=lh,Av=uh,Pv=ch,Mv=hh,Nv=mh,bh={exports:{}},vh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qn=b;function Ov(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jv=typeof Object.is=="function"?Object.is:Ov,Dv=qn.useState,zv=qn.useEffect,Lv=qn.useLayoutEffect,$v=qn.useDebugValue;function Fv(e,t){var n=t(),r=Dv({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return Lv(function(){s.value=n,s.getSnapshot=t,Hi(s)&&i({inst:s})},[e,n,t]),zv(function(){return Hi(s)&&i({inst:s}),e(function(){Hi(s)&&i({inst:s})})},[e]),$v(n),n}function Hi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jv(e,n)}catch{return!0}}function Bv(e,t){return t()}var Uv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bv:Fv;vh.useSyncExternalStore=qn.useSyncExternalStore!==void 0?qn.useSyncExternalStore:Uv;bh.exports=vh;var Zv=bh.exports;function Vv(){return Zv.useSyncExternalStore(qv,()=>!0,()=>!1)}function qv(){return()=>{}}var Co="Avatar",[Hv,oF]=In(Co),[Wv,xh]=Hv(Co),_h=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,i]=b.useState("idle");return p.jsx(Wv,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:p.jsx(Me.span,{...r,ref:t})})});_h.displayName=Co;var wh="AvatarImage",kh=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=e,a=xh(wh,n),o=Gv(r,i),l=Ft(u=>{s(u),a.onImageLoadingStatusChange(u)});return Zs(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?p.jsx(Me.img,{...i,ref:t,src:r}):null});kh.displayName=wh;var Sh="AvatarFallback",Ih=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,i=xh(Sh,n),[a,o]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(l)}},[r]),a&&i.imageLoadingStatus!=="loaded"?p.jsx(Me.span,{...s,ref:t}):null});Ih.displayName=Sh;function Jl(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Gv(e,{referrerPolicy:t,crossOrigin:n}){const r=Vv(),s=b.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,o]=b.useState(()=>Jl(i,e));return Zs(()=>{o(Jl(i,e))},[i,e]),Zs(()=>{const l=d=>()=>{o(d)};if(!i)return;const u=l("loaded"),c=l("error");return i.addEventListener("load",u),i.addEventListener("error",c),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",c)}},[i,n,t]),a}var Jv=_h,Kv=kh,Yv=Ih,Wi="rovingFocusGroup.onEntryFocus",Xv={bubbles:!1,cancelable:!0},es="RovingFocusGroup",[Ma,Th,Qv]=Fd(es),[ex,Ch]=In(es,[Qv]),[tx,nx]=ex(es),Eh=b.forwardRef((e,t)=>p.jsx(Ma.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Ma.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(rx,{...e,ref:t})})}));Eh.displayName=es;var rx=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=e,h=b.useRef(null),f=$e(t,h),m=qd(i),[y,v]=di({prop:a,defaultProp:o??null,onChange:l,caller:es}),[g,_]=b.useState(!1),x=Ft(u),T=Th(n),E=b.useRef(!1),[I,P]=b.useState(0);return b.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(Wi,x),()=>N.removeEventListener(Wi,x)},[x]),p.jsx(tx,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:y,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>_(!0),[]),onFocusableItemAdd:b.useCallback(()=>P(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>P(N=>N-1),[]),children:p.jsx(Me.div,{tabIndex:g||I===0?-1:0,"data-orientation":r,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:J(e.onMouseDown,()=>{E.current=!0}),onFocus:J(e.onFocus,N=>{const q=!E.current;if(N.target===N.currentTarget&&q&&!g){const C=new CustomEvent(Wi,Xv);if(N.currentTarget.dispatchEvent(C),!C.defaultPrevented){const L=T().filter(be=>be.focusable),F=L.find(be=>be.active),ue=L.find(be=>be.id===y),ne=[F,ue,...L].filter(Boolean).map(be=>be.ref.current);Ph(ne,c)}}E.current=!1}),onBlur:J(e.onBlur,()=>_(!1))})})}),Rh="RovingFocusGroupItem",Ah=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=e,l=bn(),u=i||l,c=nx(Rh,n),d=c.currentTabStopId===u,h=Th(n),{onFocusableItemAdd:f,onFocusableItemRemove:m,currentTabStopId:y}=c;return b.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),p.jsx(Ma.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:p.jsx(Me.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:J(e.onMouseDown,v=>{r?c.onItemFocus(u):v.preventDefault()}),onFocus:J(e.onFocus,()=>c.onItemFocus(u)),onKeyDown:J(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=ax(v,c.orientation,c.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=h().filter(T=>T.focusable).map(T=>T.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const T=x.indexOf(v.currentTarget);x=c.loop?ox(x,T+1):x.slice(T+1)}setTimeout(()=>Ph(x))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:y!=null}):a})})});Ah.displayName=Rh;var sx={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ix(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ax(e,t,n){const r=ix(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return sx[r]}function Ph(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function ox(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var lx=Eh,ux=Ah,Na=["Enter"," "],cx=["ArrowDown","PageUp","Home"],Mh=["ArrowUp","PageDown","End"],dx=[...cx,...Mh],hx={ltr:[...Na,"ArrowRight"],rtl:[...Na,"ArrowLeft"]},fx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ts="Menu",[Nr,px,mx]=Fd(ts),[Tn,Nh]=In(ts,[mx,Dd,Ch]),gi=Dd(),Oh=Ch(),[gx,Cn]=Tn(ts),[yx,ns]=Tn(ts),jh=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=e,o=gi(t),[l,u]=b.useState(null),c=b.useRef(!1),d=Ft(i),h=qd(s);return b.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),p.jsx(cb,{...o,children:p.jsx(gx,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:u,children:p.jsx(yx,{scope:t,onClose:b.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:a,children:r})})})};jh.displayName=ts;var bx="MenuAnchor",Eo=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=gi(n);return p.jsx(db,{...s,...r,ref:t})});Eo.displayName=bx;var Ro="MenuPortal",[vx,Dh]=Tn(Ro,{forceMount:void 0}),zh=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=Cn(Ro,t);return p.jsx(vx,{scope:t,forceMount:n,children:p.jsx(an,{present:n||i.open,children:p.jsx(Od,{asChild:!0,container:s,children:r})})})};zh.displayName=Ro;var dt="MenuContent",[xx,Ao]=Tn(dt),Lh=b.forwardRef((e,t)=>{const n=Dh(dt,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=Cn(dt,e.__scopeMenu),a=ns(dt,e.__scopeMenu);return p.jsx(Nr.Provider,{scope:e.__scopeMenu,children:p.jsx(an,{present:r||i.open,children:p.jsx(Nr.Slot,{scope:e.__scopeMenu,children:a.modal?p.jsx(_x,{...s,ref:t}):p.jsx(wx,{...s,ref:t})})})})}),_x=b.forwardRef((e,t)=>{const n=Cn(dt,e.__scopeMenu),r=b.useRef(null),s=$e(t,r);return b.useEffect(()=>{const i=r.current;if(i)return nh(i)},[]),p.jsx(Po,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:J(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),wx=b.forwardRef((e,t)=>{const n=Cn(dt,e.__scopeMenu);return p.jsx(Po,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),kx=Us("MenuContent.ScrollLock"),Po=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:m,...y}=e,v=Cn(dt,n),g=ns(dt,n),_=gi(n),x=Oh(n),T=px(n),[E,I]=b.useState(null),P=b.useRef(null),N=$e(t,P,v.onContentChange),q=b.useRef(0),C=b.useRef(""),L=b.useRef(0),F=b.useRef(null),ue=b.useRef("right"),pe=b.useRef(0),ne=m?ko:b.Fragment,be=m?{as:kx,allowPinchZoom:!0}:void 0,Oe=G=>{var lt,pt;const w=C.current+G,Ee=T().filter(Ue=>!Ue.disabled),Le=document.activeElement,k=(lt=Ee.find(Ue=>Ue.ref.current===Le))==null?void 0:lt.textValue,qe=Ee.map(Ue=>Ue.textValue),St=jx(qe,w,k),Ie=(pt=Ee.find(Ue=>Ue.textValue===St))==null?void 0:pt.ref.current;(function Ue(jt){C.current=jt,window.clearTimeout(q.current),jt!==""&&(q.current=window.setTimeout(()=>Ue(""),1e3))})(w),Ie&&setTimeout(()=>Ie.focus())};b.useEffect(()=>()=>window.clearTimeout(q.current),[]),Wd();const ze=b.useCallback(G=>{var Ee,Le;return ue.current===((Ee=F.current)==null?void 0:Ee.side)&&zx(G,(Le=F.current)==null?void 0:Le.area)},[]);return p.jsx(xx,{scope:n,searchRef:C,onItemEnter:b.useCallback(G=>{ze(G)&&G.preventDefault()},[ze]),onItemLeave:b.useCallback(G=>{var w;ze(G)||((w=P.current)==null||w.focus(),I(null))},[ze]),onTriggerLeave:b.useCallback(G=>{ze(G)&&G.preventDefault()},[ze]),pointerGraceTimerRef:L,onPointerGraceIntentChange:b.useCallback(G=>{F.current=G},[]),children:p.jsx(ne,{...be,children:p.jsx(wo,{asChild:!0,trapped:s,onMountAutoFocus:J(i,G=>{var w;G.preventDefault(),(w=P.current)==null||w.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:p.jsx(jd,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:p.jsx(lx,{asChild:!0,...x,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:I,onEntryFocus:J(l,G=>{g.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(fb,{role:"menu","aria-orientation":"vertical","data-state":ef(v.open),"data-radix-menu-content":"",dir:g.dir,..._,...y,ref:N,style:{outline:"none",...y.style},onKeyDown:J(y.onKeyDown,G=>{const Ee=G.target.closest("[data-radix-menu-content]")===G.currentTarget,Le=G.ctrlKey||G.altKey||G.metaKey,k=G.key.length===1;Ee&&(G.key==="Tab"&&G.preventDefault(),!Le&&k&&Oe(G.key));const qe=P.current;if(G.target!==qe||!dx.includes(G.key))return;G.preventDefault();const Ie=T().filter(lt=>!lt.disabled).map(lt=>lt.ref.current);Mh.includes(G.key)&&Ie.reverse(),Nx(Ie)}),onBlur:J(e.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(q.current),C.current="")}),onPointerMove:J(e.onPointerMove,Or(G=>{const w=G.target,Ee=pe.current!==G.clientX;if(G.currentTarget.contains(w)&&Ee){const Le=G.clientX>pe.current?"right":"left";ue.current=Le,pe.current=G.clientX}}))})})})})})})});Lh.displayName=dt;var Sx="MenuGroup",Mo=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Me.div,{role:"group",...r,ref:t})});Mo.displayName=Sx;var Ix="MenuLabel",$h=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Me.div,{...r,ref:t})});$h.displayName=Ix;var Hs="MenuItem",Kl="menu.itemSelect",yi=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=b.useRef(null),a=ns(Hs,e.__scopeMenu),o=Ao(Hs,e.__scopeMenu),l=$e(t,i),u=b.useRef(!1),c=()=>{const d=i.current;if(!n&&d){const h=new CustomEvent(Kl,{bubbles:!0,cancelable:!0});d.addEventListener(Kl,f=>r==null?void 0:r(f),{once:!0}),hb(d,h),h.defaultPrevented?u.current=!1:a.onClose()}};return p.jsx(Fh,{...s,ref:l,disabled:n,onClick:J(e.onClick,c),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:J(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:J(e.onKeyDown,d=>{const h=o.searchRef.current!=="";n||h&&d.key===" "||Na.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});yi.displayName=Hs;var Fh=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,a=Ao(Hs,n),o=Oh(n),l=b.useRef(null),u=$e(t,l),[c,d]=b.useState(!1),[h,f]=b.useState("");return b.useEffect(()=>{const m=l.current;m&&f((m.textContent??"").trim())},[i.children]),p.jsx(Nr.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:p.jsx(ux,{asChild:!0,...o,focusable:!r,children:p.jsx(Me.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:J(e.onPointerMove,Or(m=>{r?a.onItemLeave(m):(a.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:J(e.onPointerLeave,Or(m=>a.onItemLeave(m))),onFocus:J(e.onFocus,()=>d(!0)),onBlur:J(e.onBlur,()=>d(!1))})})})}),Tx="MenuCheckboxItem",Bh=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return p.jsx(Hh,{scope:e.__scopeMenu,checked:n,children:p.jsx(yi,{role:"menuitemcheckbox","aria-checked":Ws(n)?"mixed":n,...s,ref:t,"data-state":Oo(n),onSelect:J(s.onSelect,()=>r==null?void 0:r(Ws(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Bh.displayName=Tx;var Uh="MenuRadioGroup",[Cx,Ex]=Tn(Uh,{value:void 0,onValueChange:()=>{}}),Zh=b.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Ft(r);return p.jsx(Cx,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(Mo,{...s,ref:t})})});Zh.displayName=Uh;var Vh="MenuRadioItem",qh=b.forwardRef((e,t)=>{const{value:n,...r}=e,s=Ex(Vh,e.__scopeMenu),i=n===s.value;return p.jsx(Hh,{scope:e.__scopeMenu,checked:i,children:p.jsx(yi,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Oo(i),onSelect:J(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});qh.displayName=Vh;var No="MenuItemIndicator",[Hh,Rx]=Tn(No,{checked:!1}),Wh=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=Rx(No,n);return p.jsx(an,{present:r||Ws(i.checked)||i.checked===!0,children:p.jsx(Me.span,{...s,ref:t,"data-state":Oo(i.checked)})})});Wh.displayName=No;var Ax="MenuSeparator",Gh=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Me.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Gh.displayName=Ax;var Px="MenuArrow",Jh=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=gi(n);return p.jsx(pb,{...s,...r,ref:t})});Jh.displayName=Px;var Mx="MenuSub",[lF,Kh]=Tn(Mx),br="MenuSubTrigger",Yh=b.forwardRef((e,t)=>{const n=Cn(br,e.__scopeMenu),r=ns(br,e.__scopeMenu),s=Kh(br,e.__scopeMenu),i=Ao(br,e.__scopeMenu),a=b.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},c=b.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return b.useEffect(()=>c,[c]),b.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),l(null)}},[o,l]),p.jsx(Eo,{asChild:!0,...u,children:p.jsx(Fh,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":ef(n.open),...e,ref:bo(t,s.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:J(e.onPointerMove,Or(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:J(e.onPointerLeave,Or(d=>{var f,m;c();const h=(f=n.content)==null?void 0:f.getBoundingClientRect();if(h){const y=(m=n.content)==null?void 0:m.dataset.side,v=y==="right",g=v?-5:5,_=h[v?"left":"right"],x=h[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+g,y:d.clientY},{x:_,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:_,y:h.bottom}],side:y}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:J(e.onKeyDown,d=>{var f;const h=i.searchRef.current!=="";e.disabled||h&&d.key===" "||hx[r.dir].includes(d.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),d.preventDefault())})})})});Yh.displayName=br;var Xh="MenuSubContent",Qh=b.forwardRef((e,t)=>{const n=Dh(dt,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=Cn(dt,e.__scopeMenu),a=ns(dt,e.__scopeMenu),o=Kh(Xh,e.__scopeMenu),l=b.useRef(null),u=$e(t,l);return p.jsx(Nr.Provider,{scope:e.__scopeMenu,children:p.jsx(an,{present:r||i.open,children:p.jsx(Nr.Slot,{scope:e.__scopeMenu,children:p.jsx(Po,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;a.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:J(e.onFocusOutside,c=>{c.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:J(e.onEscapeKeyDown,c=>{a.onClose(),c.preventDefault()}),onKeyDown:J(e.onKeyDown,c=>{var f;const d=c.currentTarget.contains(c.target),h=fx[a.dir].includes(c.key);d&&h&&(i.onOpenChange(!1),(f=o.trigger)==null||f.focus(),c.preventDefault())})})})})})});Qh.displayName=Xh;function ef(e){return e?"open":"closed"}function Ws(e){return e==="indeterminate"}function Oo(e){return Ws(e)?"indeterminate":e?"checked":"unchecked"}function Nx(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Ox(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function jx(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=Ox(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const l=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Dx(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const o=t[i],l=t[a],u=o.x,c=o.y,d=l.x,h=l.y;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(s=!s)}return s}function zx(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Dx(n,t)}function Or(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Lx=jh,$x=Eo,Fx=zh,Bx=Lh,Ux=Mo,Zx=$h,Vx=yi,qx=Bh,Hx=Zh,Wx=qh,Gx=Wh,Jx=Gh,Kx=Jh,Yx=Yh,Xx=Qh,bi="DropdownMenu",[Qx,tf]=In(bi,[Nh]),Ye=Nh(),[e_,nf]=Qx(bi),rf=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=Ye(t),u=b.useRef(null),[c,d]=di({prop:s,defaultProp:i??!1,onChange:a,caller:bi});return p.jsx(e_,{scope:t,triggerId:bn(),triggerRef:u,contentId:bn(),open:c,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:p.jsx(Lx,{...l,open:c,onOpenChange:d,dir:r,modal:o,children:n})})};rf.displayName=bi;var sf="DropdownMenuTrigger",af=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=nf(sf,n),a=Ye(n);return p.jsx($x,{asChild:!0,...a,children:p.jsx(Me.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:bo(t,i.triggerRef),onPointerDown:J(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:J(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});af.displayName=sf;var t_="DropdownMenuPortal",of=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ye(t);return p.jsx(Fx,{...r,...n})};of.displayName=t_;var lf="DropdownMenuContent",uf=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nf(lf,n),i=Ye(n),a=b.useRef(!1);return p.jsx(Bx,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:J(e.onCloseAutoFocus,o=>{var l;a.current||(l=s.triggerRef.current)==null||l.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:J(e.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!s.modal||c)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uf.displayName=lf;var n_="DropdownMenuGroup",r_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Ux,{...s,...r,ref:t})});r_.displayName=n_;var s_="DropdownMenuLabel",i_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Zx,{...s,...r,ref:t})});i_.displayName=s_;var a_="DropdownMenuItem",cf=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Vx,{...s,...r,ref:t})});cf.displayName=a_;var o_="DropdownMenuCheckboxItem",l_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(qx,{...s,...r,ref:t})});l_.displayName=o_;var u_="DropdownMenuRadioGroup",c_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Hx,{...s,...r,ref:t})});c_.displayName=u_;var d_="DropdownMenuRadioItem",h_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Wx,{...s,...r,ref:t})});h_.displayName=d_;var f_="DropdownMenuItemIndicator",p_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Gx,{...s,...r,ref:t})});p_.displayName=f_;var m_="DropdownMenuSeparator",g_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Jx,{...s,...r,ref:t})});g_.displayName=m_;var y_="DropdownMenuArrow",b_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Kx,{...s,...r,ref:t})});b_.displayName=y_;var v_="DropdownMenuSubTrigger",x_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Yx,{...s,...r,ref:t})});x_.displayName=v_;var __="DropdownMenuSubContent",w_=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ye(n);return p.jsx(Xx,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w_.displayName=__;var df=rf,hf=af,ff=of,pf=uf,mf=cf;function k_(e){const t=[];for(const n of e.commitTasks)try{n()}catch(r){t.push(r)}if(t.length>0){if(t.length===1)throw t[0];for(const n of t)console.error(n);throw new AggregateError(t,"Errors during commit")}}function S_(e){var n;const t=[];for(const r of e.cells)if((r==null?void 0:r.type)==="effect"&&(r.deps=null,r.cleanup))try{(n=r.cleanup)==null||n.call(r)}catch(s){t.push(s)}finally{r.cleanup=void 0}if(t.length>0){if(t.length===1)throw t[0];for(const r of t)console.error(r);throw new AggregateError(t,"Errors during cleanup")}}let Sr=null;function I_(e,t){e.currentIndex=0;const n=Sr;Sr=e;try{if(t(),e.isFirstRender=!1,e.cells.length!==e.currentIndex)throw new Error(`Rendered ${e.currentIndex} hooks but expected ${e.cells.length}. Hooks must be called in the exact same order in every render.`)}finally{Sr=n}}function jo(){if(!Sr)throw new Error("No resource fiber available");return Sr}function T_(e){return null}function gf(e,t){const n=e[yf];if(!n)throw new Error("ResourceElement.type is not a valid Resource");return n(t)}const yf=Symbol("fnSymbol");function jr(e,t,n=T_()){return{type:e,dispatchUpdate:t,devStrictMode:n,cells:[],currentIndex:0,renderContext:void 0,isFirstRender:!0,isMounted:!1,isNeverMounted:!0}}function Zn(e){if(!e.isMounted)throw new Error("Tried to unmount a fiber that is already unmounted");e.isMounted=!1,S_(e)}function vn(e,t){const n={commitTasks:[],props:t,output:void 0};return I_(e,()=>{e.renderContext=n;try{n.output=gf(e.type,t)}finally{e.renderContext=void 0}}),n}function Dr(e,t){e.isMounted=!0,e.isNeverMounted=!1,k_(t)}const C_=()=>null,E_=(e,t)=>e+(t()?1:0);function R_(e){const[,t]=b.useReducer(E_,0),n=C_(),r=b.useMemo(()=>jr(e.type,t,n),[e.type,e.key]),s=vn(r,e.props);return b.useLayoutEffect(()=>()=>Zn(r),[r]),b.useLayoutEffect(()=>{Dr(r,s)}),s.output}function fe(e){const t=n=>({type:t,props:n});return t[yf]=e,t}function Bt(e,t){return{...t,key:e}}const A_=(e,t)=>{if(e.renderContext)throw new Error("Resource updated during render");if(e.isMounted)e.dispatchUpdate(t);else if(e.isNeverMounted)throw new Error("Resource updated before mount")};function P_(e){const t=jo(),n=t.currentIndex++;if(!t.isFirstRender&&n>=t.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");const r=t.cells[n];if(r){if(r.type!=="state")throw new Error("Hook order changed between renders");return r}const i={type:"state",value:typeof e=="function"?e():e,set:a=>{A_(t,()=>{const o=i.value,l=typeof a=="function"?a(o):a;return Object.is(o,l)?!1:(i.value=l,!0)})}};return t.cells[n]=i,i}function _t(e){const t=P_(e);return[t.value,t.set]}const bf=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0},M_=(e,t)=>{const n=jo(),r=n.currentIndex++;if(!n.isFirstRender&&r>=n.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");let s=n.cells[r];if(s||(s=t(),n.cells[r]=s),s.type!==e)throw new Error("Hook order changed between renders");return s},N_=e=>{jo().renderContext.commitTasks.push(e)},O_=()=>({type:"effect",cleanup:void 0,deps:null});function Be(e,t){const n=M_("effect",O_);if(!(t&&n.deps&&bf(n.deps,t))){if(n.deps!==null&&!!t!=!!n.deps)throw new Error("tapEffect called with and without dependencies across re-renders");N_(()=>{var s;const r=[];try{(s=n.cleanup)==null||s.call(n)}catch(i){r.push(i)}finally{n.cleanup=void 0}try{const i=e();if(i!==void 0&&typeof i!="function")throw new Error(`An effect function must either return a cleanup function or nothing. Received: ${typeof i}`);n.cleanup=i}catch(i){r.push(i)}if(n.deps=t,r.length>0){if(r.length===1)throw r[0];for(const i of r)console.error(i);throw new AggregateError(r,"Errors during commit")}})}}function Jt(e){const[t]=_t(()=>({current:e}));return t}function Hn(e,t){const[n]=_t(e);return n}const oe=(e,t)=>{const n=Jt();return n.current||(n.current={value:e(),deps:t}),bf(n.current.deps,t)||(n.current.value=e(),n.current.deps=t),n.current.value},vf=(e,t)=>oe(()=>e,t);function Do(e){const t=Jt(e);return Be(()=>{t.current=e}),t.current}function xf(e,t){const[n,r]=_t(0),s=Hn(()=>()=>r(o=>o+1)),i=oe(()=>(e.key,jr(e.type,o=>{o()&&s()})),[e.type,e.key]),a=vn(i,e.props);return Be(()=>()=>Zn(i),[i]),Be(()=>{Dr(i,a)},[i,a]),a.output}function Mt(e){return gf(e.type,e.props)}function zo(e,t){const[n,r]=_t(0),s=Hn(()=>()=>r(l=>l+1)),i=Hn(()=>new Map),a=t?vf(e,t):e,o=oe(()=>{const l=a(),u=new Set,c=[];let d=0;for(let h=0;h<l.length;h++){const f=l[h],m=f.key;if(m===void 0)throw new Error(`tapResources did not provide a key for array at index ${h}`);if(u.has(m))throw new Error(`Duplicate key ${m} in tapResources`);u.add(m);let y=i.get(m);if(y)if(y.fiber.type!==f.type){const v=jr(f.type,_=>{_()&&s()}),g=vn(v,f.props);y.next=[v,g],c.push(g.output)}else y.next=vn(y.fiber,f.props),c.push(y.next.output);else{const v=jr(f.type,_=>{_()&&s()}),g=vn(v,f.props);y={fiber:v,next:g},d++,i.set(m,y),c.push(g.output)}}if(i.size>c.length-d)for(const h of i.keys())u.has(h)||(i.get(h).next="delete");return c},[a,n]);return Be(()=>()=>{for(const l of i.keys()){const u=i.get(l).fiber;Zn(u)}},[]),Be(()=>{for(const[l,u]of i.entries())u.next==="delete"?(u.fiber.isMounted&&Zn(u.fiber),i.delete(l)):Array.isArray(u.next)?(Zn(u.fiber),u.fiber=u.next[0],Dr(u.fiber,u.next[1])):Dr(u.fiber,u.next)},[o]),o}const j_=50;let Rt={schedulers:new Set([]),isScheduled:!1};class D_{constructor(t){S(this,"_task");S(this,"_isDirty",!1);this._task=t}get isDirty(){return this._isDirty}markDirty(){this._isDirty=!0,Rt.schedulers.add(this),z_()}runTask(){this._isDirty=!1,this._task()}}const z_=()=>{Rt.isScheduled||(Rt.isScheduled=!0,queueMicrotask(_f))},_f=()=>{try{const e=[];let t=0;for(const n of Rt.schedulers)if(Rt.schedulers.delete(n),!!n.isDirty){if(t++,t>j_)throw new Error("Maximum update depth exceeded. This can happen when a resource repeatedly calls setState inside tapEffect.");try{n.runTask()}catch(r){e.push(r)}}if(e.length>0){if(e.length===1)throw e[0];for(const n of e)console.error(n);throw new AggregateError(e,"Errors occurred during flushSync")}}finally{Rt.schedulers.clear(),Rt.isScheduled=!1}},wf=e=>{const t=Rt;Rt={schedulers:new Set([]),isScheduled:!0};try{const n=e();return _f(),n}finally{Rt=t}},L_=e=>{const t=Hn(()=>new D_(()=>{r.current=null,l()})),n=oe(()=>(e.key,jr(e.type,u=>{u()&&t.markDirty()})),[e.type,e.key]),r=Jt(null);r.current=vn(n,e.props);const s=Jt(!1),i=Jt(e.props),a=Jt(r.current.output),o=Hn(()=>new Set),l=Do(()=>{s.current&&(r.current===null&&(r.current=vn(n,i.current)),!t.isDirty&&(i.current=r.current.props,Dr(n,r.current),!(t.isDirty||a.current===r.current.output)&&(a.current=r.current.output,o.forEach(u=>u()))))});return Be(()=>(s.current=!0,()=>{s.current=!1,Zn(n)}),[n]),Be(()=>{wf(l)}),oe(()=>({getValue:()=>a.current,subscribe:u=>(o.add(u),()=>o.delete(u))}),[])},Ir=Symbol("tap.Context"),kf=e=>({[Ir]:e}),Sf=(e,t,n)=>{const r=e[Ir];e[Ir]=t;try{return n()}finally{e[Ir]=r}},If=e=>e[Ir],Oa=Symbol("assistant-ui.store.clientIndex"),$_=e=>e[Oa],Tf=kf([]),Lo=()=>If(Tf),F_=(e,t)=>{const n=Lo(),r=oe(()=>[...n,e],[n,e]);return Sf(Tf,r,t)},B_=new Set(["$$typeof","nodeType","then"]),vi=(e,t)=>{if(e===Symbol.toStringTag)return t;if(typeof e!="symbol"){if(e==="toJSON")return()=>t;if(!B_.has(e))return!1}};class $o{getOwnPropertyDescriptor(t,n){const r=this.get(t,n);if(r!==void 0)return{value:r,writable:!1,enumerable:!0,configurable:!1}}set(){return!1}setPrototypeOf(){return!1}defineProperty(){return!1}deleteProperty(){return!1}preventExtensions(){return!1}}const Cf=e=>{const t=fe(e);return n=>{const r=t(n);return n.key===void 0?r:Bt(n.key,r)}},Gs=Symbol("assistant-ui.store.getValue"),U_=e=>{const t=e[Gs];if(!t)throw new Error("Client scope contains a non-client resource. Ensure your Derived get() returns a client created with tapClientResource(), not a plain resource.");return t.state},Yl=new Map;function Z_(e){let t=Yl.get(e);return t||(t=function(...n){if(!this||typeof this!="object")throw new Error(`Method "${String(e)}" called without proper context. This may indicate the function was called incorrectly.`);const r=this[Gs];if(!r)throw new Error(`Method "${String(e)}" called on invalid client proxy. Ensure you are calling this method on a valid client instance.`);const s=r.methods[e];if(!s)throw new Error(`Method "${String(e)}" is not implemented.`);if(typeof s!="function")throw new Error(`"${String(e)}" is not a function.`);return s(...n)},Yl.set(e,t)),t}class V_ extends $o{constructor(n,r){super();S(this,"outputRef");S(this,"index");S(this,"boundFns");S(this,"cachedReceiver");this.outputRef=n,this.index=r}get(n,r,s){if(r===Gs)return this.outputRef.current;if(r===Oa)return this.index;const i=vi(r,"ClientProxy");if(i!==!1)return i;const a=this.outputRef.current.methods[r];if(typeof a=="function"){this.cachedReceiver!==s&&(this.boundFns=new Map,this.cachedReceiver=s);let o=this.boundFns.get(r);return o||(o=Z_(r).bind(s),this.boundFns.set(r,o)),o}return a}ownKeys(){return Object.keys(this.outputRef.current.methods)}has(n,r){return r===Gs||r===Oa?!0:r in this.outputRef.current.methods}}const Ef=Cf(e=>{const t=Jt(null),n=Lo().length,r=oe(()=>new Proxy({},new V_(t,n)),[n]),s=F_(r,()=>xf(e));return t.current||(t.current=s),Be(()=>{t.current=s}),{methods:r,state:s.state,key:e.key}}),xi=e=>Mt(Ef(e)),Tr=Symbol("assistant-ui.store.proxiedAssistantState"),Gi=e=>e==="on"||e==="subscribe"||typeof e=="symbol",Rf=e=>{class t extends $o{get(r,s){const i=vi(s,"AssistantState");if(i!==!1)return i;const a=s;if(!Gi(a))return U_(e[a]())}ownKeys(){return Object.keys(e).filter(r=>!Gi(r))}has(r,s){return!Gi(s)&&s in e}}return new Proxy({},new t)},q_=e=>e[Tr],Xl=()=>()=>{},Af=e=>{const t=()=>{throw new Error(e)};return t.source=null,t.query=null,t};class H_ extends $o{get(t,n){if(n==="subscribe"||n==="on")return Xl;if(n===Tr)return W_;const r=vi(n,"DefaultAssistantClient");return r!==!1?r:Af("You are using a component or hook that requires an AuiProvider. Wrap your component in an <AuiProvider> component.")}ownKeys(){return["subscribe","on",Tr]}has(t,n){return n==="subscribe"||n==="on"||n===Tr}}const _i=new Proxy({},new H_),W_=Rf(_i),G_=()=>new Proxy({},{get(e,t){const n=vi(t,"AssistantClient");return n!==!1?n:Af(`The current scope does not have a "${String(t)}" property.`)}}),Pf=b.createContext(_i),J_=()=>b.useContext(Pf),Nt=({value:e,children:t})=>p.jsx(Pf.Provider,{value:e,children:t}),rt=fe(e=>null),ja=Symbol("assistant-ui.default-peers");function Mf(e,t){const n=e,r=n[ja]??{};for(const s of Object.keys(t))if(s in r)throw new Error(`Default peer "${s}" is already attached to this resource`);n[ja]={...r,...t}}function K_(e){return e[ja]}function Y_(e,t){const n={},r={};for(const[i,a]of Object.entries(e))a.type===rt?r[i]=a:n[i]=a;const s=(i,a=new Set)=>{if(a.has(i))return[];a.add(i);const o=K_(i.type);if(!o)return[];const l=[];for(const[u,c]of Object.entries(o))if(l.push([u,c]),c.type!==rt){const d=s(c,a);l.push(...d)}return l};for(const[i,a]of Object.entries(n)){const o=s(a);for(const[l,u]of o)l in n||l in r||t[l].source!==null||(u.type===rt?r[l]=u:n[l]=u)}return{rootClients:n,derivedClients:r}}const Ql=e=>oe(()=>e,[...Object.entries(e).flat()]),X_=(e,t)=>{const{rootClients:n,derivedClients:r}=Y_(e,t);return{rootClients:Ql(n),derivedClients:Ql(r)}},Nf=e=>typeof e=="string"?{scope:e.split(".")[0],event:e}:{scope:e.scope,event:e.event},Q_=fe(()=>Hn(()=>{const e=new Map,t=new Set,n=new Set;return{on(r,s){const i=s;if(r==="*")return t.add(i),()=>t.delete(i);let a=e.get(r);return a||(a=new Set,e.set(r,a)),a.add(i),()=>{a.delete(i),a.size===0&&e.delete(r)}},emit(r,s,i){const a=e.get(r);!a&&t.size===0||queueMicrotask(()=>{const o=[];if(a)for(const l of a)try{l(s,i)}catch(u){o.push(u)}if(t.size>0){const l={event:r,payload:s};for(const u of t)try{u(l,i)}catch(c){o.push(c)}}if(o.length>0){if(o.length===1)throw o[0];for(const l of o)console.error(l);throw new AggregateError(o,"Errors occurred during event emission")}})},subscribe(r){return n.add(r),()=>n.delete(r)},notifySubscribers(){for(const r of n)try{r()}catch(s){console.error("NotificationManager: subscriber callback error",s)}}}})),Of=kf(null),ew=(e,t)=>Sf(Of,e,t),jf=()=>{const e=If(Of);if(!e)throw new Error("AssistantTapContext is not available");return e},Df=()=>jf().clientRef,Fo=()=>{const{emit:e}=jf(),t=Lo();return Do((n,r)=>{e(n,r,t)})},zf=e=>oe(()=>e,e),tw=fe(({element:e,emit:t,clientRef:n})=>{const{methods:r,state:s}=ew({clientRef:n,emit:t},()=>xi(e));return oe(()=>({state:s,methods:r}),[r,s])}),nw=fe(({element:e,notifications:t,clientRef:n,name:r})=>{const s=L_(tw({element:e,emit:t.emit,clientRef:n}));return Be(()=>s.subscribe(t.notifySubscribers),[s,t]),oe(()=>{const i=()=>s.getValue().methods;return Object.defineProperties(i,{source:{value:"root",writable:!1},query:{value:{},writable:!1},name:{value:r,configurable:!0}}),i},[s,r])}),rw=fe(()=>oe(()=>({clients:[],subscribe:void 0,on:void 0}),[])),sw=fe(({clients:e,clientRef:t})=>{const n=Mt(Q_());Be(()=>t.parent.subscribe(n.notifySubscribers),[t,n]);const r=zf(zo(()=>Object.keys(e).map(s=>Bt(s,nw({element:e[s],notifications:n,clientRef:t,name:s}))),[e,n,t]));return oe(()=>({clients:r,subscribe:n.subscribe,on:function(s,i){if(!this)throw new Error("const { on } = useAui() is not supported. Use aui.on() instead.");const{scope:a,event:o}=Nf(s);if(a!=="*"&&this[a].source===null)throw new Error(`Scope "${a}" is not available. Use { scope: "*", event: "${o}" } to listen globally.`);const l=n.on(o,(c,d)=>{if(a==="*"){i(c);return}const h=this[a](),f=$_(h);h===d[f]&&i(c)});if(a!=="*"&&t.parent[a].source===null)return l;const u=t.parent.on(s,i);return()=>{l(),u()}}}),[r,n,t])}),eu=(e,t,n)=>{if("source"in e&&"query"in e)return e;if(n.dep===e)return n.meta;const r=e.getMeta(t.current);return n.meta=r,n.dep=e,r},iw=fe(({element:e,clientRef:t,name:n})=>{const r=Do(()=>e.props);return oe(()=>{const s=()=>r().get(t.current),i={};return Object.defineProperties(s,{source:{get:()=>eu(r(),t,i).source},query:{get:()=>eu(r(),t,i).query},name:{value:n,configurable:!0}}),s},[t,n])}),aw=fe(({clients:e,clientRef:t})=>zf(zo(()=>Object.keys(e).map(n=>Bt(n,iw({element:e[n],clientRef:t,name:n}))),[e,t]))),ow=fe(({parent:e,clients:t})=>{const{rootClients:n,derivedClients:r}=X_(t,e),s=Jt({parent:e,current:null}).current;Be(()=>{s.current=o});const i=xf(Object.keys(n).length>0?sw({clients:n,clientRef:s}):rw()),a=Mt(aw({clients:r,clientRef:s})),o=oe(()=>{const l=e===_i?G_():e,u=Object.create(l);Object.assign(u,{subscribe:i.subscribe??e.subscribe,on:i.on??e.on,[Tr]:Rf(u)});for(const c of i.clients)u[c.name]=c;for(const c of a)u[c.name]=c;return u},[e,i,a]);return s.current===null&&(s.current=o),o});function ee(e,{parent:t}={parent:J_()}){if(e)return R_(ow({parent:t??_i,clients:e}));if(t===null)throw new Error("received null parent, this usage is not allowed");return t}const Z=e=>{const t=ee(),n=q_(t),r=b.useSyncExternalStore(t.subscribe,()=>e(n),()=>e(n));if(r===n)throw new Error("You tried to return the entire AssistantState. This is not supported due to technical limitations.");return b.useDebugValue(r),r},lw=Pe.createContext(!0);function tu(){throw new Error("A function wrapped in useEffectEvent can't be called during rendering.")}const uw="use"in Pe?()=>{try{return Pe.use(lw)}catch{return!1}}:()=>!1;function cw(e){const t=Pe.useRef(tu);return Pe.useInsertionEffect(()=>{t.current=e},[e]),(...n)=>{uw()&&tu();const r=t.current;return r(...n)}}const Ji=(e,t)=>{const n=ee(),r=cw(t),{scope:s,event:i}=Nf(e);b.useEffect(()=>n.on({scope:s,event:i},r),[n,s,i,r])},en=({children:e,condition:t})=>Z(t)?e:null;en.displayName="AuiIf";const dw=Cf(e=>{if(e.key===void 0)throw new Error("tapClientResource: Element has no key");return Mt(Ef(e))});function Wn(e,t){const n=zo(()=>e().map(a=>dw(a)),t),r=oe(()=>Object.keys(n),[n]),s=oe(()=>n.reduce((a,o,l)=>(a[o.key]=l,a),{}),[n]);return{state:oe(()=>n.map(a=>a.state),[n]),get:a=>{if("index"in a){if(a.index<0||a.index>=r.length)throw new Error(`tapClientLookup: Index ${a.index} out of bounds (length: ${r.length})`);return n[a.index].methods}const o=s[a.key];if(o===void 0)throw new Error(`tapClientLookup: Key "${a.key}" not found`);return n[o].methods}}}const hw=e=>Array.from(e).map(n=>n.getModelContext()).sort((n,r)=>(r.priority??0)-(n.priority??0)).reduce((n,r)=>{var s;if(r.system&&(n.system?n.system+=`

${r.system}`:n.system=r.system),r.tools)for(const[i,a]of Object.entries(r.tools)){const o=(s=n.tools)==null?void 0:s[i];if(o&&o!==a)throw new Error(`You tried to define a tool with the name ${i}, but it already exists.`);n.tools||(n.tools={}),n.tools[i]=a}return r.config&&(n.config={...n.config,...r.config}),r.callSettings&&(n.callSettings={...n.callSettings,...r.callSettings}),n},{});class Bo{constructor(){S(this,"_providers",new Set);S(this,"_subscribers",new Set)}getModelContext(){return hw(this._providers)}registerModelContextProvider(t){var r;this._providers.add(t);const n=(r=t.subscribe)==null?void 0:r.call(t,()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(t),n==null||n(),this.notifySubscribers()}}notifySubscribers(){for(const t of this._subscribers)t()}subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}}class Uo{constructor(){S(this,"_contextProvider",new Bo)}registerModelContextProvider(t){return this._contextProvider.registerModelContextProvider(t)}getModelContextProvider(){return this._contextProvider}}class wi{constructor(){S(this,"_subscribers",new Set)}subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}waitForUpdate(){return new Promise(t=>{const n=this.subscribe(()=>{n(),t()})})}_notifySubscribers(){const t=[];for(const n of this._subscribers)try{n()}catch(r){t.push(r)}if(t.length>0){if(t.length===1)throw t[0];for(const n of t)console.error(n);throw new AggregateError(t)}}}const fw=e=>e.status.type==="complete";class Lf extends wi{constructor(){super(...arguments);S(this,"isEditing",!0);S(this,"_attachments",[]);S(this,"_text","");S(this,"_role","user");S(this,"_runConfig",{});S(this,"_dictation");S(this,"_dictationSession");S(this,"_dictationUnsubscribes",[]);S(this,"_dictationBaseText","");S(this,"_currentInterimText","");S(this,"_dictationSessionIdCounter",0);S(this,"_activeDictationSessionId");S(this,"_isCleaningDictation",!1);S(this,"_eventSubscribers",new Map)}get attachmentAccept(){var n;return((n=this.getAttachmentAdapter())==null?void 0:n.accept)??"*"}get attachments(){return this._attachments}setAttachments(n){this._attachments=n,this._notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}get text(){return this._text}get role(){return this._role}get runConfig(){return this._runConfig}setText(n){if(this._text!==n){if(this._text=n,this._dictation){this._dictationBaseText=n,this._currentInterimText="";const{status:r,inputDisabled:s}=this._dictation;this._dictation=s?{status:r,inputDisabled:s}:{status:r}}this._notifySubscribers()}}setRole(n){this._role!==n&&(this._role=n,this._notifySubscribers())}setRunConfig(n){this._runConfig!==n&&(this._runConfig=n,this._notifySubscribers())}_emptyTextAndAttachments(){this._attachments=[],this._text="",this._notifySubscribers()}async _onClearAttachments(){const n=this.getAttachmentAdapter();n&&await Promise.all(this._attachments.map(r=>n.remove(r)))}async reset(){if(this._attachments.length===0&&this._text===""&&this._role==="user"&&Object.keys(this._runConfig).length===0)return;this._role="user",this._runConfig={};const n=this._onClearAttachments();this._emptyTextAndAttachments(),await n}async clearAttachments(){const n=this._onClearAttachments();this.setAttachments([]),await n}async send(){this._dictationSession&&(this._dictationSession.cancel(),this._cleanupDictation());const n=this.getAttachmentAdapter(),r=n&&this.attachments.length>0?Promise.all(this.attachments.map(async a=>fw(a)?a:await n.send(a))):[],s=this.text;this._emptyTextAndAttachments();const i={createdAt:new Date,role:this.role,content:s?[{type:"text",text:s}]:[],attachments:await r,runConfig:this.runConfig,metadata:{custom:{}}};this.handleSend(i),this._notifyEventSubscribers("send")}cancel(){this.handleCancel()}async addAttachment(n){const r=this.getAttachmentAdapter();if(!r)throw new Error("Attachments are not supported");const s=a=>{const o=this._attachments.findIndex(l=>l.id===a.id);o!==-1?this._attachments=[...this._attachments.slice(0,o),a,...this._attachments.slice(o+1)]:this._attachments=[...this._attachments,a],this._notifySubscribers()},i=r.add({file:n});if(Symbol.asyncIterator in i)for await(const a of i)s(a);else s(await i);this._notifyEventSubscribers("attachmentAdd"),this._notifySubscribers()}async removeAttachment(n){const r=this.getAttachmentAdapter();if(!r)throw new Error("Attachments are not supported");const s=this._attachments.findIndex(a=>a.id===n);if(s===-1)throw new Error("Attachment not found");const i=this._attachments[s];await r.remove(i),this._attachments=[...this._attachments.slice(0,s),...this._attachments.slice(s+1)],this._notifySubscribers()}get dictation(){return this._dictation}_isActiveSession(n,r){return this._activeDictationSessionId===n&&this._dictationSession===r}startDictation(){const n=this.getDictationAdapter();if(!n)throw new Error("Dictation adapter not configured");if(this._dictationSession){for(const d of this._dictationUnsubscribes)d();this._dictationUnsubscribes=[],this._dictationSession.stop().catch(()=>{}),this._dictationSession=void 0}const r=n.disableInputDuringDictation??!1;this._dictationBaseText=this._text,this._currentInterimText="";const s=n.listen();this._dictationSession=s;const i=++this._dictationSessionIdCounter;this._activeDictationSessionId=i,this._dictation={status:s.status,inputDisabled:r},this._notifySubscribers();const a=s.onSpeech(c=>{if(!this._isActiveSession(i,s))return;const d=c.isFinal!==!1,f=this._dictationBaseText&&!this._dictationBaseText.endsWith(" ")&&c.transcript?" ":"";if(d){if(this._dictationBaseText=this._dictationBaseText+f+c.transcript,this._currentInterimText="",this._text=this._dictationBaseText,this._dictation){const{transcript:m,...y}=this._dictation;this._dictation=y}this._notifySubscribers()}else this._currentInterimText=f+c.transcript,this._text=this._dictationBaseText+this._currentInterimText,this._dictation&&(this._dictation={...this._dictation,transcript:c.transcript}),this._notifySubscribers()});this._dictationUnsubscribes.push(a);const o=s.onSpeechStart(()=>{var c;this._isActiveSession(i,s)&&(this._dictation={status:{type:"running"},inputDisabled:r,...((c=this._dictation)==null?void 0:c.transcript)&&{transcript:this._dictation.transcript}},this._notifySubscribers())});this._dictationUnsubscribes.push(o);const l=s.onSpeechEnd(()=>{this._cleanupDictation({sessionId:i})});this._dictationUnsubscribes.push(l);const u=setInterval(()=>{this._isActiveSession(i,s)&&s.status.type==="ended"&&this._cleanupDictation({sessionId:i})},100);this._dictationUnsubscribes.push(()=>clearInterval(u))}stopDictation(){if(!this._dictationSession)return;const n=this._dictationSession,r=this._activeDictationSessionId;n.stop().finally(()=>{this._cleanupDictation({sessionId:r})})}_cleanupDictation(n){if(!((n==null?void 0:n.sessionId)!==void 0&&n.sessionId!==this._activeDictationSessionId||this._isCleaningDictation)){this._isCleaningDictation=!0;try{for(const s of this._dictationUnsubscribes)s();this._dictationUnsubscribes=[],this._dictationSession=void 0,this._activeDictationSessionId=void 0,this._dictation=void 0,this._dictationBaseText="",this._currentInterimText="",this._notifySubscribers()}finally{this._isCleaningDictation=!1}}}_notifyEventSubscribers(n){const r=this._eventSubscribers.get(n);if(r)for(const s of r)s()}unstable_on(n,r){const s=this._eventSubscribers.get(n);return s?s.add(r):this._eventSubscribers.set(n,new Set([r])),()=>{const i=this._eventSubscribers.get(n);i&&i.delete(r)}}}class $f extends Lf{constructor(n){super();S(this,"runtime");S(this,"_canCancel",!1);this.runtime=n,this.connect()}get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){var n;return(n=this.runtime.adapters)==null?void 0:n.attachments}getDictationAdapter(){var n;return(n=this.runtime.adapters)==null?void 0:n.dictation}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this._notifySubscribers())})}async handleSend(n){var r;this.runtime.append({...n,parentId:((r=this.runtime.messages.at(-1))==null?void 0:r.id)??null,sourceId:null})}async handleCancel(){this.runtime.cancelRun()}}let pw=(e,t=21)=>(n=t)=>{let r="",s=n|0;for(;s--;)r+=e[Math.random()*e.length|0];return r};const sr=pw("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),mw="__optimistic__",gw=()=>`${mw}${sr()}`,yw="__error__",bw=()=>`${yw}${sr()}`,ir=Symbol("autoStatus"),vw=Object.freeze(Object.assign({type:"running"},{[ir]:!0})),xw=Object.freeze(Object.assign({type:"complete",reason:"unknown"},{[ir]:!0})),_w=Object.freeze(Object.assign({type:"requires-action",reason:"tool-calls"},{[ir]:!0})),ww=Object.freeze(Object.assign({type:"requires-action",reason:"interrupt"},{[ir]:!0})),Ff=e=>e[ir]===!0,rs=(e,t,n,r,s)=>e&&s?Object.assign({type:"incomplete",reason:"error",error:s},{[ir]:!0}):e&&t?vw:n?ww:r?_w:xw;var ar={exports:{}};const kw=typeof Buffer<"u",nu=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,ru=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Bf(e,t,n){n==null&&t!==null&&typeof t=="object"&&(n=t,t=void 0),kw&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));const r=JSON.parse(e,t);if(r===null||typeof r!="object")return r;const s=n&&n.protoAction||"error",i=n&&n.constructorAction||"error";if(s==="ignore"&&i==="ignore")return r;if(s!=="ignore"&&i!=="ignore"){if(nu.test(e)===!1&&ru.test(e)===!1)return r}else if(s!=="ignore"&&i==="ignore"){if(nu.test(e)===!1)return r}else if(ru.test(e)===!1)return r;return Uf(r,{protoAction:s,constructorAction:i,safe:n&&n.safe})}function Uf(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let s=[e];for(;s.length;){const i=s;s=[];for(const a of i){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(r===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(a,"constructor")&&a.constructor!==null&&typeof a.constructor=="object"&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(const o in a){const l=a[o];l&&typeof l=="object"&&s.push(l)}}}return e}function Zo(e,t,n){const{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return Bf(e,t,n)}finally{Error.stackTraceLimit=r}}function Sw(e,t){const{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return Bf(e,t,{safe:!0})}catch{return}finally{Error.stackTraceLimit=n}}ar.exports=Zo;ar.exports.default=Zo;ar.exports.parse=Zo;ar.exports.safeParse=Sw;ar.exports.scan=Uf;var Iw=ar.exports;const Da=hi(Iw);function Tw(e){const t=["ROOT"];let n=-1,r=null;const s=[];let i;function a(){i!==void 0&&(s.push(JSON.parse(`"${i}"`)),i=void 0)}function o(d,h,f){switch(d){case'"':{n=h,t.pop(),t.push(f),t.push("INSIDE_STRING"),a();break}case"f":case"t":case"n":{n=h,r=h,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER"),a();break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=h,t.pop(),t.push(f),t.push("INSIDE_NUMBER"),a();break}case"{":{n=h,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START"),a();break}case"[":{n=h,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START"),a();break}}}function l(d,h){switch(d){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=h,t.pop(),i=s.pop();break}}}function u(d,h){switch(d){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA"),i=(Number(i)+1).toString();break}case"]":{n=h,t.pop(),i=s.pop();break}}}for(let d=0;d<e.length;d++){const h=e[d];switch(t[t.length-1]){case"ROOT":o(h,d,"FINISH");break;case"INSIDE_OBJECT_START":{switch(h){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY"),i="";break}case"}":{n=d,t.pop(),i=s.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(h){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY"),i="";break}}break}case"INSIDE_OBJECT_KEY":{switch(h){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}case"\\":{t.push("INSIDE_STRING_ESCAPE"),i+=h;break}default:{i+=h;break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(h){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(h,d,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{l(h,d);break}case"INSIDE_STRING":{switch(h){case'"':{t.pop(),n=d,i=s.pop();break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=d}break}case"INSIDE_ARRAY_START":{switch(h){case"]":{n=d,t.pop(),i=s.pop();break}default:{n=d,i="0",o(h,d,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(h){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA"),i=(Number(i)+1).toString();break}case"]":{n=d,t.pop(),i=s.pop();break}default:{n=d;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(h,d,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),t[t.length-1]==="INSIDE_STRING"?n=d:t[t.length-1]==="INSIDE_OBJECT_KEY"&&(i+=h);break}case"INSIDE_NUMBER":{switch(h){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=d;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),i=s.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(h,d),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&l(h,d);break}case"}":{t.pop(),i=s.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&l(h,d);break}case"]":{t.pop(),i=s.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(h,d);break}default:{t.pop(),i=s.pop();break}}break}case"INSIDE_LITERAL":{const m=e.substring(r,d+1);!"false".startsWith(m)&&!"true".startsWith(m)&&!"null".startsWith(m)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?l(h,d):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(h,d)):n=d;break}}}let c=e.slice(0,n+1);for(let d=t.length-1;d>=0;d--)switch(t[d]){case"INSIDE_STRING":{c+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{c+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{c+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?c+="true".slice(f.length):"false".startsWith(f)?c+="false".slice(f.length):"null".startsWith(f)&&(c+="null".slice(f.length))}}return[c,s]}const Os=Symbol("aui.parse-partial-json-object.meta"),Cw=e=>e==null?void 0:e[Os],Js=e=>{if(e.length===0)return{[Os]:{state:"partial",partialPath:[]}};try{const t=Da.parse(e);if(typeof t!="object"||t===null)throw new Error("argsText is expected to be an object");return t[Os]={state:"complete",partialPath:[]},t}catch{try{const[t,n]=Tw(e),r=Da.parse(t);if(typeof r!="object"||r===null)throw new Error("argsText is expected to be an object");return r[Os]={state:"partial",partialPath:n},r}catch{return}}},Zf=(e,t,n)=>{if(typeof e!="object"||e===null)return t.state;if(t.state==="complete")return"complete";if(n.length===0)return t.state;const[r,...s]=n;if(!Object.prototype.hasOwnProperty.call(e,r))return"partial";const[i,...a]=t.partialPath;if(r!==i)return"complete";const o=e[r];return Zf(o,{state:"partial",partialPath:a},s)},Gn=(e,t)=>{const n=Cw(e);if(!n)throw new Error("unable to determine object state");return Zf(e,n,t.map(String))};async function*Ew(){const e=this.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{e.releaseLock()}}function Ki(e){var t;return e[t=Symbol.asyncIterator]??(e[t]=Ew),e}const za={toResponse(e,t){return new Response(za.toByteStream(e,t),{headers:t.headers??{}})},fromResponse(e,t){return za.fromByteStream(e.body,t)},toByteStream(e,t){return e.pipeThrough(t)},fromByteStream(e,t){return e.pipeThrough(t)}},Vo=function(){let e,t;const n=new Promise((r,s)=>{e=r,t=s});if(!e||!t)throw new Error("Failed to create promise");return{promise:n,resolve:e,reject:t}},Rw=()=>{const e=[];let t=!1,n,r;const s=a=>{a.promise||(a.promise=a.reader.read().then(({done:o,value:l})=>{a.promise=void 0,o?(e.splice(e.indexOf(a),1),t&&e.length===0&&n.close()):n.enqueue(l),r==null||r.resolve(),r=void 0}).catch(o=>{console.error(o),e.forEach(l=>{l.reader.cancel()}),e.length=0,n.error(o),r==null||r.reject(o),r=void 0}))};return{readable:new ReadableStream({start(a){n=a},pull(){return r=Vo(),e.forEach(a=>{s(a)}),r.promise},cancel(){e.forEach(a=>{a.reader.cancel()}),e.length=0}}),isSealed(){return t},seal(){t=!0,e.length===0&&n.close()},addStream(a){if(t)throw new Error("Cannot add streams after the run callback has settled.");const o={reader:a.getReader()};e.push(o),s(o)},enqueue(a){this.addStream(new ReadableStream({start(o){o.enqueue(a),o.close()}}))}}};class su{constructor(t){S(this,"_controller");S(this,"_isClosed",!1);this._controller=t}append(t){return this._controller.enqueue({type:"text-delta",path:[],textDelta:t}),this}close(){this._isClosed||(this._isClosed=!0,this._controller.enqueue({type:"part-finish",path:[]}),this._controller.close())}}const Vf=e=>new ReadableStream({start(t){var n;return(n=e.start)==null?void 0:n.call(e,new su(t))},pull(t){var n;return(n=e.pull)==null?void 0:n.call(e,new su(t))},cancel(t){var n;return(n=e.cancel)==null?void 0:n.call(e,t)}}),iu=()=>{let e;return[Vf({start(n){e=n}}),e]};class au{constructor(t){S(this,"_controller");S(this,"_isClosed",!1);S(this,"_mergeTask");S(this,"_argsTextController");this._controller=t;const n=Vf({start:s=>{this._argsTextController=s}});let r=!1;this._mergeTask=n.pipeTo(new WritableStream({write:s=>{switch(s.type){case"text-delta":r=!0,this._controller.enqueue(s);break;case"part-finish":r||this._controller.enqueue({type:"text-delta",textDelta:"{}",path:[]}),this._controller.enqueue({type:"tool-call-args-text-finish",path:[]});break;default:throw new Error(`Unexpected chunk type: ${s.type}`)}}}))}get argsText(){return this._argsTextController}async setResponse(t){this._argsTextController.close(),await Promise.resolve(),this._controller.enqueue({type:"result",path:[],...t.artifact!==void 0?{artifact:t.artifact}:{},result:t.result,isError:t.isError??!1})}async close(){this._isClosed||(this._isClosed=!0,this._argsTextController.close(),await this._mergeTask,this._controller.enqueue({type:"part-finish",path:[]}),this._controller.close())}}const Aw=e=>new ReadableStream({start(t){var n;return(n=e.start)==null?void 0:n.call(e,new au(t))},pull(t){var n;return(n=e.pull)==null?void 0:n.call(e,new au(t))},cancel(t){var n;return(n=e.cancel)==null?void 0:n.call(e,t)}}),Pw=()=>{let e;return[Aw({start(n){e=n}}),e]};class qf{constructor(){S(this,"value",-1)}up(){return++this.value}}class Mw extends TransformStream{constructor(t){super({transform(n,r){r.enqueue({...n,path:[t,...n.path]})}})}}class uF extends TransformStream{constructor(t){super({transform(n,r){const{path:[s,...i]}=n;if(t!==s)throw new Error(`Path mismatch: expected ${t}, got ${s}`);r.enqueue({...n,path:i})}})}}class Nw extends TransformStream{constructor(t){const n=new qf,r=new Map;super({transform(s,i){s.type==="part-start"&&s.path.length===0&&r.set(n.up(),t.up());const[a,...o]=s.path;if(a===void 0){i.enqueue(s);return}const l=r.get(a);if(l===void 0)throw new Error("Path not found");i.enqueue({...s,path:[l,...o]})}})}}class Hf extends TransformStream{constructor(t){super();const n=t(super.readable);Object.defineProperty(this,"readable",{value:n,writable:!1})}}class Wf extends TransformStream{constructor(){const t=[];super({transform(n,r){if(n.type==="part-start"){if(n.path.length!==0){r.error(new Error("Nested parts are not supported"));return}t.push(n.part),r.enqueue(n);return}if(n.type==="text-delta"||n.type==="result"||n.type==="part-finish"||n.type==="tool-call-args-text-finish"){if(n.path.length!==1){r.error(new Error(`${n.type} chunks must have a path of length 1`));return}const s=n.path[0];if(s<0||s>=t.length){r.error(new Error(`Invalid path index: ${s}`));return}const i=t[s];r.enqueue({...n,meta:i});return}r.enqueue(n)}})}}let Ow=(e,t=21)=>(n=t)=>{let r="",s=n|0;for(;s--;)r+=e[Math.random()*e.length|0];return r};const Gf=Ow("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7);class qo{constructor(t){S(this,"_state");S(this,"_parentId");this._state=t||{merger:Rw(),contentCounter:new qf}}get __internal_isClosed(){return this._state.merger.isSealed()}__internal_getReadable(){return this._state.merger.readable}__internal_subscribeToClose(t){this._state.closeSubscriber=t}_addPart(t,n){this._state.append&&(this._state.append.controller.close(),this._state.append=void 0),this.enqueue({type:"part-start",part:t,path:[]}),this._state.merger.addStream(n.pipeThrough(new Mw(this._state.contentCounter.value)))}merge(t){this._state.merger.addStream(t.pipeThrough(new Nw(this._state.contentCounter)))}appendText(t){var n;((n=this._state.append)==null?void 0:n.kind)!=="text"&&(this._state.append={kind:"text",controller:this.addTextPart()}),this._state.append.controller.append(t)}appendReasoning(t){var n;((n=this._state.append)==null?void 0:n.kind)!=="reasoning"&&(this._state.append={kind:"reasoning",controller:this.addReasoningPart()}),this._state.append.controller.append(t)}addTextPart(){const[t,n]=iu();return this._addPart({type:"text"},t),n}addReasoningPart(){const[t,n]=iu();return this._addPart({type:"reasoning"},t),n}addToolCallPart(t){const n=typeof t=="string"?{toolName:t}:t,r=n.toolName,s=n.toolCallId??Gf(),[i,a]=Pw();return this._addPart({type:"tool-call",toolName:r,toolCallId:s,...this._parentId&&{parentId:this._parentId}},i),n.argsText!==void 0&&(a.argsText.append(n.argsText),a.argsText.close()),n.args!==void 0&&(a.argsText.append(JSON.stringify(n.args)),a.argsText.close()),n.response!==void 0&&a.setResponse(n.response),a}appendSource(t){this._addPart({...t,...this._parentId&&{parentId:this._parentId}},new ReadableStream({start(n){n.enqueue({type:"part-finish",path:[]}),n.close()}}))}appendFile(t){this._addPart(t,new ReadableStream({start(n){n.enqueue({type:"part-finish",path:[]}),n.close()}}))}enqueue(t){this._state.merger.enqueue(t),t.type==="part-start"&&t.path.length===0&&this._state.contentCounter.up()}withParentId(t){const n=new qo(this._state);return n._parentId=t,n}close(){var t,n,r,s;(n=(t=this._state.append)==null?void 0:t.controller)==null||n.close(),this._state.merger.seal(),(s=(r=this._state).closeSubscriber)==null||s.call(r)}}function jw(e){const t=new qo;return(async()=>{try{await e(t)}catch(r){throw t.__internal_isClosed||t.enqueue({type:"error",path:[],error:String(r)}),r}finally{t.__internal_isClosed||t.close()}})(),t.__internal_getReadable()}function Jf(){const{resolve:e,promise:t}=Vo();let n;return[jw(s=>(n=s,n.__internal_subscribeToClose(e),t)),n]}class Dw extends TransformStream{constructor(t,n,r){const[s,i]=Jf();let a;super({start(o){var l;return a=s.pipeTo(new WritableStream({write(u){o.enqueue(u)},abort(u){o.error(u)},close(){o.terminate()}})).catch(u=>{o.error(u)}),(l=t.start)==null?void 0:l.call(t,i)},transform(o){var l;return(l=t.transform)==null?void 0:l.call(t,o,i)},async flush(){var o;await((o=t.flush)==null?void 0:o.call(t,i)),i.close(),await a}},n,r)}}const En=(e,t,n)=>{const{role:r,id:s,createdAt:i,attachments:a,status:o,metadata:l}=e,u={id:s??t,createdAt:i??new Date},c=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content,d=({image:h,...f})=>h.match(/^data:image\/(png|jpeg|jpg|gif|webp);base64,(.*)$/)?{...f,image:h}:(console.warn("Invalid image data format detected"),null);if(r!=="user"&&(a!=null&&a.length))throw new Error("attachments are only supported for user messages");if(r!=="assistant"&&o)throw new Error("status is only supported for assistant messages");if(r!=="assistant"&&(l!=null&&l.steps))throw new Error("metadata.steps is only supported for assistant messages");switch(r){case"assistant":return{...u,role:r,content:c.map(h=>{const f=h.type;switch(f){case"text":case"reasoning":return h.text.trim().length===0?null:h;case"file":case"source":return h;case"image":return d(h);case"data":return h;case"tool-call":{const{parentId:m,messages:y,...v}=h,g={...v,toolCallId:h.toolCallId??`tool-${sr()}`,...m!==void 0&&{parentId:m},...y!==void 0&&{messages:y}};return h.args?{...g,args:h.args,argsText:h.argsText??JSON.stringify(h.args)}:{...g,args:Js(h.argsText??"")??{},argsText:h.argsText??""}}default:{const m=f;throw new Error(`Unsupported assistant message part type: ${m}`)}}}).filter(h=>!!h),status:o??n,metadata:{unstable_state:(l==null?void 0:l.unstable_state)??null,unstable_annotations:(l==null?void 0:l.unstable_annotations)??[],unstable_data:(l==null?void 0:l.unstable_data)??[],custom:(l==null?void 0:l.custom)??{},steps:(l==null?void 0:l.steps)??[],...(l==null?void 0:l.submittedFeedback)&&{submittedFeedback:l.submittedFeedback}}};case"user":return{...u,role:r,content:c.map(h=>{const f=h.type;switch(f){case"text":case"image":case"audio":case"file":return h;default:{const m=f;throw new Error(`Unsupported user message part type: ${m}`)}}}),attachments:a??[],metadata:{custom:(l==null?void 0:l.custom)??{}}};case"system":if(c.length!==1||c[0].type!=="text")throw new Error("System messages must have exactly one text message part.");return{...u,role:r,content:c,metadata:{custom:(l==null?void 0:l.custom)??{}}};default:{const h=r;throw new Error(`Unknown message role: ${h}`)}}},Ho={fromArray:e=>{const t=e.map(n=>En(n,sr(),rs(!1,!1,!1,!1,void 0)));return{messages:t.map((n,r)=>({parentId:r>0?t[r-1].id:null,message:n}))}}},js=e=>e.next?js(e.next):"current"in e?e:null;class zw{constructor(t){S(this,"func");S(this,"_value",null);this.func=t}get value(){return this._value===null&&(this._value=this.func()),this._value}dirty(){this._value=null}}let Wo=class{constructor(){S(this,"messages",new Map);S(this,"head",null);S(this,"root",{children:[],next:null});S(this,"_messages",new zw(()=>{var n;const t=new Array((((n=this.head)==null?void 0:n.level)??-1)+1);for(let r=this.head;r;r=r.prev)t[r.level]=r.current;return t}))}updateLevels(t,n){t.level=n;for(const r of t.children){const s=this.messages.get(r);s&&this.updateLevels(s,n+1)}}performOp(t,n,r){const s=n.prev??this.root,i=t??this.root;if(!(r==="relink"&&s===i)){if(r!=="link"&&(s.children=s.children.filter(a=>a!==n.current.id),s.next===n)){const a=s.children.at(-1),o=a?this.messages.get(a):null;if(o===void 0)throw new Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");s.next=o}if(r!=="cut"){for(let o=t;o;o=o.prev)if(o.current.id===n.current.id)throw new Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");i.children=[...i.children,n.current.id],(js(n)===this.head||i.next===null)&&(i.next=n),n.prev=t;const a=t?t.level+1:0;this.updateLevels(n,a)}}}get headId(){var t;return((t=this.head)==null?void 0:t.current.id)??null}getMessages(t){var s;if(t===void 0||t===((s=this.head)==null?void 0:s.current.id))return this._messages.value;const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(getMessages): Head message not found. This is likely an internal bug in assistant-ui.");const r=new Array(n.level+1);for(let i=n;i;i=i.prev)r[i.level]=i.current;return r}addOrUpdateMessage(t,n){const r=this.messages.get(n.id),s=t?this.messages.get(t):null;if(s===void 0)throw new Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(r){r.current=n,this.performOp(s,r,"relink"),this._messages.dirty();return}const i={prev:s,current:n,next:null,children:[],level:s?s.level+1:0};this.messages.set(n.id,i),this.performOp(s,i,"link"),this.head===s&&(this.head=i),this._messages.dirty()}getMessage(t){var r;const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:((r=n.prev)==null?void 0:r.current.id)??null,message:n.current,index:n.level}}appendOptimisticMessage(t,n){let r;do r=gw();while(this.messages.has(r));return this.addOrUpdateMessage(t,En(n,r,{type:"running"})),r}deleteMessage(t,n){const r=this.messages.get(t);if(!r)throw new Error("MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.");const s=n===void 0?r.prev:n===null?null:this.messages.get(n);if(s===void 0)throw new Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(const i of r.children){const a=this.messages.get(i);if(!a)throw new Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(s,a,"relink")}this.performOp(null,r,"cut"),this.messages.delete(t),this.head===r&&(this.head=js(s??this.root)),this._messages.dirty()}getBranches(t){const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");const{children:r}=n.prev??this.root;return r}switchToBranch(t){const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");const r=n.prev??this.root;r.next=n,this.head=js(n),this._messages.dirty()}resetHead(t){if(t===null){this.clear();return}const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");if(n.children.length>0){const r=s=>{for(const i of s.children){const a=this.messages.get(i);a&&(r(a),this.messages.delete(i))}};r(n),n.children=[],n.next=null}this.head=n;for(let r=n;r;r=r.prev)r.prev&&(r.prev.next=r);this._messages.dirty()}clear(){this.messages.clear(),this.head=null,this.root={children:[],next:null},this._messages.dirty()}export(){var n,r;const t=[];for(const[,s]of this.messages)t.push({message:s.current,parentId:((n=s.prev)==null?void 0:n.current.id)??null});return{headId:((r=this.head)==null?void 0:r.current.id)??null,messages:t}}import({headId:t,messages:n}){var r;for(const{message:s,parentId:i}of n)this.addOrUpdateMessage(i,s);this.resetHead(t??((r=n.at(-1))==null?void 0:r.message.id)??null)}};class ki{constructor(){S(this,"_subscriptions",new Set);S(this,"_connection")}get isConnected(){return!!this._connection}notifySubscribers(){for(const t of this._subscriptions)t()}_updateConnection(){var t;if(this._subscriptions.size>0){if(this._connection)return;this._connection=this._connect()}else(t=this._connection)==null||t.call(this),this._connection=void 0}subscribe(t){return this._subscriptions.add(t),this._updateConnection(),()=>{this._subscriptions.delete(t),this._updateConnection()}}}const wt=Symbol("skip-update");class Go extends ki{constructor(n){super();S(this,"binding");S(this,"_previousStateDirty",!0);S(this,"_previousState");S(this,"getState",()=>{if(!this.isConnected||this._previousStateDirty){const n=this.binding.getState();n!==wt&&(this._previousState=n),this._previousStateDirty=!1}if(this._previousState===void 0)throw new Error("Entry not available in the store");return this._previousState});this.binding=n}get path(){return this.binding.path}_connect(){const n=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(n)}}class bs{constructor(t,n){S(this,"_core");S(this,"_threadListBinding");this._core=t,this._threadListBinding=n,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this),this.detach=this.detach.bind(this)}getState(){return this._core.getState()}switchTo(){const t=this._core.getState();return this._threadListBinding.switchToThread(t.id)}rename(t){const n=this._core.getState();return this._threadListBinding.rename(n.id,t)}archive(){const t=this._core.getState();return this._threadListBinding.archive(t.id)}unarchive(){const t=this._core.getState();return this._threadListBinding.unarchive(t.id)}delete(){const t=this._core.getState();return this._threadListBinding.delete(t.id)}initialize(){const t=this._core.getState();return this._threadListBinding.initialize(t.id)}generateTitle(){const t=this._core.getState();return this._threadListBinding.generateTitle(t.id)}unstable_on(t,n){let r=this._core.getState().isMain,s=this._core.getState().id;return this.subscribe(()=>{const i=this._core.getState(),a=i.isMain,o=i.id;r===a&&s===o||(r=a,s=o,!(t==="switchedTo"&&!a)&&(t==="switchedAway"&&a||n()))})}subscribe(t){return this._core.subscribe(t)}detach(){const t=this._core.getState();this._threadListBinding.detach(t.id)}__internal_getRuntime(){return this}}function Lw(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0)return!1;for(const n of Object.keys(e)){const r=e[n],s=t[n];if(!Object.is(r,s))return!1}return!0}class bt extends ki{constructor(n){super();S(this,"binding");S(this,"_previousState");S(this,"getState",()=>(this.isConnected||this._syncState(),this._previousState));this.binding=n;const r=n.getState();if(r===wt)throw new Error("Entry not available in the store");this._previousState=r}get path(){return this.binding.path}_syncState(){const n=this.binding.getState();return n===wt||Lw(n,this._previousState)?!1:(this._previousState=n,!0)}_connect(){const n=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(n)}}const Fe=Symbol("innerMessage"),Yi=Symbol("innerMessages"),$w=e=>e[Fe],Fw=[],Yt=e=>{const t="messages"in e?e.messages:e,n=t[Yi]||t[Fe];return n?Array.isArray(n)?n:(t[Yi]=[n],t[Yi]):Fw},zr=e=>e.content.filter(n=>n.type==="text").map(n=>n.text).join(`

`);class Kf{constructor(t){S(this,"_core");this._core=t,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(t){return this._core.subscribe(t)}}class Yf extends Kf{constructor(n,r){super(n);S(this,"_composerApi");this._composerApi=r}remove(){const n=this._composerApi.getState();if(!n)throw new Error("Composer is not available");return n.removeAttachment(this.getState().id)}}class Bw extends Yf{get source(){return"thread-composer"}}class Uw extends Yf{get source(){return"edit-composer"}}class Zw extends Kf{get source(){return"message"}constructor(t){super(t)}remove(){throw new Error("Message attachments cannot be removed")}}class Xf extends ki{constructor(n){super();S(this,"config");this.config=n}getState(){return this.config.binding.getState()}outerSubscribe(n){return this.config.binding.subscribe(n)}_connect(){const n=()=>{this.notifySubscribers()};let r=this.config.binding.getState(),s=r==null?void 0:r.unstable_on(this.config.event,n);const i=()=>{var l;const o=this.config.binding.getState();o!==r&&(r=o,s==null||s(),s=(l=this.config.binding.getState())==null?void 0:l.unstable_on(this.config.event,n))},a=this.outerSubscribe(i);return()=>{a==null||a(),s==null||s()}}}const Qf=Object.freeze([]),ep=Object.freeze({}),Vw=e=>Object.freeze({type:"thread",isEditing:(e==null?void 0:e.isEditing)??!1,canCancel:(e==null?void 0:e.canCancel)??!1,isEmpty:(e==null?void 0:e.isEmpty)??!0,attachments:(e==null?void 0:e.attachments)??Qf,text:(e==null?void 0:e.text)??"",role:(e==null?void 0:e.role)??"user",runConfig:(e==null?void 0:e.runConfig)??ep,attachmentAccept:(e==null?void 0:e.attachmentAccept)??"",dictation:e==null?void 0:e.dictation,value:(e==null?void 0:e.text)??""}),qw=e=>Object.freeze({type:"edit",isEditing:(e==null?void 0:e.isEditing)??!1,canCancel:(e==null?void 0:e.canCancel)??!1,isEmpty:(e==null?void 0:e.isEmpty)??!0,text:(e==null?void 0:e.text)??"",role:(e==null?void 0:e.role)??"user",attachments:(e==null?void 0:e.attachments)??Qf,runConfig:(e==null?void 0:e.runConfig)??ep,attachmentAccept:(e==null?void 0:e.attachmentAccept)??"",dictation:e==null?void 0:e.dictation,value:(e==null?void 0:e.text)??""});class tp{constructor(t){S(this,"_core");S(this,"_eventSubscriptionSubjects",new Map);this._core=t}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.startDictation=this.startDictation.bind(this),this.stopDictation=this.stopDictation.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(t){const n=this._core.getState();if(!n)throw new Error("Composer is not available");n.setText(t)}setRunConfig(t){const n=this._core.getState();if(!n)throw new Error("Composer is not available");n.setRunConfig(t)}addAttachment(t){const n=this._core.getState();if(!n)throw new Error("Composer is not available");return n.addAttachment(t)}reset(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.reset()}clearAttachments(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.clearAttachments()}send(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.send()}cancel(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.cancel()}setRole(t){const n=this._core.getState();if(!n)throw new Error("Composer is not available");n.setRole(t)}startDictation(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.startDictation()}stopDictation(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.stopDictation()}subscribe(t){return this._core.subscribe(t)}unstable_on(t,n){let r=this._eventSubscriptionSubjects.get(t);return r||(r=new Xf({event:t,binding:this._core}),this._eventSubscriptionSubjects.set(t,r)),r.subscribe(n)}}class Hw extends tp{constructor(n){const r=new Go({path:n.path,getState:()=>Vw(n.getState()),subscribe:s=>n.subscribe(s)});super({path:n.path,getState:()=>n.getState(),subscribe:s=>r.subscribe(s)});S(this,"_getState");this._getState=r.getState.bind(r),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"thread"}getState(){return this._getState()}getAttachmentByIndex(n){return new Bw(new bt({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:n},ref:`${this.path.ref}.attachments[${n}]`},getState:()=>{const s=this.getState().attachments[n];return s?{...s,source:"thread-composer"}:wt},subscribe:r=>this._core.subscribe(r)}),this._core)}}class Ww extends tp{constructor(n,r){const s=new Go({path:n.path,getState:()=>qw(n.getState()),subscribe:i=>n.subscribe(i)});super({path:n.path,getState:()=>n.getState(),subscribe:i=>s.subscribe(i)});S(this,"_beginEdit");S(this,"_getState");this._beginEdit=r,this._getState=s.getState.bind(s),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"edit"}__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(n){return new Uw(new bt({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:n},ref:`${this.path.ref}.attachments[${n}]`},getState:()=>{const s=this.getState().attachments[n];return s?{...s,source:"edit-composer"}:wt},subscribe:r=>this._core.subscribe(r)}),this._core)}}class Cr{constructor(t=null){S(this,"_state");this._state=t}get state(){return this._state}append(t){this._state=t.reduce((n,r)=>Cr.apply(n,r),this._state)}static apply(t,n){const r=n.type;switch(r){case"set":return Cr.updatePath(t,n.path,()=>n.value);case"append-text":return Cr.updatePath(t,n.path,s=>{if(typeof s!="string")throw new Error(`Expected string at path [${n.path.join(", ")}]`);return s+n.value});default:{const s=r;throw new Error(`Invalid operation type: ${s}`)}}}static updatePath(t,n,r){if(n.length===0)return r(t);if(t??(t={}),typeof t!="object")throw new Error(`Invalid path: [${n.join(", ")}]`);const[s,...i]=n;if(Array.isArray(t)){const o=Number(s);if(Number.isNaN(o))throw new Error(`Expected array index at [${n.join(", ")}]`);if(o>t.length||o<0)throw new Error("Insert array index out of bounds");const l=[...t];return l[o]=this.updatePath(l[o],i,r),l}const a={...t};return a[s]=this.updatePath(a[s],i,r),a}}const Gw=({unstable_state:e=null}={})=>({role:"assistant",status:{type:"running"},parts:[],get content(){return this.parts},metadata:{unstable_state:e,unstable_data:[],unstable_annotations:[],steps:[],custom:{}}}),Si=(e,t,n)=>{if(e.parts.length===0)throw new Error("No parts available to update.");if(t.path.length!==1)throw new Error("Nested paths are not supported yet.");const r=t.path[0],s=n(e.parts[r]);return{...e,parts:[...e.parts.slice(0,r),s,...e.parts.slice(r+1)],get content(){return this.parts}}},Jw=(e,t)=>{const n=t.part;if(n.type==="text"||n.type==="reasoning"){const r={type:n.type,text:"",status:{type:"running"},...n.parentId&&{parentId:n.parentId}};return{...e,parts:[...e.parts,r],get content(){return this.parts}}}else if(n.type==="tool-call"){const r={type:"tool-call",state:"partial-call",status:{type:"running",isArgsComplete:!1},toolCallId:n.toolCallId,toolName:n.toolName,argsText:"",args:{},...n.parentId&&{parentId:n.parentId}};return{...e,parts:[...e.parts,r],get content(){return this.parts}}}else if(n.type==="source"){const r={type:"source",sourceType:n.sourceType,id:n.id,url:n.url,...n.title?{title:n.title}:void 0,...n.parentId&&{parentId:n.parentId}};return{...e,parts:[...e.parts,r],get content(){return this.parts}}}else if(n.type==="file"){const r={type:"file",mimeType:n.mimeType,data:n.data};return{...e,parts:[...e.parts,r],get content(){return this.parts}}}else throw new Error(`Unsupported part type: ${n.type}`)},Kw=(e,t)=>Si(e,t,n=>{if(n.type!=="tool-call")throw new Error("Last is not a tool call");return n.state!=="partial-call"?n:{...n,state:"call"}}),Yw=(e,t)=>Si(e,t,n=>({...n,status:{type:"complete",reason:"unknown"}})),Xw=(e,t)=>Si(e,t,n=>{if(n.type==="text"||n.type==="reasoning")return{...n,text:n.text+t.textDelta};if(n.type==="tool-call"){const r=n.argsText+t.textDelta,s=Js(r)??n.args;return{...n,argsText:r,args:s}}else throw new Error("text-delta received but part is neither text nor tool-call")}),Qw=(e,t)=>Si(e,t,n=>{if(n.type==="tool-call")return{...n,state:"result",...t.artifact!==void 0?{artifact:t.artifact}:{},result:t.result,isError:t.isError??!1,status:{type:"complete",reason:"stop"}};throw new Error("Result chunk received but part is not a tool-call")}),ou=(e,t)=>{var r,s;if(((r=e.status)==null?void 0:r.type)==="incomplete"&&((s=e.status)==null?void 0:s.reason)==="error")return e;const n=ek(t);return{...e,status:n}},ek=e=>e.finishReason==="tool-calls"?{type:"requires-action",reason:"tool-calls"}:e.finishReason==="stop"||e.finishReason==="unknown"?{type:"complete",reason:e.finishReason}:{type:"incomplete",reason:e.finishReason},tk=(e,t)=>({...e,metadata:{...e.metadata,unstable_annotations:[...e.metadata.unstable_annotations,...t.annotations]}}),nk=(e,t)=>({...e,metadata:{...e.metadata,unstable_data:[...e.metadata.unstable_data,...t.data]}}),rk=(e,t)=>({...e,metadata:{...e.metadata,steps:[...e.metadata.steps,{state:"started",messageId:t.messageId}]}}),sk=(e,t)=>{var s;const n=e.metadata.steps.slice(),r=n.length-1;return n.length>0&&((s=n[r])==null?void 0:s.state)==="started"?n[r]={...n[r],state:"finished",finishReason:t.finishReason,usage:t.usage,isContinued:t.isContinued}:n.push({state:"finished",messageId:Gf(),finishReason:t.finishReason,usage:t.usage,isContinued:t.isContinued}),{...e,metadata:{...e.metadata,steps:n}}},ik=(e,t)=>({...e,status:{type:"incomplete",reason:"error",error:t.error}}),ak=(e,t)=>{const n=new Cr(e.metadata.unstable_state);return n.append(t.operations),{...e,metadata:{...e.metadata,unstable_state:n.state}}},ok=e=>{let t=!1;return()=>{t||(t=!0,queueMicrotask(()=>{t=!1,e()}))}};class lk extends TransformStream{constructor({initialMessage:t,throttle:n,onError:r}={}){let s=t??Gw(),i;const a=n?ok(()=>{i==null||i.enqueue(s)}):()=>{i==null||i.enqueue(s)};super({start(o){i=o},transform(o){const l=o.type;switch(l){case"part-start":s=Jw(s,o);break;case"tool-call-args-text-finish":s=Kw(s,o);break;case"part-finish":s=Yw(s,o);break;case"text-delta":s=Xw(s,o);break;case"result":s=Qw(s,o);break;case"message-finish":s=ou(s,o);break;case"annotations":s=tk(s,o);break;case"data":s=nk(s,o);break;case"step-start":s=rk(s,o);break;case"step-finish":s=sk(s,o);break;case"error":s=ik(s,o),r==null||r(o.error);break;case"update-state":s=ak(s,o);break;default:{const u=l;throw new Error(`Unsupported chunk type: ${u}`)}}a()},flush(o){var l,u;if(((l=s.status)==null?void 0:l.type)==="running"){const c=((u=s.parts)==null?void 0:u.some(d=>d.type==="tool-call"&&(d.state==="call"||d.state==="partial-call")&&d.result===void 0))??!1;s=ou(s,{finishReason:c?"tool-calls":"unknown"}),o.enqueue(s)}}})}}class uk extends Hf{constructor(){super(t=>{const n=new Dw({transform(r,s){s.appendText(r)}});return t.pipeThrough(new TextDecoderStream).pipeThrough(n)})}}class Er{constructor(t){S(this,"readable");this.readable=t,this.readable=t}static fromAssistantStream(t){return new Er(t.pipeThrough(new lk))}async unstable_result(){let t;for await(const n of this)t=n;return t||{role:"assistant",status:{type:"complete",reason:"unknown"},parts:[],content:[],metadata:{unstable_state:null,unstable_data:[],unstable_annotations:[],steps:[],custom:{}}}}[Symbol.asyncIterator](){const t=this.readable.getReader();return{async next(){const{done:n,value:r}=await t.read();return n?{done:!0,value:void 0}:{done:!1,value:r}}}}tee(){const[t,n]=this.readable.tee();return[new Er(t),new Er(n)]}}const lu=Symbol.for("aui.tool-response");class vt{constructor(t){S(this,"artifact");S(this,"result");S(this,"isError");t.artifact!==void 0&&(this.artifact=t.artifact),this.result=t.result,this.isError=t.isError??!1}get[lu](){return!0}static[Symbol.hasInstance](t){return typeof t=="object"&&t!==null&&lu in t}static toResponse(t){return t instanceof vt?t:new vt({result:t===void 0?"<no result>":t})}}function ck(e,t,n){try{const r=e();if(typeof r=="object"&&r!==null&&"then"in r)return r.then(t,n);t(r)}catch(r){n(r)}}function ss(e,t){let n=e;for(const r of t){if(n==null)return;n=n[r]}return n}class dk{constructor(t,n,r){S(this,"resolve");S(this,"reject");S(this,"disposed",!1);S(this,"fieldPath");this.resolve=t,this.reject=n,this.fieldPath=r}update(t){if(!this.disposed)try{if(Gn(t,this.fieldPath)==="complete"){const n=ss(t,this.fieldPath);n!==void 0&&(this.resolve(n),this.dispose())}}catch(n){this.reject(n),this.dispose()}}dispose(){this.disposed=!0}}class uu{constructor(t,n){S(this,"controller");S(this,"disposed",!1);S(this,"fieldPath");this.controller=t,this.fieldPath=n}update(t){if(!this.disposed)try{const n=ss(t,this.fieldPath);n!==void 0&&this.controller.enqueue(n),Gn(t,this.fieldPath)==="complete"&&(this.controller.close(),this.dispose())}catch(n){this.controller.error(n),this.dispose()}}dispose(){this.disposed=!0}}class cu{constructor(t,n){S(this,"controller");S(this,"disposed",!1);S(this,"fieldPath");S(this,"lastValue");this.controller=t,this.fieldPath=n}update(t){var n;if(!this.disposed)try{const r=ss(t,this.fieldPath);if(r!==void 0&&typeof r=="string"){const s=r.substring(((n=this.lastValue)==null?void 0:n.length)||0);this.lastValue=r,this.controller.enqueue(s)}Gn(t,this.fieldPath)==="complete"&&(this.controller.close(),this.dispose())}catch(r){this.controller.error(r),this.dispose()}}dispose(){this.disposed=!0}}class du{constructor(t,n){S(this,"controller");S(this,"disposed",!1);S(this,"fieldPath");S(this,"processedIndexes",new Set);this.controller=t,this.fieldPath=n}update(t){if(!this.disposed)try{const n=ss(t,this.fieldPath);if(!Array.isArray(n))return;for(let r=0;r<n.length;r++)if(!this.processedIndexes.has(r)){const s=[...this.fieldPath,r];Gn(t,s)==="complete"&&(this.controller.enqueue(n[r]),this.processedIndexes.add(r))}Gn(t,this.fieldPath)==="complete"&&(this.controller.close(),this.dispose())}catch(n){this.controller.error(n),this.dispose()}}dispose(){this.disposed=!0}}class hk{constructor(t){S(this,"argTextDeltas");S(this,"handles",new Set);S(this,"args",Js(""));this.argTextDeltas=t,this.processStream()}async processStream(){try{let t="";const n=this.argTextDeltas.getReader();for(;;){const{value:r,done:s}=await n.read();if(s)break;t+=r;const i=Js(t);if(i!==void 0){this.args=i;for(const a of this.handles)a.update(i)}}}catch(t){console.error("Error processing argument stream:",t);for(const n of this.handles)n.dispose()}}get(...t){return new Promise((n,r)=>{const s=new dk(n,r,t);if(this.args&&Gn(this.args,t)==="complete"){const i=ss(this.args,t);if(i!==void 0){n(i);return}}this.handles.add(s),s.update(this.args)})}streamValues(...t){const n=t,r=new ReadableStream({start:s=>{const i=new uu(s,n);this.handles.add(i),i.update(this.args)},cancel:()=>{for(const s of this.handles)if(s instanceof uu){s.dispose(),this.handles.delete(s);break}}});return Ki(r)}streamText(...t){const n=t,r=new ReadableStream({start:s=>{const i=new cu(s,n);this.handles.add(i),i.update(this.args)},cancel:()=>{for(const s of this.handles)if(s instanceof cu){s.dispose(),this.handles.delete(s);break}}});return Ki(r)}forEach(...t){const n=t,r=new ReadableStream({start:s=>{const i=new du(s,n);this.handles.add(i),i.update(this.args)},cancel:()=>{for(const s of this.handles)if(s instanceof du){s.dispose(),this.handles.delete(s);break}}});return Ki(r)}}class fk{constructor(t){S(this,"promise");this.promise=t}get(){return this.promise}}class pk{constructor(){S(this,"args");S(this,"response");S(this,"writable");S(this,"resolve");S(this,"argsText","");S(this,"result",{get:async()=>(await this.response.get()).result});const t=new TransformStream;this.writable=t.writable,this.args=new hk(t.readable);const{promise:n,resolve:r}=Vo();this.resolve=r,this.response=new fk(n)}async appendArgsTextDelta(t){const n=this.writable.getWriter();try{await n.write(t)}catch(r){console.warn(r)}finally{n.releaseLock()}this.argsText+=t}setResponse(t){this.resolve(t)}}class mk extends Hf{constructor(t){const n=new Map,r=new Map;super(s=>{const i=new TransformStream({transform(a,o){switch((a.type!=="part-finish"||a.meta.type!=="tool-call")&&o.enqueue(a),a.type){case"part-start":if(a.part.type==="tool-call"){const u=new pk;r.set(a.part.toolCallId,u),t.streamCall({reader:u,toolCallId:a.part.toolCallId,toolName:a.part.toolName})}break;case"text-delta":{if(a.meta.type==="tool-call"){const u=a.meta.toolCallId,c=r.get(u);if(!c)throw new Error("No controller found for tool call");c.appendArgsTextDelta(a.textDelta)}break}case"result":{if(a.meta.type!=="tool-call")break;const{toolCallId:u}=a.meta,c=r.get(u);if(!c)throw new Error("No controller found for tool call");c.setResponse(new vt({result:a.result,artifact:a.artifact,isError:a.isError}));break}case"tool-call-args-text-finish":{if(a.meta.type!=="tool-call")break;const{toolCallId:u,toolName:c}=a.meta,d=r.get(u);if(!d)throw new Error("No controller found for tool call");let h=!1;const f=ck(()=>{var v;let m;try{m=Da.parse(d.argsText)}catch(g){throw new Error(`Function parameter parsing failed. ${JSON.stringify(g.message)}`)}const y=t.execute({toolCallId:u,toolName:c,args:m});return y!==void 0&&(h=!0,(v=t.onExecutionStart)==null||v.call(t,u,c)),y},m=>{var v;if(h&&((v=t.onExecutionEnd)==null||v.call(t,u,c)),m===void 0)return;const y=new vt({artifact:m.artifact,result:m.result,isError:m.isError});d.setResponse(y),o.enqueue({type:"result",path:a.path,...y})},m=>{var v;h&&((v=t.onExecutionEnd)==null||v.call(t,u,c));const y=new vt({result:String(m),isError:!0});d.setResponse(y),o.enqueue({type:"result",path:a.path,...y})});f&&n.set(u,f);break}case"part-finish":{if(a.meta.type!=="tool-call")break;const{toolCallId:u}=a.meta,c=n.get(u);c?c.then(()=>{n.delete(u),r.delete(u),o.enqueue(a)}):o.enqueue(a)}}},async flush(){await Promise.all(n.values())}});return s.pipeThrough(new Wf).pipeThrough(i)})}}const gk=e=>typeof e=="object"&&e!==null&&"~standard"in e&&e["~standard"].version===1;function yk(e,t,n,r){const s=e==null?void 0:e[n.toolName];return!s||!s.execute?void 0:(async a=>{if(t.aborted)return new vt({result:"Tool execution was cancelled.",isError:!0});let o=a;if(gk(s.parameters)){let c=s.parameters["~standard"].validate(n.args);c instanceof Promise&&(c=await c),c.issues&&(o=s.experimental_onSchemaValidationError??(()=>{throw new Error(`Function parameter validation failed. ${JSON.stringify(c.issues)}`)}))}const l=new Promise(c=>{const d=()=>{queueMicrotask(()=>{queueMicrotask(()=>{c(new vt({result:"Tool execution was cancelled.",isError:!0}))})})};t.aborted?d():t.addEventListener("abort",d,{once:!0})}),u=(async()=>{const c=await o(n.args,{toolCallId:n.toolCallId,abortSignal:t,human:d=>r(n.toolCallId,d)});return vt.toResponse(c)})();return Promise.race([u,l])})(s.execute)}function bk(e,t,n,r,s){var i,a;(a=(i=e==null?void 0:e[r.toolName])==null?void 0:i.streamCall)==null||a.call(i,n,{toolCallId:r.toolCallId,abortSignal:t,human:o=>s(r.toolCallId,o)})}function vk(e,t,n,r){const s=typeof e=="function"?e:()=>e,i=typeof t=="function"?t:()=>t;return new mk({execute:a=>yk(s(),i(),a,n),streamCall:({reader:a,...o})=>bk(s(),i(),a,o,n),onExecutionStart:r==null?void 0:r.onExecutionStart,onExecutionEnd:r==null?void 0:r.onExecutionEnd})}function xk(e){return typeof e=="object"&&e!==null&&"~standard"in e&&typeof e["~standard"]=="object"}function _k(e){return typeof e=="object"&&e!==null&&"toJSONSchema"in e&&typeof e.toJSONSchema=="function"}function wk(e){return typeof e=="object"&&e!==null&&"toJSON"in e&&typeof e.toJSON=="function"}function kk(e){if(xk(e)){const t=e["~standard"].toJSONSchema;if(typeof t=="function")return t()}return _k(e)?e.toJSONSchema():wk(e)?e.toJSON():e}function Sk(e,t){return!t.disabled&&t.type!=="backend"}function Ik(e,t={}){if(!e)return{};const n=t.filter??Sk;return Object.fromEntries(Object.entries(e).filter(([r,s])=>n(r,s)&&s.parameters).map(([r,s])=>[r,{...s.description&&{description:s.description},parameters:kk(s.parameters)}]))}class hu{constructor(t,n,r){S(this,"contentBinding");S(this,"messageApi");S(this,"threadApi");this.contentBinding=t,this.messageApi=n,this.threadApi=r,this.__internal_bindMethods()}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.resumeToolCall=this.resumeToolCall.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(t){const n=this.contentBinding.getState();if(!n)throw new Error("Message part is not available");if(n.type!=="tool-call")throw new Error("Tried to add tool result to non-tool message part");if(!this.messageApi)throw new Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw new Error("Thread API is not available");const r=this.messageApi.getState();if(!r)throw new Error("Message is not available");const s=n.toolName,i=n.toolCallId,a=vt.toResponse(t);this.threadApi.getState().addToolResult({messageId:r.id,toolName:s,toolCallId:i,result:a.result,artifact:a.artifact,isError:a.isError})}resumeToolCall(t){const n=this.contentBinding.getState();if(!n)throw new Error("Message part is not available");if(n.type!=="tool-call")throw new Error("Tried to resume tool call on non-tool message part");if(!this.threadApi)throw new Error("Thread API is not available");const r=n.toolCallId;this.threadApi.getState().resumeToolCall({toolCallId:r,payload:t})}subscribe(t){return this.contentBinding.subscribe(t)}}class Ks extends ki{constructor(n){super();S(this,"binding");this.binding=n}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(n){return this.binding.subscribe(n)}_connect(){const n=()=>{this.notifySubscribers()};let r=this.binding.getState(),s=r==null?void 0:r.subscribe(n);const i=()=>{var l;const o=this.binding.getState();o!==r&&(r=o,s==null||s(),s=(l=this.binding.getState())==null?void 0:l.subscribe(n),n())},a=this.outerSubscribe(i);return()=>{a==null||a(),s==null||s()}}}const vs=Object.freeze({type:"complete"}),Tk=(e,t,n)=>{if(e.role!=="assistant")return vs;if(n.type==="tool-call")return n.result?vs:e.status;const r=t===Math.max(0,e.content.length-1);return e.status.type==="requires-action"?vs:r?e.status:vs},fu=(e,t)=>{const n=e.content[t];if(!n)return wt;const r=Tk(e,t,n);return Object.freeze({...n,[Fe]:n[Fe],status:r})};class Ck{constructor(t,n){S(this,"_core");S(this,"_threadBinding");S(this,"composer");S(this,"_getEditComposerRuntimeCore",()=>this._threadBinding.getState().getEditComposer(this._core.getState().id));this._core=t,this._threadBinding=n,this.composer=new Ww(new Ks({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:r=>this._threadBinding.subscribe(r)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id)),this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getMessagePartByIndex=this.getMessagePartByIndex.bind(this),this.getMessagePartByToolCallId=this.getMessagePartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}getState(){return this._core.getState()}reload(t={}){const n=this._getEditComposerRuntimeCore(),r=n??this._threadBinding.getState().composer,s=n??r,{runConfig:i=s.runConfig}=t,a=this._core.getState();if(a.role!=="assistant")throw new Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:a.parentId,sourceId:a.id,runConfig:i})}speak(){const t=this._core.getState();return this._threadBinding.getState().speak(t.id)}stopSpeaking(){var r;const t=this._core.getState();if(((r=this._threadBinding.getState().speech)==null?void 0:r.messageId)===t.id)this._threadBinding.getState().stopSpeaking();else throw new Error("Message is not being spoken")}submitFeedback({type:t}){const n=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:n.id,type:t})}switchToBranch({position:t,branchId:n}){const r=this._core.getState();if(n&&t)throw new Error("May not specify both branchId and position");if(!n&&!t)throw new Error("Must specify either branchId or position");const i=this._threadBinding.getState().getBranches(r.id);let a=n;if(t==="previous"?a=i[r.branchNumber-2]:t==="next"&&(a=i[r.branchNumber]),!a)throw new Error("Branch not found");this._threadBinding.getState().switchToBranch(a)}unstable_getCopyText(){return zr(this.getState())}subscribe(t){return this._core.subscribe(t)}getMessagePartByIndex(t){if(t<0)throw new Error("Message part index must be >= 0");return new hu(new bt({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.content[${t}]`,messagePartSelector:{type:"index",index:t}},getState:()=>fu(this.getState(),t),subscribe:n=>this._core.subscribe(n)}),this._core,this._threadBinding)}getMessagePartByToolCallId(t){return new hu(new bt({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(t)}]`,messagePartSelector:{type:"toolCallId",toolCallId:t}},getState:()=>{const n=this._core.getState(),r=n.content.findIndex(s=>s.type==="tool-call"&&s.toolCallId===t);return r===-1?wt:fu(n,r)},subscribe:n=>this._core.subscribe(n)}),this._core,this._threadBinding)}getAttachmentByIndex(t){return new Zw(new bt({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.attachments[${t}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:t}},getState:()=>{const n=this.getState().attachments,r=n==null?void 0:n[t];return r?{...r,source:"message"}:wt},subscribe:n=>this._core.subscribe(n)}))}}const Ek=e=>({parentId:e.parentId??null,sourceId:e.sourceId??null,runConfig:e.runConfig??{},...e.stream?{stream:e.stream}:{}}),Rk=e=>({parentId:e.parentId??null,sourceId:e.sourceId??null,runConfig:e.runConfig??{}}),Ak=(e,t)=>{var n,r;return typeof t=="string"?{createdAt:new Date,parentId:((n=e.at(-1))==null?void 0:n.id)??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:t}],attachments:[],metadata:{custom:{}}}:{createdAt:t.createdAt??new Date,parentId:t.parentId??((r=e.at(-1))==null?void 0:r.id)??null,sourceId:t.sourceId??null,role:t.role??"user",content:t.content,attachments:t.attachments??[],metadata:t.metadata??{custom:{}},runConfig:t.runConfig??{},startRun:t.startRun}},Pk=(e,t)=>{const n=e.messages.at(-1);return Object.freeze({threadId:t.id,metadata:t,capabilities:e.capabilities,isDisabled:e.isDisabled,isLoading:e.isLoading,isRunning:(n==null?void 0:n.role)!=="assistant"?!1:n.status.type==="running",messages:e.messages,state:e.state,suggestions:e.suggestions,extras:e.extras,speech:e.speech})};class np{constructor(t,n){S(this,"_threadBinding");S(this,"composer");S(this,"_eventSubscriptionSubjects",new Map);const r=new bt({path:t.path,getState:()=>Pk(t.getState(),n.getState()),subscribe:s=>{const i=t.subscribe(s),a=n.subscribe(s);return()=>{i(),a()}}});this._threadBinding={path:t.path,getState:()=>t.getState(),getStateState:()=>r.getState(),outerSubscribe:s=>t.outerSubscribe(s),subscribe:s=>t.subscribe(s)},this.composer=new Hw(new Ks({path:{...this.path,ref:`${this.path.ref}${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:s=>this._threadBinding.subscribe(s)})),this.__internal_bindMethods()}get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.unstable_loadExternalState=this.unstable_loadExternalState.bind(this),this.importExternalState=this.importExternalState.bind(this),this.exportExternalState=this.exportExternalState.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.reset=this.reset.bind(this),this.getMessageByIndex=this.getMessageByIndex.bind(this),this.getMessageById=this.getMessageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}getState(){return this._threadBinding.getStateState()}append(t){this._threadBinding.getState().append(Ak(this._threadBinding.getState().messages,t))}subscribe(t){return this._threadBinding.subscribe(t)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(t){const n=t===null||typeof t=="string"?{parentId:t}:t;return this._threadBinding.getState().startRun(Rk(n))}unstable_resumeRun(t){return this._threadBinding.getState().resumeRun(Ek(t))}exportExternalState(){return this._threadBinding.getState().exportExternalState()}importExternalState(t){this._threadBinding.getState().importExternalState(t)}unstable_loadExternalState(t){this._threadBinding.getState().unstable_loadExternalState(t)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(t){this._threadBinding.getState().import(t)}reset(t){this._threadBinding.getState().reset(t)}getMessageByIndex(t){if(t<0)throw new Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:`${this.path.ref}${this.path.ref}.messages[${t}]`,messageSelector:{type:"index",index:t}},()=>{var s;const n=this._threadBinding.getState().messages,r=n[t];if(r)return{message:r,parentId:((s=n[t-1])==null?void 0:s.id)??null,index:t}})}getMessageById(t){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(t)}]`,messageSelector:{type:"messageId",messageId:t}},()=>this._threadBinding.getState().getMessageById(t))}_getMessageRuntime(t,n){return new Ck(new bt({path:t,getState:()=>{var d;const{message:r,parentId:s,index:i}=n()??{},{messages:a,speech:o}=this._threadBinding.getState();if(!r||s===void 0||i===void 0)return wt;const u=this._threadBinding.getState().getBranches(r.id),c=r.metadata.submittedFeedback;return{...r,[Fe]:r[Fe],index:i,isLast:((d=a.at(-1))==null?void 0:d.id)===r.id,parentId:s,branchNumber:u.indexOf(r.id)+1,branchCount:u.length,speech:(o==null?void 0:o.messageId)===r.id?o:void 0,submittedFeedback:c}},subscribe:r=>this._threadBinding.subscribe(r)}),this._threadBinding)}unstable_on(t,n){let r=this._eventSubscriptionSubjects.get(t);return r||(r=new Xf({event:t,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(t,r)),r.subscribe(n)}}const Mk=e=>({mainThreadId:e.mainThreadId,newThreadId:e.newThreadId,threadIds:e.threadIds,archivedThreadIds:e.archivedThreadIds,isLoading:e.isLoading,threadItems:e.threadItems}),xs=(e,t)=>{if(t===void 0)return wt;const n=e.getItemById(t);return n?{id:n.id,remoteId:n.remoteId,externalId:n.externalId,title:n.title,status:n.status,isMain:n.id===e.mainThreadId}:wt};class rp{constructor(t,n=np){S(this,"_core");S(this,"_runtimeFactory");S(this,"_getState");S(this,"_mainThreadListItemRuntime");S(this,"main");this._core=t,this._runtimeFactory=n;const r=new Go({path:{},getState:()=>Mk(t),subscribe:s=>t.subscribe(s)});this._getState=r.getState.bind(r),this._mainThreadListItemRuntime=new bs(new bt({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>xs(this._core,this._core.mainThreadId),subscribe:s=>this._core.subscribe(s)}),this._core),this.main=new n(new Ks({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>t.getMainThreadRuntimeCore(),subscribe:s=>t.subscribe(s)}),this._mainThreadListItemRuntime),this.__internal_bindMethods()}__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(t){return this._core.switchToThread(t)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(t){return this._core.subscribe(t)}get mainItem(){return this._mainThreadListItemRuntime}getById(t){return new this._runtimeFactory(new Ks({path:{ref:`threads[threadId=${JSON.stringify(t)}]`,threadSelector:{type:"threadId",threadId:t}},getState:()=>this._core.getThreadRuntimeCore(t),subscribe:n=>this._core.subscribe(n)}),this.mainItem)}getItemByIndex(t){return new bs(new bt({path:{ref:`threadItems[${t}]`,threadSelector:{type:"index",index:t}},getState:()=>xs(this._core,this._core.threadIds[t]),subscribe:n=>this._core.subscribe(n)}),this._core)}getArchivedItemByIndex(t){return new bs(new bt({path:{ref:`archivedThreadItems[${t}]`,threadSelector:{type:"archiveIndex",index:t}},getState:()=>xs(this._core,this._core.archivedThreadIds[t]),subscribe:n=>this._core.subscribe(n)}),this._core)}getItemById(t){return new bs(new bt({path:{ref:`threadItems[threadId=${t}]`,threadSelector:{type:"threadId",threadId:t}},getState:()=>xs(this._core,t),subscribe:n=>this._core.subscribe(n)}),this._core)}}const Nk=e=>e.startsWith("image/")?"image":e.startsWith("text/")?"document":"file";class Ok{constructor(t){S(this,"cloud");S(this,"accept","*");S(this,"uploadedUrls",new Map);this.cloud=t}async*add({file:t}){const n=crypto.randomUUID(),r=Nk(t.type);let s={id:n,type:r,name:t.name,contentType:t.type,file:t,status:{type:"running",reason:"uploading",progress:0}};yield s;try{const{signedUrl:i,publicUrl:a}=await this.cloud.files.generatePresignedUploadUrl({filename:t.name});await fetch(i,{method:"PUT",body:t,headers:{"Content-Type":t.type},mode:"cors"}),this.uploadedUrls.set(n,a),s={...s,status:{type:"requires-action",reason:"composer-send"}},yield s}catch{s={...s,status:{type:"incomplete",reason:"error"}},yield s}}async remove(t){this.uploadedUrls.delete(t.id)}async send(t){const n=this.uploadedUrls.get(t.id);if(!n)throw new Error("Attachment not uploaded");this.uploadedUrls.delete(t.id);let r;return t.type==="image"?r=[{type:"image",image:n,filename:t.name}]:r=[{type:"file",data:n,mimeType:t.contentType,filename:t.name}],{...t,status:{type:"complete"},content:r}}}const La=b.createContext(null),sp=({adapters:e,children:t})=>{const n=b.useContext(La);return p.jsx(La.Provider,{value:{...n,...e},children:t})},ip=()=>b.useContext(La),cn=Object.freeze([]),mn="DEFAULT_THREAD_ID",jk=Object.freeze([mn]),ap=Object.freeze({id:mn,remoteId:void 0,externalId:void 0,status:"regular"}),Dk=Promise.resolve(),pu=Object.freeze({[mn]:ap});class zk{constructor(t={},n){S(this,"adapter");S(this,"threadFactory");S(this,"_mainThreadId",mn);S(this,"_threads",jk);S(this,"_archivedThreads",cn);S(this,"_threadData",pu);S(this,"_mainThread");S(this,"_subscriptions",new Set);this.adapter=t,this.threadFactory=n,this._mainThread=this.threadFactory(),this.__internal_setAdapter(t,!0)}get isLoading(){return this.adapter.isLoading??!1}get newThreadId(){}get threadIds(){return this._threads}get archivedThreadIds(){return this._archivedThreads}get threadItems(){return this._threadData}getLoadThreadsPromise(){return Dk}get mainThreadId(){return this._mainThreadId}getMainThreadRuntimeCore(){return this._mainThread}getThreadRuntimeCore(){throw new Error("Method not implemented.")}getItemById(t){for(const n of this.adapter.threads??[])if(n.id===t)return n;for(const n of this.adapter.archivedThreads??[])if(n.id===t)return n;if(t===mn)return ap}__internal_setAdapter(t,n=!1){var c,d,h,f;const r=this.adapter;this.adapter=t;const s=t.threadId??mn,i=t.threads??cn,a=t.archivedThreads??cn,o=r.threadId??mn,l=r.threads??cn,u=r.archivedThreads??cn;!n&&o===s&&l===i&&u===a||(this._threadData={...pu,...Object.fromEntries(((c=t.threads)==null?void 0:c.map(m=>[m.id,{...m,remoteId:m.remoteId,externalId:m.externalId,status:"regular"}]))??[]),...Object.fromEntries(((d=t.archivedThreads)==null?void 0:d.map(m=>[m.id,{...m,remoteId:m.remoteId,externalId:m.externalId,status:"archived"}]))??[])},l!==i&&(this._threads=((h=this.adapter.threads)==null?void 0:h.map(m=>m.id))??cn),u!==a&&(this._archivedThreads=((f=this.adapter.archivedThreads)==null?void 0:f.map(m=>m.id))??cn),o!==s&&(this._mainThreadId=s,this._mainThread=this.threadFactory()),this._notifySubscribers())}async switchToThread(t){if(this._mainThreadId===t)return;const n=this.adapter.onSwitchToThread;if(!n)throw new Error("External store adapter does not support switching to thread");n(t)}async switchToNewThread(){const t=this.adapter.onSwitchToNewThread;if(!t)throw new Error("External store adapter does not support switching to new thread");t()}async rename(t,n){const r=this.adapter.onRename;if(!r)throw new Error("External store adapter does not support renaming");r(t,n)}async detach(){}async archive(t){const n=this.adapter.onArchive;if(!n)throw new Error("External store adapter does not support archiving");n(t)}async unarchive(t){const n=this.adapter.onUnarchive;if(!n)throw new Error("External store adapter does not support unarchiving");n(t)}async delete(t){const n=this.adapter.onDelete;if(!n)throw new Error("External store adapter does not support deleting");n(t)}initialize(t){return Promise.resolve({remoteId:t,externalId:void 0})}generateTitle(){throw new Error("Method not implemented.")}subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}_notifySubscribers(){for(const t of this._subscriptions)t()}}class $a{constructor(){S(this,"cache",new WeakMap)}convertMessages(t,n){return t.map((r,s)=>{const i=this.cache.get(r),a=n(i,r,s);return this.cache.set(r,a),a})}}class Lk extends Lf{constructor(n,r,{parentId:s,message:i}){super();S(this,"runtime");S(this,"endEditCallback");S(this,"_nonTextParts");S(this,"_previousText");S(this,"_parentId");S(this,"_sourceId");this.runtime=n,this.endEditCallback=r,this._parentId=s,this._sourceId=i.id,this._previousText=zr(i),this.setText(this._previousText),this.setRole(i.role),this.setAttachments(i.attachments??[]),this._nonTextParts=i.content.filter(a=>a.type!=="text"),this.setRunConfig({...n.composer.runConfig})}get canCancel(){return!0}getAttachmentAdapter(){var n;return(n=this.runtime.adapters)==null?void 0:n.attachments}getDictationAdapter(){var n;return(n=this.runtime.adapters)==null?void 0:n.dictation}async handleSend(n){zr(n)!==this._previousText&&this.runtime.append({...n,content:[...n.content,...this._nonTextParts],parentId:this._parentId,sourceId:this._sourceId}),this.handleCancel()}handleCancel(){this.endEditCallback(),this._notifySubscribers()}}class $k{constructor(t){S(this,"_contextProvider");S(this,"_subscriptions",new Set);S(this,"_isInitialized",!1);S(this,"repository",new Wo);S(this,"composer",new $f(this));S(this,"_editComposers",new Map);S(this,"_stopSpeaking");S(this,"speech");S(this,"_eventSubscribers",new Map);this._contextProvider=t}get messages(){return this.repository.getMessages()}get state(){let t;for(const n of this.messages)if(n.role==="assistant"){t=n;break}return(t==null?void 0:t.metadata.unstable_state)??null}getModelContext(){return this._contextProvider.getModelContext()}getEditComposer(t){return this._editComposers.get(t)}beginEdit(t){if(this._editComposers.has(t))throw new Error("Edit already in progress");this._editComposers.set(t,new Lk(this,()=>this._editComposers.delete(t),this.repository.getMessage(t))),this._notifySubscribers()}getMessageById(t){try{return this.repository.getMessage(t)}catch{return}}getBranches(t){return this.repository.getBranches(t)}switchToBranch(t){this.repository.switchToBranch(t),this._notifySubscribers()}_notifySubscribers(){for(const t of this._subscriptions)t()}_notifyEventSubscribers(t){const n=this._eventSubscribers.get(t);if(n)for(const r of n)r()}subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}submitFeedback({messageId:t,type:n}){var a;const r=(a=this.adapters)==null?void 0:a.feedback;if(!r)throw new Error("Feedback adapter not configured");const{message:s,parentId:i}=this.repository.getMessage(t);if(r.submit({message:s,type:n}),s.role==="assistant"){const o={...s,metadata:{...s.metadata,submittedFeedback:{type:n}}};this.repository.addOrUpdateMessage(i,o)}this._notifySubscribers()}speak(t){var a,o;const n=(a=this.adapters)==null?void 0:a.speech;if(!n)throw new Error("Speech adapter not configured");const{message:r}=this.repository.getMessage(t);(o=this._stopSpeaking)==null||o.call(this);const s=n.speak(zr(r)),i=s.subscribe(()=>{s.status.type==="ended"?(this._stopSpeaking=void 0,this.speech=void 0):this.speech={messageId:t,status:s.status},this._notifySubscribers()});this.speech={messageId:t,status:s.status},this._notifySubscribers(),this._stopSpeaking=()=>{s.cancel(),i(),this.speech=void 0,this._stopSpeaking=void 0}}stopSpeaking(){if(!this._stopSpeaking)throw new Error("No message is being spoken");this._stopSpeaking(),this._notifySubscribers()}ensureInitialized(){this._isInitialized||(this._isInitialized=!0,this._notifyEventSubscribers("initialize"))}export(){return this.repository.export()}import(t){this.ensureInitialized(),this.repository.clear(),this.repository.import(t),this._notifySubscribers()}reset(t){this.import(Ho.fromArray(t??[]))}unstable_on(t,n){var s,i;if(t==="modelContextUpdate")return((i=(s=this._contextProvider).subscribe)==null?void 0:i.call(s,n))??(()=>{});const r=this._eventSubscribers.get(t);return r?r.add(n):this._eventSubscribers.set(t,new Set([n])),()=>{this._eventSubscribers.get(t).delete(n)}}}const Fk=Object.freeze([]),Bk=(e,t)=>{var n;return e&&((n=t[t.length-1])==null?void 0:n.role)!=="assistant"};class Uk extends $k{constructor(n,r){super(n);S(this,"_assistantOptimisticId",null);S(this,"_capabilities",{switchToBranch:!1,switchBranchDuringRun:!1,edit:!1,reload:!1,cancel:!1,unstable_copy:!1,speech:!1,dictation:!1,attachments:!1,feedback:!1});S(this,"_messages");S(this,"isDisabled");S(this,"suggestions",[]);S(this,"extras");S(this,"_converter",new $a);S(this,"_store");S(this,"updateMessages",n=>{var s,i,a,o;this._store.convertMessage!==void 0?(i=(s=this._store).setMessages)==null||i.call(s,n.flatMap($w).filter(l=>l!=null)):(o=(a=this._store).setMessages)==null||o.call(a,n)});this.__internal_setAdapter(r)}get capabilities(){return this._capabilities}get isLoading(){return this._store.isLoading??!1}get messages(){return this._messages}get state(){return this._store.state??super.state}get adapters(){return this._store.adapters}beginEdit(n){if(!this._store.onEdit)throw new Error("Runtime does not support editing.");super.beginEdit(n)}__internal_setAdapter(n){var a,o,l,u,c,d,h;if(this._store===n)return;const r=n.isRunning??!1;this.isDisabled=n.isDisabled??!1;const s=this._store;this._store=n,this.extras=n.extras,this.suggestions=n.suggestions??Fk,this._capabilities={switchToBranch:this._store.setMessages!==void 0,switchBranchDuringRun:!1,edit:this._store.onEdit!==void 0,reload:this._store.onReload!==void 0,cancel:this._store.onCancel!==void 0,speech:((a=this._store.adapters)==null?void 0:a.speech)!==void 0,dictation:((o=this._store.adapters)==null?void 0:o.dictation)!==void 0,unstable_copy:((l=this._store.unstable_capabilities)==null?void 0:l.copy)!==!1,attachments:!!((u=this._store.adapters)!=null&&u.attachments),feedback:!!((c=this._store.adapters)!=null&&c.feedback)};let i;if(n.messageRepository){if(s&&s.isRunning===n.isRunning&&s.messageRepository===n.messageRepository){this._notifySubscribers();return}this.repository.clear(),this._assistantOptimisticId=null,this.repository.import(n.messageRepository),i=this.repository.getMessages()}else if(n.messages){if(s){if(s.convertMessage!==n.convertMessage)this._converter=new $a;else if(s.isRunning===n.isRunning&&s.messages===n.messages){this._notifySubscribers();return}}i=n.convertMessage?this._converter.convertMessages(n.messages,(f,m,y)=>{var T;if(!n.convertMessage)return m;const v=y===(((T=n.messages)==null?void 0:T.length)??0)-1,g=rs(v,r,!1,!1,void 0);if(f&&(f.role!=="assistant"||!Ff(f.status)||f.status===g))return f;const _=n.convertMessage(m,y),x=En(_,y.toString(),g);return x[Fe]=m,x}):n.messages;for(let f=0;f<i.length;f++){const m=i[f],y=i[f-1];this.repository.addOrUpdateMessage((y==null?void 0:y.id)??null,m)}}else throw new Error("ExternalStoreAdapter must provide either 'messages' or 'messageRepository'");i.length>0&&this.ensureInitialized(),((s==null?void 0:s.isRunning)??!1)!==(n.isRunning??!1)&&(n.isRunning?this._notifyEventSubscribers("runStart"):this._notifyEventSubscribers("runEnd")),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null),Bk(r,i)&&(this._assistantOptimisticId=this.repository.appendOptimisticMessage(((d=i.at(-1))==null?void 0:d.id)??null,{role:"assistant",content:[]})),this.repository.resetHead(this._assistantOptimisticId??((h=i.at(-1))==null?void 0:h.id)??null),this._messages=this.repository.getMessages(),this._notifySubscribers()}switchToBranch(n){if(!this._store.setMessages)throw new Error("Runtime does not support switching branches.");this._store.isRunning||(this.repository.switchToBranch(n),this.updateMessages(this.repository.getMessages()))}async append(n){var r;if(n.parentId!==(((r=this.messages.at(-1))==null?void 0:r.id)??null)){if(!this._store.onEdit)throw new Error("Runtime does not support editing messages.");await this._store.onEdit(n)}else await this._store.onNew(n)}async startRun(n){if(!this._store.onReload)throw new Error("Runtime does not support reloading messages.");await this._store.onReload(n.parentId,n)}async resumeRun(n){if(!this._store.onResume)throw new Error("Runtime does not support resuming runs.");await this._store.onResume(n)}exportExternalState(){if(!this._store.onExportExternalState)throw new Error("Runtime does not support exporting external states.");return this._store.onExportExternalState()}importExternalState(n){if(!this._store.onLoadExternalState)throw new Error("Runtime does not support importing external states.");this._store.onLoadExternalState(n)}unstable_loadExternalState(n){this.importExternalState(n)}cancelRun(){var s;if(!this._store.onCancel)throw new Error("Runtime does not support cancelling runs.");this._store.onCancel(),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null);let n=this.repository.getMessages();const r=n[n.length-1];(r==null?void 0:r.role)==="user"&&r.id===((s=n.at(-1))==null?void 0:s.id)?(this.repository.deleteMessage(r.id),this.composer.text.trim()||this.composer.setText(zr(r)),n=this.repository.getMessages()):this._notifySubscribers(),setTimeout(()=>{this.updateMessages(n)},0)}addToolResult(n){var r,s;if(!this._store.onAddToolResult&&!this._store.onAddToolResult)throw new Error("Runtime does not support tool results.");(s=(r=this._store).onAddToolResult)==null||s.call(r,n)}resumeToolCall(n){if(!this._store.onResumeToolCall)throw new Error("Runtime does not support resuming tool calls.");this._store.onResumeToolCall(n)}reset(n){const r=new Wo;r.import(Ho.fromArray(n??[])),this.updateMessages(r.getMessages())}import(n){this._assistantOptimisticId=null,super.import(n),this._store.onImport&&this._store.onImport(this.repository.getMessages())}}const mu=e=>{var t;return((t=e.adapters)==null?void 0:t.threadList)??{}};class Zk extends Uo{constructor(n){super();S(this,"threads");this.threads=new zk(mu(n),()=>new Uk(this._contextProvider,n))}setAdapter(n){this.threads.__internal_setAdapter(mu(n)),this.threads.getMainThreadRuntimeCore().__internal_setAdapter(n)}}const Vk=e=>{const[t]=b.useState(()=>new Zk(e));b.useEffect(()=>{t.setAdapter(e)});const{modelContext:n}=ip()??{};return b.useEffect(()=>{if(n)return t.registerModelContextProvider(n)},[n,t]),b.useMemo(()=>new Jo(t),[t])},Xi=e=>{try{return JSON.parse(e),!0}catch{return!1}};function op({state:e,getTools:t,onResult:n,setToolStatuses:r}){const s=b.useRef({}),i=b.useRef(new Map),a=b.useRef(new AbortController),o=b.useRef(0),l=b.useRef([]),[u]=b.useState(()=>{const[f,m]=Jf(),y=vk(t,()=>{var v;return((v=a.current)==null?void 0:v.signal)??new AbortController().signal},(v,g)=>new Promise((_,x)=>{const T=i.current.get(v);T&&T.reject(new Error("Human input request was superseded by a new request")),i.current.set(v,{resolve:_,reject:x}),r(E=>({...E,[v]:{type:"interrupt",payload:{type:"human",payload:g}}}))}),{onExecutionStart:v=>{o.current++,r(g=>({...g,[v]:{type:"executing"}}))},onExecutionEnd:v=>{o.current--,r(g=>{const _={...g};return delete _[v],_}),o.current===0&&(l.current.forEach(g=>g()),l.current=[])}});return f.pipeThrough(y).pipeThrough(new Wf).pipeTo(new WritableStream({write(v){var g;if(v.type==="result"){if((g=s.current[v.meta.toolCallId])!=null&&g.hasResult)return;n({type:"add-tool-result",toolCallId:v.meta.toolCallId,toolName:v.meta.toolName,result:v.result,isError:v.isError,...v.artifact&&{artifact:v.artifact}})}}})),m}),c=b.useRef(new Set),d=b.useRef(!0);b.useEffect(()=>{const f=m=>{m.forEach(y=>{y.content.forEach(v=>{if(v.type==="tool-call"){if(d.current)c.current.add(v.toolCallId);else{if(c.current.has(v.toolCallId))return;let g=s.current[v.toolCallId];if(g||(g={argsText:"",hasResult:!1,argsComplete:!1,controller:u.addToolCallPart({toolName:v.toolName,toolCallId:v.toolCallId})},s.current[v.toolCallId]=g),v.argsText!==g.argsText&&!g.argsComplete){if(!v.argsText.startsWith(g.argsText)){if(Xi(g.argsText)&&Xi(v.argsText)){g.controller.argsText.close(),s.current[v.toolCallId]={argsText:v.argsText,hasResult:g.hasResult,argsComplete:!0,controller:g.controller};return}throw new Error(`Tool call argsText can only be appended, not updated: ${v.argsText} does not start with ${g.argsText}`)}const _=v.argsText.slice(g.argsText.length);g.controller.argsText.append(_);const x=Xi(v.argsText);x&&g.controller.argsText.close(),s.current[v.toolCallId]={argsText:v.argsText,hasResult:g.hasResult,argsComplete:x,controller:g.controller}}v.result!==void 0&&!g.hasResult&&(g.controller.setResponse(new vt({result:v.result,artifact:v.artifact,isError:v.isError})),g.controller.close(),s.current[v.toolCallId]={hasResult:!0,argsComplete:!0,argsText:g.argsText,controller:g.controller})}v.messages&&f(v.messages)}})})};f(e.messages),d.current&&(d.current=!1)},[e,u]);const h=()=>(i.current.forEach(({reject:f})=>{f(new Error("Tool execution aborted"))}),i.current.clear(),a.current.abort(),a.current=new AbortController,o.current===0?Promise.resolve():new Promise(f=>{l.current.push(f)}));return{reset:()=>{h(),d.current=!0},abort:h,resume:(f,m)=>{const y=i.current.get(f);if(y)i.current.delete(f),r(v=>({...v,[f]:{type:"executing"}})),y.resolve(m);else throw new Error(`Tool call ${f} is not waiting for human input`)}}}class qk{list(){return Promise.resolve({threads:[]})}rename(){return Promise.resolve()}archive(){return Promise.resolve()}unarchive(){return Promise.resolve()}delete(){return Promise.resolve()}initialize(t){return Promise.resolve({remoteId:t,externalId:void 0})}generateTitle(){return Promise.resolve(new ReadableStream)}fetch(t){return Promise.reject(new Error("Thread not found"))}}const lp=e=>{const t={role:"assistant",content:[]};for(const n of e)if(n.role==="tool"){const r=t.content.findIndex(s=>s.type==="tool-call"&&s.toolCallId===n.toolCallId);if(r!==-1){const s=t.content[r];if(n.toolName!==void 0&&s.toolName!==n.toolName)throw new Error(`Tool call name ${n.toolCallId} ${n.toolName} does not match existing tool call ${s.toolName}`);t.content[r]={...s,[Fe]:[...s[Fe]??[],n],result:n.result,artifact:n.artifact,isError:n.isError,messages:n.messages}}else throw new Error(`Tool call ${n.toolCallId} ${n.toolName} not found in assistant message`)}else{const r=n.role,s=(typeof n.content=="string"?[{type:"text",text:n.content}]:n.content).map(i=>({...i,[Fe]:[n]}));switch(r){case"system":case"user":return{...n,content:s};case"assistant":t.content.length===0&&(t.id=n.id,t.createdAt??(t.createdAt=n.createdAt),t.status??(t.status=n.status),n.attachments&&(t.attachments=[...t.attachments??[],...n.attachments]),n.metadata&&(t.metadata??(t.metadata={}),n.metadata.unstable_state&&(t.metadata.unstable_state=n.metadata.unstable_state),n.metadata.unstable_annotations&&(t.metadata.unstable_annotations=[...t.metadata.unstable_annotations??[],...n.metadata.unstable_annotations]),n.metadata.unstable_data&&(t.metadata.unstable_data=[...t.metadata.unstable_data??[],...n.metadata.unstable_data]),n.metadata.steps&&(t.metadata.steps=[...t.metadata.steps??[],...n.metadata.steps]),n.metadata.custom&&(t.metadata.custom={...t.metadata.custom??{},...n.metadata.custom}),n.metadata.submittedFeedback&&(t.metadata.submittedFeedback=n.metadata.submittedFeedback)));for(const i of s){if(i.type==="reasoning"&&"parentId"in i&&i.parentId){const a=t.content.findIndex(o=>o.type==="reasoning"&&"parentId"in o&&o.parentId===i.parentId);if(a!==-1){const o=t.content[a];t.content[a]={...o,text:`${o.text}

${i.text}`,[Fe]:[...o[Fe]??[],...i[Fe]??[]]};continue}}t.content.push(i)}break;default:{const i=r;throw new Error(`Unknown message role: ${i}`)}}}return t},up=(e,t)=>{var l;const n=[];let r=!1,s=!1,i=[],a=[];const o=()=>{a.length&&n.push({inputs:i,outputs:a}),i=[],a=[],r=!1,s=!1};for(const u of e)for(const c of u.outputs)(s&&c.role!=="tool"||!r||c.role==="user"||c.role==="system")&&o(),r=c.role==="assistant"||c.role==="tool",i.at(-1)!==u.input&&i.push(u.input),a.push(c),c.role==="assistant"&&(((l=c.convertConfig)==null?void 0:l.joinStrategy)==="none"||t==="none")&&(s=!0);return o(),n};function cp(e){return Object.assign({id:bw(),role:"assistant",content:[],status:{type:"incomplete",reason:"error",error:e},createdAt:new Date,metadata:{unstable_state:null,unstable_annotations:[],unstable_data:[],custom:{},steps:[]}},{[Fe]:[]})}const Hk=(e,t,n,r)=>{const s=[];for(const o of e){const l=t(o,r),u=Array.isArray(l)?l:[l],c={input:o,outputs:u};s.push(c)}const i=up(s),a=i.map((o,l)=>{const u=l===i.length-1,c=lp(o.outputs),d=typeof c.content=="object"&&c.content.some(m=>m.type==="tool-call"&&m.result===void 0),h=rs(u,n,d,d,u?r.error:void 0),f=En(c,l.toString(),h);return f[Fe]=o.inputs,f});if(r.error){const o=a.at(-1);(!o||o.role!=="assistant")&&a.push(cp(r.error))}return a},Wk=({callback:e,messages:t,isRunning:n,joinStrategy:r,metadata:s})=>{const i=b.useMemo(()=>({metadata:s??{},callback:e,callbackCache:new WeakMap,chunkCache:new WeakMap,converterCache:new $a}),[e,s]);return b.useMemo(()=>{const a=[];for(const u of t){let c=i.callbackCache.get(u);if(!c){const d=i.callback(u,i.metadata),h=Array.isArray(d)?d:[d];c={input:u,outputs:h},i.callbackCache.set(u,c)}a.push(c)}const o=up(a,r).map(u=>{const c=u.outputs[0];if(!c)return u;const d=i.chunkCache.get(c);return d&&gu(d.outputs,u.outputs)?d:(i.chunkCache.set(c,u),u)}),l=i.converterCache.convertMessages(o,(u,c,d)=>{const h=d===o.length-1,f=lp(c.outputs),m=typeof f.content=="object"&&f.content.some(_=>_.type==="tool-call"&&_.result===void 0),y=typeof f.content=="object"&&f.content.some(_=>_.type==="tool-call"&&_.result===void 0),v=rs(h,n,m,y,h?i.metadata.error:void 0);if(u&&(u.role!=="assistant"||!Ff(u.status)||u.status===v)){const _=Yt(u);if(gu(_,c.inputs))return u}const g=En(f,d.toString(),v);return g[Fe]=c.inputs,g});if(l[Fe]=t,i.metadata.error){const u=l.at(-1);(!u||u.role!=="assistant")&&l.push(cp(i.metadata.error))}return l},[i,t,n,r])},gu=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Gk=e=>{const t={useThreadMessages:({messages:n,isRunning:r,joinStrategy:s,metadata:i})=>Wk({callback:e,messages:n,isRunning:r,joinStrategy:s,metadata:i}),toThreadMessages:(n,r=!1,s={})=>Hk(n,e,r,s),toOriginalMessages:n=>{const r=Yt(n);if(r.length===0)throw new Error("No original messages found");return r},toOriginalMessage:n=>t.toOriginalMessages(n)[0],useOriginalMessage:()=>t.useOriginalMessages()[0],useOriginalMessages:()=>{const n=ee(),r=Z(a=>{if(n.part.source)return Yt(a.part)}),s=Z(({message:a})=>Yt(a)),i=r??s;if(i.length===0)throw new Error("No original messages found");return i}};return t},yu=e=>{try{const n=e.split(".")[1];if(!n)throw new Error("Invalid JWT format");let r=n.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4!==0;)r+="=";const s=atob(r),a=JSON.parse(s).exp;if(!a||typeof a!="number")throw new Error('JWT does not contain a valid "exp" field');return a*1e3}catch(t){throw new Error(`Unable to determine the token expiry: ${t}`)}};var Kr;class dp{constructor(t){S(this,"strategy","jwt");S(this,"cachedToken",null);S(this,"tokenExpiry",null);fr(this,Kr);pr(this,Kr,t)}async getAuthHeaders(){const t=Date.now();if(this.cachedToken&&this.tokenExpiry&&this.tokenExpiry-t>30*1e3)return{Authorization:`Bearer ${this.cachedToken}`};const n=await hr(this,Kr).call(this);return n?(this.cachedToken=n,this.tokenExpiry=yu(n),{Authorization:`Bearer ${n}`}):!1}readAuthHeaders(t){const n=t.get("Authorization");if(!n)return;const[r,s]=n.split(" ");if(r!=="Bearer"||!s)throw new Error("Invalid auth header received");this.cachedToken=s,this.tokenExpiry=yu(s)}}Kr=new WeakMap;var Yr,Xr,Qr;class Jk{constructor(t,n,r){S(this,"strategy","api-key");fr(this,Yr);fr(this,Xr);fr(this,Qr);pr(this,Yr,t),pr(this,Xr,n),pr(this,Qr,r)}async getAuthHeaders(){return{Authorization:`Bearer ${hr(this,Yr)}`,"Aui-User-Id":hr(this,Xr),"Aui-Workspace-Id":hr(this,Qr)}}readAuthHeaders(){}}Yr=new WeakMap,Xr=new WeakMap,Qr=new WeakMap;const _s="aui:refresh_token";class Kk{constructor(t){S(this,"strategy","anon");S(this,"baseUrl");S(this,"jwtStrategy");this.baseUrl=t,this.jwtStrategy=new dp(async()=>{const n=Date.now(),r=localStorage.getItem(_s),s=r?JSON.parse(r):void 0;if(s)if(new Date(s.expires_at).getTime()-n>30*1e3){const c=await fetch(`${this.baseUrl}/v1/auth/tokens/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:s.token})});if(c.ok){const d=await c.json(),{access_token:h,refresh_token:f}=d;return f&&localStorage.setItem(_s,JSON.stringify(f)),h}}else localStorage.removeItem(_s);const i=await fetch(`${this.baseUrl}/v1/auth/tokens/anonymous`,{method:"POST"});if(!i.ok)return null;const a=await i.json(),{access_token:o,refresh_token:l}=a;return!o||!l?null:(localStorage.setItem(_s,JSON.stringify(l)),o)})}async getAuthHeaders(){return this.jwtStrategy.getAuthHeaders()}readAuthHeaders(t){this.jwtStrategy.readAuthHeaders(t)}}class Yk extends Error{constructor(t){super(t),this.name="APIError"}}class Xk{constructor(t){S(this,"_auth");S(this,"_baseUrl");if("authToken"in t)this._baseUrl=t.baseUrl,this._auth=new dp(t.authToken);else if("apiKey"in t)this._baseUrl="https://backend.assistant-api.com",this._auth=new Jk(t.apiKey,t.userId,t.workspaceId);else if("anonymous"in t)this._baseUrl=t.baseUrl,this._auth=new Kk(t.baseUrl);else throw new Error("Invalid configuration: Must provide authToken, apiKey, or anonymous configuration")}async initializeAuth(){return!!this._auth.getAuthHeaders()}async makeRawRequest(t,n={}){const r=await this._auth.getAuthHeaders();if(!r)throw new Error("Authorization failed");const s={...r,...n.headers,"Content-Type":"application/json"},i=new URLSearchParams;if(n.query)for(const[l,u]of Object.entries(n.query))u!==!1&&(u===!0?i.set(l,"true"):i.set(l,u.toString()));const a=new URL(`${this._baseUrl}/v1${t}`);a.search=i.toString();const o=await fetch(a,{method:n.method??"GET",headers:s,body:n.body?JSON.stringify(n.body):null});if(this._auth.readAuthHeaders(o.headers),!o.ok){const l=await o.text();try{const u=JSON.parse(l);throw new Yk(u.message)}catch{throw new Error(`Request failed with status ${o.status}, ${l}`)}}return o}async makeRequest(t,n={}){return(await this.makeRawRequest(t,n)).json()}}class Qk{constructor(t){S(this,"cloud");this.cloud=t}async create(){return this.cloud.makeRequest("/auth/tokens",{method:"POST"})}}class eS{constructor(t){S(this,"cloud");this.cloud=t}__internal_getAssistantOptions(t){return{api:`${this.cloud._baseUrl}/v1/runs/stream`,headers:async()=>{const n=await this.cloud._auth.getAuthHeaders();if(!n)throw new Error("Authorization failed");return{...n,Accept:"text/plain"}},body:{assistant_id:t,response_format:"vercel-ai-data-stream/v1",thread_id:"unstable_todo"}}}async stream(t){const n=await this.cloud.makeRawRequest("/runs/stream",{method:"POST",headers:{Accept:"text/plain"},body:t});return za.fromResponse(n,new uk)}}class tS{constructor(t){S(this,"cloud");this.cloud=t}async list(t,n){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}/messages`,{query:n})}async create(t,n){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}/messages`,{method:"POST",body:n})}}class nS{constructor(t){S(this,"cloud");S(this,"messages");this.cloud=t,this.messages=new tS(t)}async list(t){return this.cloud.makeRequest("/threads",{query:t})}async get(t){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}`)}async create(t){return this.cloud.makeRequest("/threads",{method:"POST",body:t})}async update(t,n){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}`,{method:"PUT",body:n})}async delete(t){return this.cloud.makeRequest(`/threads/${encodeURIComponent(t)}`,{method:"DELETE"})}}class rS{constructor(t){S(this,"cloud");this.cloud=t}async pdfToImages(t){return this.cloud.makeRequest("/files/pdf-to-images",{method:"POST",body:t})}async generatePresignedUploadUrl(t){return this.cloud.makeRequest("/files/attachments/generate-presigned-upload-url",{method:"POST",body:t})}}class sS{constructor(t){S(this,"threads");S(this,"auth");S(this,"runs");S(this,"files");const n=new Xk(t);this.threads=new nS(n),this.auth={tokens:new Qk(n)},this.runs=new eS(n),this.files=new rS(n)}}function Fa(e,t=0){return t>100?!1:e===null||typeof e=="string"||typeof e=="boolean"?!0:typeof e=="number"?!Number.isNaN(e)&&Number.isFinite(e):Array.isArray(e)?e.every(n=>Fa(n,t+1)):typeof e=="object"?Object.entries(e).every(([n,r])=>typeof n=="string"&&Fa(r,t+1)):!1}const iS=e=>{var t;return{role:e.role,content:e.content.map(n=>{const r=n.type;switch(r){case"text":return{type:"text",text:n.text};case"reasoning":return{type:"reasoning",text:n.text};case"source":return{type:"source",sourceType:n.sourceType,id:n.id,url:n.url,...n.title?{title:n.title}:void 0};case"tool-call":return Fa(n.result)||console.warn(`tool-call result is not JSON! ${JSON.stringify(n)}`),{type:"tool-call",toolCallId:n.toolCallId,toolName:n.toolName,...JSON.stringify(n.args)===n.argsText?{args:n.args}:{argsText:n.argsText},...n.result?{result:n.result}:{},...n.isError?{isError:!0}:{}};case"image":return{type:"image",image:n.image};case"file":return{type:"file",data:n.data,mimeType:n.mimeType,...n.filename?{filename:n.filename}:void 0};default:{const s=r;throw new Error(`Message part type not supported by aui/v0: ${s}`)}}}),metadata:e.metadata,...e.status?{status:((t=e.status)==null?void 0:t.type)==="running"?{type:"incomplete",reason:"cancelled"}:e.status}:void 0}},aS=e=>{const t=e.content,n=En({id:e.id,createdAt:e.created_at,...t},e.id,{type:"complete",reason:"unknown"});return{parentId:e.parent_id,message:n}},Qi=new WeakMap;class oS{constructor(t,n){S(this,"parent");S(this,"formatAdapter");this.parent=t,this.formatAdapter=n}async append(t){const n=this.formatAdapter.encode(t),r=this.formatAdapter.getId(t.message);return this.parent._appendWithFormat(t.parentId,r,this.formatAdapter.format,n)}async load(){return this.parent._loadWithFormat(this.formatAdapter.format,t=>this.formatAdapter.decode(t))}}class lS{constructor(t,n){S(this,"cloudRef");S(this,"aui");this.cloudRef=t,this.aui=n}get _getIdForLocalId(){return Qi.has(this.aui.threadListItem())||Qi.set(this.aui.threadListItem(),{}),Qi.get(this.aui.threadListItem())}withFormat(t){return new oS(this,t)}async append({parentId:t,message:n}){const{remoteId:r}=await this.aui.threadListItem().initialize(),s=this.cloudRef.current.threads.messages.create(r,{parent_id:t?await this._getIdForLocalId[t]??t:null,format:"aui/v0",content:iS(n)}).then(({message_id:i})=>(this._getIdForLocalId[n.id]=i,i));return this._getIdForLocalId[n.id]=s,s.then(()=>{})}async load(){const t=this.aui.threadListItem().getState().remoteId;if(!t)return{messages:[]};const{messages:n}=await this.cloudRef.current.threads.messages.list(t,{format:"aui/v0"});return{messages:n.filter(s=>s.format==="aui/v0").map(aS).reverse()}}async _appendWithFormat(t,n,r,s){const{remoteId:i}=await this.aui.threadListItem().initialize(),a=this.cloudRef.current.threads.messages.create(i,{parent_id:t?await this._getIdForLocalId[t]??t:null,format:r,content:s}).then(({message_id:o})=>(this._getIdForLocalId[n]=o,o));return this._getIdForLocalId[n]=a,a.then(()=>{})}async _loadWithFormat(t,n){const r=this.aui.threadListItem().getState().remoteId;if(!r)return{messages:[]};const{messages:s}=await this.cloudRef.current.threads.messages.list(r,{format:t});return{messages:s.filter(i=>i.format===t).map(i=>n({id:i.id,parent_id:i.parent_id,format:i.format,content:i.content})).reverse()}}}const uS=e=>{const t=ee(),[n]=b.useState(()=>new lS(e,t));return n};var Nd;const bu=typeof process<"u"&&((Nd=process==null?void 0:process.env)==null?void 0:Nd.NEXT_PUBLIC_ASSISTANT_BASE_URL),ea=bu?new sS({baseUrl:bu,anonymous:!0}):void 0,cS=e=>{const t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);const n=b.useCallback(function({children:i}){const a=uS({get current(){return t.current.cloud??ea}}),o=t.current.cloud??ea,l=b.useMemo(()=>new Ok(o),[o]),u=b.useMemo(()=>({history:a,attachments:l}),[a,l]);return p.jsx(sp,{adapters:u,children:i})},[]),r=e.cloud??ea;return r?{list:async()=>{const{threads:s}=await r.threads.list();return{threads:s.map(i=>({status:i.is_archived?"archived":"regular",remoteId:i.id,title:i.title,externalId:i.external_id??void 0}))}},initialize:async()=>{var l;const i=await(((l=e.create)==null?void 0:l.call(e))??Promise.resolve()),a=i?i.externalId:void 0,{thread_id:o}=await r.threads.create({last_message_at:new Date,external_id:a});return{externalId:a,remoteId:o}},rename:async(s,i)=>r.threads.update(s,{title:i}),archive:async s=>r.threads.update(s,{is_archived:!0}),unarchive:async s=>r.threads.update(s,{is_archived:!1}),delete:async s=>{var i;return await((i=e.delete)==null?void 0:i.call(e,s)),r.threads.delete(s)},generateTitle:async(s,i)=>{const a=i.map(o=>({...o,content:o.content.filter(l=>l.type==="text"||l.type==="tool-call")}));return r.runs.stream({thread_id:s,assistant_id:"system/thread_title",messages:a})},fetch:async s=>{const i=await r.threads.get(s);return{status:i.is_archived?"archived":"regular",remoteId:i.id,title:i.title,externalId:i.external_id??void 0}},unstable_Provider:n}:new qk};class Jo{constructor(t){S(this,"_core");S(this,"threads");S(this,"_thread");this._core=t,this.threads=new rp(t.threads),this._thread=this.threads.main,this.__internal_bindMethods()}get threadList(){return this.threads}__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(t){return this._core.threads.switchToThread(t)}registerModelContextProvider(t){return this._core.registerModelContextProvider(t)}registerModelConfigProvider(t){return this.registerModelContextProvider(t)}reset({initialMessages:t}={}){return this._core.threads.getMainThreadRuntimeCore().import(Ho.fromArray(t??[]))}}const dS=e=>{const{cloud:t,initialMessages:n,maxSteps:r,adapters:s,unstable_humanToolNames:i,...a}=e;return{localRuntimeOptions:{cloud:t,initialMessages:n,maxSteps:r,adapters:s,unstable_humanToolNames:i},otherOptions:a}},vu=e=>{let t;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=c??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(f=>f(t,h))}},s=()=>t,o={setState:r,getState:s,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,s,o);return o},hS=e=>e?vu(e):vu,fS=e=>e;function pS(e,t=fS){const n=Pe.useSyncExternalStore(e.subscribe,Pe.useCallback(()=>t(e.getState()),[e,t]),Pe.useCallback(()=>t(e.getInitialState()),[e,t]));return Pe.useDebugValue(n),n}const xu=e=>{const t=hS(e),n=r=>pS(t,r);return Object.assign(n,t),n},Jn=e=>e?xu(e):xu;function hp(e,t){function n(s){const i=e(s);return i?i[t]:null}function r(s){let i=!1,a;typeof s=="function"?a=s:s&&typeof s=="object"&&(i=!!s.optional,a=s.selector);const o=n({optional:i});return o?a?o(a):o():null}return{[t]:r,[`${t}Store`]:n}}const fp=b.createContext(null),mS=e=>({useSmoothStatus:Jn(()=>e)}),gS=({children:e})=>{const t=pp({optional:!0}),n=ee(),[r]=b.useState(()=>mS(n.part().getState().status));return t?e:p.jsx(fp.Provider,{value:r,children:e})},yS=e=>{const t=b.forwardRef((n,r)=>p.jsx(gS,{children:p.jsx(e,{...n,ref:r})}));return t.displayName=e.displayName,t};function pp(e){const t=b.useContext(fp);if(!(e!=null&&e.optional)&&!t)throw new Error("This component must be used within a SmoothContextProvider.");return t}const{useSmoothStatus:bS,useSmoothStatusStore:vS}=hp(pp,"useSmoothStatus"),Lr=e=>e;class xS{constructor(t,n){S(this,"currentText");S(this,"setText");S(this,"animationFrameId",null);S(this,"lastUpdateTime",Date.now());S(this,"targetText","");S(this,"animate",()=>{const t=Date.now();let r=t-this.lastUpdateTime;const s=this.targetText.length-this.currentText.length,i=Math.min(5,250/s);let a=0;for(;r>=i&&a<s;)a++,r-=i;a!==s?this.animationFrameId=requestAnimationFrame(this.animate):this.animationFrameId=null,a!==0&&(this.currentText=this.targetText.slice(0,this.currentText.length+a),this.lastUpdateTime=t-r,this.setText(this.currentText))});this.currentText=t,this.setText=n}start(){this.animationFrameId===null&&(this.lastUpdateTime=Date.now(),this.animate())}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}}const ta=Object.freeze({type:"running"}),mp=(e,t=!1)=>{const{text:n}=e,r=Z(({message:c})=>c.id),s=b.useRef(r),[i,a]=b.useState(n),o=vS({optional:!0}),l=Ft(c=>{if(a(c),o){const d=i!==c||e.status.type==="running"?ta:e.status;Lr(o).setState(d,!0)}});b.useEffect(()=>{if(o){const c=t&&(i!==n||e.status.type==="running")?ta:e.status;Lr(o).setState(c,!0)}},[o,t,n,i,e.status]);const[u]=b.useState(new xS(n,l));return b.useEffect(()=>{if(!t){u.stop();return}if(s.current!==r||!n.startsWith(u.targetText)){s.current=r,l(n),u.currentText=n,u.targetText=n,u.stop();return}u.targetText=n,u.start()},[l,u,r,t,n]),b.useEffect(()=>()=>{u.stop()},[u]),b.useMemo(()=>t?{type:"text",text:i,status:n===i?e.status:ta}:e,[t,i,e,n])},_S=Object.freeze(Object.defineProperty({__proto__:null,AssistantRuntimeImpl:Jo,BaseAssistantRuntimeCore:Uo,CompositeContextProvider:Bo,DefaultThreadComposerRuntimeCore:$f,MessageRepository:Wo,ThreadRuntimeImpl:np,fromThreadMessageLike:En,generateId:sr,getAutoStatus:rs,splitLocalRuntimeOptions:dS,useSmooth:mp,useSmoothStatus:bS,useToolInvocations:op,withSmoothContextProvider:yS},Symbol.toStringTag,{value:"Module"})),Rn=e=>{const[,t]=_t(e.getState);return Be(()=>(t(e.getState()),e.subscribe(()=>{t(e.getState())})),[e]),e.getState()},gp=fe(({runtime:e})=>{const t=Rn(e),n=Fo();return Be(()=>{const r=[],s=["switchedTo","switchedAway"];for(const i of s){const a=e.unstable_on(i,()=>{n(`threadListItem.${i}`,{threadId:e.getState().id})});r.push(a)}return()=>{for(const i of r)i()}},[e,n]),{state:t,methods:{getState:()=>t,switchTo:e.switchTo,rename:e.rename,archive:e.archive,unarchive:e.unarchive,delete:e.delete,generateTitle:e.generateTitle,initialize:e.initialize,detach:e.detach,__internal_getRuntime:()=>e}}}),yp=fe(({runtime:e})=>{const t=Rn(e);return{state:t,methods:{getState:()=>t,remove:e.remove,__internal_getRuntime:()=>e}}}),wS=fe(({runtime:e,index:t})=>{const n=oe(()=>e.getAttachmentByIndex(t),[e,t]);return Mt(yp({runtime:n}))}),bp=fe(({threadIdRef:e,messageIdRef:t,runtime:n})=>{const r=Rn(n),s=Fo();Be(()=>{const o=[],l=["send","attachmentAdd"];for(const u of l){const c=n.unstable_on(u,()=>{s(`composer.${u}`,{threadId:e.current,...t&&{messageId:t.current}})});o.push(c)}return()=>{for(const u of o)u()}},[n,s,e,t]);const i=Wn(()=>r.attachments.map((o,l)=>Bt(o.id,wS({runtime:n,index:l}))),[r.attachments,n]),a=oe(()=>({text:r.text,role:r.role,attachments:i.state,runConfig:r.runConfig,isEditing:r.isEditing,canCancel:r.canCancel,attachmentAccept:r.attachmentAccept,isEmpty:r.isEmpty,type:r.type??"thread",dictation:r.dictation}),[r,i.state]);return{state:a,methods:{getState:()=>a,setText:n.setText,setRole:n.setRole,setRunConfig:n.setRunConfig,addAttachment:n.addAttachment,reset:n.reset,clearAttachments:n.clearAttachments,send:n.send,cancel:n.cancel,beginEdit:n.beginEdit??(()=>{throw new Error("beginEdit is not supported in this runtime")}),startDictation:n.startDictation,stopDictation:n.stopDictation,attachment:o=>"id"in o?i.get({key:o.id}):i.get(o),__internal_getRuntime:()=>n}}}),kS=fe(({runtime:e})=>{const t=Rn(e);return{state:t,methods:{getState:()=>t,addToolResult:n=>e.addToolResult(n),resumeToolCall:n=>e.resumeToolCall(n),__internal_getRuntime:()=>e}}}),SS=fe(({runtime:e,index:t})=>{const n=oe(()=>e.getAttachmentByIndex(t),[e,t]);return Mt(yp({runtime:n}))}),IS=fe(({runtime:e,index:t})=>{const n=oe(()=>e.getMessagePartByIndex(t),[e,t]);return Mt(kS({runtime:n}))}),TS=fe(({runtime:e,threadIdRef:t})=>{const n=Rn(e),[r,s]=_t(!1),[i,a]=_t(!1),o=oe(()=>({get current(){return e.getState().id}}),[e]),l=xi(bp({runtime:e.composer,threadIdRef:t,messageIdRef:o})),u=Wn(()=>n.content.map((h,f)=>Bt("toolCallId"in h&&h.toolCallId!=null?`toolCallId-${h.toolCallId}`:`index-${f}`,IS({runtime:e,index:f}))),[n.content,e]),c=Wn(()=>(n.attachments??[]).map((h,f)=>Bt(h.id,SS({runtime:e,index:f}))),[n.attachments,e]),d=oe(()=>({...n,parts:u.state,composer:l.state,isCopied:r,isHovering:i}),[n,u.state,l.state,r,i]);return{state:d,methods:{getState:()=>d,composer:l.methods,reload:h=>e.reload(h),speak:()=>e.speak(),stopSpeaking:()=>e.stopSpeaking(),submitFeedback:h=>e.submitFeedback(h),switchToBranch:h=>e.switchToBranch(h),getCopyText:()=>e.unstable_getCopyText(),part:h=>"index"in h?u.get({index:h.index}):u.get({key:`toolCallId-${h.toolCallId}`}),attachment:h=>"id"in h?c.get({key:h.id}):c.get(h),setIsCopied:s,setIsHovering:a,__internal_getRuntime:()=>e}}}),CS=fe(({runtime:e,id:t,threadIdRef:n})=>{const r=oe(()=>e.getMessageById(t),[e,t]);return Mt(TS({runtime:r,threadIdRef:n}))}),ES=fe(({runtime:e})=>{const t=Rn(e),n=Fo();Be(()=>{const o=[],l=["runStart","runEnd","initialize","modelContextUpdate"];for(const u of l){const c=e.unstable_on(u,()=>{var h;const d=((h=e.getState())==null?void 0:h.threadId)||"unknown";n(`thread.${u}`,{threadId:d})});o.push(c)}return()=>{for(const u of o)u()}},[e,n]);const r=oe(()=>({get current(){return e.getState().threadId}}),[e]),s=xi(bp({runtime:e.composer,threadIdRef:r})),i=Wn(()=>t.messages.map(o=>Bt(o.id,CS({runtime:e,id:o.id,threadIdRef:r}))),[t.messages,e,r]),a=oe(()=>({isEmpty:i.state.length===0&&!t.isLoading,isDisabled:t.isDisabled,isLoading:t.isLoading,isRunning:t.isRunning,capabilities:t.capabilities,state:t.state,suggestions:t.suggestions,extras:t.extras,speech:t.speech,composer:s.state,messages:i.state}),[t,i,s.state]);return{state:a,methods:{getState:()=>a,composer:s.methods,append:e.append,startRun:e.startRun,unstable_resumeRun:e.unstable_resumeRun,cancelRun:e.cancelRun,getModelContext:e.getModelContext,export:e.export,import:e.import,reset:e.reset,stopSpeaking:e.stopSpeaking,startVoice:async()=>{throw new Error("startVoice is not supported in this runtime")},stopVoice:async()=>{throw new Error("stopVoice is not supported in this runtime")},message:o=>"id"in o?i.get({key:o.id}):i.get(o),__internal_getRuntime:()=>e}}}),RS=fe(({runtime:e,id:t})=>{const n=oe(()=>e.getItemById(t),[e,t]);return Mt(gp({runtime:n}))}),AS=fe(({runtime:e,__internal_assistantRuntime:t})=>{const n=Rn(e),r=xi(ES({runtime:e.main})),s=Wn(()=>Object.keys(n.threadItems).map(a=>Bt(a,RS({runtime:e,id:a}))),[n.threadItems,e]),i=oe(()=>({mainThreadId:n.mainThreadId,newThreadId:n.newThreadId??null,isLoading:n.isLoading,threadIds:n.threadIds,archivedThreadIds:n.archivedThreadIds,threadItems:s.state,main:r.state}),[n,s.state,r.state]);return{state:i,methods:{getState:()=>i,thread:()=>r.methods,item:a=>{if(a==="main")return s.get({key:i.mainThreadId});if("id"in a)return s.get({key:a.id});const{index:o,archived:l=!1}=a,u=l?i.archivedThreadIds[o]:i.threadIds[o];return s.get({key:u})},switchToThread:async a=>{await e.switchToThread(a)},switchToNewThread:async()=>{await e.switchToNewThread()},__internal_getAssistantRuntime:()=>t}}}),PS=1,vp=fe(()=>{const[e]=_t(()=>({version:PS+1})),t=oe(()=>new Bo,[]);return{state:e,methods:{getState:()=>e,getModelContext:()=>t.getModelContext(),subscribe:n=>t.subscribe(n),register:n=>t.registerModelContextProvider(n)}}}),ws=e=>{const t=ee();b.useEffect(()=>{if(e.render)return t.tools().setToolUI(e.toolName,e.render)},[t,e.toolName,e.render]),b.useEffect(()=>{const{toolName:n,render:r,...s}=e,i={tools:{[n]:s}};return t.modelContext().register({getModelContext:()=>i})},[t,e])},xp=fe(({toolkit:e})=>{const[t,n]=_t(()=>({tools:{}})),r=Df(),s=vf((i,a)=>(n(o=>({...o,tools:{...o.tools,[i]:[...o.tools[i]??[],a]}})),()=>{n(o=>{var l;return{...o,tools:{...o.tools,[i]:((l=o.tools[i])==null?void 0:l.filter(u=>u!==a))??[]}}})}),[]);return Be(()=>{if(!e)return;const i=[];for(const[l,u]of Object.entries(e))u.render&&i.push(s(l,u.render));const a=Object.entries(e).reduce((l,[u,c])=>{const{render:d,...h}=c;return l[u]=h,l},{}),o={getModelContext:()=>({tools:a})};return i.push(r.current.modelContext().register(o)),()=>{i.forEach(l=>l())}},[e,s,r]),{state:t,methods:{getState:()=>t,setToolUI:s}}});Mf(xp,{modelContext:vp()});const MS=fe(e=>({state:e,methods:{getState:()=>e}})),NS=fe(e=>{const[t]=_t(()=>({suggestions:(e??[]).map(s=>typeof s=="string"?{title:s,label:"",prompt:s}:{title:s.title,label:s.label,prompt:s.prompt})})),n=Wn(()=>t.suggestions.map((r,s)=>Bt(s,MS(r))),[t.suggestions]);return{state:t,methods:{getState:()=>t,suggestion:({index:r})=>n.get({index:r})}}}),OS=NS,_p=fe(e=>{const t=Df();return Be(()=>e.registerModelContextProvider(t.current.modelContext()),[e,t]),Mt(AS({runtime:e.threads,__internal_assistantRuntime:e}))});Mf(_p,{modelContext:vp(),tools:xp({}),suggestions:OS(),threadListItem:rt({source:"threads",query:{type:"main"},get:e=>e.threads().item("main")}),thread:rt({source:"threads",query:{type:"main"},get:e=>e.threads().thread("main")}),composer:rt({source:"thread",query:{},get:e=>e.threads().thread("main").composer})});const na=e=>{const t=new Map,n=()=>{let r=0;for(const s of t.values())r+=s;e(r)};return{register:()=>{const r=Symbol();return t.set(r,0),{setHeight:s=>{t.get(r)!==s&&(t.set(r,s),n())},unregister:()=>{t.delete(r),n()}}}}},jS=(e={})=>{const t=new Set,n=na(a=>{i.setState({height:{...i.getState().height,viewport:a}})}),r=na(a=>{i.setState({height:{...i.getState().height,inset:a}})}),s=na(a=>{i.setState({height:{...i.getState().height,userMessage:a}})}),i=Jn(()=>({isAtBottom:!0,scrollToBottom:({behavior:a="auto"}={})=>{for(const o of t)o({behavior:a})},onScrollToBottom:a=>(t.add(a),()=>{t.delete(a)}),turnAnchor:e.turnAnchor??"bottom",height:{viewport:0,inset:0,userMessage:0},registerViewport:n.register,registerContentInset:r.register,registerUserMessageHeight:s.register}));return i};function DS(e,t){function n(r){const s=b.useContext(e);if(!(r!=null&&r.optional)&&!s)throw new Error(`This component must be used within ${t}.`);return s}return n}const wp=b.createContext(null),zS=DS(wp,"ThreadPrimitive.Viewport"),{useThreadViewport:Kn,useThreadViewportStore:Ii}=hp(zS,"useThreadViewport"),LS=e=>{const t=Ii({optional:!0}),[n]=b.useState(()=>jS(e));return b.useEffect(()=>t==null?void 0:t.getState().onScrollToBottom(()=>{n.getState().scrollToBottom()}),[t,n]),b.useEffect(()=>{if(t)return n.subscribe(r=>{t.getState().isAtBottom!==r.isAtBottom&&Lr(t).setState({isAtBottom:r.isAtBottom})})},[n,t]),b.useEffect(()=>{const r={turnAnchor:e.turnAnchor??"bottom"};n.getState().turnAnchor!==r.turnAnchor&&Lr(n).setState(r)},[n,e.turnAnchor]),n},kp=({children:e,options:t={}})=>{const n=LS(t),[r]=b.useState(()=>({useThreadViewport:n}));return p.jsx(wp.Provider,{value:r,children:e})},$S=e=>{var t;return(t=e._core)==null?void 0:t.RenderComponent},FS=({children:e,aui:t=null,runtime:n})=>{const r=ee({threads:_p(n)},{parent:t});b.useEffect(()=>{},[r]);const s=$S(n);return p.jsxs(Nt,{value:r,children:[s&&p.jsx(s,{}),p.jsx(kp,{children:e})]})},BS=b.memo(FS),US=({index:e,archived:t,children:n})=>{const r=ee({threadListItem:rt({source:"threads",query:{type:"index",index:e,archived:t},get:s=>s.threads().item({index:e,archived:t})})});return p.jsx(Nt,{value:r,children:n})},ZS=({runtime:e,children:t})=>{const n=ee({threadListItem:gp({runtime:e})});return p.jsx(Nt,{value:n,children:t})},VS=({index:e,children:t})=>{const n=ee({message:rt({source:"thread",query:{type:"index",index:e},get:r=>r.thread().message({index:e})}),composer:rt({source:"message",query:{},get:r=>r.thread().message({index:e}).composer})});return p.jsx(Nt,{value:n,children:t})},qS=({index:e,children:t})=>{const n=ee({suggestion:rt({source:"suggestions",query:{index:e},get:r=>r.suggestions().suggestion({index:e})})});return p.jsx(Nt,{value:n,children:t})},HS=({index:e,children:t})=>{const n=ee({part:rt({source:"message",query:{type:"index",index:e},get:r=>r.message().part({index:e})})});return p.jsx(Nt,{value:n,children:t})},WS=({index:e,children:t})=>{const n=ee({attachment:rt({source:"message",query:{type:"index",index:e},get:r=>r.message().attachment({index:e})})});return p.jsx(Nt,{value:n,children:t})},GS=({index:e,children:t})=>{const n=ee({attachment:rt({source:"composer",query:{type:"index",index:e},get:r=>r.composer().attachment({index:e})})});return p.jsx(Nt,{value:n,children:t})},JS=fe(({text:e,isRunning:t})=>{const n=oe(()=>({type:"text",text:e,status:t?{type:"running"}:{type:"complete"}}),[e,t]);return{state:n,methods:{getState:()=>n,addToolResult:()=>{throw new Error("Not supported")},resumeToolCall:()=>{throw new Error("Not supported")}}}}),KS=({text:e,isRunning:t=!1,children:n})=>{const r=ee({part:JS({text:e,isRunning:t})});return p.jsx(Nt,{value:r,children:n})};class YS extends wi{constructor(n,r){super();S(this,"useRuntimeHook");S(this,"instances",new Map);S(this,"useAliveThreadsKeysChanged",Jn(()=>({})));S(this,"parent");S(this,"_InnerActiveThreadProvider",({threadId:n})=>{const{useRuntime:r}=this.useRuntimeHook(),s=r(),i=s.thread.__internal_threadBinding,a=b.useCallback(()=>{const c=this.instances.get(n);if(!c)throw new Error("Thread not found. This is a bug in assistant-ui.");c.runtime=i.getState(),this._notifySubscribers()},[n,i]),o=b.useRef(!1);o.current||a(),b.useEffect(()=>(o.current=!0,a(),i.outerSubscribe(a)),[i,a]);const l=ee(),u=b.useRef(void 0);return b.useEffect(()=>{const c=i.getState(),d=c.__internal_setGetInitializePromise;typeof d=="function"&&d.call(c,()=>u.current)},[i]),b.useEffect(()=>s.threads.main.unstable_on("initialize",()=>{if(l.threadListItem().getState().status==="new"){u.current=l.threadListItem().initialize();const d=s.thread.unstable_on("runEnd",()=>{d(),l.threadListItem().generateTitle()})}}),[s,l]),null});S(this,"_OuterActiveThreadProvider",b.memo(({threadId:n,provider:r})=>{const s=b.useMemo(()=>new rp(this.parent).getItemById(n),[n]);return p.jsx(ZS,{runtime:s,children:p.jsx(r,{children:p.jsx(this._InnerActiveThreadProvider,{threadId:n})})})}));S(this,"__internal_RenderThreadRuntimes",({provider:n})=>(this.useAliveThreadsKeysChanged(),Array.from(this.instances.keys()).map(r=>p.jsx(this._OuterActiveThreadProvider,{threadId:r,provider:n},r))));this.parent=r,this.useRuntimeHook=Jn(()=>({useRuntime:n}))}startThreadRuntime(n){return this.instances.has(n)||(this.instances.set(n,{}),this.useAliveThreadsKeysChanged.setState({},!0)),new Promise((r,s)=>{const i=()=>{const o=this.instances.get(n);if(!o)a(),s(new Error("Thread was deleted before runtime was started"));else if(o.runtime)a(),r(o.runtime);else return},a=this.subscribe(i);i()})}getThreadRuntimeCore(n){const r=this.instances.get(n);if(r)return r.runtime}stopThreadRuntime(n){this.instances.delete(n),this.useAliveThreadsKeysChanged.setState({},!0)}setRuntimeHook(n){this.useRuntimeHook.getState().useRuntime!==n&&this.useRuntimeHook.setState({useRuntime:n},!0)}}const Te=new Error("This is the empty thread, a placeholder for the main thread. You cannot perform any actions on this thread instance. This error is probably because you tried to call a thread method in your render function. Call the method inside a `useEffect` hook instead."),XS={getMessageById(){},getBranches(){return[]},switchToBranch(){throw Te},append(){throw Te},startRun(){throw Te},resumeRun(){throw Te},cancelRun(){throw Te},addToolResult(){throw Te},resumeToolCall(){throw Te},speak(){throw Te},stopSpeaking(){throw Te},submitFeedback(){throw Te},getModelContext(){return{}},exportExternalState(){throw Te},importExternalState(){throw Te},unstable_loadExternalState(){throw Te},composer:{attachments:[],attachmentAccept:"*",async addAttachment(){throw Te},async removeAttachment(){throw Te},isEditing:!0,canCancel:!1,isEmpty:!0,text:"",setText(){throw Te},role:"user",setRole(){throw Te},runConfig:{},setRunConfig(){throw Te},async reset(){},async clearAttachments(){},send(){throw Te},cancel(){},dictation:void 0,startDictation(){throw Te},stopDictation(){},subscribe(){return()=>{}},unstable_on(){return()=>{}}},getEditComposer(){},beginEdit(){throw Te},speech:void 0,capabilities:{switchToBranch:!1,switchBranchDuringRun:!1,edit:!1,reload:!1,cancel:!1,unstable_copy:!1,speech:!1,dictation:!1,attachments:!1,feedback:!1},isDisabled:!1,isLoading:!1,messages:[],state:null,suggestions:[],extras:void 0,subscribe(){return()=>{}},import(){throw Te},export(){return{messages:[]}},reset(){throw Te},unstable_on(){return()=>{}}},_u=(e,t,n)=>n.reduce((r,s)=>(s==null?void 0:s(r,t))??r,e);class QS extends wi{constructor(n){super();S(this,"_pendingTransforms",[]);S(this,"_baseValue");S(this,"_cachedValue");this._baseValue=n,this._cachedValue=n}_updateState(){this._cachedValue=this._pendingTransforms.reduce((n,r)=>_u(n,r.task,[r.loading,r.optimistic]),this._baseValue),this._notifySubscribers()}get baseValue(){return this._baseValue}get value(){return this._cachedValue}update(n){this._baseValue=n,this._updateState()}async optimisticUpdate(n){const r=n.execute(),s={...n,task:r};try{this._pendingTransforms.push(s),this._updateState();const i=await r;return this._baseValue=_u(this._baseValue,i,[n.optimistic,n.then]),i}finally{const i=this._pendingTransforms.indexOf(s);i>-1&&this._pendingTransforms.splice(i,1),this._updateState()}}}const Ds=(e,t)=>{const n=e.threadIdMap[t];if(n!==void 0)return e.threadData[n]},ks=(e,t,n)=>{const r=Ds(e,t);if(!r)return e;const{id:s,remoteId:i,status:a}=r;if(a===n)return e;const o={...e};switch(a){case"new":o.newThreadId=void 0;break;case"regular":o.threadIds=o.threadIds.filter(l=>l!==s);break;case"archived":o.archivedThreadIds=o.archivedThreadIds.filter(l=>l!==s);break;default:{const l=a;throw new Error(`Unsupported state: ${l}`)}}switch(n){case"regular":o.threadIds=[s,...o.threadIds];break;case"archived":o.archivedThreadIds=[s,...o.archivedThreadIds];break;case"deleted":o.threadData=Object.fromEntries(Object.entries(o.threadData).filter(([l])=>l!==s)),o.threadIdMap=Object.fromEntries(Object.entries(o.threadIdMap).filter(([l])=>l!==s&&l!==i));break;default:{const l=n;throw new Error(`Unsupported state: ${l}`)}}return n!=="deleted"&&(o.threadData={...o.threadData,[s]:{...r,status:n}}),o};class eI extends wi{constructor(n,r){super();S(this,"contextProvider");S(this,"_options");S(this,"_hookManager");S(this,"_loadThreadsPromise");S(this,"_mainThreadId");S(this,"_state",new QS({isLoading:!1,newThreadId:void 0,threadIds:[],archivedThreadIds:[],threadIdMap:{},threadData:{}}));S(this,"useProvider");S(this,"initialize",async n=>{if(this._state.value.newThreadId!==n){const r=this.getItemById(n);if(!r)throw new Error("Thread not found");if(r.status==="new")throw new Error("Unexpected new state");return r.initializeTask}return this._state.optimisticUpdate({execute:()=>this._options.adapter.initialize(n),optimistic:r=>ks(r,n,"regular"),loading:(r,s)=>{const i=n;return{...r,threadData:{...r.threadData,[i]:{...r.threadData[i],initializeTask:s}}}},then:(r,{remoteId:s,externalId:i})=>{const a=Ds(r,n);if(!a)return r;const o=n;return{...r,threadIdMap:{...r.threadIdMap,[s]:o},threadData:{...r.threadData,[o]:{...a,initializeTask:Promise.resolve({remoteId:s,externalId:i}),remoteId:s,externalId:i}}}}})});S(this,"generateTitle",async n=>{var u;const r=this.getItemById(n);if(!r)throw new Error("Thread not found");if(r.status==="new")throw new Error("Thread is not yet initialized");const{remoteId:s}=await r.initializeTask,i=this._hookManager.getThreadRuntimeCore(r.id);if(!i)return;const a=i.messages,o=await this._options.adapter.generateTitle(s,a),l=Er.fromAssistantStream(o);for await(const c of l){const d=(u=c.parts.filter(f=>f.type==="text")[0])==null?void 0:u.text,h=this._state.baseValue;this._state.update({...h,threadData:{...h.threadData,[r.id]:{...r,title:d}}})}});S(this,"useBoundIds",Jn(()=>[]));S(this,"__internal_RenderComponent",()=>{const n=b.useId();b.useEffect(()=>(this.useBoundIds.setState(a=>[...a,n],!0),()=>{this.useBoundIds.setState(a=>a.filter(o=>o!==n),!0)}),[n]);const r=this.useBoundIds(),{Provider:s}=this.useProvider(),i={modelContext:this.contextProvider};return(r.length===0||r[0]===n)&&p.jsx(sp,{adapters:i,children:p.jsx(this._hookManager.__internal_RenderThreadRuntimes,{provider:s})})});this.contextProvider=r,this._state.subscribe(()=>this._notifySubscribers()),this._hookManager=new YS(n.runtimeHook,this),this.useProvider=Jn(()=>({Provider:n.adapter.unstable_Provider??b.Fragment})),this.__internal_setOptions(n),this.switchToNewThread()}get threadItems(){return this._state.value.threadData}getLoadThreadsPromise(){return this._loadThreadsPromise||(this._loadThreadsPromise=this._state.optimisticUpdate({execute:()=>this._options.adapter.list(),loading:n=>({...n,isLoading:!0}),then:(n,r)=>{const s=[],i=[],a={},o={};for(const l of r.threads){switch(l.status){case"regular":s.push(l.remoteId);break;case"archived":i.push(l.remoteId);break;default:{const c=l.status;throw new Error(`Unsupported state: ${c}`)}}const u=l.remoteId;a[l.remoteId]=u,o[u]={id:l.remoteId,remoteId:l.remoteId,externalId:l.externalId,status:l.status,title:l.title,initializeTask:Promise.resolve({remoteId:l.remoteId,externalId:l.externalId})}}return{...n,threadIds:s,archivedThreadIds:i,threadIdMap:{...n.threadIdMap,...a},threadData:{...n.threadData,...o}}}}).then(()=>{})),this._loadThreadsPromise}__internal_setOptions(n){if(this._options===n)return;this._options=n;const r=n.adapter.unstable_Provider??b.Fragment;r!==this.useProvider.getState().Provider&&this.useProvider.setState({Provider:r},!0),this._hookManager.setRuntimeHook(n.runtimeHook)}__internal_load(){this.getLoadThreadsPromise()}get isLoading(){return this._state.value.isLoading}get threadIds(){return this._state.value.threadIds}get archivedThreadIds(){return this._state.value.archivedThreadIds}get newThreadId(){return this._state.value.newThreadId}get mainThreadId(){return this._mainThreadId}getMainThreadRuntimeCore(){const n=this._hookManager.getThreadRuntimeCore(this._mainThreadId);return n||XS}getThreadRuntimeCore(n){const r=this.getItemById(n);if(!r)throw new Error("Thread not found");const s=this._hookManager.getThreadRuntimeCore(r.id);if(!s)throw new Error("Thread not found");return s}getItemById(n){return Ds(this._state.value,n)}async switchToThread(n){let r=this.getItemById(n);if(!r){const i=await this._options.adapter.fetch(n),a=this._state.value,o=i.remoteId,l={...a.threadData,[o]:{id:o,initializeTask:Promise.resolve({remoteId:i.remoteId,externalId:i.externalId}),remoteId:i.remoteId,externalId:i.externalId,status:i.status,title:i.title}},u={...a.threadIdMap,[i.remoteId]:o},c=i.status==="regular"?[...a.threadIds,i.remoteId]:a.threadIds,d=i.status==="archived"?[...a.archivedThreadIds,i.remoteId]:a.archivedThreadIds;this._state.update({...a,threadIds:c,archivedThreadIds:d,threadIdMap:u,threadData:l}),r=this.getItemById(n)}if(!r)throw new Error("Thread not found");if(this._mainThreadId===r.id)return;const s=this._hookManager.startThreadRuntime(r.id);this.mainThreadId!==void 0?await s:s.then(()=>this._notifySubscribers()),r.status==="archived"&&await this.unarchive(r.id),this._mainThreadId=r.id,this._notifySubscribers()}async switchToNewThread(){for(;this._state.baseValue.newThreadId!==void 0&&this._state.value.newThreadId===void 0;)await this._state.waitForUpdate();const n=this._state.value;let r=this._state.value.newThreadId;if(r===void 0){do r=`__LOCALID_${sr()}`;while(n.threadIdMap[r]);const s=r;this._state.update({...n,newThreadId:r,threadIdMap:{...n.threadIdMap,[r]:s},threadData:{...n.threadData,[s]:{status:"new",id:r,remoteId:void 0,externalId:void 0,title:void 0}}})}return this.switchToThread(r)}rename(n,r){const s=this.getItemById(n);if(!s)throw new Error("Thread not found");if(s.status==="new")throw new Error("Thread is not yet initialized");return this._state.optimisticUpdate({execute:async()=>{const{remoteId:i}=await s.initializeTask;return this._options.adapter.rename(i,r)},optimistic:i=>{const a=Ds(i,n);return a?{...i,threadData:{...i.threadData,[a.id]:{...a,title:r}}}:i}})}async _ensureThreadIsNotMain(n){if(n===this.newThreadId)throw new Error("Cannot ensure new thread is not main");n===this._mainThreadId&&await this.switchToNewThread()}async archive(n){const r=this.getItemById(n);if(!r)throw new Error("Thread not found");if(r.status!=="regular")throw new Error("Thread is not yet initialized or already archived");return this._state.optimisticUpdate({execute:async()=>{await this._ensureThreadIsNotMain(r.id);const{remoteId:s}=await r.initializeTask;return this._options.adapter.archive(s)},optimistic:s=>ks(s,r.id,"archived")})}unarchive(n){const r=this.getItemById(n);if(!r)throw new Error("Thread not found");if(r.status!=="archived")throw new Error("Thread is not archived");return this._state.optimisticUpdate({execute:async()=>{try{const{remoteId:s}=await r.initializeTask;return await this._options.adapter.unarchive(s)}catch(s){throw await this._ensureThreadIsNotMain(r.id),s}},optimistic:s=>ks(s,r.id,"regular")})}async delete(n){const r=this.getItemById(n);if(!r)throw new Error("Thread not found");if(r.status!=="regular"&&r.status!=="archived")throw new Error("Thread is not yet initialized");return this._state.optimisticUpdate({execute:async()=>{await this._ensureThreadIsNotMain(r.id);const{remoteId:s}=await r.initializeTask;return await this._options.adapter.delete(s)},optimistic:s=>ks(s,r.id,"deleted")})}async detach(n){const r=this.getItemById(n);if(!r)throw new Error("Thread not found");if(r.status!=="regular"&&r.status!=="archived")throw new Error("Thread is not yet initialized");await this._ensureThreadIsNotMain(r.id),this._hookManager.stopThreadRuntime(r.id)}}class tI extends Uo{constructor(n){super();S(this,"threads");this.threads=new eI(n,this._contextProvider)}get RenderComponent(){return this.threads.__internal_RenderComponent}}const nI=e=>{const[t]=b.useState(()=>new tI(e));return b.useEffect(()=>{t.threads.__internal_setOptions(e),t.threads.__internal_load()},[t,e]),b.useMemo(()=>new Jo(t),[t])},rI=e=>{if(ee().threadListItem.source!==null){if(!e.allowNesting)throw new Error("useRemoteThreadListRuntime cannot be nested inside another RemoteThreadListRuntime. Set allowNesting: true to allow nesting (the inner runtime will become a no-op).");return e.runtimeHook()}return nI(e)},sI=e=>{var n;const t=e;t.__isBound||((n=t.__internal_bindMethods)==null||n.call(t),t.__isBound=!0)};function iI(e,t=aI){sI(e);const n=b.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getState()));return b.useDebugValue(n),n}const aI=e=>e;function oI(e){function t(n){let r=!1,s;typeof n=="function"?s=n:n&&(r=!!n.optional,s=n.selector);const i=e({optional:r});return i?iI(i,s):null}return t}function lI(e){const t=ee(),n=Z(()=>{var r,s;return t.message.source?((s=(r=t.message()).__internal_getRuntime)==null?void 0:s.call(r))??null:null});if(!n&&!(e!=null&&e.optional))throw new Error("MessageRuntime is not available");return n}const uI=oI(lI);var cI=Symbol.for("react.lazy"),Ys=vb[" use ".trim().toString()];function dI(e){return typeof e=="object"&&e!==null&&"then"in e}function Sp(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===cI&&"_payload"in e&&dI(e._payload)}function Ip(e){const t=hI(e),n=b.forwardRef((r,s)=>{let{children:i,...a}=r;Sp(i)&&typeof Ys=="function"&&(i=Ys(i._payload));const o=b.Children.toArray(i),l=o.find(pI);if(l){const u=l.props.children,c=o.map(d=>d===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:d);return p.jsx(t,{...a,ref:s,children:b.isValidElement(u)?b.cloneElement(u,void 0,c):null})}return p.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var Ko=Ip("Slot");function hI(e){const t=b.forwardRef((n,r)=>{let{children:s,...i}=n;if(Sp(s)&&typeof Ys=="function"&&(s=Ys(s._payload)),b.isValidElement(s)){const a=gI(s),o=mI(i,s.props);return s.type!==b.Fragment&&(o.ref=r?bo(r,a):a),b.cloneElement(s,o)}return b.Children.count(s)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fI=Symbol("radix.slottable");function pI(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fI}function mI(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...o)=>{const l=i(...o);return s(...o),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function gI(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var yI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],De=yI.reduce((e,t)=>{const n=Ip(`Primitive.${t}`),r=b.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),$t;(function(e){e.Hidden="hidden",e.Floating="floating",e.Normal="normal"})($t||($t={}));const bI=({hideWhenRunning:e,autohide:t,autohideFloat:n})=>Z(({thread:r,message:s})=>e&&r.isRunning?$t.Hidden:t==="always"||t==="not-last"&&!s.isLast?s.isHovering?n==="always"||n==="single-branch"&&s.branchCount<=1?$t.Floating:$t.Normal:$t.Hidden:$t.Normal),Yo=b.forwardRef(({hideWhenRunning:e,autohide:t,autohideFloat:n,...r},s)=>{const i=bI({hideWhenRunning:e,autohide:t,autohideFloat:n});return i===$t.Hidden?null:p.jsx(De.div,{...i===$t.Floating?{"data-floating":"true"}:null,...r,ref:s})});Yo.displayName="ActionBarPrimitive.Root";const vI=({copiedDuration:e=3e3}={})=>{const t=ee(),n=Z(({message:a})=>{var o;return(a.role!=="assistant"||((o=a.status)==null?void 0:o.type)!=="running")&&a.parts.some(l=>l.type==="text"&&l.text.length>0)}),r=Z(({composer:a})=>a.isEditing),s=Z(({composer:a})=>a.text),i=b.useCallback(()=>{const a=r?s:t.message().getCopyText();a&&navigator.clipboard.writeText(a).then(()=>{t.message().setIsCopied(!0),setTimeout(()=>t.message().setIsCopied(!1),e)})},[t,r,s,e]);return n?i:null},Tp=b.forwardRef(({copiedDuration:e,onClick:t,disabled:n,...r},s)=>{const i=Z(({message:o})=>o.isCopied),a=vI({copiedDuration:e});return p.jsx(De.button,{type:"button",...i?{"data-copied":"true"}:{},...r,ref:s,disabled:n||!a,onClick:J(t,()=>{a==null||a()})})});Tp.displayName="ActionBarPrimitive.Copy";const ot=(e,t,n=[])=>{const r=b.forwardRef((s,i)=>{const a={},o={};Object.keys(s).forEach(u=>{n.includes(u)?a[u]=s[u]:o[u]=s[u]});const l=t(a)??void 0;return p.jsx(De.button,{type:"button",...o,ref:i,disabled:o.disabled||!l,onClick:J(o.onClick,l)})});return r.displayName=e,r},xI=()=>{const e=ee(),t=Z(r=>r.thread.isRunning||r.thread.isDisabled||r.message.role!=="assistant"),n=b.useCallback(()=>{e.message().reload()},[e]);return t?null:n},_I=ot("ActionBarPrimitive.Reload",xI),wI=()=>{const e=ee(),t=Z(({composer:r})=>r.isEditing),n=b.useCallback(()=>{e.composer().beginEdit()},[e]);return t?null:n},kI=ot("ActionBarPrimitive.Edit",wI),SI=({filename:e,onExport:t}={})=>{const n=ee(),r=Z(({message:i})=>{var a;return(i.role!=="assistant"||((a=i.status)==null?void 0:a.type)!=="running")&&i.parts.some(o=>o.type==="text"&&o.text.length>0)}),s=b.useCallback(async()=>{const i=n.message().getCopyText();if(!i)return;if(t){await t(i);return}const a=new Blob([i],{type:"text/markdown"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=e??`message-${Date.now()}.md`,l.click(),URL.revokeObjectURL(o)},[n,e,t]);return r?s:null},Cp=b.forwardRef(({filename:e,onExport:t,onClick:n,disabled:r,...s},i)=>{const a=SI({filename:e,onExport:t});return p.jsx(De.button,{type:"button",...s,ref:i,disabled:r||!a,onClick:J(n,()=>{a==null||a()})})});Cp.displayName="ActionBarPrimitive.ExportMarkdown";const Ti=tf(),Ep=({__scopeActionBarMore:e,...t})=>{const n=Ti(e);return p.jsx(df,{...n,...t})};Ep.displayName="ActionBarMorePrimitive.Root";const Rp=b.forwardRef(({__scopeActionBarMore:e,...t},n)=>{const r=Ti(e);return p.jsx(hf,{...r,...t,ref:n})});Rp.displayName="ActionBarMorePrimitive.Trigger";const Ap=b.forwardRef(({__scopeActionBarMore:e,portalProps:t,sideOffset:n=4,...r},s)=>{const i=Ti(e);return p.jsx(ff,{...i,...t,children:p.jsx(pf,{...i,...r,ref:s,sideOffset:n})})});Ap.displayName="ActionBarMorePrimitive.Content";const Pp=b.forwardRef(({__scopeActionBarMore:e,...t},n)=>{const r=Ti(e);return p.jsx(mf,{...r,...t,ref:n})});Pp.displayName="ActionBarMorePrimitive.Item";const Mp=b.forwardRef((e,t)=>p.jsx(De.div,{...e,ref:t}));Mp.displayName="AttachmentPrimitive.Root";const Np=()=>{const e=Z(({attachment:t})=>t.name);return p.jsx(p.Fragment,{children:e})};Np.displayName="AttachmentPrimitive.Name";const II=()=>{const e=ee();return b.useCallback(()=>{e.attachment().remove()},[e])},TI=ot("AttachmentPrimitive.Remove",II),CI=()=>{const e=ee(),t=Z(({thread:r,message:s})=>!!(s.branchNumber>=s.branchCount||r.isRunning&&!r.capabilities.switchBranchDuringRun)),n=b.useCallback(()=>{e.message().switchToBranch({position:"next"})},[e]);return t?null:n},EI=ot("BranchPickerPrimitive.Next",CI),RI=()=>{const e=ee(),t=Z(({thread:r,message:s})=>!!(s.branchNumber<=1||r.isRunning&&!r.capabilities.switchBranchDuringRun)),n=b.useCallback(()=>{e.message().switchToBranch({position:"previous"})},[e]);return t?null:n},AI=ot("BranchPickerPrimitive.Previous",RI),PI=()=>Z(({message:t})=>t.branchCount),Op=()=>{const e=PI();return p.jsx(p.Fragment,{children:e})};Op.displayName="BranchPickerPrimitive.Count";const MI=()=>Z(({message:t})=>t.branchNumber),jp=()=>{const e=MI();return p.jsx(p.Fragment,{children:e})};jp.displayName="BranchPickerPrimitive.Number";const is=e=>{const t=b.useRef(void 0);return b.useCallback(r=>{t.current&&t.current(),r&&(t.current=e(r))},[e])},Xo=(e,t)=>{const n=b.useCallback(r=>{if(!e)return;const s=e(),i=()=>{const o=t?t(r):r.offsetHeight;s.setHeight(o)},a=new ResizeObserver(i);return a.observe(r),i(),()=>{a.disconnect(),s.unregister()}},[e,t]);return is(n)},wu=b.createContext(!1),ku=(e,t)=>{const n=e.match(/^([\d.]+)(em|px|rem)$/);if(!n)return 0;const r=parseFloat(n[1]),s=n[2];if(s==="px")return r;if(s==="em"){const i=parseFloat(getComputedStyle(t).fontSize)||16;return r*i}if(s==="rem"){const i=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;return r*i}return 0},Dp=({children:e,fillClampThreshold:t="10em",fillClampOffset:n="6em"})=>{const r=Z(({thread:l,message:u})=>{var c;return u.isLast&&u.role==="assistant"&&u.index>=1&&((c=l.messages.at(u.index-1))==null?void 0:c.role)==="user"}),s=Ii({optional:!0}),i=b.useContext(wu),a=b.useCallback(l=>{if(!s||i)return;const u=()=>{const c=s.getState();if(c.turnAnchor==="top"&&r){const{viewport:d,inset:h,userMessage:f}=c.height,m=ku(t,l),y=ku(n,l),v=f<=m?f:y,g=Math.max(0,d-h-v);l.style.minHeight=`${g}px`,l.style.flexShrink="0",l.style.transition="min-height 0s"}else l.style.minHeight="",l.style.flexShrink="",l.style.transition=""};return u(),s.subscribe(u)},[s,r,i,t,n]),o=is(a);return p.jsx(wu.Provider,{value:!0,children:p.jsx(Ko,{ref:o,children:e})})};Dp.displayName="ThreadPrimitive.ViewportSlack";const NI=()=>{const e=ee(),t=Z(()=>e.message()),n=b.useCallback(r=>{const s=()=>{t.setIsHovering(!0)},i=()=>{t.setIsHovering(!1)};return r.addEventListener("mouseenter",s),r.addEventListener("mouseleave",i),r.matches(":hover")&&queueMicrotask(()=>t.setIsHovering(!0)),()=>{r.removeEventListener("mouseenter",s),r.removeEventListener("mouseleave",i),t.setIsHovering(!1)}},[t]);return is(n)},OI=()=>{const e=Kn(s=>s.turnAnchor),t=Kn(s=>s.registerUserMessageHeight),n=Z(({thread:s,message:i})=>{var a;return e==="top"&&i.role==="user"&&i.index===s.messages.length-2&&((a=s.messages.at(-1))==null?void 0:a.role)==="assistant"}),r=b.useCallback(s=>s.offsetHeight,[]);return Xo(n?t:null,r)},Ci=b.forwardRef((e,t)=>{const n=NI(),r=OI(),s=$e(t,n,r);return p.jsx(Dp,{children:p.jsx(De.div,{...e,ref:s})})});Ci.displayName="MessagePrimitive.Root";const jI=Object.freeze({type:"complete"}),DI=fe(({parts:e,getMessagePart:t})=>{const[n,r]=_t(!0),s=oe(()=>{const a=e[e.length-1];return(a==null?void 0:a.status)??jI},[e]),i=oe(()=>({parts:e,collapsed:n,status:s}),[e,n,s]);return{state:i,methods:{getState:()=>i,setCollapsed:r,part:t}}}),zI=({startIndex:e,endIndex:t,children:n})=>{const r=Z(({message:a})=>a.parts).slice(e,t+1),s=ee(),i=ee({chainOfThought:DI({parts:r,getMessagePart:({index:a})=>{if(a<0||a>=r.length)throw new Error(`ChainOfThought part index ${a} is out of bounds (0..${r.length-1})`);return s.message().part({index:e+a})}})});return p.jsx(Nt,{value:i,children:n})},LI=()=>Z(({part:t})=>{if(t.type!=="text"&&t.type!=="reasoning")throw new Error("MessagePartText can only be used inside text or reasoning message parts.");return t}),zp=b.forwardRef(({smooth:e=!0,component:t="span",...n},r)=>{const{text:s,status:i}=mp(LI(),e);return p.jsx(t,{"data-status":i.type,...n,ref:r,children:s})});zp.displayName="MessagePartPrimitive.Text";const $I=()=>Z(({part:t})=>{if(t.type!=="image")throw new Error("MessagePartImage can only be used inside image message parts.");return t}),Lp=b.forwardRef((e,t)=>{const{image:n}=$I();return p.jsx(De.img,{src:n,...e,ref:t})});Lp.displayName="MessagePartPrimitive.Image";const $p=({children:e})=>Z(({part:n})=>n.status.type==="running")?e:null;$p.displayName="MessagePartPrimitive.InProgress";const Su=e=>Symbol.iterator in e,Iu=e=>"entries"in e,Tu=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[s,i]of n)if(!r.has(s)||!Object.is(i,r.get(s)))return!1;return!0},FI=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let s=n.next(),i=r.next();for(;!s.done&&!i.done;){if(!Object.is(s.value,i.value))return!1;s=n.next(),i=r.next()}return!!s.done&&!!i.done};function BI(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Su(e)&&Su(t)?Iu(e)&&Iu(t)?Tu(e,t):FI(e,t):Tu({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function Fp(e){const t=Pe.useRef(void 0);return n=>{const r=e(n);return BI(t.current,r)?t.current:t.current=r}}const ra=e=>{let t=-1;return{startGroup:n=>{t===-1&&(t=n)},endGroup:(n,r)=>{t!==-1&&(r.push({type:e,startIndex:t,endIndex:n}),t=-1)},finalize:(n,r)=>{t!==-1&&r.push({type:e,startIndex:t,endIndex:n})}}},UI=(e,t)=>{const n=[];if(t){const r=ra("chainOfThoughtGroup");for(let s=0;s<e.length;s++){const i=e[s];i==="tool-call"||i==="reasoning"?r.startGroup(s):(r.endGroup(s-1,n),n.push({type:"single",index:s}))}r.finalize(e.length-1,n)}else{const r=ra("toolGroup"),s=ra("reasoningGroup");for(let i=0;i<e.length;i++){const a=e[i];a==="tool-call"?(s.endGroup(i-1,n),r.startGroup(i)):a==="reasoning"?(r.endGroup(i-1,n),s.startGroup(i)):(r.endGroup(i-1,n),s.endGroup(i-1,n),n.push({type:"single",index:i}))}r.finalize(e.length-1,n),s.finalize(e.length-1,n)}return n},ZI=e=>{const t=Z(Fp(n=>n.message.parts.map(r=>r.type)));return b.useMemo(()=>t.length===0?[]:UI(t,e),[t,e])},VI=({Fallback:e,...t})=>{const n=Z(({tools:r})=>{const s=r.tools[t.toolName]??e;return Array.isArray(s)?s[0]??e:s});return n?p.jsx(n,{...t}):null},Lt={Text:()=>p.jsxs("p",{style:{whiteSpace:"pre-line"},children:[p.jsx(zp,{}),p.jsx($p,{children:p.jsx("span",{style:{fontFamily:"revert"},children:" "})})]}),Reasoning:()=>null,Source:()=>null,Image:()=>p.jsx(Lp,{}),File:()=>null,Unstable_Audio:()=>null,ToolGroup:({children:e})=>e,ReasoningGroup:({children:e})=>e},qI=({components:{Text:e=Lt.Text,Reasoning:t=Lt.Reasoning,Image:n=Lt.Image,Source:r=Lt.Source,File:s=Lt.File,Unstable_Audio:i=Lt.Unstable_Audio,tools:a={}}={}})=>{var c,d;const o=ee(),l=Z(({part:h})=>h),u=l.type;if(u==="tool-call"){const h=o.part().addToolResult,f=o.part().resumeToolCall;if("Override"in a)return p.jsx(a.Override,{...l,addResult:h,resume:f});const m=((c=a.by_name)==null?void 0:c[l.toolName])??a.Fallback;return p.jsx(VI,{...l,Fallback:m,addResult:h,resume:f})}if(((d=l.status)==null?void 0:d.type)==="requires-action")throw new Error("Encountered unexpected requires-action status");switch(u){case"text":return p.jsx(e,{...l});case"reasoning":return p.jsx(t,{...l});case"source":return p.jsx(r,{...l});case"image":return p.jsx(n,{...l});case"file":return p.jsx(s,{...l});case"audio":return p.jsx(i,{...l});case"data":return null;default:const h=u;throw new Error(`Unknown message part type: ${h}`)}},zs=b.memo(({index:e,components:t})=>p.jsx(HS,{index:e,children:p.jsx(qI,{components:t})}),(e,t)=>{var n,r,s,i,a,o,l,u,c,d,h,f,m,y,v,g,_,x;return e.index===t.index&&((n=e.components)==null?void 0:n.Text)===((r=t.components)==null?void 0:r.Text)&&((s=e.components)==null?void 0:s.Reasoning)===((i=t.components)==null?void 0:i.Reasoning)&&((a=e.components)==null?void 0:a.Source)===((o=t.components)==null?void 0:o.Source)&&((l=e.components)==null?void 0:l.Image)===((u=t.components)==null?void 0:u.Image)&&((c=e.components)==null?void 0:c.File)===((d=t.components)==null?void 0:d.File)&&((h=e.components)==null?void 0:h.Unstable_Audio)===((f=t.components)==null?void 0:f.Unstable_Audio)&&((m=e.components)==null?void 0:m.tools)===((y=t.components)==null?void 0:y.tools)&&((v=e.components)==null?void 0:v.ToolGroup)===((g=t.components)==null?void 0:g.ToolGroup)&&((_=e.components)==null?void 0:_.ReasoningGroup)===((x=t.components)==null?void 0:x.ReasoningGroup)});zs.displayName="MessagePrimitive.PartByIndex";const HI=({status:e,component:t})=>p.jsx(KS,{text:"",isRunning:e.type==="running",children:p.jsx(t,{type:"text",text:"",status:e})}),WI=Object.freeze({type:"complete"}),GI=({components:e})=>{const t=Z(n=>n.message.status??WI);return e!=null&&e.Empty?p.jsx(e.Empty,{status:t}):p.jsx(HI,{status:t,component:(e==null?void 0:e.Text)??Lt.Text})},Bp=b.memo(GI,(e,t)=>{var n,r,s,i;return((n=e.components)==null?void 0:n.Empty)===((r=t.components)==null?void 0:r.Empty)&&((s=e.components)==null?void 0:s.Text)===((i=t.components)==null?void 0:i.Text)}),JI=({components:e,enabled:t})=>Z(({message:r})=>{if(!t||r.parts.length===0)return!1;const s=r.parts[r.parts.length-1];return(s==null?void 0:s.type)!=="text"&&(s==null?void 0:s.type)!=="reasoning"})?p.jsx(Bp,{components:e}):null,KI=b.memo(JI,(e,t)=>{var n,r,s,i;return e.enabled===t.enabled&&((n=e.components)==null?void 0:n.Empty)===((r=t.components)==null?void 0:r.Empty)&&((s=e.components)==null?void 0:s.Text)===((i=t.components)==null?void 0:i.Text)}),Qo=({components:e,unstable_showEmptyOnNonTextEnd:t=!0})=>{const n=Z(({message:a})=>a.parts.length),r=!!(e!=null&&e.ChainOfThought),s=ZI(r),i=b.useMemo(()=>n===0?p.jsx(Bp,{components:e}):s.map(a=>{if(a.type==="single")return p.jsx(zs,{index:a.index,components:e},a.index);if(a.type==="chainOfThoughtGroup"){const o=e==null?void 0:e.ChainOfThought;return o?p.jsx(zI,{startIndex:a.startIndex,endIndex:a.endIndex,children:p.jsx(o,{})},`chainOfThought-${a.startIndex}`):null}else if(a.type==="toolGroup"){const o=(e==null?void 0:e.ToolGroup)??Lt.ToolGroup;return p.jsx(o,{startIndex:a.startIndex,endIndex:a.endIndex,children:Array.from({length:a.endIndex-a.startIndex+1},(l,u)=>p.jsx(zs,{index:a.startIndex+u,components:e},u))},`tool-${a.startIndex}`)}else{const o=(e==null?void 0:e.ReasoningGroup)??Lt.ReasoningGroup;return p.jsx(o,{startIndex:a.startIndex,endIndex:a.endIndex,children:Array.from({length:a.endIndex-a.startIndex+1},(l,u)=>p.jsx(zs,{index:a.startIndex+u,components:e},u))},`reasoning-${a.startIndex}`)}}),[s,e,n]);return p.jsxs(p.Fragment,{children:[i,p.jsx(KI,{components:e,enabled:t})]})};Qo.displayName="MessagePrimitive.Parts";const YI=e=>Z(({message:t})=>{var c;const{role:n,attachments:r,parts:s,branchCount:i,isLast:a,speech:o,isCopied:l,isHovering:u}=t;return!(e.hasBranches===!0&&i<2||e.user&&n!=="user"||e.assistant&&n!=="assistant"||e.system&&n!=="system"||e.lastOrHover===!0&&!u&&!a||e.last!==void 0&&e.last!==a||e.copied===!0&&!l||e.copied===!1&&l||e.speaking===!0&&o==null||e.speaking===!1&&o!=null||e.hasAttachments===!0&&(n!=="user"||!(r!=null&&r.length))||e.hasAttachments===!1&&n==="user"&&(r!=null&&r.length)||e.hasContent===!0&&s.length===0||e.hasContent===!1&&s.length>0||e.submittedFeedback!==void 0&&(((c=t.metadata.submittedFeedback)==null?void 0:c.type)??null)!==e.submittedFeedback)}),Up=({children:e,...t})=>YI(t)?e:null;Up.displayName="MessagePrimitive.If";const XI=(e,t)=>{const n=t.type;switch(n){case"image":return(e==null?void 0:e.Image)??(e==null?void 0:e.Attachment);case"document":return(e==null?void 0:e.Document)??(e==null?void 0:e.Attachment);case"file":return(e==null?void 0:e.File)??(e==null?void 0:e.Attachment);default:const r=n;throw new Error(`Unknown attachment type: ${r}`)}},QI=({components:e})=>{const t=Z(({attachment:r})=>r);if(!t)return null;const n=XI(e,t);return n?p.jsx(n,{}):null},Zp=b.memo(({index:e,components:t})=>p.jsx(WS,{index:e,children:p.jsx(QI,{components:t})}),(e,t)=>{var n,r,s,i,a,o,l,u;return e.index===t.index&&((n=e.components)==null?void 0:n.Image)===((r=t.components)==null?void 0:r.Image)&&((s=e.components)==null?void 0:s.Document)===((i=t.components)==null?void 0:i.Document)&&((a=e.components)==null?void 0:a.File)===((o=t.components)==null?void 0:o.File)&&((l=e.components)==null?void 0:l.Attachment)===((u=t.components)==null?void 0:u.Attachment)});Zp.displayName="MessagePrimitive.AttachmentByIndex";const Vp=({components:e})=>{const t=Z(({message:r})=>r.role!=="user"?0:r.attachments.length);return b.useMemo(()=>Array.from({length:t},(r,s)=>p.jsx(Zp,{index:s,components:e},s)),[t,e])};Vp.displayName="MessagePrimitive.Attachments";const qp=({children:e})=>Z(({message:n})=>{var r;return((r=n.status)==null?void 0:r.type)==="incomplete"&&n.status.reason==="error"})?e:null;qp.displayName="MessagePrimitive.Error";const Hp=b.forwardRef(({hideWhenSingleBranch:e,...t},n)=>p.jsx(Up,{hasBranches:e?!0:void 0,children:p.jsx(De.div,{...t,ref:n})}));Hp.displayName="BranchPickerPrimitive.Root";const Wp=()=>{const e=ee(),t=Z(r=>r.thread.isRunning||!r.composer.isEditing||r.composer.isEmpty),n=b.useCallback(()=>{e.composer().send()},[e]);return t?null:n},Gp=ot("ComposerPrimitive.Send",Wp),el=b.forwardRef(({onSubmit:e,...t},n)=>{const r=Wp(),s=i=>{i.preventDefault(),r&&r()};return p.jsx(De.form,{...t,ref:n,onSubmit:J(e,s)})});el.displayName="ComposerPrimitive.Root";function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ba.apply(null,arguments)}function eT(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tT=b.useLayoutEffect,nT=function(t){var n=Pe.useRef(t);return tT(function(){n.current=t}),n},Cu=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},rT=function(t,n){var r=Pe.useRef();return Pe.useCallback(function(s){t.current=s,r.current&&Cu(r.current,null),r.current=n,n&&Cu(n,s)},[n])},Eu={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},sT=function(t){Object.keys(Eu).forEach(function(n){t.style.setProperty(n,Eu[n],"important")})},Ru=sT,He=null,Au=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function iT(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),He||(He=document.createElement("textarea"),He.setAttribute("tabindex","-1"),He.setAttribute("aria-hidden","true"),Ru(He)),He.parentNode===null&&document.body.appendChild(He);var s=e.paddingSize,i=e.borderSize,a=e.sizingStyle,o=a.boxSizing;Object.keys(a).forEach(function(h){var f=h;He.style[f]=a[f]}),Ru(He),He.value=t;var l=Au(He,e);He.value=t,l=Au(He,e),He.value="x";var u=He.scrollHeight-s,c=u*n;o==="border-box"&&(c=c+s+i),l=Math.max(c,l);var d=u*r;return o==="border-box"&&(d=d+s+i),l=Math.min(d,l),[l,u]}var Pu=function(){},aT=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},oT=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],lT=!!document.documentElement.currentStyle,uT=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=aT(oT,n),s=r.boxSizing;if(s==="")return null;lT&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:a}},cT=uT;function tl(e,t,n){var r=nT(n);b.useLayoutEffect(function(){var s=function(a){return r.current(a)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var dT=function(t,n){tl(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},hT=function(t){tl(window,"resize",t)},fT=function(t){tl(document.fonts,"loadingdone",t)},pT=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],mT=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,i=t.minRows,a=t.onChange,o=a===void 0?Pu:a,l=t.onHeightChange,u=l===void 0?Pu:l,c=eT(t,pT),d=c.value!==void 0,h=b.useRef(null),f=rT(h,n),m=b.useRef(0),y=b.useRef(),v=function(){var x=h.current,T=r&&y.current?y.current:cT(x);if(T){y.current=T;var E=iT(T,x.value||x.placeholder||"x",i,s),I=E[0],P=E[1];m.current!==I&&(m.current=I,x.style.setProperty("height",I+"px","important"),u(I,{rowHeight:P}))}},g=function(x){d||v(),o(x)};return b.useLayoutEffect(v),dT(h,function(){if(!d){var _=h.current.value;requestAnimationFrame(function(){var x=h.current;x&&_!==x.value&&v()})}}),hT(v),fT(v),b.createElement("textarea",Ba({},c,{onChange:g,ref:f}))},gT=b.forwardRef(mT);const Jp=e=>{const t=Ft(e),n=Kn(r=>r.onScrollToBottom);b.useEffect(()=>n(t),[n,t])},nl=b.forwardRef(({autoFocus:e=!1,asChild:t,disabled:n,onChange:r,onKeyDown:s,onPaste:i,submitOnEnter:a=!0,cancelOnEscape:o=!0,unstable_focusOnRunStart:l=!0,unstable_focusOnScrollToBottom:u=!0,unstable_focusOnThreadSwitched:c=!0,addAttachmentOnPaste:d=!0,...h},f)=>{const m=ee(),y=Z(({composer:N})=>N.isEditing?N.text:""),v=t?Ko:gT,g=Z(({thread:N,composer:q})=>{var C;return N.isDisabled||((C=q.dictation)==null?void 0:C.inputDisabled)})||n,_=b.useRef(null),x=$e(f,_);mb(N=>{var C;if(!o||!((C=_.current)!=null&&C.contains(N.target)))return;const q=m.composer();q.getState().canCancel&&(q.cancel(),N.preventDefault())});const T=N=>{var q,C;g||!a||N.nativeEvent.isComposing||N.key==="Enter"&&N.shiftKey===!1&&(m.thread().getState().isRunning||(N.preventDefault(),(C=(q=_.current)==null?void 0:q.closest("form"))==null||C.requestSubmit()))},E=async N=>{var L;if(!d)return;const q=m.thread().getState().capabilities,C=Array.from(((L=N.clipboardData)==null?void 0:L.files)||[]);if(q.attachments&&C.length>0)try{N.preventDefault(),await Promise.all(C.map(F=>m.composer().addAttachment(F)))}catch(F){console.error("Error adding attachment:",F)}},I=e&&!g,P=b.useCallback(()=>{const N=_.current;!N||!I||(N.focus({preventScroll:!0}),N.setSelectionRange(N.value.length,N.value.length))},[I]);return b.useEffect(()=>P(),[P]),Jp(()=>{m.composer().getState().type==="thread"&&u&&P()}),b.useEffect(()=>{if(!(m.composer().getState().type!=="thread"||!l))return m.on("thread.runStart",P)},[l,P,m]),b.useEffect(()=>{if(!(m.composer().getState().type!=="thread"||!c))return m.on("threadListItem.switchedTo",P)},[c,P,m]),p.jsx(v,{name:"input",value:y,...h,ref:x,disabled:g,onChange:J(r,N=>{m.composer().getState().isEditing&&wf(()=>{m.composer().setText(N.target.value)})}),onKeyDown:J(s,T),onPaste:J(i,E)})});nl.displayName="ComposerPrimitive.Input";const yT=()=>{const e=ee(),t=Z(({composer:r})=>!r.canCancel),n=b.useCallback(()=>{e.composer().cancel()},[e]);return t?null:n},Kp=ot("ComposerPrimitive.Cancel",yT),bT=({multiple:e=!0}={})=>{const t=Z(({composer:s})=>!s.isEditing),n=ee(),r=b.useCallback(()=>{const s=document.createElement("input");s.type="file",s.multiple=e,s.hidden=!0;const i=n.composer().getState().attachmentAccept;i!=="*"&&(s.accept=i),document.body.appendChild(s),s.onchange=a=>{const o=a.target.files;if(o){for(const l of o)n.composer().addAttachment(l);document.body.removeChild(s)}},s.oncancel=()=>{(!s.files||s.files.length===0)&&document.body.removeChild(s)},s.click()},[n,e]);return t?null:r},vT=ot("ComposerPrimitive.AddAttachment",bT,["multiple"]),xT=(e,t)=>{const n=t.type;switch(n){case"image":return(e==null?void 0:e.Image)??(e==null?void 0:e.Attachment);case"document":return(e==null?void 0:e.Document)??(e==null?void 0:e.Attachment);case"file":return(e==null?void 0:e.File)??(e==null?void 0:e.Attachment);default:const r=n;throw new Error(`Unknown attachment type: ${r}`)}},_T=({components:e})=>{const t=Z(({attachment:r})=>r);if(!t)return null;const n=xT(e,t);return n?p.jsx(n,{}):null},Yp=b.memo(({index:e,components:t})=>p.jsx(GS,{index:e,children:p.jsx(_T,{components:t})}),(e,t)=>{var n,r,s,i,a,o,l,u;return e.index===t.index&&((n=e.components)==null?void 0:n.Image)===((r=t.components)==null?void 0:r.Image)&&((s=e.components)==null?void 0:s.Document)===((i=t.components)==null?void 0:i.Document)&&((a=e.components)==null?void 0:a.File)===((o=t.components)==null?void 0:o.File)&&((l=e.components)==null?void 0:l.Attachment)===((u=t.components)==null?void 0:u.Attachment)});Yp.displayName="ComposerPrimitive.AttachmentByIndex";const Xp=({components:e})=>{const t=Z(r=>r.composer.attachments.length);return b.useMemo(()=>Array.from({length:t},(r,s)=>p.jsx(Yp,{index:s,components:e},s)),[t,e])};Xp.displayName="ComposerPrimitive.Attachments";const Qp=b.forwardRef(({disabled:e,asChild:t=!1,children:n,...r},s)=>{const[i,a]=b.useState(!1),o=ee(),l=b.useCallback(m=>{e||(m.preventDefault(),a(!0))},[e]),u=b.useCallback(m=>{e||(m.preventDefault(),i||a(!0))},[e,i]),c=b.useCallback(m=>{if(e)return;m.preventDefault();const y=m.relatedTarget;y&&m.currentTarget.contains(y)||a(!1)},[e]),d=b.useCallback(async m=>{if(!e){m.preventDefault(),a(!1);for(const y of m.dataTransfer.files)try{await o.composer().addAttachment(y)}catch(v){console.error("Failed to add attachment:",v)}}},[e,o]),h={onDragEnterCapture:l,onDragOverCapture:u,onDragLeaveCapture:c,onDropCapture:d},f=t?Ko:"div";return p.jsx(f,{...i?{"data-dragging":"true"}:null,ref:s,...h,...r,children:n})});Qp.displayName="ComposerPrimitive.AttachmentDropzone";const em=b.forwardRef((e,t)=>p.jsx(De.div,{role:"alert",...e,ref:t}));em.displayName="ErrorPrimitive.Root";const tm=b.forwardRef(({children:e,...t},n)=>{const r=Z(({message:s})=>{var i;return((i=s.status)==null?void 0:i.type)==="incomplete"&&s.status.reason==="error"?s.status.error:void 0});return r===void 0?null:p.jsx(De.span,{...t,ref:n,children:e??String(r)})});tm.displayName="ErrorPrimitive.Message";const nm=b.forwardRef((e,t)=>p.jsx(De.div,{...e,ref:t}));nm.displayName="ThreadPrimitive.Root";const wT=e=>{const t=Ft(e),n=b.useCallback(r=>{const s=new ResizeObserver(()=>{t()}),i=new MutationObserver(a=>{a.some(l=>l.type!=="attributes"||l.attributeName!=="style")&&t()});return s.observe(r),i.observe(r,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{s.disconnect(),i.disconnect()}},[t]);return is(n)},kT=({autoScroll:e,scrollToBottomOnRunStart:t=!0,scrollToBottomOnInitialize:n=!0,scrollToBottomOnThreadSwitch:r=!0})=>{const s=b.useRef(null),i=Ii();e===void 0&&(e=i.getState().turnAnchor!=="top");const a=b.useRef(0),o=b.useRef(null),l=b.useCallback(f=>{const m=s.current;m&&(o.current=f,m.scrollTo({top:m.scrollHeight,behavior:f}))},[]),u=()=>{const f=s.current;if(!f)return;const m=i.getState().isAtBottom,y=Math.abs(f.scrollHeight-f.scrollTop-f.clientHeight)<1||f.scrollHeight<=f.clientHeight;!y&&a.current<f.scrollTop||(y&&(o.current=null),(y||o.current===null)&&y!==m&&Lr(i).setState({isAtBottom:y})),a.current=f.scrollTop},c=wT(()=>{const f=o.current;f?l(f):e&&i.getState().isAtBottom&&l("instant"),u()}),d=is(f=>(f.addEventListener("scroll",u),()=>{f.removeEventListener("scroll",u)}));return Jp(({behavior:f})=>{l(f)}),Ji("thread.runStart",()=>{t&&(o.current="auto",requestAnimationFrame(()=>{l("auto")}))}),Ji("thread.initialize",()=>{n&&(o.current="instant",requestAnimationFrame(()=>{l("instant")}))}),Ji("threadListItem.switchedTo",()=>{r&&(o.current="instant",requestAnimationFrame(()=>{l("instant")}))}),$e(c,d,s)},ST=()=>{const e=Kn(n=>n.registerViewport),t=b.useCallback(n=>n.clientHeight,[]);return Xo(e,t)},rm=b.forwardRef(({autoScroll:e,scrollToBottomOnRunStart:t,scrollToBottomOnInitialize:n,scrollToBottomOnThreadSwitch:r,children:s,...i},a)=>{const o=kT({autoScroll:e,scrollToBottomOnRunStart:t,scrollToBottomOnInitialize:n,scrollToBottomOnThreadSwitch:r}),l=ST(),u=$e(a,o,l);return p.jsx(De.div,{...i,ref:u,children:s})});rm.displayName="ThreadPrimitive.ViewportScrollable";const sm=b.forwardRef(({turnAnchor:e,...t},n)=>p.jsx(kp,{options:{turnAnchor:e},children:p.jsx(rm,{...t,ref:n})}));sm.displayName="ThreadPrimitive.Viewport";const im=b.forwardRef((e,t)=>{const n=Kn(a=>a.registerContentInset),r=b.useCallback(a=>{const o=parseFloat(getComputedStyle(a).marginTop)||0;return a.offsetHeight+o},[]),s=Xo(n,r),i=$e(t,s);return p.jsx(De.div,{...e,ref:i})});im.displayName="ThreadPrimitive.ViewportFooter";const am=(e,t)=>e.Message===t.Message&&e.EditComposer===t.EditComposer&&e.UserEditComposer===t.UserEditComposer&&e.AssistantEditComposer===t.AssistantEditComposer&&e.SystemEditComposer===t.SystemEditComposer&&e.UserMessage===t.UserMessage&&e.AssistantMessage===t.AssistantMessage&&e.SystemMessage===t.SystemMessage,IT=()=>null,TT=(e,t,n)=>{switch(t){case"user":return n?e.UserEditComposer??e.EditComposer??e.UserMessage??e.Message:e.UserMessage??e.Message;case"assistant":return n?e.AssistantEditComposer??e.EditComposer??e.AssistantMessage??e.Message:e.AssistantMessage??e.Message;case"system":return n?e.SystemEditComposer??e.EditComposer??e.SystemMessage??e.Message:e.SystemMessage??IT;default:const r=t;throw new Error(`Unknown message role: ${r}`)}},CT=({components:e})=>{const t=Z(({message:s})=>s.role),n=Z(({message:s})=>s.composer.isEditing),r=TT(e,t,n);return p.jsx(r,{})},om=b.memo(({index:e,components:t})=>p.jsx(VS,{index:e,children:p.jsx(CT,{components:t})}),(e,t)=>e.index===t.index&&am(e.components,t.components));om.displayName="ThreadPrimitive.MessageByIndex";const lm=({components:e})=>{const t=Z(({thread:r})=>r.messages.length);return b.useMemo(()=>t===0?null:Array.from({length:t},(r,s)=>p.jsx(om,{index:s,components:e},s)),[t,e])};lm.displayName="ThreadPrimitive.Messages";const ET=b.memo(lm,(e,t)=>am(e.components,t.components)),RT=({behavior:e}={})=>{const t=Kn(s=>s.isAtBottom),n=Ii(),r=b.useCallback(()=>{n.getState().scrollToBottom({behavior:e})},[n,e]);return t?null:r},AT=ot("ThreadPrimitive.ScrollToBottom",RT,["behavior"]),PT=({components:e})=>{const t=e.Suggestion;return p.jsx(t,{})},um=b.memo(({index:e,components:t})=>p.jsx(qS,{index:e,children:p.jsx(PT,{components:t})}),(e,t)=>e.index===t.index&&e.components.Suggestion===t.components.Suggestion);um.displayName="ThreadPrimitive.SuggestionByIndex";const cm=({components:e})=>{const t=Z(({suggestions:r})=>r.suggestions.length);return b.useMemo(()=>t===0?null:Array.from({length:t},(r,s)=>p.jsx(um,{index:s,components:e},s)),[t,e])};cm.displayName="ThreadPrimitive.Suggestions";const MT=b.memo(cm,(e,t)=>e.components.Suggestion===t.components.Suggestion),dm=b.forwardRef((e,t)=>{const n=Z(({suggestion:r})=>r.title);return p.jsx(De.span,{...e,ref:t,children:e.children??n})});dm.displayName="SuggestionPrimitive.Title";const hm=b.forwardRef((e,t)=>{const n=Z(({suggestion:r})=>r.label);return p.jsx(De.span,{...e,ref:t,children:e.children??n})});hm.displayName="SuggestionPrimitive.Description";const NT=({send:e,clearComposer:t=!0})=>{const n=ee(),r=Z(({thread:o})=>o.isDisabled),s=Z(({suggestion:o})=>o.prompt),i=e??!1,a=b.useCallback(()=>{const o=n.thread().getState().isRunning;if(i&&!o)n.thread().append(s),t&&n.composer().setText("");else if(t)n.composer().setText(s);else{const l=n.composer().getState().text;n.composer().setText(l.trim()?`${l} ${s}`:s)}},[n,i,t,s]);return r?null:a},OT=ot("SuggestionPrimitive.Trigger",NT,["send","clearComposer"]),fm=b.forwardRef(({onClick:e,disabled:t,...n},r)=>{const s=Z(({threads:a})=>a.newThreadId===a.mainThreadId),i=ee();return p.jsx(De.button,{type:"button",...s?{"data-active":"true","aria-current":"true"}:null,...n,ref:r,disabled:t,onClick:J(e,()=>{i.threads().switchToNewThread()})})});fm.displayName="ThreadListPrimitive.New";const pm=b.memo(({index:e,archived:t=!1,components:n})=>{const r=n.ThreadListItem;return p.jsx(US,{index:e,archived:t,children:p.jsx(r,{})})},(e,t)=>e.index===t.index&&e.archived===t.archived&&e.components.ThreadListItem===t.components.ThreadListItem);pm.displayName="ThreadListPrimitive.ItemByIndex";const mm=({archived:e=!1,components:t})=>{const n=Z(({threads:s})=>e?s.archivedThreadIds.length:s.threadIds.length);return b.useMemo(()=>Array.from({length:n},(s,i)=>p.jsx(pm,{index:i,archived:e,components:t},i)),[n,e,t])};mm.displayName="ThreadListPrimitive.Items";const gm=b.forwardRef((e,t)=>p.jsx(De.div,{...e,ref:t}));gm.displayName="ThreadListPrimitive.Root";const ym=b.forwardRef((e,t)=>{const n=Z(({threads:r,threadListItem:s})=>r.mainThreadId===s.id);return p.jsx(De.div,{...n?{"data-active":"true","aria-current":"true"}:null,...e,ref:t})});ym.displayName="ThreadListItemPrimitive.Root";const jT=()=>{const e=ee();return b.useCallback(()=>{e.threadListItem().archive()},[e])},DT=ot("ThreadListItemPrimitive.Archive",jT),zT=()=>{const e=ee();return b.useCallback(()=>{e.threadListItem().delete()},[e])},LT=ot("ThreadListItemPrimitive.Delete",zT),$T=()=>{const e=ee();return b.useCallback(()=>{e.threadListItem().switchTo()},[e])},FT=ot("ThreadListItemPrimitive.Trigger",$T),bm=({fallback:e})=>{const t=Z(({threadListItem:n})=>n.title);return p.jsx(p.Fragment,{children:t||e})};bm.displayName="ThreadListItemPrimitive.Title";const Ei=tf(),vm=({__scopeThreadListItemMore:e,...t})=>{const n=Ei(e);return p.jsx(df,{...n,...t})};vm.displayName="ThreadListItemMorePrimitive.Root";const xm=b.forwardRef(({__scopeThreadListItemMore:e,...t},n)=>{const r=Ei(e);return p.jsx(hf,{...r,...t,ref:n})});xm.displayName="ThreadListItemMorePrimitive.Trigger";const _m=b.forwardRef(({__scopeThreadListItemMore:e,portalProps:t,sideOffset:n=4,...r},s)=>{const i=Ei(e);return p.jsx(ff,{...i,...t,children:p.jsx(pf,{...i,...r,ref:s,sideOffset:n})})});_m.displayName="ThreadListItemMorePrimitive.Content";const Ua=b.forwardRef(({__scopeThreadListItemMore:e,...t},n)=>{const r=Ei(e);return p.jsx(mf,{...r,...t,ref:n})});Ua.displayName="ThreadListItemMorePrimitive.Item";const BT=(e,t)=>{const n=b.useRef(null),r=b.useRef(null);return b.useEffect(()=>()=>{var i;(i=r.current)==null||i.call(r)},[]),b.useCallback(()=>{var c;(c=r.current)==null||c.call(r),function(){if(n.current||!e.current)return;let h=e.current;for(;h;){const{overflowY:f}=getComputedStyle(h);if(f==="scroll"||f==="auto"){n.current=h;break}h=h.parentElement}}();const i=n.current;if(!i)return;const a=i.scrollTop,o=i.style.scrollbarWidth;i.style.scrollbarWidth="none";const l=()=>i.scrollTop=a;i.addEventListener("scroll",l);const u=setTimeout(()=>{i.removeEventListener("scroll",l),i.style.scrollbarWidth=o,r.current=null},t);r.current=()=>{clearTimeout(u),i.removeEventListener("scroll",l),i.style.scrollbarWidth=o}},[t,e])};var wm="vercel.ai.error",UT=Symbol.for(wm),Mu,Nu,Pt=class km extends(Nu=Error,Mu=UT,Nu){constructor({name:t,message:n,cause:r}){super(n),this[Mu]=!0,this.name=t,this.cause=r}static isInstance(t){return km.hasMarker(t,wm)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};function Sm(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Im="AI_InvalidArgumentError",Tm=`vercel.ai.error.${Im}`,ZT=Symbol.for(Tm),Ou,ju,VT=class extends(ju=Pt,Ou=ZT,ju){constructor({message:e,cause:t,argument:n}){super({name:Im,message:e,cause:t}),this[Ou]=!0,this.argument=n}static isInstance(e){return Pt.hasMarker(e,Tm)}},Cm="AI_JSONParseError",Em=`vercel.ai.error.${Cm}`,qT=Symbol.for(Em),Du,zu,Lu=class extends(zu=Pt,Du=qT,zu){constructor({text:e,cause:t}){super({name:Cm,message:`JSON parsing failed: Text: ${e}.
Error message: ${Sm(t)}`,cause:t}),this[Du]=!0,this.text=e}static isInstance(e){return Pt.hasMarker(e,Em)}},Rm="AI_TypeValidationError",Am=`vercel.ai.error.${Rm}`,HT=Symbol.for(Am),$u,Fu,Yn=class Za extends(Fu=Pt,$u=HT,Fu){constructor({value:t,cause:n,context:r}){let s="Type validation failed";if(r!=null&&r.field&&(s+=` for ${r.field}`),r!=null&&r.entityName||r!=null&&r.entityId){s+=" (";const i=[];r.entityName&&i.push(r.entityName),r.entityId&&i.push(`id: "${r.entityId}"`),s+=i.join(", "),s+=")"}super({name:Rm,message:`${s}: Value: ${JSON.stringify(t)}.
Error message: ${Sm(n)}`,cause:n}),this[$u]=!0,this.value=t,this.context=r}static isInstance(t){return Pt.hasMarker(t,Am)}static wrap({value:t,cause:n,context:r}){var s,i,a;return Za.isInstance(n)&&n.value===t&&((s=n.context)==null?void 0:s.field)===(r==null?void 0:r.field)&&((i=n.context)==null?void 0:i.entityName)===(r==null?void 0:r.entityName)&&((a=n.context)==null?void 0:a.entityId)===(r==null?void 0:r.entityId)?n:new Za({value:t,cause:n,context:r})}};function R(e,t,n){function r(o,l){var u;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(u=o._zod).traits??(u.traits=new Set),o._zod.traits.add(e),t(o,l);for(const c in a.prototype)c in o||Object.defineProperty(o,c,{value:a.prototype[c].bind(o)});o._zod.constr=a,o._zod.def=l}const s=(n==null?void 0:n.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:e});function a(o){var l;const u=n!=null&&n.Parent?new i:this;r(u,o),(l=u._zod).deferred??(l.deferred=[]);for(const c of u._zod.deferred)c();return u}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>{var l,u;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(u=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:u.has(e)}}),Object.defineProperty(a,"name",{value:e}),a}class $r extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Pm={};function tn(e){return Pm}function Mm(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,s])=>t.indexOf(+r)===-1).map(([r,s])=>s)}function WT(e,t){return typeof t=="bigint"?t.toString():t}function rl(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function sl(e){return e==null}function il(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function GT(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),a=Number.parseInt(t.toFixed(s).replace(".",""));return i%a/10**s}function de(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function Ri(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function mr(e){return JSON.stringify(e)}const Nm=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Xs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const JT=rl(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Qs(e){if(Xs(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(Xs(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const KT=new Set(["string","number","symbol"]);function as(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function An(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function V(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function YT(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const XT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function QT(e,t){const n={},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(n[s]=r.shape[s])}return An(e,{...e._zod.def,shape:n,checks:[]})}function eC(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete n[s]}return An(e,{...e._zod.def,shape:n,checks:[]})}function tC(e,t){if(!Qs(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return Ri(this,"shape",r),r},checks:[]};return An(e,n)}function nC(e,t){return An(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Ri(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function rC(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=e?new e({type:"optional",innerType:r[i]}):r[i])}else for(const i in r)s[i]=e?new e({type:"optional",innerType:r[i]}):r[i];return An(t,{...t._zod.def,shape:s,checks:[]})}function sC(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new e({type:"nonoptional",innerType:r[i]}))}else for(const i in r)s[i]=new e({type:"nonoptional",innerType:r[i]});return An(t,{...t._zod.def,shape:s,checks:[]})}function Rr(e,t=0){var n;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function gn(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function Ss(e){return typeof e=="string"?e:e==null?void 0:e.message}function nn(e,t,n){var s,i,a,o,l,u;const r={...e,path:e.path??[]};if(!e.message){const c=Ss((a=(i=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:a.call(i,e))??Ss((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??Ss((l=n.customError)==null?void 0:l.call(n,e))??Ss((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";r.message=c}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function al(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Fr(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Om=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,WT,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},jm=R("$ZodError",Om),Dm=R("$ZodError",Om,{Parent:Error});function iC(e,t=n=>n.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function aC(e,t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(o=>s({issues:o}));else if(a.code==="invalid_key")s({issues:a.issues});else if(a.code==="invalid_element")s({issues:a.issues});else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return s(e),r}const oC=e=>(t,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new $r;if(a.issues.length){const o=new((s==null?void 0:s.Err)??e)(a.issues.map(l=>nn(l,i,tn())));throw Nm(o,s==null?void 0:s.callee),o}return a.value},lC=e=>async(t,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new((s==null?void 0:s.Err)??e)(a.issues.map(l=>nn(l,i,tn())));throw Nm(o,s==null?void 0:s.callee),o}return a.value},zm=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new $r;return i.issues.length?{success:!1,error:new(e??jm)(i.issues.map(a=>nn(a,s,tn())))}:{success:!0,data:i.value}},uC=zm(Dm),Lm=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(a=>nn(a,s,tn())))}:{success:!0,data:i.value}},cC=Lm(Dm),dC=/^[cC][^\s-]{8,}$/,hC=/^[0-9a-z]+$/,fC=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,pC=/^[0-9a-vA-V]{20}$/,mC=/^[A-Za-z0-9]{27}$/,gC=/^[a-zA-Z0-9_-]{21}$/,yC=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,bC=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Bu=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,vC=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,xC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function _C(){return new RegExp(xC,"u")}const wC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,SC=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,IC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TC=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,$m=/^[A-Za-z0-9_-]*$/,CC=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,EC=/^\+(?:[0-9]){6,14}[0-9]$/,Fm="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",RC=new RegExp(`^${Fm}$`);function Bm(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function AC(e){return new RegExp(`^${Bm(e)}$`)}function PC(e){const t=Bm({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Fm}T(?:${r})$`)}const MC=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},NC=/^\d+$/,OC=/^-?\d+(?:\.\d+)?/i,jC=/true|false/i,DC=/null/i,zC=/^[^A-Z]*$/,LC=/^[^a-z]*$/,Qe=R("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Um={number:"number",bigint:"bigint",object:"date"},Zm=R("$ZodCheckLessThan",(e,t)=>{Qe.init(e,t);const n=Um[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,i=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Vm=R("$ZodCheckGreaterThan",(e,t)=>{Qe.init(e,t);const n=Um[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,i=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),$C=R("$ZodCheckMultipleOf",(e,t)=>{Qe.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):GT(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),FC=R("$ZodCheckNumberFormat",(e,t)=>{var a;Qe.init(e,t),t.format=t.format||"float64";const n=(a=t.format)==null?void 0:a.includes("int"),r=n?"int":"number",[s,i]=XT[t.format];e._zod.onattach.push(o=>{const l=o._zod.bag;l.format=t.format,l.minimum=s,l.maximum=i,n&&(l.pattern=NC)}),e._zod.check=o=>{const l=o.value;if(n){if(!Number.isInteger(l)){o.issues.push({expected:r,format:t.format,code:"invalid_type",input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?o.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):o.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<s&&o.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>i&&o.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),BC=R("$ZodCheckMaxLength",(e,t)=>{var n;Qe.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!sl(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const s=r.value;if(s.length<=t.maximum)return;const a=al(s);r.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),UC=R("$ZodCheckMinLength",(e,t)=>{var n;Qe.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!sl(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const s=r.value;if(s.length>=t.minimum)return;const a=al(s);r.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),ZC=R("$ZodCheckLengthEquals",(e,t)=>{var n;Qe.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!sl(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=r=>{const s=r.value,i=s.length;if(i===t.length)return;const a=al(s),o=i>t.length;r.issues.push({origin:a,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Ai=R("$ZodCheckStringFormat",(e,t)=>{var n,r;Qe.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),VC=R("$ZodCheckRegex",(e,t)=>{Ai.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),qC=R("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=zC),Ai.init(e,t)}),HC=R("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=LC),Ai.init(e,t)}),WC=R("$ZodCheckIncludes",(e,t)=>{Qe.init(e,t);const n=as(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),GC=R("$ZodCheckStartsWith",(e,t)=>{Qe.init(e,t);const n=new RegExp(`^${as(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),JC=R("$ZodCheckEndsWith",(e,t)=>{Qe.init(e,t);const n=new RegExp(`.*${as(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),KC=R("$ZodCheckOverwrite",(e,t)=>{Qe.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class YC{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(a=>a),s=Math.min(...r.map(a=>a.length-a.trimStart().length)),i=r.map(a=>a.slice(s)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const t=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...n,s.join(`
`))}}const XC={major:4,minor:0,patch:0},xe=R("$ZodType",(e,t)=>{var s;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=XC;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const i of r)for(const a of i._zod.onattach)a(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const i=(a,o,l)=>{let u=Rr(a),c;for(const d of o){if(d._zod.def.when){if(!d._zod.def.when(a))continue}else if(u)continue;const h=a.issues.length,f=d._zod.check(a);if(f instanceof Promise&&(l==null?void 0:l.async)===!1)throw new $r;if(c||f instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await f,a.issues.length!==h&&(u||(u=Rr(a,h)))});else{if(a.issues.length===h)continue;u||(u=Rr(a,h))}}return c?c.then(()=>a):a};e._zod.run=(a,o)=>{const l=e._zod.parse(a,o);if(l instanceof Promise){if(o.async===!1)throw new $r;return l.then(u=>i(u,r,o))}return i(l,r,o)}}e["~standard"]={validate:i=>{var a;try{const o=uC(e,i);return o.success?{value:o.data}:{issues:(a=o.error)==null?void 0:a.issues}}catch{return cC(e,i).then(l=>{var u;return l.success?{value:l.data}:{issues:(u=l.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),ol=R("$ZodString",(e,t)=>{var n;xe.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??MC(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),ke=R("$ZodStringFormat",(e,t)=>{Ai.init(e,t),ol.init(e,t)}),QC=R("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=bC),ke.init(e,t)}),eE=R("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Bu(r))}else t.pattern??(t.pattern=Bu());ke.init(e,t)}),tE=R("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=vC),ke.init(e,t)}),nE=R("$ZodURL",(e,t)=>{ke.init(e,t),e._zod.check=n=>{try{const r=n.value,s=new URL(r),i=s.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:CC.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),rE=R("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=_C()),ke.init(e,t)}),sE=R("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=gC),ke.init(e,t)}),iE=R("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=dC),ke.init(e,t)}),aE=R("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=hC),ke.init(e,t)}),oE=R("$ZodULID",(e,t)=>{t.pattern??(t.pattern=fC),ke.init(e,t)}),lE=R("$ZodXID",(e,t)=>{t.pattern??(t.pattern=pC),ke.init(e,t)}),uE=R("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=mC),ke.init(e,t)}),cE=R("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=PC(t)),ke.init(e,t)}),dE=R("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=RC),ke.init(e,t)}),hE=R("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=AC(t)),ke.init(e,t)}),fE=R("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=yC),ke.init(e,t)}),pE=R("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=wC),ke.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),mE=R("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=kC),ke.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),gE=R("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=SC),ke.init(e,t)}),yE=R("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=IC),ke.init(e,t),e._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function qm(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const bE=R("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=TC),ke.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{qm(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function vE(e){if(!$m.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return qm(n)}const xE=R("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=$m),ke.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{vE(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),_E=R("$ZodE164",(e,t)=>{t.pattern??(t.pattern=EC),ke.init(e,t)});function wE(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const kE=R("$ZodJWT",(e,t)=>{ke.init(e,t),e._zod.check=n=>{wE(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Hm=R("$ZodNumber",(e,t)=>{xe.init(e,t),e._zod.pattern=e._zod.bag.pattern??OC,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),n}}),SE=R("$ZodNumber",(e,t)=>{FC.init(e,t),Hm.init(e,t)}),IE=R("$ZodBoolean",(e,t)=>{xe.init(e,t),e._zod.pattern=jC,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),TE=R("$ZodNull",(e,t)=>{xe.init(e,t),e._zod.pattern=DC,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),n}}),CE=R("$ZodUnknown",(e,t)=>{xe.init(e,t),e._zod.parse=n=>n}),EE=R("$ZodNever",(e,t)=>{xe.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Uu(e,t,n){e.issues.length&&t.issues.push(...gn(n,e.issues)),t.value[n]=e.value}const RE=R("$ZodArray",(e,t)=>{xe.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const i=[];for(let a=0;a<s.length;a++){const o=s[a],l=t.element._zod.run({value:o,issues:[]},r);l instanceof Promise?i.push(l.then(u=>Uu(u,n,a))):Uu(l,n,a)}return i.length?Promise.all(i).then(()=>n):n}});function Is(e,t,n){e.issues.length&&t.issues.push(...gn(n,e.issues)),t.value[n]=e.value}function Zu(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...gn(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const AE=R("$ZodObject",(e,t)=>{xe.init(e,t);const n=rl(()=>{const d=Object.keys(t.shape);for(const f of d)if(!(t.shape[f]instanceof xe))throw new Error(`Invalid element at key "${f}": expected a Zod schema`);const h=YT(t.shape);return{shape:t.shape,keys:d,keySet:new Set(d),numKeys:d.length,optionalKeys:new Set(h)}});de(e._zod,"propValues",()=>{const d=t.shape,h={};for(const f in d){const m=d[f]._zod;if(m.values){h[f]??(h[f]=new Set);for(const y of m.values)h[f].add(y)}}return h});const r=d=>{const h=new YC(["shape","payload","ctx"]),f=n.value,m=_=>{const x=mr(_);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};h.write("const input = payload.value;");const y=Object.create(null);let v=0;for(const _ of f.keys)y[_]=`key_${v++}`;h.write("const newResult = {}");for(const _ of f.keys)if(f.optionalKeys.has(_)){const x=y[_];h.write(`const ${x} = ${m(_)};`);const T=mr(_);h.write(`
        if (${x}.issues.length) {
          if (input[${T}] === undefined) {
            if (${T} in input) {
              newResult[${T}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${x}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${T}, ...iss.path] : [${T}],
              }))
            );
          }
        } else if (${x}.value === undefined) {
          if (${T} in input) newResult[${T}] = undefined;
        } else {
          newResult[${T}] = ${x}.value;
        }
        `)}else{const x=y[_];h.write(`const ${x} = ${m(_)};`),h.write(`
          if (${x}.issues.length) payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${mr(_)}, ...iss.path] : [${mr(_)}]
          })));`),h.write(`newResult[${mr(_)}] = ${x}.value`)}h.write("payload.value = newResult;"),h.write("return payload;");const g=h.compile();return(_,x)=>g(d,_,x)};let s;const i=Xs,a=!Pm.jitless,l=a&&JT.value,u=t.catchall;let c;e._zod.parse=(d,h)=>{c??(c=n.value);const f=d.value;if(!i(f))return d.issues.push({expected:"object",code:"invalid_type",input:f,inst:e}),d;const m=[];if(a&&l&&(h==null?void 0:h.async)===!1&&h.jitless!==!0)s||(s=r(t.shape)),d=s(d,h);else{d.value={};const x=c.shape;for(const T of c.keys){const E=x[T],I=E._zod.run({value:f[T],issues:[]},h),P=E._zod.optin==="optional"&&E._zod.optout==="optional";I instanceof Promise?m.push(I.then(N=>P?Zu(N,d,T,f):Is(N,d,T))):P?Zu(I,d,T,f):Is(I,d,T)}}if(!u)return m.length?Promise.all(m).then(()=>d):d;const y=[],v=c.keySet,g=u._zod,_=g.def.type;for(const x of Object.keys(f)){if(v.has(x))continue;if(_==="never"){y.push(x);continue}const T=g.run({value:f[x],issues:[]},h);T instanceof Promise?m.push(T.then(E=>Is(E,d,x))):Is(T,d,x)}return y.length&&d.issues.push({code:"unrecognized_keys",keys:y,input:f,inst:e}),m.length?Promise.all(m).then(()=>d):d}});function Vu(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(i=>nn(i,r,tn())))}),t}const Wm=R("$ZodUnion",(e,t)=>{xe.init(e,t),de(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),de(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),de(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),de(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>il(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let s=!1;const i=[];for(const a of t.options){const o=a._zod.run({value:n.value,issues:[]},r);if(o instanceof Promise)i.push(o),s=!0;else{if(o.issues.length===0)return o;i.push(o)}}return s?Promise.all(i).then(a=>Vu(a,n,e,r)):Vu(i,n,e,r)}}),PE=R("$ZodDiscriminatedUnion",(e,t)=>{Wm.init(e,t);const n=e._zod.parse;de(e._zod,"propValues",()=>{const s={};for(const i of t.options){const a=i._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const[o,l]of Object.entries(a)){s[o]||(s[o]=new Set);for(const u of l)s[o].add(u)}}return s});const r=rl(()=>{const s=t.options,i=new Map;for(const a of s){const o=a._zod.propValues[t.discriminator];if(!o||o.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(const l of o){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,a)}}return i});e._zod.parse=(s,i)=>{const a=s.value;if(!Xs(a))return s.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),s;const o=r.value.get(a==null?void 0:a[t.discriminator]);return o?o._zod.run(s,i):t.unionFallback?n(s,i):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:a,path:[t.discriminator],inst:e}),s)}}),ME=R("$ZodIntersection",(e,t)=>{xe.init(e,t),e._zod.parse=(n,r)=>{const s=n.value,i=t.left._zod.run({value:s,issues:[]},r),a=t.right._zod.run({value:s,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([l,u])=>qu(n,l,u)):qu(n,i,a)}});function Va(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Qs(e)&&Qs(t)){const n=Object.keys(t),r=Object.keys(e).filter(i=>n.indexOf(i)!==-1),s={...e,...t};for(const i of r){const a=Va(e[i],t[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};s[i]=a.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r],a=Va(s,i);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function qu(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Rr(e))return e;const r=Va(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const NE=R("$ZodRecord",(e,t)=>{xe.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Qs(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const i=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;n.value={};for(const l of a)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const u=t.valueType._zod.run({value:s[l],issues:[]},r);u instanceof Promise?i.push(u.then(c=>{c.issues.length&&n.issues.push(...gn(l,c.issues)),n.value[l]=c.value})):(u.issues.length&&n.issues.push(...gn(l,u.issues)),n.value[l]=u.value)}let o;for(const l in s)a.has(l)||(o=o??[],o.push(l));o&&o.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:o})}else{n.value={};for(const a of Reflect.ownKeys(s)){if(a==="__proto__")continue;const o=t.keyType._zod.run({value:a,issues:[]},r);if(o instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(o.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:o.issues.map(u=>nn(u,r,tn())),input:a,path:[a],inst:e}),n.value[o.value]=o.value;continue}const l=t.valueType._zod.run({value:s[a],issues:[]},r);l instanceof Promise?i.push(l.then(u=>{u.issues.length&&n.issues.push(...gn(a,u.issues)),n.value[o.value]=u.value})):(l.issues.length&&n.issues.push(...gn(a,l.issues)),n.value[o.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),OE=R("$ZodEnum",(e,t)=>{xe.init(e,t);const n=Mm(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>KT.has(typeof r)).map(r=>typeof r=="string"?as(r):r.toString()).join("|")})$`),e._zod.parse=(r,s)=>{const i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:n,input:i,inst:e}),r}}),jE=R("$ZodLiteral",(e,t)=>{xe.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?as(n):n?n.toString():String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),DE=R("$ZodTransform",(e,t)=>{xe.init(e,t),e._zod.parse=(n,r)=>{const s=t.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(a=>(n.value=a,n));if(s instanceof Promise)throw new $r;return n.value=s,n}}),zE=R("$ZodOptional",(e,t)=>{xe.init(e,t),e._zod.optin="optional",e._zod.optout="optional",de(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),de(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${il(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),LE=R("$ZodNullable",(e,t)=>{xe.init(e,t),de(e._zod,"optin",()=>t.innerType._zod.optin),de(e._zod,"optout",()=>t.innerType._zod.optout),de(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${il(n.source)}|null)$`):void 0}),de(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),$E=R("$ZodDefault",(e,t)=>{xe.init(e,t),e._zod.optin="optional",de(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>Hu(i,t)):Hu(s,t)}});function Hu(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const FE=R("$ZodPrefault",(e,t)=>{xe.init(e,t),e._zod.optin="optional",de(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),BE=R("$ZodNonOptional",(e,t)=>{xe.init(e,t),de(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>Wu(i,e)):Wu(s,e)}});function Wu(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const UE=R("$ZodCatch",(e,t)=>{xe.init(e,t),e._zod.optin="optional",de(e._zod,"optout",()=>t.innerType._zod.optout),de(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(a=>nn(a,r,tn()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>nn(i,r,tn()))},input:n.value}),n.issues=[]),n)}}),ZE=R("$ZodPipe",(e,t)=>{xe.init(e,t),de(e._zod,"values",()=>t.in._zod.values),de(e._zod,"optin",()=>t.in._zod.optin),de(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{const s=t.in._zod.run(n,r);return s instanceof Promise?s.then(i=>Gu(i,t,r)):Gu(s,t,r)}});function Gu(e,t,n){return Rr(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const VE=R("$ZodReadonly",(e,t)=>{xe.init(e,t),de(e._zod,"propValues",()=>t.innerType._zod.propValues),de(e._zod,"values",()=>t.innerType._zod.values),de(e._zod,"optin",()=>t.innerType._zod.optin),de(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(Ju):Ju(s)}});function Ju(e){return e.value=Object.freeze(e.value),e}const qE=R("$ZodLazy",(e,t)=>{xe.init(e,t),de(e._zod,"innerType",()=>t.getter()),de(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),de(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),de(e._zod,"optin",()=>e._zod.innerType._zod.optin),de(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),HE=R("$ZodCustom",(e,t)=>{Qe.init(e,t),xe.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(i=>Ku(i,n,r,e));Ku(s,n,r,e)}});function Ku(e,t,n,r){if(!e){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),t.issues.push(Fr(s))}}class Gm{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function WE(){return new Gm}const vr=WE();function GE(e,t){return new e({type:"string",...V(t)})}function JE(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...V(t)})}function Yu(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...V(t)})}function KE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...V(t)})}function YE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...V(t)})}function XE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...V(t)})}function QE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...V(t)})}function e0(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...V(t)})}function t0(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...V(t)})}function n0(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...V(t)})}function r0(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...V(t)})}function s0(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...V(t)})}function i0(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...V(t)})}function a0(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...V(t)})}function o0(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...V(t)})}function l0(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...V(t)})}function u0(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...V(t)})}function c0(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...V(t)})}function d0(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...V(t)})}function h0(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...V(t)})}function f0(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...V(t)})}function p0(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...V(t)})}function m0(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...V(t)})}function g0(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...V(t)})}function y0(e,t){return new e({type:"string",format:"date",check:"string_format",...V(t)})}function b0(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...V(t)})}function v0(e,t){return new e({type:"string",format:"duration",check:"string_format",...V(t)})}function x0(e,t){return new e({type:"number",checks:[],...V(t)})}function _0(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...V(t)})}function w0(e,t){return new e({type:"boolean",...V(t)})}function k0(e,t){return new e({type:"null",...V(t)})}function S0(e){return new e({type:"unknown"})}function I0(e,t){return new e({type:"never",...V(t)})}function Xu(e,t){return new Zm({check:"less_than",...V(t),value:e,inclusive:!1})}function sa(e,t){return new Zm({check:"less_than",...V(t),value:e,inclusive:!0})}function Qu(e,t){return new Vm({check:"greater_than",...V(t),value:e,inclusive:!1})}function ia(e,t){return new Vm({check:"greater_than",...V(t),value:e,inclusive:!0})}function ec(e,t){return new $C({check:"multiple_of",...V(t),value:e})}function Jm(e,t){return new BC({check:"max_length",...V(t),maximum:e})}function ei(e,t){return new UC({check:"min_length",...V(t),minimum:e})}function Km(e,t){return new ZC({check:"length_equals",...V(t),length:e})}function T0(e,t){return new VC({check:"string_format",format:"regex",...V(t),pattern:e})}function C0(e){return new qC({check:"string_format",format:"lowercase",...V(e)})}function E0(e){return new HC({check:"string_format",format:"uppercase",...V(e)})}function R0(e,t){return new WC({check:"string_format",format:"includes",...V(t),includes:e})}function A0(e,t){return new GC({check:"string_format",format:"starts_with",...V(t),prefix:e})}function P0(e,t){return new JC({check:"string_format",format:"ends_with",...V(t),suffix:e})}function os(e){return new KC({check:"overwrite",tx:e})}function M0(e){return os(t=>t.normalize(e))}function N0(){return os(e=>e.trim())}function O0(){return os(e=>e.toLowerCase())}function j0(){return os(e=>e.toUpperCase())}function D0(e,t,n){return new e({type:"array",element:t,...V(n)})}function z0(e,t,n){const r=V(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function L0(e,t,n){return new e({type:"custom",check:"custom",fn:t,...V(n)})}class tc{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??vr,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var d,h,f;var r;const s=t._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,o);const l=(h=(d=t._zod).toJSONSchema)==null?void 0:h.call(d);if(l)o.schema=l;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path},y=t._zod.parent;if(y)o.ref=y,this.process(y,m),this.seen.get(y).isParent=!0;else{const v=o.schema;switch(s.type){case"string":{const g=v;g.type="string";const{minimum:_,maximum:x,format:T,patterns:E,contentEncoding:I}=t._zod.bag;if(typeof _=="number"&&(g.minLength=_),typeof x=="number"&&(g.maxLength=x),T&&(g.format=i[T]??T,g.format===""&&delete g.format),I&&(g.contentEncoding=I),E&&E.size>0){const P=[...E];P.length===1?g.pattern=P[0].source:P.length>1&&(o.schema.allOf=[...P.map(N=>({...this.target==="draft-7"?{type:"string"}:{},pattern:N.source}))])}break}case"number":{const g=v,{minimum:_,maximum:x,format:T,multipleOf:E,exclusiveMaximum:I,exclusiveMinimum:P}=t._zod.bag;typeof T=="string"&&T.includes("int")?g.type="integer":g.type="number",typeof P=="number"&&(g.exclusiveMinimum=P),typeof _=="number"&&(g.minimum=_,typeof P=="number"&&(P>=_?delete g.minimum:delete g.exclusiveMinimum)),typeof I=="number"&&(g.exclusiveMaximum=I),typeof x=="number"&&(g.maximum=x,typeof I=="number"&&(I<=x?delete g.maximum:delete g.exclusiveMaximum)),typeof E=="number"&&(g.multipleOf=E);break}case"boolean":{const g=v;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{v.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{v.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const g=v,{minimum:_,maximum:x}=t._zod.bag;typeof _=="number"&&(g.minItems=_),typeof x=="number"&&(g.maxItems=x),g.type="array",g.items=this.process(s.element,{...m,path:[...m.path,"items"]});break}case"object":{const g=v;g.type="object",g.properties={};const _=s.shape;for(const E in _)g.properties[E]=this.process(_[E],{...m,path:[...m.path,"properties",E]});const x=new Set(Object.keys(_)),T=new Set([...x].filter(E=>{const I=s.shape[E]._zod;return this.io==="input"?I.optin===void 0:I.optout===void 0}));T.size>0&&(g.required=Array.from(T)),((f=s.catchall)==null?void 0:f._zod.def.type)==="never"?g.additionalProperties=!1:s.catchall?s.catchall&&(g.additionalProperties=this.process(s.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{const g=v;g.anyOf=s.options.map((_,x)=>this.process(_,{...m,path:[...m.path,"anyOf",x]}));break}case"intersection":{const g=v,_=this.process(s.left,{...m,path:[...m.path,"allOf",0]}),x=this.process(s.right,{...m,path:[...m.path,"allOf",1]}),T=I=>"allOf"in I&&Object.keys(I).length===1,E=[...T(_)?_.allOf:[_],...T(x)?x.allOf:[x]];g.allOf=E;break}case"tuple":{const g=v;g.type="array";const _=s.items.map((E,I)=>this.process(E,{...m,path:[...m.path,"prefixItems",I]}));if(this.target==="draft-2020-12"?g.prefixItems=_:g.items=_,s.rest){const E=this.process(s.rest,{...m,path:[...m.path,"items"]});this.target==="draft-2020-12"?g.items=E:g.additionalItems=E}s.rest&&(g.items=this.process(s.rest,{...m,path:[...m.path,"items"]}));const{minimum:x,maximum:T}=t._zod.bag;typeof x=="number"&&(g.minItems=x),typeof T=="number"&&(g.maxItems=T);break}case"record":{const g=v;g.type="object",g.propertyNames=this.process(s.keyType,{...m,path:[...m.path,"propertyNames"]}),g.additionalProperties=this.process(s.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const g=v,_=Mm(s.entries);_.every(x=>typeof x=="number")&&(g.type="number"),_.every(x=>typeof x=="string")&&(g.type="string"),g.enum=_;break}case"literal":{const g=v,_=[];for(const x of s.values)if(x===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof x=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");_.push(Number(x))}else _.push(x);if(_.length!==0)if(_.length===1){const x=_[0];g.type=x===null?"null":typeof x,g.const=x}else _.every(x=>typeof x=="number")&&(g.type="number"),_.every(x=>typeof x=="string")&&(g.type="string"),_.every(x=>typeof x=="boolean")&&(g.type="string"),_.every(x=>x===null)&&(g.type="null"),g.enum=_;break}case"file":{const g=v,_={type:"string",format:"binary",contentEncoding:"binary"},{minimum:x,maximum:T,mime:E}=t._zod.bag;x!==void 0&&(_.minLength=x),T!==void 0&&(_.maxLength=T),E?E.length===1?(_.contentMediaType=E[0],Object.assign(g,_)):g.anyOf=E.map(I=>({..._,contentMediaType:I})):Object.assign(g,_);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const g=this.process(s.innerType,m);v.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,m),o.ref=s.innerType;break}case"success":{const g=v;g.type="boolean";break}case"default":{this.process(s.innerType,m),o.ref=s.innerType,v.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,m),o.ref=s.innerType,this.io==="input"&&(v._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,m),o.ref=s.innerType;let g;try{g=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}v.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const g=v,_=t._zod.pattern;if(!_)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=_.source;break}case"pipe":{const g=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(g,m),o.ref=g;break}case"readonly":{this.process(s.innerType,m),o.ref=s.innerType,v.readOnly=!0;break}case"promise":{this.process(s.innerType,m),o.ref=s.innerType;break}case"optional":{this.process(s.innerType,m),o.ref=s.innerType;break}case"lazy":{const g=t._zod.innerType;this.process(g,m),o.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const u=this.metadataRegistry.get(t);return u&&Object.assign(o.schema,u),this.io==="input"&&je(t)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(t).schema}emit(t,n){var c,d,h,f,m,y;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=v=>{var E;const g=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const I=(E=r.external.registry.get(v[0]))==null?void 0:E.id,P=r.external.uri??(q=>q);if(I)return{ref:P(I)};const N=v[1].defId??v[1].schema.id??`schema${this.counter++}`;return v[1].defId=N,{defId:N,ref:`${P("__shared")}#/${g}/${N}`}}if(v[1]===s)return{ref:"#"};const x=`#/${g}/`,T=v[1].schema.id??`__schema${this.counter++}`;return{defId:T,ref:x+T}},a=v=>{if(v[1].schema.$ref)return;const g=v[1],{ref:_,defId:x}=i(v);g.def={...g.schema},x&&(g.defId=x);const T=g.schema;for(const E in T)delete T[E];T.$ref=_};if(r.cycles==="throw")for(const v of this.seen.entries()){const g=v[1];if(g.cycle)throw new Error(`Cycle detected: #/${(c=g.cycle)==null?void 0:c.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const v of this.seen.entries()){const g=v[1];if(t===v[0]){a(v);continue}if(r.external){const x=(d=r.external.registry.get(v[0]))==null?void 0:d.id;if(t!==v[0]&&x){a(v);continue}}if((h=this.metadataRegistry.get(v[0]))==null?void 0:h.id){a(v);continue}if(g.cycle){a(v);continue}if(g.count>1&&r.reused==="ref"){a(v);continue}}const o=(v,g)=>{const _=this.seen.get(v),x=_.def??_.schema,T={...x};if(_.ref===null)return;const E=_.ref;if(_.ref=null,E){o(E,g);const I=this.seen.get(E).schema;I.$ref&&g.target==="draft-7"?(x.allOf=x.allOf??[],x.allOf.push(I)):(Object.assign(x,I),Object.assign(x,T))}_.isParent||this.override({zodSchema:v,jsonSchema:x,path:_.path??[]})};for(const v of[...this.seen.entries()].reverse())o(v[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(f=r.external)!=null&&f.uri){const v=(m=r.external.registry.get(t))==null?void 0:m.id;if(!v)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(v)}Object.assign(l,s.def);const u=((y=r.external)==null?void 0:y.defs)??{};for(const v of this.seen.entries()){const g=v[1];g.def&&g.defId&&(u[g.defId]=g.def)}r.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?l.$defs=u:l.definitions=u);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function $0(e,t){if(e instanceof Gm){const r=new tc(t),s={};for(const o of e._idmap.entries()){const[l,u]=o;r.process(u)}const i={},a={registry:e,uri:t==null?void 0:t.uri,defs:s};for(const o of e._idmap.entries()){const[l,u]=o;i[l]=r.emit(u,{...t,external:a})}if(Object.keys(s).length>0){const o=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[o]:s}}return{schemas:i}}const n=new tc(t);return n.process(e),n.emit(e,t)}function je(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const s=e._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return je(s.element,n);case"object":{for(const i in s.shape)if(je(s.shape[i],n))return!0;return!1}case"union":{for(const i of s.options)if(je(i,n))return!0;return!1}case"intersection":return je(s.left,n)||je(s.right,n);case"tuple":{for(const i of s.items)if(je(i,n))return!0;return!!(s.rest&&je(s.rest,n))}case"record":return je(s.keyType,n)||je(s.valueType,n);case"map":return je(s.keyType,n)||je(s.valueType,n);case"set":return je(s.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return je(s.innerType,n);case"lazy":return je(s.getter(),n);case"default":return je(s.innerType,n);case"prefault":return je(s.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return je(s.in,n)||je(s.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}const F0=R("ZodISODateTime",(e,t)=>{cE.init(e,t),Ce.init(e,t)});function B0(e){return g0(F0,e)}const U0=R("ZodISODate",(e,t)=>{dE.init(e,t),Ce.init(e,t)});function Z0(e){return y0(U0,e)}const V0=R("ZodISOTime",(e,t)=>{hE.init(e,t),Ce.init(e,t)});function q0(e){return b0(V0,e)}const H0=R("ZodISODuration",(e,t)=>{fE.init(e,t),Ce.init(e,t)});function W0(e){return v0(H0,e)}const G0=(e,t)=>{jm.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>aC(e,n)},flatten:{value:n=>iC(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},Pi=R("ZodError",G0,{Parent:Error}),J0=oC(Pi),K0=lC(Pi),Y0=zm(Pi),Ym=Lm(Pi),Se=R("ZodType",(e,t)=>(xe.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>An(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>J0(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Y0(e,n,r),e.parseAsync=async(n,r)=>K0(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Ym(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(H1(n,r)),e.superRefine=n=>e.check(W1(n)),e.overwrite=n=>e.check(os(n)),e.optional=()=>sc(e),e.nullable=()=>ic(e),e.nullish=()=>sc(ic(e)),e.nonoptional=n=>z1(e,n),e.array=()=>or(e),e.or=n=>Ke([e,n]),e.and=n=>C1(e,n),e.transform=n=>ac(e,P1(n)),e.default=n=>O1(e,n),e.prefault=n=>D1(e,n),e.catch=n=>$1(e,n),e.pipe=n=>ac(e,n),e.readonly=()=>U1(e),e.describe=n=>{const r=e.clone();return vr.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=vr.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return vr.get(e);const r=e.clone();return vr.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Xm=R("_ZodString",(e,t)=>{ol.init(e,t),Se.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(T0(...r)),e.includes=(...r)=>e.check(R0(...r)),e.startsWith=(...r)=>e.check(A0(...r)),e.endsWith=(...r)=>e.check(P0(...r)),e.min=(...r)=>e.check(ei(...r)),e.max=(...r)=>e.check(Jm(...r)),e.length=(...r)=>e.check(Km(...r)),e.nonempty=(...r)=>e.check(ei(1,...r)),e.lowercase=r=>e.check(C0(r)),e.uppercase=r=>e.check(E0(r)),e.trim=()=>e.check(N0()),e.normalize=(...r)=>e.check(M0(...r)),e.toLowerCase=()=>e.check(O0()),e.toUpperCase=()=>e.check(j0())}),X0=R("ZodString",(e,t)=>{ol.init(e,t),Xm.init(e,t),e.email=n=>e.check(JE(Q0,n)),e.url=n=>e.check(e0(e1,n)),e.jwt=n=>e.check(m0(m1,n)),e.emoji=n=>e.check(t0(t1,n)),e.guid=n=>e.check(Yu(nc,n)),e.uuid=n=>e.check(KE(Ts,n)),e.uuidv4=n=>e.check(YE(Ts,n)),e.uuidv6=n=>e.check(XE(Ts,n)),e.uuidv7=n=>e.check(QE(Ts,n)),e.nanoid=n=>e.check(n0(n1,n)),e.guid=n=>e.check(Yu(nc,n)),e.cuid=n=>e.check(r0(r1,n)),e.cuid2=n=>e.check(s0(s1,n)),e.ulid=n=>e.check(i0(i1,n)),e.base64=n=>e.check(h0(h1,n)),e.base64url=n=>e.check(f0(f1,n)),e.xid=n=>e.check(a0(a1,n)),e.ksuid=n=>e.check(o0(o1,n)),e.ipv4=n=>e.check(l0(l1,n)),e.ipv6=n=>e.check(u0(u1,n)),e.cidrv4=n=>e.check(c0(c1,n)),e.cidrv6=n=>e.check(d0(d1,n)),e.e164=n=>e.check(p0(p1,n)),e.datetime=n=>e.check(B0(n)),e.date=n=>e.check(Z0(n)),e.time=n=>e.check(q0(n)),e.duration=n=>e.check(W0(n))});function z(e){return GE(X0,e)}const Ce=R("ZodStringFormat",(e,t)=>{ke.init(e,t),Xm.init(e,t)}),Q0=R("ZodEmail",(e,t)=>{tE.init(e,t),Ce.init(e,t)}),nc=R("ZodGUID",(e,t)=>{QC.init(e,t),Ce.init(e,t)}),Ts=R("ZodUUID",(e,t)=>{eE.init(e,t),Ce.init(e,t)}),e1=R("ZodURL",(e,t)=>{nE.init(e,t),Ce.init(e,t)}),t1=R("ZodEmoji",(e,t)=>{rE.init(e,t),Ce.init(e,t)}),n1=R("ZodNanoID",(e,t)=>{sE.init(e,t),Ce.init(e,t)}),r1=R("ZodCUID",(e,t)=>{iE.init(e,t),Ce.init(e,t)}),s1=R("ZodCUID2",(e,t)=>{aE.init(e,t),Ce.init(e,t)}),i1=R("ZodULID",(e,t)=>{oE.init(e,t),Ce.init(e,t)}),a1=R("ZodXID",(e,t)=>{lE.init(e,t),Ce.init(e,t)}),o1=R("ZodKSUID",(e,t)=>{uE.init(e,t),Ce.init(e,t)}),l1=R("ZodIPv4",(e,t)=>{pE.init(e,t),Ce.init(e,t)}),u1=R("ZodIPv6",(e,t)=>{mE.init(e,t),Ce.init(e,t)}),c1=R("ZodCIDRv4",(e,t)=>{gE.init(e,t),Ce.init(e,t)}),d1=R("ZodCIDRv6",(e,t)=>{yE.init(e,t),Ce.init(e,t)}),h1=R("ZodBase64",(e,t)=>{bE.init(e,t),Ce.init(e,t)}),f1=R("ZodBase64URL",(e,t)=>{xE.init(e,t),Ce.init(e,t)}),p1=R("ZodE164",(e,t)=>{_E.init(e,t),Ce.init(e,t)}),m1=R("ZodJWT",(e,t)=>{kE.init(e,t),Ce.init(e,t)}),Qm=R("ZodNumber",(e,t)=>{Hm.init(e,t),Se.init(e,t),e.gt=(r,s)=>e.check(Qu(r,s)),e.gte=(r,s)=>e.check(ia(r,s)),e.min=(r,s)=>e.check(ia(r,s)),e.lt=(r,s)=>e.check(Xu(r,s)),e.lte=(r,s)=>e.check(sa(r,s)),e.max=(r,s)=>e.check(sa(r,s)),e.int=r=>e.check(rc(r)),e.safe=r=>e.check(rc(r)),e.positive=r=>e.check(Qu(0,r)),e.nonnegative=r=>e.check(ia(0,r)),e.negative=r=>e.check(Xu(0,r)),e.nonpositive=r=>e.check(sa(0,r)),e.multipleOf=(r,s)=>e.check(ec(r,s)),e.step=(r,s)=>e.check(ec(r,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function g1(e){return x0(Qm,e)}const y1=R("ZodNumberFormat",(e,t)=>{SE.init(e,t),Qm.init(e,t)});function rc(e){return _0(y1,e)}const b1=R("ZodBoolean",(e,t)=>{IE.init(e,t),Se.init(e,t)});function Ge(e){return w0(b1,e)}const v1=R("ZodNull",(e,t)=>{TE.init(e,t),Se.init(e,t)});function x1(e){return k0(v1,e)}const _1=R("ZodUnknown",(e,t)=>{CE.init(e,t),Se.init(e,t)});function Ct(){return S0(_1)}const w1=R("ZodNever",(e,t)=>{EE.init(e,t),Se.init(e,t)});function eg(e){return I0(w1,e)}const k1=R("ZodArray",(e,t)=>{RE.init(e,t),Se.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(ei(n,r)),e.nonempty=n=>e.check(ei(1,n)),e.max=(n,r)=>e.check(Jm(n,r)),e.length=(n,r)=>e.check(Km(n,r)),e.unwrap=()=>e.element});function or(e,t){return D0(k1,e,t)}const tg=R("ZodObject",(e,t)=>{AE.init(e,t),Se.init(e,t),de(e,"shape",()=>t.shape),e.keyof=()=>rg(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ct()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ct()}),e.strict=()=>e.clone({...e._zod.def,catchall:eg()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>tC(e,n),e.merge=n=>nC(e,n),e.pick=n=>QT(e,n),e.omit=n=>eC(e,n),e.partial=(...n)=>rC(sg,e,n[0]),e.required=(...n)=>sC(ig,e,n[0])});function ge(e,t){const n={type:"object",get shape(){return Ri(this,"shape",{...e}),this.shape},...V(t)};return new tg(n)}function _e(e,t){return new tg({type:"object",get shape(){return Ri(this,"shape",{...e}),this.shape},catchall:eg(),...V(t)})}const ng=R("ZodUnion",(e,t)=>{Wm.init(e,t),Se.init(e,t),e.options=t.options});function Ke(e,t){return new ng({type:"union",options:e,...V(t)})}const S1=R("ZodDiscriminatedUnion",(e,t)=>{ng.init(e,t),PE.init(e,t)});function I1(e,t,n){return new S1({type:"union",options:t,discriminator:e,...V(n)})}const T1=R("ZodIntersection",(e,t)=>{ME.init(e,t),Se.init(e,t)});function C1(e,t){return new T1({type:"intersection",left:e,right:t})}const E1=R("ZodRecord",(e,t)=>{NE.init(e,t),Se.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Br(e,t,n){return new E1({type:"record",keyType:e,valueType:t,...V(n)})}const qa=R("ZodEnum",(e,t)=>{OE.init(e,t),Se.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,s)=>{const i={};for(const a of r)if(n.has(a))i[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new qa({...t,checks:[],...V(s),entries:i})},e.exclude=(r,s)=>{const i={...t.entries};for(const a of r)if(n.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new qa({...t,checks:[],...V(s),entries:i})}});function rg(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new qa({type:"enum",entries:n,...V(t)})}const R1=R("ZodLiteral",(e,t)=>{jE.init(e,t),Se.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function W(e,t){return new R1({type:"literal",values:Array.isArray(e)?e:[e],...V(t)})}const A1=R("ZodTransform",(e,t)=>{DE.init(e,t),Se.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(Fr(i,n.value,t));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),a.continue??(a.continue=!0),n.issues.push(Fr(a))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(i=>(n.value=i,n)):(n.value=s,n)}});function P1(e){return new A1({type:"transform",transform:e})}const sg=R("ZodOptional",(e,t)=>{zE.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sc(e){return new sg({type:"optional",innerType:e})}const M1=R("ZodNullable",(e,t)=>{LE.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ic(e){return new M1({type:"nullable",innerType:e})}const N1=R("ZodDefault",(e,t)=>{$E.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function O1(e,t){return new N1({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const j1=R("ZodPrefault",(e,t)=>{FE.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function D1(e,t){return new j1({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ig=R("ZodNonOptional",(e,t)=>{BE.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function z1(e,t){return new ig({type:"nonoptional",innerType:e,...V(t)})}const L1=R("ZodCatch",(e,t)=>{UE.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function $1(e,t){return new L1({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const F1=R("ZodPipe",(e,t)=>{ZE.init(e,t),Se.init(e,t),e.in=t.in,e.out=t.out});function ac(e,t){return new F1({type:"pipe",in:e,out:t})}const B1=R("ZodReadonly",(e,t)=>{VE.init(e,t),Se.init(e,t)});function U1(e){return new B1({type:"readonly",innerType:e})}const Z1=R("ZodLazy",(e,t)=>{qE.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.getter()});function V1(e){return new Z1({type:"lazy",getter:e})}const ll=R("ZodCustom",(e,t)=>{HE.init(e,t),Se.init(e,t)});function q1(e){const t=new Qe({check:"custom"});return t._zod.check=e,t}function ag(e,t){return z0(ll,e??(()=>!0),t)}function H1(e,t={}){return L0(ll,e,t)}function W1(e){const t=q1(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Fr(r,n.value,t._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(Fr(s))}},e(n.value,n)));return t}function ti(e,t={error:`Input not instance of ${e.name}`}){const n=new ll({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...V(t)});return n._zod.bag.Class=e,n}var ce;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return e.objectValues(a)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},e.find=(s,i)=>{for(const a of s)if(i(a))return a},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ce||(ce={}));var oc;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(oc||(oc={}));const B=ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wt=e=>{switch(typeof e){case"undefined":return B.undefined;case"string":return B.string;case"number":return Number.isNaN(e)?B.nan:B.number;case"boolean":return B.boolean;case"function":return B.function;case"bigint":return B.bigint;case"symbol":return B.symbol;case"object":return Array.isArray(e)?B.array:e===null?B.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?B.promise:typeof Map<"u"&&e instanceof Map?B.map:typeof Set<"u"&&e instanceof Set?B.set:typeof Date<"u"&&e instanceof Date?B.date:B.object;default:return B.unknown}},O=ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ut extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return s(this),r}static assert(t){if(!(t instanceof Ut))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ut.create=e=>new Ut(e);const Ha=(e,t)=>{let n;switch(e.code){case O.invalid_type:e.received===B.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case O.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ce.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:n=`Unrecognized key(s) in object: ${ce.joinValues(e.keys,", ")}`;break;case O.invalid_union:n="Invalid input";break;case O.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ce.joinValues(e.options)}`;break;case O.invalid_enum_value:n=`Invalid enum value. Expected ${ce.joinValues(e.options)}, received '${e.received}'`;break;case O.invalid_arguments:n="Invalid function arguments";break;case O.invalid_return_type:n="Invalid function return type";break;case O.invalid_date:n="Invalid date";break;case O.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ce.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case O.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case O.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case O.custom:n="Invalid input";break;case O.invalid_intersection_types:n="Intersection results could not be merged";break;case O.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case O.not_finite:n="Number must be finite";break;default:n=t.defaultError,ce.assertNever(e)}return{message:n}};let G1=Ha;function J1(){return G1}const K1=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:t,defaultError:o}).message;return{...s,path:i,message:o}};function $(e,t){const n=J1(),r=K1({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Ha?void 0:Ha].filter(s=>!!s)});e.common.issues.push(r)}class it{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return Y;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return it.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return Y;i.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:t.value,value:r}}}const Y=Object.freeze({status:"aborted"}),xr=e=>({status:"dirty",value:e}),ft=e=>({status:"valid",value:e}),lc=e=>e.status==="aborted",uc=e=>e.status==="dirty",Xn=e=>e.status==="valid",ni=e=>typeof Promise<"u"&&e instanceof Promise;var U;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(U||(U={}));class rn{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cc=(e,t)=>{if(Xn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ut(e.common.issues);return this._error=n,this._error}}};function te(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,o)=>{const{message:l}=e;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:s}}class le{get description(){return this._def.description}_getType(t){return Wt(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Wt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new it,ctx:{common:t.parent.common,data:t.data,parsedType:Wt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(ni(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wt(t)},s=this._parseSync({data:t,path:r.path,parent:r});return cc(r,s)}"~validate"(t){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wt(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return Xn(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>Xn(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wt(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(ni(s)?s:Promise.resolve(s));return cc(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=t(s),o=()=>i.addIssue({code:O.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new tr({schema:this,typeName:j.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Xt.create(this,this._def)}nullable(){return nr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return At.create(this)}promise(){return ai.create(this,this._def)}or(t){return si.create([this,t],this._def)}and(t){return ii.create(this,t,this._def)}transform(t){return new tr({...te(this._def),schema:this,typeName:j.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Ja({...te(this._def),innerType:this,defaultValue:n,typeName:j.ZodDefault})}brand(){return new vR({typeName:j.ZodBranded,type:this,...te(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Ka({...te(this._def),innerType:this,catchValue:n,typeName:j.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return ul.create(this,t)}readonly(){return Ya.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Y1=/^c[^\s-]{8,}$/i,X1=/^[0-9a-z]+$/,Q1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tR=/^[a-z0-9_-]{21}$/i,nR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sR=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let aa;const aR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cR=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dR=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,og="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hR=new RegExp(`^${og}$`);function lg(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function fR(e){return new RegExp(`^${lg(e)}$`)}function pR(e){let t=`${og}T${lg(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function mR(e,t){return!!((t==="v4"||!t)&&aR.test(e)||(t==="v6"||!t)&&lR.test(e))}function gR(e,t){if(!nR.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function yR(e,t){return!!((t==="v4"||!t)&&oR.test(e)||(t==="v6"||!t)&&uR.test(e))}class Kt extends le{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==B.string){const i=this._getOrReturnCtx(t);return $(i,{code:O.invalid_type,expected:B.string,received:i.parsedType}),Y}const r=new it;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),$(s,{code:O.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),$(s,{code:O.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=t.data.length>i.value,o=t.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(t,s),a?$(s,{code:O.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&$(s,{code:O.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")sR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"email",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")aa||(aa=new RegExp(iR,"u")),aa.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"emoji",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")eR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"uuid",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")tR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"nanoid",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Y1.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"cuid",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")X1.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"cuid2",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Q1.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"ulid",code:O.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),$(s,{validation:"url",code:O.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"regex",code:O.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),$(s,{code:O.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),$(s,{code:O.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),$(s,{code:O.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?pR(i).test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{code:O.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?hR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{code:O.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?fR(i).test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{code:O.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?rR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"duration",code:O.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?mR(t.data,i.version)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"ip",code:O.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?gR(t.data,i.alg)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"jwt",code:O.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?yR(t.data,i.version)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"cidr",code:O.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?cR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"base64",code:O.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?dR.test(t.data)||(s=this._getOrReturnCtx(t,s),$(s,{validation:"base64url",code:O.invalid_string,message:i.message}),r.dirty()):ce.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:O.invalid_string,...U.errToObj(r)})}_addCheck(t){return new Kt({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...U.errToObj(t)})}url(t){return this._addCheck({kind:"url",...U.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...U.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...U.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...U.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...U.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...U.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...U.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...U.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...U.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...U.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...U.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...U.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...U.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...U.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...U.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...U.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...U.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...U.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...U.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...U.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...U.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...U.errToObj(n)})}nonempty(t){return this.min(1,U.errToObj(t))}trim(){return new Kt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Kt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Kt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Kt.create=e=>new Kt({checks:[],typeName:j.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...te(e)});function bR(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),a=Number.parseInt(t.toFixed(s).replace(".",""));return i%a/10**s}class Qn extends le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==B.number){const i=this._getOrReturnCtx(t);return $(i,{code:O.invalid_type,expected:B.number,received:i.parsedType}),Y}let r;const s=new it;for(const i of this._def.checks)i.kind==="int"?ce.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),$(r,{code:O.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),$(r,{code:O.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),$(r,{code:O.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?bR(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),$(r,{code:O.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),$(r,{code:O.not_finite,message:i.message}),s.dirty()):ce.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,U.toString(n))}gt(t,n){return this.setLimit("min",t,!1,U.toString(n))}lte(t,n){return this.setLimit("max",t,!0,U.toString(n))}lt(t,n){return this.setLimit("max",t,!1,U.toString(n))}setLimit(t,n,r,s){return new Qn({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:U.toString(s)}]})}_addCheck(t){return new Qn({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:U.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:U.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:U.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ce.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Qn.create=e=>new Qn({checks:[],typeName:j.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...te(e)});class Ur extends le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==B.bigint)return this._getInvalidInput(t);let r;const s=new it;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),$(r,{code:O.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),$(r,{code:O.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),$(r,{code:O.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ce.assertNever(i);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return $(n,{code:O.invalid_type,expected:B.bigint,received:n.parsedType}),Y}gte(t,n){return this.setLimit("min",t,!0,U.toString(n))}gt(t,n){return this.setLimit("min",t,!1,U.toString(n))}lte(t,n){return this.setLimit("max",t,!0,U.toString(n))}lt(t,n){return this.setLimit("max",t,!1,U.toString(n))}setLimit(t,n,r,s){return new Ur({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:U.toString(s)}]})}_addCheck(t){return new Ur({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:U.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ur.create=e=>new Ur({checks:[],typeName:j.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...te(e)});class Wa extends le{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==B.boolean){const r=this._getOrReturnCtx(t);return $(r,{code:O.invalid_type,expected:B.boolean,received:r.parsedType}),Y}return ft(t.data)}}Wa.create=e=>new Wa({typeName:j.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...te(e)});class ri extends le{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==B.date){const i=this._getOrReturnCtx(t);return $(i,{code:O.invalid_type,expected:B.date,received:i.parsedType}),Y}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return $(i,{code:O.invalid_date}),Y}const r=new it;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),$(s,{code:O.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),$(s,{code:O.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ce.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ri({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:U.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:U.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}ri.create=e=>new ri({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:j.ZodDate,...te(e)});class dc extends le{_parse(t){if(this._getType(t)!==B.symbol){const r=this._getOrReturnCtx(t);return $(r,{code:O.invalid_type,expected:B.symbol,received:r.parsedType}),Y}return ft(t.data)}}dc.create=e=>new dc({typeName:j.ZodSymbol,...te(e)});class hc extends le{_parse(t){if(this._getType(t)!==B.undefined){const r=this._getOrReturnCtx(t);return $(r,{code:O.invalid_type,expected:B.undefined,received:r.parsedType}),Y}return ft(t.data)}}hc.create=e=>new hc({typeName:j.ZodUndefined,...te(e)});class fc extends le{_parse(t){if(this._getType(t)!==B.null){const r=this._getOrReturnCtx(t);return $(r,{code:O.invalid_type,expected:B.null,received:r.parsedType}),Y}return ft(t.data)}}fc.create=e=>new fc({typeName:j.ZodNull,...te(e)});class pc extends le{constructor(){super(...arguments),this._any=!0}_parse(t){return ft(t.data)}}pc.create=e=>new pc({typeName:j.ZodAny,...te(e)});class mc extends le{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ft(t.data)}}mc.create=e=>new mc({typeName:j.ZodUnknown,...te(e)});class sn extends le{_parse(t){const n=this._getOrReturnCtx(t);return $(n,{code:O.invalid_type,expected:B.never,received:n.parsedType}),Y}}sn.create=e=>new sn({typeName:j.ZodNever,...te(e)});class gc extends le{_parse(t){if(this._getType(t)!==B.undefined){const r=this._getOrReturnCtx(t);return $(r,{code:O.invalid_type,expected:B.void,received:r.parsedType}),Y}return ft(t.data)}}gc.create=e=>new gc({typeName:j.ZodVoid,...te(e)});class At extends le{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==B.array)return $(n,{code:O.invalid_type,expected:B.array,received:n.parsedType}),Y;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&($(n,{code:a?O.too_big:O.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&($(n,{code:O.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&($(n,{code:O.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new rn(n,a,n.path,o)))).then(a=>it.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new rn(n,a,n.path,o)));return it.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new At({...this._def,minLength:{value:t,message:U.toString(n)}})}max(t,n){return new At({...this._def,maxLength:{value:t,message:U.toString(n)}})}length(t,n){return new At({...this._def,exactLength:{value:t,message:U.toString(n)}})}nonempty(t){return this.min(1,t)}}At.create=(e,t)=>new At({type:e,minLength:null,maxLength:null,exactLength:null,typeName:j.ZodArray,...te(t)});function Ln(e){if(e instanceof Ae){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Xt.create(Ln(r))}return new Ae({...e._def,shape:()=>t})}else return e instanceof At?new At({...e._def,type:Ln(e.element)}):e instanceof Xt?Xt.create(Ln(e.unwrap())):e instanceof nr?nr.create(Ln(e.unwrap())):e instanceof _n?_n.create(e.items.map(t=>Ln(t))):e}class Ae extends le{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ce.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==B.object){const u=this._getOrReturnCtx(t);return $(u,{code:O.invalid_type,expected:B.object,received:u.parsedType}),Y}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof sn&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const c=i[u],d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new rn(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof sn){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(u==="strict")o.length>0&&($(s,{code:O.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of o){const d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new rn(s,d,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>it.mergeObjectSync(r,u)):it.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return U.errToObj,new Ae({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,a;const s=((a=(i=this._def).errorMap)==null?void 0:a.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:U.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new Ae({...this._def,unknownKeys:"strip"})}passthrough(){return new Ae({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ae({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ae({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:j.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Ae({...this._def,catchall:t})}pick(t){const n={};for(const r of ce.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Ae({...this._def,shape:()=>n})}omit(t){const n={};for(const r of ce.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Ae({...this._def,shape:()=>n})}deepPartial(){return Ln(this)}partial(t){const n={};for(const r of ce.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new Ae({...this._def,shape:()=>n})}required(t){const n={};for(const r of ce.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Xt;)i=i._def.innerType;n[r]=i}return new Ae({...this._def,shape:()=>n})}keyof(){return ug(ce.objectKeys(this.shape))}}Ae.create=(e,t)=>new Ae({shape:()=>e,unknownKeys:"strip",catchall:sn.create(),typeName:j.ZodObject,...te(t)});Ae.strictCreate=(e,t)=>new Ae({shape:()=>e,unknownKeys:"strict",catchall:sn.create(),typeName:j.ZodObject,...te(t)});Ae.lazycreate=(e,t)=>new Ae({shape:e,unknownKeys:"strip",catchall:sn.create(),typeName:j.ZodObject,...te(t)});class si extends le{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Ut(o.ctx.common.issues));return $(n,{code:O.invalid_union,unionErrors:a}),Y}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new Ut(l));return $(n,{code:O.invalid_union,unionErrors:o}),Y}}get options(){return this._def.options}}si.create=(e,t)=>new si({options:e,typeName:j.ZodUnion,...te(t)});function Ga(e,t){const n=Wt(e),r=Wt(t);if(e===t)return{valid:!0,data:e};if(n===B.object&&r===B.object){const s=ce.objectKeys(t),i=ce.objectKeys(e).filter(o=>s.indexOf(o)!==-1),a={...e,...t};for(const o of i){const l=Ga(e[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===B.array&&r===B.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const a=e[i],o=t[i],l=Ga(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===B.date&&r===B.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ii extends le{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,a)=>{if(lc(i)||lc(a))return Y;const o=Ga(i.value,a.value);return o.valid?((uc(i)||uc(a))&&n.dirty(),{status:n.value,value:o.data}):($(r,{code:O.invalid_intersection_types}),Y)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ii.create=(e,t,n)=>new ii({left:e,right:t,typeName:j.ZodIntersection,...te(n)});class _n extends le{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.array)return $(r,{code:O.invalid_type,expected:B.array,received:r.parsedType}),Y;if(r.data.length<this._def.items.length)return $(r,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&r.data.length>this._def.items.length&&($(r,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new rn(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>it.mergeArray(n,a)):it.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new _n({...this._def,rest:t})}}_n.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _n({items:e,typeName:j.ZodTuple,rest:null,...te(t)})};class yc extends le{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.map)return $(r,{code:O.invalid_type,expected:B.map,received:r.parsedType}),Y;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],u)=>({key:s._parse(new rn(r,o,r.path,[u,"key"])),value:i._parse(new rn(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Y;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),o.set(u.value,c.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Y;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),o.set(u.value,c.value)}return{status:n.value,value:o}}}}yc.create=(e,t,n)=>new yc({valueType:t,keyType:e,typeName:j.ZodMap,...te(n)});class Zr extends le{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.set)return $(r,{code:O.invalid_type,expected:B.set,received:r.parsedType}),Y;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&($(r,{code:O.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&($(r,{code:O.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Y;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new rn(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(t,n){return new Zr({...this._def,minSize:{value:t,message:U.toString(n)}})}max(t,n){return new Zr({...this._def,maxSize:{value:t,message:U.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Zr.create=(e,t)=>new Zr({valueType:e,minSize:null,maxSize:null,typeName:j.ZodSet,...te(t)});class bc extends le{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}bc.create=(e,t)=>new bc({getter:e,typeName:j.ZodLazy,...te(t)});class vc extends le{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return $(n,{received:n.data,code:O.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:t.data}}get value(){return this._def.value}}vc.create=(e,t)=>new vc({value:e,typeName:j.ZodLiteral,...te(t)});function ug(e,t){return new er({values:e,typeName:j.ZodEnum,...te(t)})}class er extends le{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return $(n,{expected:ce.joinValues(r),received:n.parsedType,code:O.invalid_type}),Y}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return $(n,{received:n.data,code:O.invalid_enum_value,options:r}),Y}return ft(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return er.create(t,{...this._def,...n})}exclude(t,n=this._def){return er.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}er.create=ug;class xc extends le{_parse(t){const n=ce.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==B.string&&r.parsedType!==B.number){const s=ce.objectValues(n);return $(r,{expected:ce.joinValues(s),received:r.parsedType,code:O.invalid_type}),Y}if(this._cache||(this._cache=new Set(ce.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=ce.objectValues(n);return $(r,{received:r.data,code:O.invalid_enum_value,options:s}),Y}return ft(t.data)}get enum(){return this._def.values}}xc.create=(e,t)=>new xc({values:e,typeName:j.ZodNativeEnum,...te(t)});class ai extends le{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==B.promise&&n.common.async===!1)return $(n,{code:O.invalid_type,expected:B.promise,received:n.parsedType}),Y;const r=n.parsedType===B.promise?n.data:Promise.resolve(n.data);return ft(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ai.create=(e,t)=>new ai({type:e,typeName:j.ZodPromise,...te(t)});class tr extends le{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===j.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:a=>{$(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return Y;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Y:l.status==="dirty"||n.value==="dirty"?xr(l.value):l});{if(n.value==="aborted")return Y;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?Y:o.status==="dirty"||n.value==="dirty"?xr(o.value):o}}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Y:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Y:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xn(a))return Y;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Xn(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):Y);ce.assertNever(s)}}tr.create=(e,t,n)=>new tr({schema:e,typeName:j.ZodEffects,effect:t,...te(n)});tr.createWithPreprocess=(e,t,n)=>new tr({schema:t,effect:{type:"preprocess",transform:e},typeName:j.ZodEffects,...te(n)});class Xt extends le{_parse(t){return this._getType(t)===B.undefined?ft(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Xt.create=(e,t)=>new Xt({innerType:e,typeName:j.ZodOptional,...te(t)});class nr extends le{_parse(t){return this._getType(t)===B.null?ft(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}nr.create=(e,t)=>new nr({innerType:e,typeName:j.ZodNullable,...te(t)});class Ja extends le{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===B.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ja.create=(e,t)=>new Ja({innerType:e,typeName:j.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...te(t)});class Ka extends le{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ni(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ut(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ut(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ka.create=(e,t)=>new Ka({innerType:e,typeName:j.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...te(t)});class _c extends le{_parse(t){if(this._getType(t)!==B.nan){const r=this._getOrReturnCtx(t);return $(r,{code:O.invalid_type,expected:B.nan,received:r.parsedType}),Y}return{status:"valid",value:t.data}}}_c.create=e=>new _c({typeName:j.ZodNaN,...te(e)});class vR extends le{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ul extends le{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Y:i.status==="dirty"?(n.dirty(),xr(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Y:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new ul({in:t,out:n,typeName:j.ZodPipeline})}}class Ya extends le{_parse(t){const n=this._def.innerType._parse(t),r=s=>(Xn(s)&&(s.value=Object.freeze(s.value)),s);return ni(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Ya.create=(e,t)=>new Ya({innerType:e,typeName:j.ZodReadonly,...te(t)});var j;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(j||(j={}));const xR=Kt.create,yn=Qn.create,_R=Wa.create;sn.create;At.create;const Vr=Ae.create;si.create;ii.create;_n.create;er.create;ai.create;Xt.create;nr.create;class wc extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function oa(e){}function wR(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=oa,onError:n=oa,onRetry:r=oa,onComment:s}=e;let i="",a=!0,o,l="",u="";function c(y){const v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[g,_]=kR(`${i}${v}`);for(const x of g)d(x);i=_,a=!1}function d(y){if(y===""){f();return}if(y.startsWith(":")){s&&s(y.slice(y.startsWith(": ")?2:1));return}const v=y.indexOf(":");if(v!==-1){const g=y.slice(0,v),_=y[v+1]===" "?2:1,x=y.slice(v+_);h(g,x,y);return}h(y,"",y)}function h(y,v,g){switch(y){case"event":u=v;break;case"data":l=`${l}${v}
`;break;case"id":o=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new wc(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:g}));break;default:n(new wc(`Unknown field "${y.length>20?`${y.slice(0,20)}`:y}"`,{type:"unknown-field",field:y,value:v,line:g}));break}}function f(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function m(y={}){i&&y.consume&&d(i),a=!0,o=void 0,l="",u="",i=""}return{feed:c,reset:m}}function kR(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),i=e.indexOf(`
`,r);let a=-1;if(s!==-1&&i!==-1?a=Math.min(s,i):s!==-1?s===e.length-1?a=-1:a=s:i!==-1&&(a=i),a===-1){n=e.slice(r);break}else{const o=e.slice(r,a);t.push(o),r=a+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class SR extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let s;super({start(i){s=wR({onEvent:a=>{i.enqueue(a)},onError(a){t==="terminate"?i.error(a):typeof t=="function"&&t(a)},onRetry:n,onComment:r})},transform(i){s.feed(i)}})}}var ls=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=()=>{const i=n.length,a=new Array(t);for(let o=0;o<t;o++)a[o]=n[Math.random()*i|0];return a.join("")};if(e==null)return s;if(n.includes(r))throw new VT({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${s()}`},cg=ls();function kc(e=globalThis){var t,n,r;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(r=(n=e.process)==null?void 0:n.versions)!=null&&r.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function fn(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((n,r)=>{t[r.toLowerCase()]=n});else{Array.isArray(e)||(e=Object.entries(e));for(const[n,r]of e)r!=null&&(t[n.toLowerCase()]=r)}return t}function Sc(e,...t){const n=new Headers(fn(e)),r=n.get("user-agent")||"";return n.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(n.entries())}var IR=/"__proto__"\s*:/,TR=/"constructor"\s*:/;function Ic(e){const t=JSON.parse(e);return t===null||typeof t!="object"||IR.test(e)===!1&&TR.test(e)===!1?t:CR(t)}function CR(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in r){const i=r[s];i&&typeof i=="object"&&t.push(i)}}}return e}function ER(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return Ic(e)}try{return Ic(e)}finally{Error.stackTraceLimit=t}}function cl(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:n}=e;if(n!=null)for(const r of Object.keys(n))n[r]=dn(n[r])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(dn):dn(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(dn)),e.allOf!=null&&(e.allOf=e.allOf.map(dn)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(dn));const{definitions:t}=e;if(t!=null)for(const n of Object.keys(t))t[n]=dn(t[n]);return e}function dn(e){return typeof e=="boolean"?e:cl(e)}var RR=Symbol("Let zodToJsonSchema decide on which parser to use"),Tc={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},AR=e=>typeof e=="string"?{...Tc,name:e}:{...Tc,...e};function at(){return{}}function PR(e,t){var n,r,s;const i={type:"array"};return(n=e.type)!=null&&n._def&&((s=(r=e.type)==null?void 0:r._def)==null?void 0:s.typeName)!==j.ZodAny&&(i.items=he(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function MR(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function NR(){return{type:"boolean"}}function dg(e,t){return he(e.type._def,t)}var OR=(e,t)=>he(e.innerType._def,t);function hg(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>hg(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return jR(e)}}var jR=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value;break}return t};function DR(e,t){return{...he(e.innerType._def,t),default:e.defaultValue()}}function zR(e,t){return t.effectStrategy==="input"?he(e.schema._def,t):at()}function LR(e){return{type:"string",enum:Array.from(e.values)}}var $R=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function FR(e,t){const n=[he(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),he(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),r=[];return n.forEach(s=>{if($R(s))r.push(...s.allOf);else{let i=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:a,...o}=s;i=o}r.push(i)}}),r.length?{allOf:r}:void 0}function BR(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var la=void 0,gt={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(la===void 0&&(la=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),la),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function fg(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":yt(n,"email",r.message,t);break;case"format:idn-email":yt(n,"idn-email",r.message,t);break;case"pattern:zod":We(n,gt.email,r.message,t);break}break;case"url":yt(n,"uri",r.message,t);break;case"uuid":yt(n,"uuid",r.message,t);break;case"regex":We(n,r.regex,r.message,t);break;case"cuid":We(n,gt.cuid,r.message,t);break;case"cuid2":We(n,gt.cuid2,r.message,t);break;case"startsWith":We(n,RegExp(`^${ua(r.value,t)}`),r.message,t);break;case"endsWith":We(n,RegExp(`${ua(r.value,t)}$`),r.message,t);break;case"datetime":yt(n,"date-time",r.message,t);break;case"date":yt(n,"date",r.message,t);break;case"time":yt(n,"time",r.message,t);break;case"duration":yt(n,"duration",r.message,t);break;case"length":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"includes":{We(n,RegExp(ua(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&yt(n,"ipv4",r.message,t),r.version!=="v4"&&yt(n,"ipv6",r.message,t);break}case"base64url":We(n,gt.base64url,r.message,t);break;case"jwt":We(n,gt.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&We(n,gt.ipv4Cidr,r.message,t),r.version!=="v4"&&We(n,gt.ipv6Cidr,r.message,t);break}case"emoji":We(n,gt.emoji(),r.message,t);break;case"ulid":{We(n,gt.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{yt(n,"binary",r.message,t);break}case"contentEncoding:base64":{n.contentEncoding="base64";break}case"pattern:zod":{We(n,gt.base64,r.message,t);break}}break}case"nanoid":We(n,gt.nanoid,r.message,t)}return n}function ua(e,t){return t.patternStrategy==="escape"?ZR(e):e}var UR=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ZR(e){let t="";for(let n=0;n<e.length;n++)UR.has(e[n])||(t+="\\"),t+=e[n];return t}function yt(e,t,n,r){var s;e.format||(s=e.anyOf)!=null&&s.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function We(e,t,n,r){var s;e.pattern||(s=e.allOf)!=null&&s.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Cc(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=Cc(t,r)}function Cc(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=r.i?e.source.toLowerCase():e.source;let i="",a=!1,o=!1,l=!1;for(let u=0;u<s.length;u++){if(a){i+=s[u],a=!1;continue}if(r.i){if(o){if(s[u].match(/[a-z]/)){l?(i+=s[u],i+=`${s[u-2]}-${s[u]}`.toUpperCase(),l=!1):s[u+1]==="-"&&((n=s[u+2])!=null&&n.match(/[a-z]/))?(i+=s[u],l=!0):i+=`${s[u]}${s[u].toUpperCase()}`;continue}}else if(s[u].match(/[a-z]/)){i+=`[${s[u]}${s[u].toUpperCase()}]`;continue}}if(r.m){if(s[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(s[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&s[u]==="."){i+=o?`${s[u]}\r
`:`[${s[u]}\r
]`;continue}i+=s[u],s[u]==="\\"?a=!0:o&&s[u]==="]"?o=!1:!o&&s[u]==="["&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function pg(e,t){var n,r,s,i,a,o;const l={type:"object",additionalProperties:(n=he(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?n:t.allowedAdditionalProperties};if(((r=e.keyType)==null?void 0:r._def.typeName)===j.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:u,...c}=fg(e.keyType._def,t);return{...l,propertyNames:c}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===j.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((a=e.keyType)==null?void 0:a._def.typeName)===j.ZodBranded&&e.keyType._def.type._def.typeName===j.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:u,...c}=dg(e.keyType._def,t);return{...l,propertyNames:c}}}return l}function VR(e,t){if(t.mapStrategy==="record")return pg(e,t);const n=he(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||at(),r=he(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||at();return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function qR(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function HR(){return{not:at()}}function WR(){return{type:"null"}}var Xa={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function GR(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Xa&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const a=Xa[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:n.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return JR(e,t)}var JR=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>he(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function KR(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Xa[e.innerType._def.typeName],"null"]};const n=he(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function YR(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function XR(e,t){const n={type:"object",properties:{}},r=[],s=e.shape();for(const a in s){let o=s[a];if(o===void 0||o._def===void 0)continue;const l=eA(o),u=he(o._def,{...t,currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]});u!==void 0&&(n.properties[a]=u,l||r.push(a))}r.length&&(n.required=r);const i=QR(e,t);return i!==void 0&&(n.additionalProperties=i),n}function QR(e,t){if(e.catchall._def.typeName!=="ZodNever")return he(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function eA(e){try{return e.isOptional()}catch{return!0}}var tA=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return he(e.innerType._def,t);const r=he(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:at()},r]}:at()},nA=(e,t)=>{if(t.pipeStrategy==="input")return he(e.in._def,t);if(t.pipeStrategy==="output")return he(e.out._def,t);const n=he(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=he(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function rA(e,t){return he(e.type._def,t)}function sA(e,t){const r={type:"array",uniqueItems:!0,items:he(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(r.minItems=e.minSize.value),e.maxSize&&(r.maxItems=e.maxSize.value),r}function iA(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>he(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:he(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>he(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function aA(){return{not:at()}}function oA(){return at()}var lA=(e,t)=>he(e.innerType._def,t),uA=(e,t,n)=>{switch(t){case j.ZodString:return fg(e,n);case j.ZodNumber:return YR(e);case j.ZodObject:return XR(e,n);case j.ZodBigInt:return MR(e);case j.ZodBoolean:return NR();case j.ZodDate:return hg(e,n);case j.ZodUndefined:return aA();case j.ZodNull:return WR();case j.ZodArray:return PR(e,n);case j.ZodUnion:case j.ZodDiscriminatedUnion:return GR(e,n);case j.ZodIntersection:return FR(e,n);case j.ZodTuple:return iA(e,n);case j.ZodRecord:return pg(e,n);case j.ZodLiteral:return BR(e);case j.ZodEnum:return LR(e);case j.ZodNativeEnum:return qR(e);case j.ZodNullable:return KR(e,n);case j.ZodOptional:return tA(e,n);case j.ZodMap:return VR(e,n);case j.ZodSet:return sA(e,n);case j.ZodLazy:return()=>e.getter()._def;case j.ZodPromise:return rA(e,n);case j.ZodNaN:case j.ZodNever:return HR();case j.ZodEffects:return zR(e,n);case j.ZodAny:return at();case j.ZodUnknown:return oA();case j.ZodDefault:return DR(e,n);case j.ZodBranded:return dg(e,n);case j.ZodReadonly:return lA(e,n);case j.ZodCatch:return OR(e,n);case j.ZodPipeline:return nA(e,n);case j.ZodFunction:case j.ZodVoid:case j.ZodSymbol:return;default:return(r=>{})()}},cA=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function he(e,t,n=!1){var r;const s=t.seen.get(e);if(t.override){const l=(r=t.override)==null?void 0:r.call(t,e,t,s,n);if(l!==RR)return l}if(s&&!n){const l=dA(s,t);if(l!==void 0)return l}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const a=uA(e,e.typeName,t),o=typeof a=="function"?he(a(),t):a;if(o&&hA(e,t,o),t.postProcess){const l=t.postProcess(o,e,t);return i.jsonSchema=o,l}return i.jsonSchema=o,o}var dA=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:cA(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),at()):t.$refStrategy==="seen"?at():void 0}},hA=(e,t,n)=>(e.description&&(n.description=e.description),n),fA=e=>{const t=AR(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},pA=(e,t)=>{var n;const r=fA(t);let s=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,d])=>{var h;return{...u,[c]:(h=he(d._def,{...r,currentPath:[...r.basePath,r.definitionPath,c]},!0))!=null?h:at()}},{}):void 0;const i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,a=(n=he(e._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1))!=null?n:at(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(a.title=o);const l=i===void 0?s?{...a,[r.definitionPath]:s}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...s,[i]:a}};return l.$schema="http://json-schema.org/draft-07/schema#",l},Qa=Symbol.for("vercel.ai.schema");function mA(e){let t;return()=>(t==null&&(t=e()),t)}function Mi(e,{validate:t}={}){return{[Qa]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function gA(e){return typeof e=="object"&&e!==null&&Qa in e&&e[Qa]===!0&&"jsonSchema"in e&&"validate"in e}function dl(e){return e==null?Mi({properties:{},additionalProperties:!1}):gA(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?mg(e):yA(e):e()}function yA(e){return Mi(()=>cl(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const n=await e["~standard"].validate(t);return"value"in n?{success:!0,value:n.value}:{success:!1,error:new Yn({value:t,cause:n.issues})}}})}function bA(e,t){var n;const r=(n=void 0)!=null?n:!1;return Mi(()=>pA(e,{$refStrategy:r?"root":"none"}),{validate:async s=>{const i=await e.safeParseAsync(s);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function vA(e,t){var n;const r=(n=void 0)!=null?n:!1;return Mi(()=>cl($0(e,{target:"draft-7",io:"input",reused:r?"ref":"inline"})),{validate:async s=>{const i=await Ym(e,s);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function xA(e){return"_zod"in e}function mg(e,t){return xA(e)?vA(e):bA(e)}async function Ec({value:e,schema:t,context:n}){const r=await qr({value:e,schema:t,context:n});if(!r.success)throw Yn.wrap({value:e,cause:r.error,context:n});return r.value}async function qr({value:e,schema:t,context:n}){const r=dl(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const s=await r.validate(e);return s.success?{success:!0,value:s.value,rawValue:e}:{success:!1,error:Yn.wrap({value:e,cause:s.error,context:n}),rawValue:e}}catch(s){return{success:!1,error:Yn.wrap({value:e,cause:s,context:n}),rawValue:e}}}async function wn({text:e,schema:t}){try{const n=ER(e);return t==null?{success:!0,value:n,rawValue:n}:await qr({value:n,schema:t})}catch(n){return{success:!1,error:Lu.isInstance(n)?n:new Lu({text:e,cause:n}),rawValue:void 0}}}function _A({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new SR).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await wn({text:n,schema:t}))}}))}async function Gt(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var wA=Object.defineProperty,kA=(e,t)=>{for(var n in t)wA(e,n,{get:t[n],enumerable:!0})},gg="AI_NoObjectGeneratedError",yg=`vercel.ai.error.${gg}`,SA=Symbol.for(yg),bg,Qt=class extends Pt{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:s,finishReason:i}){super({name:gg,message:e,cause:t}),this[bg]=!0,this.text=n,this.response=r,this.usage=s,this.finishReason=i}static isInstance(e){return Pt.hasMarker(e,yg)}};bg=SA;var vg="AI_UIMessageStreamError",xg=`vercel.ai.error.${vg}`,IA=Symbol.for(xg),_g,Dn=class extends Pt{constructor({chunkType:e,chunkId:t,message:n}){super({name:vg,message:n}),this[_g]=!0,this.chunkType=e,this.chunkId=t}static isInstance(e){return Pt.hasMarker(e,xg)}};_g=IA;var Rc="6.0.73",wg=Ke([z(),ti(Uint8Array),ti(ArrayBuffer),ag(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]),Hr=V1(()=>Ke([x1(),z(),g1(),Ge(),Br(z(),Hr.optional()),or(Hr)])),ie=Br(z(),Br(z(),Hr.optional())),kg=ge({type:W("text"),text:z(),providerOptions:ie.optional()}),TA=ge({type:W("image"),image:Ke([wg,ti(URL)]),mediaType:z().optional(),providerOptions:ie.optional()}),Sg=ge({type:W("file"),data:Ke([wg,ti(URL)]),filename:z().optional(),mediaType:z(),providerOptions:ie.optional()}),CA=ge({type:W("reasoning"),text:z(),providerOptions:ie.optional()}),EA=ge({type:W("tool-call"),toolCallId:z(),toolName:z(),input:Ct(),providerOptions:ie.optional(),providerExecuted:Ge().optional()}),RA=I1("type",[ge({type:W("text"),value:z(),providerOptions:ie.optional()}),ge({type:W("json"),value:Hr,providerOptions:ie.optional()}),ge({type:W("execution-denied"),reason:z().optional(),providerOptions:ie.optional()}),ge({type:W("error-text"),value:z(),providerOptions:ie.optional()}),ge({type:W("error-json"),value:Hr,providerOptions:ie.optional()}),ge({type:W("content"),value:or(Ke([ge({type:W("text"),text:z(),providerOptions:ie.optional()}),ge({type:W("media"),data:z(),mediaType:z()}),ge({type:W("file-data"),data:z(),mediaType:z(),filename:z().optional(),providerOptions:ie.optional()}),ge({type:W("file-url"),url:z(),providerOptions:ie.optional()}),ge({type:W("file-id"),fileId:Ke([z(),Br(z(),z())]),providerOptions:ie.optional()}),ge({type:W("image-data"),data:z(),mediaType:z(),providerOptions:ie.optional()}),ge({type:W("image-url"),url:z(),providerOptions:ie.optional()}),ge({type:W("image-file-id"),fileId:Ke([z(),Br(z(),z())]),providerOptions:ie.optional()}),ge({type:W("custom"),providerOptions:ie.optional()})]))})]),Ig=ge({type:W("tool-result"),toolCallId:z(),toolName:z(),output:RA,providerOptions:ie.optional()}),AA=ge({type:W("tool-approval-request"),approvalId:z(),toolCallId:z()}),PA=ge({type:W("tool-approval-response"),approvalId:z(),approved:Ge(),reason:z().optional()}),MA=ge({role:W("system"),content:z(),providerOptions:ie.optional()}),NA=ge({role:W("user"),content:Ke([z(),or(Ke([kg,TA,Sg]))]),providerOptions:ie.optional()}),OA=ge({role:W("assistant"),content:Ke([z(),or(Ke([kg,Sg,CA,EA,Ig,AA]))]),providerOptions:ie.optional()}),jA=ge({role:W("tool"),content:or(Ke([Ig,PA])),providerOptions:ie.optional()});Ke([MA,NA,OA,jA]);function Tg(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=t[r];if(s===void 0)continue;const i=r in e?e[r]:void 0,a=s!==null&&typeof s=="object"&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),o=i!=null&&typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);a&&o?n[r]=Tg(i,s):n[r]=s}return n}var DA={};kA(DA,{array:()=>FA,choice:()=>BA,json:()=>UA,object:()=>$A,text:()=>LA});function zA(e){const t=["ROOT"];let n=-1,r=null;function s(l,u,c){switch(l){case'"':{n=u,t.pop(),t.push(c),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(c),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(c),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(c),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(c),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(c),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function a(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":s(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,s(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const d=e.substring(r,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const c=e.substring(r,e.length);"true".startsWith(c)?o+="true".slice(c.length):"false".startsWith(c)?o+="false".slice(c.length):"null".startsWith(c)&&(o+="null".slice(c.length))}}return o}async function us(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await wn({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await wn({text:zA(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var LA=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}},createElementStreamTransform(){}}),$A=({schema:e,name:t,description:n})=>{const r=dl(e);return{name:"object",responseFormat:Gt(r.jsonSchema).then(s=>({type:"json",schema:s,...t!=null&&{name:t},...n!=null&&{description:n}})),async parseCompleteOutput({text:s},i){const a=await wn({text:s});if(!a.success)throw new Qt({message:"No object generated: could not parse the response.",cause:a.error,text:s,response:i.response,usage:i.usage,finishReason:i.finishReason});const o=await qr({value:a.value,schema:r});if(!o.success)throw new Qt({message:"No object generated: response did not match schema.",cause:o.error,text:s,response:i.response,usage:i.usage,finishReason:i.finishReason});return o.value},async parsePartialOutput({text:s}){const i=await us(s);switch(i.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:i.value}}},createElementStreamTransform(){}}},FA=({element:e,name:t,description:n})=>{const r=dl(e);return{name:"array",responseFormat:Gt(r.jsonSchema).then(s=>{const{$schema:i,...a}=s;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:a}},required:["elements"],additionalProperties:!1},...t!=null&&{name:t},...n!=null&&{description:n}}}),async parseCompleteOutput({text:s},i){const a=await wn({text:s});if(!a.success)throw new Qt({message:"No object generated: could not parse the response.",cause:a.error,text:s,response:i.response,usage:i.usage,finishReason:i.finishReason});const o=a.value;if(o==null||typeof o!="object"||!("elements"in o)||!Array.isArray(o.elements))throw new Qt({message:"No object generated: response did not match schema.",cause:new Yn({value:o,cause:"response must be an object with an elements array"}),text:s,response:i.response,usage:i.usage,finishReason:i.finishReason});for(const l of o.elements){const u=await qr({value:l,schema:r});if(!u.success)throw new Qt({message:"No object generated: response did not match schema.",cause:u.error,text:s,response:i.response,usage:i.usage,finishReason:i.finishReason})}return o.elements},async parsePartialOutput({text:s}){const i=await us(s);switch(i.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const a=i.value;if(a==null||typeof a!="object"||!("elements"in a)||!Array.isArray(a.elements))return;const o=i.state==="repaired-parse"&&a.elements.length>0?a.elements.slice(0,-1):a.elements,l=[];for(const u of o){const c=await qr({value:u,schema:r});c.success&&l.push(c.value)}return{partial:l}}}},createElementStreamTransform(){let s=0;return new TransformStream({transform({partialOutput:i},a){if(i!=null)for(;s<i.length;s++)a.enqueue(i[s])}})}}},BA=({options:e,name:t,description:n})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...t!=null&&{name:t},...n!=null&&{description:n}}),async parseCompleteOutput({text:r},s){const i=await wn({text:r});if(!i.success)throw new Qt({message:"No object generated: could not parse the response.",cause:i.error,text:r,response:s.response,usage:s.usage,finishReason:s.finishReason});const a=i.value;if(a==null||typeof a!="object"||!("result"in a)||typeof a.result!="string"||!e.includes(a.result))throw new Qt({message:"No object generated: response did not match schema.",cause:new Yn({value:a,cause:"response must be an object that contains a choice value."}),text:r,response:s.response,usage:s.usage,finishReason:s.finishReason});return a.result},async parsePartialOutput({text:r}){const s=await us(r);switch(s.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const i=s.value;if(i==null||typeof i!="object"||!("result"in i)||typeof i.result!="string")return;const a=e.filter(o=>o.startsWith(i.result));return s.state==="successful-parse"?a.includes(i.result)?{partial:i.result}:void 0:a.length===1?{partial:a[0]}:void 0}}},createElementStreamTransform(){}}),UA=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:n},r){const s=await wn({text:n});if(!s.success)throw new Qt({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return s.value},async parsePartialOutput({text:n}){const r=await us(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return r.value===void 0?void 0:{partial:r.value}}},createElementStreamTransform(){}});ls({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});var ZA=mA(()=>mg(Ke([_e({type:W("text-start"),id:z(),providerMetadata:ie.optional()}),_e({type:W("text-delta"),id:z(),delta:z(),providerMetadata:ie.optional()}),_e({type:W("text-end"),id:z(),providerMetadata:ie.optional()}),_e({type:W("error"),errorText:z()}),_e({type:W("tool-input-start"),toolCallId:z(),toolName:z(),providerExecuted:Ge().optional(),providerMetadata:ie.optional(),dynamic:Ge().optional(),title:z().optional()}),_e({type:W("tool-input-delta"),toolCallId:z(),inputTextDelta:z()}),_e({type:W("tool-input-available"),toolCallId:z(),toolName:z(),input:Ct(),providerExecuted:Ge().optional(),providerMetadata:ie.optional(),dynamic:Ge().optional(),title:z().optional()}),_e({type:W("tool-input-error"),toolCallId:z(),toolName:z(),input:Ct(),providerExecuted:Ge().optional(),providerMetadata:ie.optional(),dynamic:Ge().optional(),errorText:z(),title:z().optional()}),_e({type:W("tool-approval-request"),approvalId:z(),toolCallId:z()}),_e({type:W("tool-output-available"),toolCallId:z(),output:Ct(),providerExecuted:Ge().optional(),dynamic:Ge().optional(),preliminary:Ge().optional()}),_e({type:W("tool-output-error"),toolCallId:z(),errorText:z(),providerExecuted:Ge().optional(),dynamic:Ge().optional()}),_e({type:W("tool-output-denied"),toolCallId:z()}),_e({type:W("reasoning-start"),id:z(),providerMetadata:ie.optional()}),_e({type:W("reasoning-delta"),id:z(),delta:z(),providerMetadata:ie.optional()}),_e({type:W("reasoning-end"),id:z(),providerMetadata:ie.optional()}),_e({type:W("source-url"),sourceId:z(),url:z(),title:z().optional(),providerMetadata:ie.optional()}),_e({type:W("source-document"),sourceId:z(),mediaType:z(),title:z(),filename:z().optional(),providerMetadata:ie.optional()}),_e({type:W("file"),url:z(),mediaType:z(),providerMetadata:ie.optional()}),_e({type:ag(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:z().optional(),data:Ct(),transient:Ge().optional()}),_e({type:W("start-step")}),_e({type:W("finish-step")}),_e({type:W("start"),messageId:z().optional(),messageMetadata:Ct().optional()}),_e({type:W("finish"),finishReason:rg(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:Ct().optional()}),_e({type:W("abort"),reason:z().optional()}),_e({type:W("message-metadata"),messageMetadata:Ct()})])));function VA(e){return e.type.startsWith("data-")}function eo(e){return e.type.startsWith("tool-")}function Cg(e){return e.type==="dynamic-tool"}function Wr(e){return eo(e)||Cg(e)}function to(e){return e.type.split("-").slice(1).join("-")}function qA(e){return Cg(e)?e.toolName:to(e)}function HA({lastMessage:e,messageId:t}){return{message:(e==null?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function WA({stream:e,messageMetadataSchema:t,dataPartSchemas:n,runUpdateMessageJob:r,onError:s,onToolCall:i,onData:a}){return e.pipeThrough(new TransformStream({async transform(o,l){await r(async({state:u,write:c})=>{var d,h,f,m;function y(x){const E=u.message.parts.filter(Wr).find(I=>I.toolCallId===x);if(E==null)throw new Dn({chunkType:"tool-invocation",chunkId:x,message:`No tool invocation found for tool call ID "${x}".`});return E}function v(x){var T;const E=u.message.parts.find(N=>eo(N)&&N.toolCallId===x.toolCallId),I=x,P=E;E!=null?(E.state=x.state,P.input=I.input,P.output=I.output,P.errorText=I.errorText,P.rawInput=I.rawInput,P.preliminary=I.preliminary,x.title!==void 0&&(P.title=x.title),P.providerExecuted=(T=I.providerExecuted)!=null?T:E.providerExecuted,I.providerMetadata!=null&&(E.callProviderMetadata=I.providerMetadata)):u.message.parts.push({type:`tool-${x.toolName}`,toolCallId:x.toolCallId,state:x.state,title:x.title,input:I.input,output:I.output,rawInput:I.rawInput,errorText:I.errorText,providerExecuted:I.providerExecuted,preliminary:I.preliminary,...I.providerMetadata!=null?{callProviderMetadata:I.providerMetadata}:{}})}function g(x){var T,E;const I=u.message.parts.find(q=>q.type==="dynamic-tool"&&q.toolCallId===x.toolCallId),P=x,N=I;I!=null?(I.state=x.state,N.toolName=x.toolName,N.input=P.input,N.output=P.output,N.errorText=P.errorText,N.rawInput=(T=P.rawInput)!=null?T:N.rawInput,N.preliminary=P.preliminary,x.title!==void 0&&(N.title=x.title),N.providerExecuted=(E=P.providerExecuted)!=null?E:I.providerExecuted,P.providerMetadata!=null&&(I.callProviderMetadata=P.providerMetadata)):u.message.parts.push({type:"dynamic-tool",toolName:x.toolName,toolCallId:x.toolCallId,state:x.state,input:P.input,output:P.output,errorText:P.errorText,preliminary:P.preliminary,providerExecuted:P.providerExecuted,title:x.title,...P.providerMetadata!=null?{callProviderMetadata:P.providerMetadata}:{}})}async function _(x){if(x!=null){const T=u.message.metadata!=null?Tg(u.message.metadata,x):x;t!=null&&await Ec({value:T,schema:t,context:{field:"message.metadata",entityId:u.message.id}}),u.message.metadata=T}}switch(o.type){case"text-start":{const x={type:"text",text:"",providerMetadata:o.providerMetadata,state:"streaming"};u.activeTextParts[o.id]=x,u.message.parts.push(x),c();break}case"text-delta":{const x=u.activeTextParts[o.id];if(x==null)throw new Dn({chunkType:"text-delta",chunkId:o.id,message:`Received text-delta for missing text part with ID "${o.id}". Ensure a "text-start" chunk is sent before any "text-delta" chunks.`});x.text+=o.delta,x.providerMetadata=(d=o.providerMetadata)!=null?d:x.providerMetadata,c();break}case"text-end":{const x=u.activeTextParts[o.id];if(x==null)throw new Dn({chunkType:"text-end",chunkId:o.id,message:`Received text-end for missing text part with ID "${o.id}". Ensure a "text-start" chunk is sent before any "text-end" chunks.`});x.state="done",x.providerMetadata=(h=o.providerMetadata)!=null?h:x.providerMetadata,delete u.activeTextParts[o.id],c();break}case"reasoning-start":{const x={type:"reasoning",text:"",providerMetadata:o.providerMetadata,state:"streaming"};u.activeReasoningParts[o.id]=x,u.message.parts.push(x),c();break}case"reasoning-delta":{const x=u.activeReasoningParts[o.id];if(x==null)throw new Dn({chunkType:"reasoning-delta",chunkId:o.id,message:`Received reasoning-delta for missing reasoning part with ID "${o.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-delta" chunks.`});x.text+=o.delta,x.providerMetadata=(f=o.providerMetadata)!=null?f:x.providerMetadata,c();break}case"reasoning-end":{const x=u.activeReasoningParts[o.id];if(x==null)throw new Dn({chunkType:"reasoning-end",chunkId:o.id,message:`Received reasoning-end for missing reasoning part with ID "${o.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-end" chunks.`});x.providerMetadata=(m=o.providerMetadata)!=null?m:x.providerMetadata,x.state="done",delete u.activeReasoningParts[o.id],c();break}case"file":{u.message.parts.push({type:"file",mediaType:o.mediaType,url:o.url}),c();break}case"source-url":{u.message.parts.push({type:"source-url",sourceId:o.sourceId,url:o.url,title:o.title,providerMetadata:o.providerMetadata}),c();break}case"source-document":{u.message.parts.push({type:"source-document",sourceId:o.sourceId,mediaType:o.mediaType,title:o.title,filename:o.filename,providerMetadata:o.providerMetadata}),c();break}case"tool-input-start":{const x=u.message.parts.filter(eo);u.partialToolCalls[o.toolCallId]={text:"",toolName:o.toolName,index:x.length,dynamic:o.dynamic,title:o.title},o.dynamic?g({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted,title:o.title,providerMetadata:o.providerMetadata}):v({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted,title:o.title,providerMetadata:o.providerMetadata}),c();break}case"tool-input-delta":{const x=u.partialToolCalls[o.toolCallId];if(x==null)throw new Dn({chunkType:"tool-input-delta",chunkId:o.toolCallId,message:`Received tool-input-delta for missing tool call with ID "${o.toolCallId}". Ensure a "tool-input-start" chunk is sent before any "tool-input-delta" chunks.`});x.text+=o.inputTextDelta;const{value:T}=await us(x.text);x.dynamic?g({toolCallId:o.toolCallId,toolName:x.toolName,state:"input-streaming",input:T,title:x.title}):v({toolCallId:o.toolCallId,toolName:x.toolName,state:"input-streaming",input:T,title:x.title}),c();break}case"tool-input-available":{o.dynamic?g({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata,title:o.title}):v({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata,title:o.title}),c(),i&&!o.providerExecuted&&await i({toolCall:o});break}case"tool-input-error":{o.dynamic?g({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}):v({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:void 0,rawInput:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}),c();break}case"tool-approval-request":{const x=y(o.toolCallId);x.state="approval-requested",x.approval={id:o.approvalId},c();break}case"tool-output-denied":{const x=y(o.toolCallId);x.state="output-denied",c();break}case"tool-output-available":{const x=y(o.toolCallId);x.type==="dynamic-tool"?g({toolCallId:o.toolCallId,toolName:x.toolName,state:"output-available",input:x.input,output:o.output,preliminary:o.preliminary,providerExecuted:o.providerExecuted,title:x.title}):v({toolCallId:o.toolCallId,toolName:to(x),state:"output-available",input:x.input,output:o.output,providerExecuted:o.providerExecuted,preliminary:o.preliminary,title:x.title}),c();break}case"tool-output-error":{const x=y(o.toolCallId);x.type==="dynamic-tool"?g({toolCallId:o.toolCallId,toolName:x.toolName,state:"output-error",input:x.input,errorText:o.errorText,providerExecuted:o.providerExecuted,title:x.title}):v({toolCallId:o.toolCallId,toolName:to(x),state:"output-error",input:x.input,rawInput:x.rawInput,errorText:o.errorText,providerExecuted:o.providerExecuted,title:x.title}),c();break}case"start-step":{u.message.parts.push({type:"step-start"});break}case"finish-step":{u.activeTextParts={},u.activeReasoningParts={};break}case"start":{o.messageId!=null&&(u.message.id=o.messageId),await _(o.messageMetadata),(o.messageId!=null||o.messageMetadata!=null)&&c();break}case"finish":{o.finishReason!=null&&(u.finishReason=o.finishReason),await _(o.messageMetadata),o.messageMetadata!=null&&c();break}case"message-metadata":{await _(o.messageMetadata),o.messageMetadata!=null&&c();break}case"error":{s==null||s(new Error(o.errorText));break}default:if(VA(o)){if((n==null?void 0:n[o.type])!=null){const E=u.message.parts.findIndex(P=>"id"in P&&"data"in P&&P.id===o.id&&P.type===o.type),I=E>=0?E:u.message.parts.length;await Ec({value:o.data,schema:n[o.type],context:{field:`message.parts[${I}].data`,entityName:o.type,entityId:o.id}})}const x=o;if(x.transient){a==null||a(x);break}const T=x.id!=null?u.message.parts.find(E=>x.type===E.type&&x.id===E.id):void 0;T!=null?T.data=x.data:u.message.parts.push(x),a==null||a(x),c()}}l.enqueue(o)})}}))}async function GA({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}ls({prefix:"aitxt",size:24});ls({prefix:"aiobj",size:24});var JA=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,n)=>{this.queue.push(async()=>{try{await e(),t()}catch(r){n(r)}}),this.processQueue()})}};ls({prefix:"aiobj",size:24});async function KA(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:n,type:r}=t,s=await new Promise((i,a)=>{const o=new FileReader;o.onload=l=>{var u;i((u=l.target)==null?void 0:u.result)},o.onerror=l=>a(l),o.readAsDataURL(t)});return{type:"file",mediaType:r,filename:n,url:s}}))}var YA=class{constructor({api:e="/api/chat",credentials:t,headers:n,body:r,fetch:s,prepareSendMessagesRequest:i,prepareReconnectToStreamRequest:a}){this.api=e,this.credentials=t,this.headers=n,this.body=r,this.fetch=s,this.prepareSendMessagesRequest=i,this.prepareReconnectToStreamRequest=a}async sendMessages({abortSignal:e,...t}){var n,r,s,i,a;const o=await Gt(this.body),l=await Gt(this.headers),u=await Gt(this.credentials),c={...fn(l),...fn(t.headers)},d=await((n=this.prepareSendMessagesRequest)==null?void 0:n.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:c,credentials:u,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),h=(r=d==null?void 0:d.api)!=null?r:this.api,f=(d==null?void 0:d.headers)!==void 0?fn(d.headers):c,m=(d==null?void 0:d.body)!==void 0?d.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},y=(s=d==null?void 0:d.credentials)!=null?s:u,g=await((i=this.fetch)!=null?i:globalThis.fetch)(h,{method:"POST",headers:Sc({"Content-Type":"application/json",...f},`ai-sdk/${Rc}`,kc()),body:JSON.stringify(m),credentials:y,signal:e});if(!g.ok)throw new Error((a=await g.text())!=null?a:"Failed to fetch the chat response.");if(!g.body)throw new Error("The response body is empty.");return this.processResponseStream(g.body)}async reconnectToStream(e){var t,n,r,s,i;const a=await Gt(this.body),o=await Gt(this.headers),l=await Gt(this.credentials),u={...fn(o),...fn(e.headers)},c=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...a,...e.body},headers:u,credentials:l,requestMetadata:e.metadata})),d=(n=c==null?void 0:c.api)!=null?n:`${this.api}/${e.chatId}/stream`,h=(c==null?void 0:c.headers)!==void 0?fn(c.headers):u,f=(r=c==null?void 0:c.credentials)!=null?r:l,y=await((s=this.fetch)!=null?s:globalThis.fetch)(d,{method:"GET",headers:Sc(h,`ai-sdk/${Rc}`,kc()),credentials:f});if(y.status===204)return null;if(!y.ok)throw new Error((i=await y.text())!=null?i:"Failed to fetch the chat response.");if(!y.body)throw new Error("The response body is empty.");return this.processResponseStream(y.body)}},Eg=class extends YA{constructor(e={}){super(e)}processResponseStream(e){return _A({stream:e,schema:ZA}).pipeThrough(new TransformStream({async transform(t,n){if(!t.success)throw t.error;n.enqueue(t.value)}}))}},XA=class{constructor({generateId:e=cg,id:t=e(),transport:n=new Eg,messageMetadataSchema:r,dataPartSchemas:s,state:i,onError:a,onToolCall:o,onFinish:l,onData:u,sendAutomaticallyWhen:c}){this.activeResponse=void 0,this.jobExecutor=new JA,this.sendMessage=async(d,h)=>{var f,m,y,v;if(d==null){await this.makeRequest({trigger:"submit-message",messageId:(f=this.lastMessage)==null?void 0:f.id,...h});return}let g;if("text"in d||"files"in d?g={parts:[...Array.isArray(d.files)?d.files:await KA(d.files),..."text"in d&&d.text!=null?[{type:"text",text:d.text}]:[]]}:g=d,d.messageId!=null){const _=this.state.messages.findIndex(x=>x.id===d.messageId);if(_===-1)throw new Error(`message with id ${d.messageId} not found`);if(this.state.messages[_].role!=="user")throw new Error(`message with id ${d.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,_+1),this.state.replaceMessage(_,{...g,id:d.messageId,role:(m=g.role)!=null?m:"user",metadata:d.metadata})}else this.state.pushMessage({...g,id:(y=g.id)!=null?y:this.generateId(),role:(v=g.role)!=null?v:"user",metadata:d.metadata});await this.makeRequest({trigger:"submit-message",messageId:d.messageId,...h})},this.regenerate=async({messageId:d,...h}={})=>{const f=d==null?this.state.messages.length-1:this.state.messages.findIndex(m=>m.id===d);if(f===-1)throw new Error(`message ${d} not found`);this.state.messages=this.state.messages.slice(0,this.messages[f].role==="assistant"?f:f+1),await this.makeRequest({trigger:"regenerate-message",messageId:d,...h})},this.resumeStream=async(d={})=>{await this.makeRequest({trigger:"resume-stream",...d})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:d,approved:h,reason:f})=>this.jobExecutor.run(async()=>{const m=this.state.messages,y=m[m.length-1],v=g=>Wr(g)&&g.state==="approval-requested"&&g.approval.id===d?{...g,state:"approval-responded",approval:{id:d,approved:h,reason:f}}:g;this.state.replaceMessage(m.length-1,{...y,parts:y.parts.map(v)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(v)),this.status!=="streaming"&&this.status!=="submitted"&&this.sendAutomaticallyWhen&&this.shouldSendAutomatically().then(g=>{var _;g&&this.makeRequest({trigger:"submit-message",messageId:(_=this.lastMessage)==null?void 0:_.id})})}),this.addToolOutput=async({state:d="output-available",tool:h,toolCallId:f,output:m,errorText:y})=>this.jobExecutor.run(async()=>{const v=this.state.messages,g=v[v.length-1],_=x=>Wr(x)&&x.toolCallId===f?{...x,state:d,output:m,errorText:y}:x;this.state.replaceMessage(v.length-1,{...g,parts:g.parts.map(_)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(_)),this.status!=="streaming"&&this.status!=="submitted"&&this.sendAutomaticallyWhen&&this.shouldSendAutomatically().then(x=>{var T;x&&this.makeRequest({trigger:"submit-message",messageId:(T=this.lastMessage)==null?void 0:T.id})})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var d;this.status!=="streaming"&&this.status!=="submitted"||(d=this.activeResponse)!=null&&d.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=n,this.generateId=e,this.messageMetadataSchema=r,this.dataPartSchemas=s,this.state=i,this.onError=a,this.onToolCall=o,this.onFinish=l,this.onData=u,this.sendAutomaticallyWhen=c}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async shouldSendAutomatically(){if(!this.sendAutomaticallyWhen)return!1;const e=this.sendAutomaticallyWhen({messages:this.state.messages});return e&&typeof e=="object"&&"then"in e?await e:e}async makeRequest({trigger:e,metadata:t,headers:n,body:r,messageId:s}){var i,a,o;this.setStatus({status:"submitted",error:void 0});const l=this.lastMessage;let u=!1,c=!1,d=!1;try{const h={state:HA({lastMessage:this.state.snapshot(l),messageId:this.generateId()}),abortController:new AbortController};h.abortController.signal.addEventListener("abort",()=>{u=!0}),this.activeResponse=h;let f;if(e==="resume-stream"){const y=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:n,body:r});if(y==null){this.setStatus({status:"ready"});return}f=y}else f=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:h.abortController.signal,metadata:t,headers:n,body:r,trigger:e,messageId:s});const m=y=>this.jobExecutor.run(()=>y({state:h.state,write:()=>{var v;this.setStatus({status:"streaming"}),h.state.message.id===((v=this.lastMessage)==null?void 0:v.id)?this.state.replaceMessage(this.state.messages.length-1,h.state.message):this.state.pushMessage(h.state.message)}}));await GA({stream:WA({stream:f,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:m,onError:y=>{throw y}}),onError:y=>{throw y}}),this.setStatus({status:"ready"})}catch(h){if(u||h.name==="AbortError")return u=!0,this.setStatus({status:"ready"}),null;d=!0,h instanceof TypeError&&(h.message.toLowerCase().includes("fetch")||h.message.toLowerCase().includes("network"))&&(c=!0),this.onError&&h instanceof Error&&this.onError(h),this.setStatus({status:"error",error:h})}finally{try{(a=this.onFinish)==null||a.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:u,isDisconnect:c,isError:d,finishReason:(i=this.activeResponse)==null?void 0:i.state.finishReason})}catch(h){console.error(h)}this.activeResponse=void 0}!d&&await this.shouldSendAutomatically()&&await this.makeRequest({trigger:"submit-message",messageId:(o=this.lastMessage)==null?void 0:o.id,metadata:t,headers:n,body:r})}};const Ac=(e,t)=>{var r;if(t==null)return[];let n=e.findIndex(s=>s.id===t);if(n===-1)throw new Error("useVercelAIThreadState: Message not found. This is likely an internal bug in assistant-ui.");for(;((r=e[n+1])==null?void 0:r.role)==="assistant";)n++;return e.slice(0,n+1)},Pc=e=>{var r;const n=[...e.content.filter(s=>s.type!=="file"),...((r=e.attachments)==null?void 0:r.flatMap(s=>s.content.map(i=>({...i,filename:s.name}))))??[]].map(s=>{switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"file",url:s.image,...s.filename&&{filename:s.filename},mediaType:"image/png"};case"file":return{type:"file",url:s.data,mediaType:s.mimeType,...s.filename&&{filename:s.filename}};default:throw new Error(`Unsupported part type: ${s.type}`)}});return{role:e.role,parts:n,metadata:e.metadata}},QA=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=s=>n(s),r.readAsDataURL(e)}),eP={accept:"image/*, text/plain, text/html, text/markdown, text/csv, text/xml, text/json, text/css",async add({file:e}){return{id:cg(),type:e.type.startsWith("image/")?"image":"file",name:e.name,file:e,contentType:e.type,content:[],status:{type:"requires-action",reason:"composer-send"}}},async send(e){return{...e,status:{type:"complete"},content:[{type:"file",mimeType:e.contentType,filename:e.name,data:await QA(e.file)}]}},async remove(){}},Mc=e=>Yt(e);function tP(e){return e.replace(/[}\]"]+$/,"")}const ca=(e,t)=>!e.parts||e.parts.length===0?[]:e.parts.filter(n=>n.type!=="step-start"&&n.type!=="file").map(n=>{var s;const r=n.type;if(r==="text")return{type:"text",text:n.text};if(r==="reasoning")return{type:"reasoning",text:n.text};if(Wr(n)){const i=qA(n),a=n.toolCallId;let o={},l,u=!1;n.state==="input-streaming"||n.state==="input-available"?o=n.input||{}:n.state==="output-available"?(o=n.input||{},l=n.output):n.state==="output-error"&&(o=n.input||{},u=!0,l={error:n.errorText});let c=JSON.stringify(o);n.state==="input-streaming"&&(c=tP(c));const d=(s=t.toolStatuses)==null?void 0:s[a];return{type:"tool-call",toolName:i,toolCallId:a,argsText:c,args:o,result:l,isError:u,...(d==null?void 0:d.type)==="interrupt"&&{interrupt:d.payload,status:{type:"requires-action",reason:"interrupt"}}}}return r==="source-url"?{type:"source",sourceType:"url",id:n.sourceId,url:n.url,title:n.title||""}:r==="source-document"?(console.warn(`Source document part type ${r} is not yet supported in conversion`),null):r.startsWith("data-")?{type:"data",name:r.substring(5),data:n.data}:(console.warn(`Unsupported message part type: ${r}`),null)}).filter(Boolean),da=Gk((e,t)=>{var r;const n=new Date;switch(e.role){case"user":return{role:"user",id:e.id,createdAt:n,content:ca(e,t),attachments:(r=e.parts)==null?void 0:r.filter(s=>s.type==="file").map((s,i)=>({id:i.toString(),type:s.mediaType.startsWith("image/")?"image":"file",name:s.filename??"file",content:[s.mediaType.startsWith("image/")?{type:"image",image:s.url,filename:s.filename}:{type:"file",filename:s.filename,data:s.url,mimeType:s.mediaType}],contentType:s.mediaType??"unknown/unknown",status:{type:"complete"}})),metadata:e.metadata};case"system":return{role:"system",id:e.id,createdAt:n,content:ca(e,t),metadata:e.metadata};case"assistant":return{role:"assistant",id:e.id,createdAt:n,content:ca(e,t),metadata:e.metadata};default:return console.warn(`Unsupported message role: ${e.role}`),[]}}),nP={format:"ai-sdk/v6",encode({message:{id:e,parts:t,...n}}){return{...n,parts:t}},decode(e){return{parentId:e.parent_id,message:{id:e.id,...e.content}}},getId(e){return e.id}},{MessageRepository:rP}=_S,Rg=(e,t)=>({headId:t.headId,messages:t.messages.map(n=>{const r=e([n.message])[0];return{...n,message:r}})}),sP=(e,t,n,r,s)=>{const i=b.useRef(!1),a=ee(),o=b.useCallback(()=>a.threadListItem.source?a.threadListItem():null,[a]),[l,u]=b.useState(!1),c=b.useRef(new Set),d=b.useRef(()=>s);return b.useEffect(()=>{d.current=s}),b.useEffect(()=>{var f;if(!t||i.current)return;const h=async()=>{var m;u(!0);try{const y=await((m=t.withFormat)==null?void 0:m.call(t,r).load());if(y&&y.messages.length>0){const v=Rg(n,y);e.current.thread.import(v);const g=new rP;g.import(v);const _=g.getMessages();d.current(_.map(Yt).flat()),c.current=new Set(v.messages.map(x=>x.message.id))}}catch(y){console.error("Failed to load message history:",y)}finally{u(!1)}};if(!i.current){if(i.current=!0,!((f=o())!=null&&f.getState().remoteId)){u(!1);return}h()}},[t,r,n,e,o]),b.useEffect(()=>e.current.thread.subscribe(async()=>{var m;const{messages:h,isRunning:f}=e.current.thread.getState();if(!f)for(let y=0;y<h.length;y++){const v=h[y];if(v.status===void 0||v.status.type==="complete"||v.status.type==="incomplete"){if(c.current.has(v.id))continue;c.current.add(v.id);const g=y>0?h[y-1].id:null;await((m=t==null?void 0:t.withFormat)==null?void 0:m.call(t,r).append({parentId:g,message:Yt(v)[0]}))}}}),[t,r,e]),l},iP=(e,{adapters:t,toCreateMessage:n,cancelPendingToolCallsOnSend:r=!0}={})=>{const s=ip(),[i,a]=b.useState({}),o=Object.values(i).some(y=>(y==null?void 0:y.type)==="executing"),l=e.status==="submitted"||e.status==="streaming"||o,u=da.useThreadMessages({isRunning:l,messages:e.messages,metadata:b.useMemo(()=>({toolStatuses:i,...e.error&&{error:e.error.message}}),[i,e.error])}),[c]=b.useState(()=>({get current(){return m}})),d=op({state:{messages:u,isRunning:l},getTools:()=>c.current.thread.getModelContext().tools,onResult:y=>{y.type==="add-tool-result"&&e.addToolResult({tool:y.toolName,toolCallId:y.toolCallId,output:y.result})},setToolStatuses:a}),h=sP(c,(t==null?void 0:t.history)??(s==null?void 0:s.history),da.toThreadMessages,nP,y=>{e.setMessages(y)}),f=async()=>{r&&(await d.abort(),e.setMessages(y=>{var x;const v=y.at(-1);if((v==null?void 0:v.role)!=="assistant")return y;let g=!1;const _=(x=v.parts)==null?void 0:x.map(T=>!Wr(T)||T.state==="output-available"||T.state==="output-error"?T:(g=!0,{...T,state:"output-error",errorText:"User cancelled tool call by sending a new message."}));return g?[...y.slice(0,-1),{...v,parts:_}]:y}))},m=Vk({isRunning:l,messages:u,setMessages:y=>e.setMessages(y.map(Mc).filter(Boolean).flat()),onImport:y=>e.setMessages(y.map(Mc).filter(Boolean).flat()),onExportExternalState:()=>{const y=c.current.thread.export(),v={messages:y.messages.map(g=>({parentId:g.parentId,message:Yt(g.message)[0]}))};return y.headId!==void 0&&(v.headId=y.headId),v},onLoadExternalState:y=>{const v=Rg(da.toThreadMessages,y);c.current.thread.import(v)},onCancel:async()=>{e.stop(),await d.abort()},onNew:async y=>{await f();const v=(n??Pc)(y);await e.sendMessage(v,{metadata:y.runConfig})},onEdit:async y=>{const v=Ac(e.messages,y.parentId);e.setMessages(v);const g=(n??Pc)(y);await e.sendMessage(g,{metadata:y.runConfig})},onReload:async(y,v)=>{const g=Ac(e.messages,y);e.setMessages(g),await e.regenerate({metadata:v.runConfig})},onAddToolResult:({toolCallId:y,result:v,isError:g})=>{g?e.addToolOutput({state:"output-error",tool:y,toolCallId:y,errorText:typeof v=="string"?v:JSON.stringify(v)}):e.addToolOutput({state:"output-available",tool:y,toolCallId:y,output:v})},onResumeToolCall:y=>d.resume(y.toolCallId,y.payload),adapters:{attachments:eP,...s,...t},isLoading:h});return m};function aP(e,t){if(typeof e!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let n,r=0;return function(...i){clearTimeout(n);const a=Date.now(),o=a-r,l=t-o;l<=0?(r=a,e.apply(this,i)):n=setTimeout(()=>{r=Date.now(),e.apply(this,i)},l)}}var oP=aP;const lP=hi(oP);var Ag=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},we=(e,t,n)=>(Ag(e,t,"read from private field"),n?n.call(e):t.get(e)),It=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ht=(e,t,n,r)=>(Ag(e,t,"write to private field"),t.set(e,n),n);function uP(e,t){return t!=null?lP(e,t):e}var ut,Ls,$s,_r,wr,kr,$n,no,ro,cP=class{constructor(e=[]){It(this,ut,void 0),It(this,Ls,"ready"),It(this,$s,void 0),It(this,_r,new Set),It(this,wr,new Set),It(this,kr,new Set),this.pushMessage=t=>{Ht(this,ut,we(this,ut).concat(t)),we(this,$n).call(this)},this.popMessage=()=>{Ht(this,ut,we(this,ut).slice(0,-1)),we(this,$n).call(this)},this.replaceMessage=(t,n)=>{Ht(this,ut,[...we(this,ut).slice(0,t),this.snapshot(n),...we(this,ut).slice(t+1)]),we(this,$n).call(this)},this.snapshot=t=>structuredClone(t),this["~registerMessagesCallback"]=(t,n)=>{const r=n?uP(t,n):t;return we(this,_r).add(r),()=>{we(this,_r).delete(r)}},this["~registerStatusCallback"]=t=>(we(this,wr).add(t),()=>{we(this,wr).delete(t)}),this["~registerErrorCallback"]=t=>(we(this,kr).add(t),()=>{we(this,kr).delete(t)}),It(this,$n,()=>{we(this,_r).forEach(t=>t())}),It(this,no,()=>{we(this,wr).forEach(t=>t())}),It(this,ro,()=>{we(this,kr).forEach(t=>t())}),Ht(this,ut,e)}get status(){return we(this,Ls)}set status(e){Ht(this,Ls,e),we(this,no).call(this)}get error(){return we(this,$s)}set error(e){Ht(this,$s,e),we(this,ro).call(this)}get messages(){return we(this,ut)}set messages(e){Ht(this,ut,[...e]),we(this,$n).call(this)}};ut=new WeakMap;Ls=new WeakMap;$s=new WeakMap;_r=new WeakMap;wr=new WeakMap;kr=new WeakMap;$n=new WeakMap;no=new WeakMap;ro=new WeakMap;var Fn,Nc=class extends XA{constructor({messages:e,...t}){const n=new cP(e);super({...t,state:n}),It(this,Fn,void 0),this["~registerMessagesCallback"]=(r,s)=>we(this,Fn)["~registerMessagesCallback"](r,s),this["~registerStatusCallback"]=r=>we(this,Fn)["~registerStatusCallback"](r),this["~registerErrorCallback"]=r=>we(this,Fn)["~registerErrorCallback"](r),Ht(this,Fn,n)}};Fn=new WeakMap;function dP({experimental_throttle:e,resume:t=!1,...n}={}){const r=b.useRef("chat"in n?{}:{onToolCall:n.onToolCall,onData:n.onData,onFinish:n.onFinish,onError:n.onError,sendAutomaticallyWhen:n.sendAutomaticallyWhen});"chat"in n||(r.current={onToolCall:n.onToolCall,onData:n.onData,onFinish:n.onFinish,onError:n.onError,sendAutomaticallyWhen:n.sendAutomaticallyWhen});const s={...n,onToolCall:h=>{var f,m;return(m=(f=r.current).onToolCall)==null?void 0:m.call(f,h)},onData:h=>{var f,m;return(m=(f=r.current).onData)==null?void 0:m.call(f,h)},onFinish:h=>{var f,m;return(m=(f=r.current).onFinish)==null?void 0:m.call(f,h)},onError:h=>{var f,m;return(m=(f=r.current).onError)==null?void 0:m.call(f,h)},sendAutomaticallyWhen:h=>{var f,m,y;return(y=(m=(f=r.current).sendAutomaticallyWhen)==null?void 0:m.call(f,h))!=null?y:!1}},i=b.useRef("chat"in n?n.chat:new Nc(s));("chat"in n&&n.chat!==i.current||"id"in n&&i.current.id!==n.id)&&(i.current="chat"in n?n.chat:new Nc(s));const o=b.useCallback(h=>i.current["~registerMessagesCallback"](h,e),[e,i.current.id]),l=b.useSyncExternalStore(o,()=>i.current.messages,()=>i.current.messages),u=b.useSyncExternalStore(i.current["~registerStatusCallback"],()=>i.current.status,()=>i.current.status),c=b.useSyncExternalStore(i.current["~registerErrorCallback"],()=>i.current.error,()=>i.current.error),d=b.useCallback(h=>{typeof h=="function"&&(h=h(i.current.messages)),i.current.messages=h},[i]);return b.useEffect(()=>{t&&i.current.resumeStream()},[t,i]),{id:i.current.id,messages:l,setMessages:d,sendMessage:i.current.sendMessage,regenerate:i.current.regenerate,clearError:i.current.clearError,stop:i.current.stop,error:c,resumeStream:i.current.resumeStream,status:u,addToolResult:i.current.addToolOutput,addToolOutput:i.current.addToolOutput,addToolApprovalResponse:i.current.addToolApprovalResponse}}class so extends Eg{constructor(n){super({...n,prepareSendMessagesRequest:async r=>{var l,u,c,d;const s=(l=this.runtime)==null?void 0:l.thread.getModelContext(),i=((c=await((u=this.runtime)==null?void 0:u.threads.mainItem.initialize()))==null?void 0:c.remoteId)??r.id,a={...r,body:{callSettings:s==null?void 0:s.callSettings,system:s==null?void 0:s.system,config:s==null?void 0:s.config,tools:Ik((s==null?void 0:s.tools)??{}),...r==null?void 0:r.body}},o=await((d=n==null?void 0:n.prepareSendMessagesRequest)==null?void 0:d.call(n,a));return{...o,body:(o==null?void 0:o.body)??{...a.body,id:i,messages:r.messages,trigger:r.trigger,messageId:r.messageId,metadata:r.requestMetadata}}}});S(this,"runtime")}setRuntime(n){this.runtime=n}}const hP=e=>{const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>new Proxy(t.current,{get(r,s){const i=t.current[s];return typeof i=="function"?i.bind(t.current):i}}),[])},fP=e=>{const{adapters:t,transport:n,toCreateMessage:r,...s}=e??{},i=hP(n??new so),a=Z(({threadListItem:u})=>u.id),o=dP({...s,id:a,transport:i}),l=iP(o,{adapters:t,...r&&{toCreateMessage:r}});return i instanceof so&&i.setRuntime(l),l},pP=({cloud:e,...t}={})=>{const n=cS({cloud:e});return rI({runtimeHook:function(){return fP(t)},adapter:n,allowNesting:!0})},Oc=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,jc=gb,mP=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return jc(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const c=n==null?void 0:n[u],d=i==null?void 0:i[u];if(c===null)return null;const h=Oc(c)||Oc(d);return s[u][h]}),o=n&&Object.entries(n).reduce((u,c)=>{let[d,h]=c;return h===void 0||(u[d]=h),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:h,...f}=c;return Object.entries(f).every(m=>{let[y,v]=m;return Array.isArray(v)?v.includes({...i,...o}[y]):{...i,...o}[y]===v})?[...u,d,h]:u},[]);return jc(e,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},gP=mP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function kn({className:e,variant:t="default",size:n="default",asChild:r=!1,...s}){const i=r?yb:"button";return p.jsx(i,{"data-slot":"button","data-variant":t,"data-size":n,className:K(gP({variant:t,size:n,className:e})),...s})}function yP({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:K("bg-accent animate-pulse rounded-md",e),...t})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=e=>{const t=vP(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},l)=>b.createElement("svg",{ref:l,...xP,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Pg("lucide",s),...!i&&!_P(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,c])=>b.createElement(u,c)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(e,t)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(wP,{ref:i,iconNode:t,className:Pg(`lucide-${bP(Dc(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Dc(e),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],SP=Ne("archive",kP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],TP=Ne("arrow-down",IP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],EP=Ne("arrow-up",CP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hl=Ne("check",RP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],PP=Ne("chevron-down",AP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],NP=Ne("chevron-left",MP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jP=Ne("chevron-right",OP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zP=Ne("circle-alert",DP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$P=Ne("circle-x",LP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Mg=Ne("copy",FP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],UP=Ne("download",BP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ng=Ne("ellipsis",ZP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qP=Ne("file-text",VP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],WP=Ne("loader",HP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],JP=Ne("pencil",GP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Og=Ne("plus",KP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],XP=Ne("refresh-cw",YP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],eM=Ne("square",QP);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nM=Ne("trash",tM);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jg=Ne("x",rM),sM=()=>p.jsxs(gm,{className:"aui-root aui-thread-list-root flex flex-col gap-1",children:[p.jsx(iM,{}),p.jsx(en,{condition:({threads:e})=>e.isLoading,children:p.jsx(aM,{})}),p.jsx(en,{condition:({threads:e})=>!e.isLoading,children:p.jsx(mm,{components:{ThreadListItem:oM}})})]}),iM=()=>p.jsx(fm,{asChild:!0,children:p.jsxs(kn,{variant:"outline",className:"aui-thread-list-new h-9 justify-start gap-2 rounded-lg px-3 text-sm hover:bg-muted data-active:bg-muted",children:[p.jsx(Og,{className:"size-4"}),"New Thread"]})}),aM=()=>p.jsx("div",{className:"flex flex-col gap-1",children:Array.from({length:5},(e,t)=>p.jsx("div",{role:"status","aria-label":"Loading threads",className:"aui-thread-list-skeleton-wrapper flex h-9 items-center px-3",children:p.jsx(yP,{className:"aui-thread-list-skeleton h-4 w-full"})},t))}),oM=()=>p.jsxs(ym,{className:"aui-thread-list-item group flex h-9 items-center gap-2 rounded-lg transition-colors hover:bg-muted focus-visible:bg-muted focus-visible:outline-none data-active:bg-muted",children:[p.jsx(FT,{className:"aui-thread-list-item-trigger flex h-full min-w-0 flex-1 items-center truncate px-3 text-start text-sm",children:p.jsx(bm,{fallback:"New Chat"})}),p.jsx(lM,{})]}),lM=()=>p.jsxs(vm,{children:[p.jsx(xm,{asChild:!0,children:p.jsxs(kn,{variant:"ghost",size:"icon",className:"aui-thread-list-item-more mr-2 size-7 p-0 opacity-0 transition-opacity group-hover:opacity-100 data-[state=open]:bg-accent data-[state=open]:opacity-100 group-data-active:opacity-100",children:[p.jsx(Ng,{className:"size-4"}),p.jsx("span",{className:"sr-only",children:"More options"})]})}),p.jsxs(_m,{side:"bottom",align:"start",className:"aui-thread-list-item-more-content z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",children:[p.jsx(DT,{asChild:!0,children:p.jsxs(Ua,{className:"aui-thread-list-item-more-item flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[p.jsx(SP,{className:"size-4"}),"Archive"]})}),p.jsx(LT,{asChild:!0,children:p.jsxs(Ua,{className:"aui-thread-list-item-more-item flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-destructive text-sm outline-none hover:bg-destructive/10 hover:text-destructive focus:bg-destructive/10 focus:text-destructive",children:[p.jsx(nM,{className:"size-4"}),"Delete"]})})]})]});function uM({...e}){return p.jsx(Cv,{"data-slot":"dialog",...e})}function cM({...e}){return p.jsx(Ev,{"data-slot":"dialog-trigger",...e})}function dM({...e}){return p.jsx(Rv,{"data-slot":"dialog-portal",...e})}function hM({className:e,...t}){return p.jsx(Av,{"data-slot":"dialog-overlay",className:K("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function fM({className:e,children:t,showCloseButton:n=!0,...r}){return p.jsxs(dM,{"data-slot":"dialog-portal",children:[p.jsx(hM,{}),p.jsxs(Pv,{"data-slot":"dialog-content",className:K("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",e),...r,children:[t,n&&p.jsxs(Nv,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(jg,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function pM({className:e,...t}){return p.jsx(Mv,{"data-slot":"dialog-title",className:K("text-lg leading-none font-semibold",e),...t})}function mM({className:e,size:t="default",...n}){return p.jsx(Jv,{"data-slot":"avatar","data-size":t,className:K("group/avatar relative flex size-8 shrink-0 overflow-hidden rounded-full select-none data-[size=lg]:size-10 data-[size=sm]:size-6",e),...n})}function gM({className:e,...t}){return p.jsx(Kv,{"data-slot":"avatar-image",className:K("aspect-square size-full",e),...t})}function yM({className:e,...t}){return p.jsx(Yv,{"data-slot":"avatar-fallback",className:K("bg-muted text-muted-foreground flex size-full items-center justify-center rounded-full text-sm group-data-[size=sm]/avatar:text-xs",e),...t})}const ht=b.forwardRef(({children:e,tooltip:t,side:n="bottom",className:r,...s},i)=>p.jsxs(zd,{children:[p.jsx(Ld,{asChild:!0,children:p.jsxs(kn,{variant:"ghost",size:"icon",...s,className:K("aui-button-icon size-6 p-1",r),ref:i,children:[p.jsx(bb,{children:e}),p.jsx("span",{className:"aui-sr-only sr-only",children:t})]})}),p.jsx($d,{side:n,children:t})]}));ht.displayName="TooltipIconButton";const bM=e=>{const[t,n]=b.useState(void 0);return b.useEffect(()=>{if(!e){n(void 0);return}const r=URL.createObjectURL(e);return n(r),()=>{URL.revokeObjectURL(r)}},[e]),t},Dg=()=>{const{file:e,src:t}=Z(Fp(({attachment:n})=>{var s,i;if(n.type!=="image")return{};if(n.file)return{file:n.file};const r=(i=(s=n.content)==null?void 0:s.filter(a=>a.type==="image")[0])==null?void 0:i.image;return r?{src:r}:{}}));return bM(e)??t},vM=({src:e})=>{const[t,n]=b.useState(!1);return p.jsx("img",{src:e,alt:"Image Preview",className:K("block h-auto max-h-[80vh] w-auto max-w-full object-contain",t?"aui-attachment-preview-image-loaded":"aui-attachment-preview-image-loading invisible"),onLoad:()=>n(!0)})},xM=({children:e})=>{const t=Dg();return t?p.jsxs(uM,{children:[p.jsx(cM,{className:"aui-attachment-preview-trigger cursor-pointer transition-colors hover:bg-accent/50",asChild:!0,children:e}),p.jsxs(fM,{className:"aui-attachment-preview-dialog-content p-2 sm:max-w-3xl [&>button]:rounded-full [&>button]:bg-foreground/60 [&>button]:p-1 [&>button]:opacity-100 [&>button]:ring-0! [&_svg]:text-background [&>button]:hover:[&_svg]:text-destructive",children:[p.jsx(pM,{className:"aui-sr-only sr-only",children:"Image Attachment Preview"}),p.jsx("div",{className:"aui-attachment-preview relative mx-auto flex max-h-[80dvh] w-full items-center justify-center overflow-hidden bg-background",children:p.jsx(vM,{src:t})})]})]}):e},_M=()=>{const e=Z(({attachment:n})=>n.type==="image"),t=Dg();return p.jsxs(mM,{className:"aui-attachment-tile-avatar h-full w-full rounded-none",children:[p.jsx(gM,{src:t,alt:"Attachment preview",className:"aui-attachment-tile-image object-cover"}),p.jsx(yM,{delayMs:e?200:0,children:p.jsx(qP,{className:"aui-attachment-tile-fallback-icon size-8 text-muted-foreground"})})]})},zg=()=>{const t=ee().attachment.source==="composer",n=Z(({attachment:s})=>s.type==="image"),r=Z(({attachment:s})=>{const i=s.type;switch(i){case"image":return"Image";case"document":return"Document";case"file":return"File";default:const a=i;throw new Error(`Unknown attachment type: ${a}`)}});return p.jsxs(zd,{children:[p.jsxs(Mp,{className:K("aui-attachment-root relative",n&&"aui-attachment-root-composer only:[&>#attachment-tile]:size-24"),children:[p.jsx(xM,{children:p.jsx(Ld,{asChild:!0,children:p.jsx("div",{className:K("aui-attachment-tile size-14 cursor-pointer overflow-hidden rounded-[14px] border bg-muted transition-opacity hover:opacity-75",t&&"aui-attachment-tile-composer border-foreground/20"),role:"button",id:"attachment-tile","aria-label":`${r} attachment`,children:p.jsx(_M,{})})})}),t&&p.jsx(wM,{})]}),p.jsx($d,{side:"top",children:p.jsx(Np,{})})]})},wM=()=>p.jsx(TI,{asChild:!0,children:p.jsx(ht,{tooltip:"Remove file",className:"aui-attachment-tile-remove absolute top-1.5 right-1.5 size-3.5 rounded-full bg-white text-muted-foreground opacity-100 shadow-sm hover:bg-white! [&_svg]:text-black hover:[&_svg]:text-destructive",side:"top",children:p.jsx(jg,{className:"aui-attachment-remove-icon size-3 dark:stroke-[2.5px]"})})}),kM=()=>p.jsx("div",{className:"aui-user-message-attachments-end col-span-full col-start-1 row-start-1 flex w-full flex-row justify-end gap-2",children:p.jsx(Vp,{components:{Attachment:zg}})}),SM=()=>p.jsx("div",{className:"aui-composer-attachments mb-2 flex w-full flex-row items-center gap-2 overflow-x-auto px-1.5 pt-0.5 pb-1 empty:hidden",children:p.jsx(Xp,{components:{Attachment:zg}})}),IM=()=>p.jsx(vT,{asChild:!0,children:p.jsx(ht,{tooltip:"Add Attachment",side:"bottom",variant:"ghost",size:"icon",className:"aui-composer-add-attachment size-8.5 rounded-full p-1 font-semibold text-xs hover:bg-muted-foreground/15 dark:border-muted-foreground/15 dark:hover:bg-muted-foreground/30","aria-label":"Add Attachment",children:p.jsx(Og,{className:"aui-attachment-add-icon size-5 stroke-[1.5px]"})})});function TM(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const CM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,EM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,RM={};function zc(e,t){return(RM.jsx?EM:CM).test(e)}const AM=/[ \t\n\f\r]/g;function PM(e){return typeof e=="object"?e.type==="text"?Lc(e.value):!1:Lc(e)}function Lc(e){return e.replace(AM,"")===""}class cs{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}cs.prototype.normal={};cs.prototype.property={};cs.prototype.space=void 0;function Lg(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new cs(n,r,t)}function io(e){return e.toLowerCase()}class et{constructor(t,n){this.attribute=n,this.property=t}}et.prototype.attribute="";et.prototype.booleanish=!1;et.prototype.boolean=!1;et.prototype.commaOrSpaceSeparated=!1;et.prototype.commaSeparated=!1;et.prototype.defined=!1;et.prototype.mustUseProperty=!1;et.prototype.number=!1;et.prototype.overloadedBoolean=!1;et.prototype.property="";et.prototype.spaceSeparated=!1;et.prototype.space=void 0;let MM=0;const Q=Pn(),Re=Pn(),ao=Pn(),M=Pn(),ve=Pn(),Vn=Pn(),nt=Pn();function Pn(){return 2**++MM}const oo=Object.freeze(Object.defineProperty({__proto__:null,boolean:Q,booleanish:Re,commaOrSpaceSeparated:nt,commaSeparated:Vn,number:M,overloadedBoolean:ao,spaceSeparated:ve},Symbol.toStringTag,{value:"Module"})),ha=Object.keys(oo);class fl extends et{constructor(t,n,r,s){let i=-1;if(super(t,n),$c(this,"space",s),typeof r=="number")for(;++i<ha.length;){const a=ha[i];$c(this,ha[i],(r&oo[a])===oo[a])}}}fl.prototype.defined=!0;function $c(e,t,n){n&&(e[t]=n)}function lr(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const i=new fl(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[io(r)]=r,n[io(i.attribute)]=r}return new cs(t,n,e.space)}const $g=lr({properties:{ariaActiveDescendant:null,ariaAtomic:Re,ariaAutoComplete:null,ariaBusy:Re,ariaChecked:Re,ariaColCount:M,ariaColIndex:M,ariaColSpan:M,ariaControls:ve,ariaCurrent:null,ariaDescribedBy:ve,ariaDetails:null,ariaDisabled:Re,ariaDropEffect:ve,ariaErrorMessage:null,ariaExpanded:Re,ariaFlowTo:ve,ariaGrabbed:Re,ariaHasPopup:null,ariaHidden:Re,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ve,ariaLevel:M,ariaLive:null,ariaModal:Re,ariaMultiLine:Re,ariaMultiSelectable:Re,ariaOrientation:null,ariaOwns:ve,ariaPlaceholder:null,ariaPosInSet:M,ariaPressed:Re,ariaReadOnly:Re,ariaRelevant:null,ariaRequired:Re,ariaRoleDescription:ve,ariaRowCount:M,ariaRowIndex:M,ariaRowSpan:M,ariaSelected:Re,ariaSetSize:M,ariaSort:null,ariaValueMax:M,ariaValueMin:M,ariaValueNow:M,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Fg(e,t){return t in e?e[t]:t}function Bg(e,t){return Fg(e,t.toLowerCase())}const NM=lr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Vn,acceptCharset:ve,accessKey:ve,action:null,allow:null,allowFullScreen:Q,allowPaymentRequest:Q,allowUserMedia:Q,alt:null,as:null,async:Q,autoCapitalize:null,autoComplete:ve,autoFocus:Q,autoPlay:Q,blocking:ve,capture:null,charSet:null,checked:Q,cite:null,className:ve,cols:M,colSpan:null,content:null,contentEditable:Re,controls:Q,controlsList:ve,coords:M|Vn,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Q,defer:Q,dir:null,dirName:null,disabled:Q,download:ao,draggable:Re,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Q,formTarget:null,headers:ve,height:M,hidden:ao,high:M,href:null,hrefLang:null,htmlFor:ve,httpEquiv:ve,id:null,imageSizes:null,imageSrcSet:null,inert:Q,inputMode:null,integrity:null,is:null,isMap:Q,itemId:null,itemProp:ve,itemRef:ve,itemScope:Q,itemType:ve,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Q,low:M,manifest:null,max:null,maxLength:M,media:null,method:null,min:null,minLength:M,multiple:Q,muted:Q,name:null,nonce:null,noModule:Q,noValidate:Q,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Q,optimum:M,pattern:null,ping:ve,placeholder:null,playsInline:Q,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Q,referrerPolicy:null,rel:ve,required:Q,reversed:Q,rows:M,rowSpan:M,sandbox:ve,scope:null,scoped:Q,seamless:Q,selected:Q,shadowRootClonable:Q,shadowRootDelegatesFocus:Q,shadowRootMode:null,shape:null,size:M,sizes:null,slot:null,span:M,spellCheck:Re,src:null,srcDoc:null,srcLang:null,srcSet:null,start:M,step:null,style:null,tabIndex:M,target:null,title:null,translate:null,type:null,typeMustMatch:Q,useMap:null,value:Re,width:M,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ve,axis:null,background:null,bgColor:null,border:M,borderColor:null,bottomMargin:M,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Q,declare:Q,event:null,face:null,frame:null,frameBorder:null,hSpace:M,leftMargin:M,link:null,longDesc:null,lowSrc:null,marginHeight:M,marginWidth:M,noResize:Q,noHref:Q,noShade:Q,noWrap:Q,object:null,profile:null,prompt:null,rev:null,rightMargin:M,rules:null,scheme:null,scrolling:Re,standby:null,summary:null,text:null,topMargin:M,valueType:null,version:null,vAlign:null,vLink:null,vSpace:M,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Q,disableRemotePlayback:Q,prefix:null,property:null,results:M,security:null,unselectable:null},space:"html",transform:Bg}),OM=lr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:nt,accentHeight:M,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:M,amplitude:M,arabicForm:null,ascent:M,attributeName:null,attributeType:null,azimuth:M,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:M,by:null,calcMode:null,capHeight:M,className:ve,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:M,diffuseConstant:M,direction:null,display:null,dur:null,divisor:M,dominantBaseline:null,download:Q,dx:null,dy:null,edgeMode:null,editable:null,elevation:M,enableBackground:null,end:null,event:null,exponent:M,externalResourcesRequired:null,fill:null,fillOpacity:M,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Vn,g2:Vn,glyphName:Vn,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:M,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:M,horizOriginX:M,horizOriginY:M,id:null,ideographic:M,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:M,k:M,k1:M,k2:M,k3:M,k4:M,kernelMatrix:nt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:M,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:M,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:M,overlineThickness:M,paintOrder:null,panose1:null,path:null,pathLength:M,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ve,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:M,pointsAtY:M,pointsAtZ:M,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nt,rev:nt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nt,requiredFeatures:nt,requiredFonts:nt,requiredFormats:nt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:M,specularExponent:M,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:M,strikethroughThickness:M,string:null,stroke:null,strokeDashArray:nt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:M,strokeOpacity:M,strokeWidth:null,style:null,surfaceScale:M,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nt,tabIndex:M,tableValues:null,target:null,targetX:M,targetY:M,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:M,underlineThickness:M,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:M,values:null,vAlphabetic:M,vMathematical:M,vectorEffect:null,vHanging:M,vIdeographic:M,version:null,vertAdvY:M,vertOriginX:M,vertOriginY:M,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:M,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Fg}),Ug=lr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Zg=lr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Bg}),Vg=lr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),jM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},DM=/[A-Z]/g,Fc=/-[a-z]/g,zM=/^data[-\w.:]+$/i;function LM(e,t){const n=io(t);let r=t,s=et;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&zM.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Fc,FM);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Fc.test(i)){let a=i.replace(DM,$M);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}s=fl}return new s(r,t)}function $M(e){return"-"+e.toLowerCase()}function FM(e){return e.charAt(1).toUpperCase()}const BM=Lg([$g,NM,Ug,Zg,Vg],"html"),pl=Lg([$g,OM,Ug,Zg,Vg],"svg");function UM(e){return e.join(" ").trim()}var ml={},Bc=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ZM=/\n/g,VM=/^\s*/,qM=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,HM=/^:\s*/,WM=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,GM=/^[;\s]*/,JM=/^\s+|\s+$/g,KM=`
`,Uc="/",Zc="*",pn="",YM="comment",XM="declaration";function QM(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(m){var y=m.match(ZM);y&&(n+=y.length);var v=m.lastIndexOf(KM);r=~v?m.length-v:r+m.length}function i(){var m={line:n,column:r};return function(y){return y.position=new a(m),u(),y}}function a(m){this.start=m,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function o(m){var y=new Error(t.source+":"+n+":"+r+": "+m);if(y.reason=m,y.filename=t.source,y.line=n,y.column=r,y.source=e,!t.silent)throw y}function l(m){var y=m.exec(e);if(y){var v=y[0];return s(v),e=e.slice(v.length),y}}function u(){l(VM)}function c(m){var y;for(m=m||[];y=d();)y!==!1&&m.push(y);return m}function d(){var m=i();if(!(Uc!=e.charAt(0)||Zc!=e.charAt(1))){for(var y=2;pn!=e.charAt(y)&&(Zc!=e.charAt(y)||Uc!=e.charAt(y+1));)++y;if(y+=2,pn===e.charAt(y-1))return o("End of comment missing");var v=e.slice(2,y-2);return r+=2,s(v),e=e.slice(y),r+=2,m({type:YM,comment:v})}}function h(){var m=i(),y=l(qM);if(y){if(d(),!l(HM))return o("property missing ':'");var v=l(WM),g=m({type:XM,property:Vc(y[0].replace(Bc,pn)),value:v?Vc(v[0].replace(Bc,pn)):pn});return l(GM),g}}function f(){var m=[];c(m);for(var y;y=h();)y!==!1&&(m.push(y),c(m));return m}return u(),f()}function Vc(e){return e?e.replace(JM,pn):pn}var eN=QM,tN=Vs&&Vs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ml,"__esModule",{value:!0});ml.default=rN;const nN=tN(eN);function rN(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,nN.default)(e),s=typeof t=="function";return r.forEach(i=>{if(i.type!=="declaration")return;const{property:a,value:o}=i;s?t(a,o,i):o&&(n=n||{},n[a]=o)}),n}var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.camelCase=void 0;var sN=/^--[a-zA-Z0-9_-]+$/,iN=/-([a-z])/g,aN=/^[^-]+$/,oN=/^-(webkit|moz|ms|o|khtml)-/,lN=/^-(ms)-/,uN=function(e){return!e||aN.test(e)||sN.test(e)},cN=function(e,t){return t.toUpperCase()},qc=function(e,t){return"".concat(t,"-")},dN=function(e,t){return t===void 0&&(t={}),uN(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(lN,qc):e=e.replace(oN,qc),e.replace(iN,cN))};Ni.camelCase=dN;var hN=Vs&&Vs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},fN=hN(ml),pN=Ni;function lo(e,t){var n={};return!e||typeof e!="string"||(0,fN.default)(e,function(r,s){r&&s&&(n[(0,pN.camelCase)(r,t)]=s)}),n}lo.default=lo;var mN=lo;const gN=hi(mN),qg=Hg("end"),gl=Hg("start");function Hg(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function yN(e){const t=gl(e),n=qg(e);if(t&&n)return{start:t,end:n}}function Ar(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Hc(e.position):"start"in e||"end"in e?Hc(e):"line"in e||"column"in e?uo(e):""}function uo(e){return Wc(e&&e.line)+":"+Wc(e&&e.column)}function Hc(e){return uo(e&&e.start)+"-"+uo(e&&e.end)}function Wc(e){return e&&typeof e=="number"?e:1}class Ve extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?s=t:!i.cause&&t&&(a=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?i.ruleId=r:(i.source=r.slice(0,l),i.ruleId=r.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const o=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=o?o.line:void 0,this.name=Ar(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ve.prototype.file="";Ve.prototype.name="";Ve.prototype.reason="";Ve.prototype.message="";Ve.prototype.stack="";Ve.prototype.column=void 0;Ve.prototype.line=void 0;Ve.prototype.ancestors=void 0;Ve.prototype.cause=void 0;Ve.prototype.fatal=void 0;Ve.prototype.place=void 0;Ve.prototype.ruleId=void 0;Ve.prototype.source=void 0;const yl={}.hasOwnProperty,bN=new Map,vN=/[A-Z]/g,xN=new Set(["table","tbody","thead","tfoot","tr"]),_N=new Set(["td","th"]),Wg="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function wN(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=AN(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=RN(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?pl:BM,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Gg(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function Gg(e,t,n){if(t.type==="element")return kN(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return SN(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return TN(e,t,n);if(t.type==="mdxjsEsm")return IN(e,t);if(t.type==="root")return CN(e,t,n);if(t.type==="text")return EN(e,t)}function kN(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=pl,e.schema=s),e.ancestors.push(t);const i=Kg(e,t.tagName,!1),a=PN(e,t);let o=vl(e,t);return xN.has(t.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!PM(l):!0})),Jg(e,a,i,t),bl(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function SN(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Gr(e,t.position)}function IN(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Gr(e,t.position)}function TN(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=pl,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:Kg(e,t.name,!0),a=MN(e,t),o=vl(e,t);return Jg(e,a,i,t),bl(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}function CN(e,t,n){const r={};return bl(r,vl(e,t)),e.create(t,e.Fragment,r,n)}function EN(e,t){return t.value}function Jg(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function bl(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function RN(e,t,n){return r;function r(s,i,a,o){const u=Array.isArray(a.children)?n:t;return o?u(i,a,o):u(i,a)}}function AN(e,t){return n;function n(r,s,i,a){const o=Array.isArray(i.children),l=gl(r);return t(s,i,a,o,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function PN(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&yl.call(t.properties,s)){const i=NN(e,s,t.properties[s]);if(i){const[a,o]=i;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&_N.has(t.tagName)?r=o:n[a]=o}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function MN(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else Gr(e,t.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,i=e.evaluater.evaluateExpression(o.expression)}else Gr(e,t.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function vl(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:bN;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const u=s.get(l)||0;a=l+"-"+u,s.set(l,u+1)}}const o=Gg(e,i,a);o!==void 0&&n.push(o)}return n}function NN(e,t,n){const r=LM(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?TM(n):UM(n)),r.property==="style"){let s=typeof n=="object"?n:ON(e,String(n));return e.stylePropertyNameCase==="css"&&(s=jN(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?jM[r.property]||r.property:r.attribute,n]}}function ON(e,t){try{return gN(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Ve("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Wg+"#cannot-parse-style-attribute",s}}function Kg(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,a;for(;++i<s.length;){const o=zc(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(i&&o.type==="Literal"),optional:!1}:o}r=a}else r=zc(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return yl.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Gr(e)}function Gr(e,t){const n=new Ve("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Wg+"#cannot-handle-mdx-estrees-without-createevaluater",n}function jN(e){const t={};let n;for(n in e)yl.call(e,n)&&(t[DN(n)]=e[n]);return t}function DN(e){let t=e.replace(vN,zN);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function zN(e){return"-"+e.toLowerCase()}const fa={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},LN={};function xl(e,t){const n=LN,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Yg(e,r,s)}function Yg(e,t,n){if($N(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Gc(e.children,t,n)}return Array.isArray(e)?Gc(e,t,n):""}function Gc(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Yg(e[s],t,n);return r.join("")}function $N(e){return!!(e&&typeof e=="object")}const Jc=document.createElement("i");function _l(e){const t="&"+e+";";Jc.innerHTML=t;const n=Jc.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function st(e,t,n,r){const s=e.length;let i=0,a;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function ct(e,t){return e.length>0?(st(e,e.length,0,t),e):t}const Kc={}.hasOwnProperty;function Xg(e){const t={};let n=-1;for(;++n<e.length;)FN(t,e[n]);return t}function FN(e,t){let n;for(n in t){const s=(Kc.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){Kc.call(s,a)||(s[a]=[]);const o=i[a];BN(s[a],Array.isArray(o)?o:o?[o]:[])}}}function BN(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);st(e,0,0,r)}function Qg(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function xt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Je=on(/[A-Za-z]/),Ze=on(/[\dA-Za-z]/),UN=on(/[#-'*+\--9=?A-Z^-~]/);function oi(e){return e!==null&&(e<32||e===127)}const co=on(/\d/),ZN=on(/[\dA-Fa-f]/),VN=on(/[!-/:-@[-`{-~]/);function H(e){return e!==null&&e<-2}function ye(e){return e!==null&&(e<0||e===32)}function re(e){return e===-2||e===-1||e===32}const Oi=on(new RegExp("\\p{P}|\\p{S}","u")),Sn=on(/\s/);function on(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ur(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&Ze(e.charCodeAt(n+1))&&Ze(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const o=e.charCodeAt(n+1);i<56320&&o>56319&&o<57344?(a=String.fromCharCode(i,o),s=1):a=""}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function ae(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(l){return re(l)?(e.enter(n),o(l)):t(l)}function o(l){return re(l)&&i++<s?(e.consume(l),o):(e.exit(n),t(l))}}const qN={tokenize:HN};function HN(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ae(e,t,"linePrefix")}function s(o){return e.enter("paragraph"),i(o)}function i(o){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return H(o)?(e.consume(o),e.exit("chunkText"),i):(e.consume(o),a)}}const WN={tokenize:GN},Yc={tokenize:JN};function GN(e){const t=this,n=[];let r=0,s,i,a;return o;function o(x){if(r<n.length){const T=n[r];return t.containerState=T[1],e.attempt(T[0].continuation,l,u)(x)}return u(x)}function l(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&_();const T=t.events.length;let E=T,I;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){I=t.events[E][1].end;break}g(r);let P=T;for(;P<t.events.length;)t.events[P][1].end={...I},P++;return st(t.events,E+1,0,t.events.slice(T)),t.events.length=P,u(x)}return o(x)}function u(x){if(r===n.length){if(!s)return h(x);if(s.currentConstruct&&s.currentConstruct.concrete)return m(x);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Yc,c,d)(x)}function c(x){return s&&_(),g(r),h(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(x)}function h(x){return t.containerState={},e.attempt(Yc,f,m)(x)}function f(x){return r++,n.push([t.currentConstruct,t.containerState]),h(x)}function m(x){if(x===null){s&&_(),g(0),e.consume(x);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),y(x)}function y(x){if(x===null){v(e.exit("chunkFlow"),!0),g(0),e.consume(x);return}return H(x)?(e.consume(x),v(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(x),y)}function v(x,T){const E=t.sliceStream(x);if(T&&E.push(null),x.previous=i,i&&(i.next=x),i=x,s.defineSkip(x.start),s.write(E),t.parser.lazy[x.start.line]){let I=s.events.length;for(;I--;)if(s.events[I][1].start.offset<a&&(!s.events[I][1].end||s.events[I][1].end.offset>a))return;const P=t.events.length;let N=P,q,C;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){if(q){C=t.events[N][1].end;break}q=!0}for(g(r),I=P;I<t.events.length;)t.events[I][1].end={...C},I++;st(t.events,N+1,0,t.events.slice(P)),t.events.length=I}}function g(x){let T=n.length;for(;T-- >x;){const E=n[T];t.containerState=E[1],E[0].exit.call(t,e)}n.length=x}function _(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function JN(e,t,n){return ae(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function rr(e){if(e===null||ye(e)||Sn(e))return 1;if(Oi(e))return 2}function ji(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const ho={name:"attention",resolveAll:KN,tokenize:YN};function KN(e,t){let n=-1,r,s,i,a,o,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};Xc(d,-l),Xc(h,l),a={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},i={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=ct(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=ct(u,[["enter",s,t],["enter",a,t],["exit",a,t],["enter",i,t]]),u=ct(u,ji(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=ct(u,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=ct(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,st(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function YN(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=rr(r);let i;return a;function a(l){return i=l,e.enter("attentionSequence"),o(l)}function o(l){if(l===i)return e.consume(l),o;const u=e.exit("attentionSequence"),c=rr(l),d=!c||c===2&&s||n.includes(l),h=!s||s===2&&c||n.includes(r);return u._open=!!(i===42?d:d&&(s||!h)),u._close=!!(i===42?h:h&&(c||!d)),t(l)}}function Xc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const XN={name:"autolink",tokenize:QN};function QN(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return Je(f)?(e.consume(f),a):f===64?n(f):u(f)}function a(f){return f===43||f===45||f===46||Ze(f)?(r=1,o(f)):u(f)}function o(f){return f===58?(e.consume(f),r=0,l):(f===43||f===45||f===46||Ze(f))&&r++<32?(e.consume(f),o):(r=0,u(f))}function l(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||oi(f)?n(f):(e.consume(f),l)}function u(f){return f===64?(e.consume(f),c):UN(f)?(e.consume(f),u):n(f)}function c(f){return Ze(f)?d(f):n(f)}function d(f){return f===46?(e.consume(f),r=0,c):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):h(f)}function h(f){if((f===45||Ze(f))&&r++<63){const m=f===45?h:d;return e.consume(f),m}return n(f)}}const ds={partial:!0,tokenize:eO};function eO(e,t,n){return r;function r(i){return re(i)?ae(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||H(i)?t(i):n(i)}}const ey={continuation:{tokenize:nO},exit:rO,name:"blockQuote",tokenize:tO};function tO(e,t,n){const r=this;return s;function s(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return re(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function nO(e,t,n){const r=this;return s;function s(a){return re(a)?ae(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(ey,t,n)(a)}}function rO(e){e.exit("blockQuote")}const ty={name:"characterEscape",tokenize:sO};function sO(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return VN(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const ny={name:"characterReference",tokenize:iO};function iO(e,t,n){const r=this;let s=0,i,a;return o;function o(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,a=Ze,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=ZN,c):(e.enter("characterReferenceValue"),i=7,a=co,c(d))}function c(d){if(d===59&&s){const h=e.exit("characterReferenceValue");return a===Ze&&!_l(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&s++<i?(e.consume(d),c):n(d)}}const Qc={partial:!0,tokenize:oO},ed={concrete:!0,name:"codeFenced",tokenize:aO};function aO(e,t,n){const r=this,s={partial:!0,tokenize:E};let i=0,a=0,o;return l;function l(I){return u(I)}function u(I){const P=r.events[r.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,o=I,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(I)}function c(I){return I===o?(a++,e.consume(I),c):a<3?n(I):(e.exit("codeFencedFenceSequence"),re(I)?ae(e,d,"whitespace")(I):d(I))}function d(I){return I===null||H(I)?(e.exit("codeFencedFence"),r.interrupt?t(I):e.check(Qc,y,T)(I)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(I))}function h(I){return I===null||H(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(I)):re(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ae(e,f,"whitespace")(I)):I===96&&I===o?n(I):(e.consume(I),h)}function f(I){return I===null||H(I)?d(I):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(I))}function m(I){return I===null||H(I)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(I)):I===96&&I===o?n(I):(e.consume(I),m)}function y(I){return e.attempt(s,T,v)(I)}function v(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),g}function g(I){return i>0&&re(I)?ae(e,_,"linePrefix",i+1)(I):_(I)}function _(I){return I===null||H(I)?e.check(Qc,y,T)(I):(e.enter("codeFlowValue"),x(I))}function x(I){return I===null||H(I)?(e.exit("codeFlowValue"),_(I)):(e.consume(I),x)}function T(I){return e.exit("codeFenced"),t(I)}function E(I,P,N){let q=0;return C;function C(ne){return I.enter("lineEnding"),I.consume(ne),I.exit("lineEnding"),L}function L(ne){return I.enter("codeFencedFence"),re(ne)?ae(I,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ne):F(ne)}function F(ne){return ne===o?(I.enter("codeFencedFenceSequence"),ue(ne)):N(ne)}function ue(ne){return ne===o?(q++,I.consume(ne),ue):q>=a?(I.exit("codeFencedFenceSequence"),re(ne)?ae(I,pe,"whitespace")(ne):pe(ne)):N(ne)}function pe(ne){return ne===null||H(ne)?(I.exit("codeFencedFence"),P(ne)):N(ne)}}}function oO(e,t,n){const r=this;return s;function s(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const pa={name:"codeIndented",tokenize:uO},lO={partial:!0,tokenize:cO};function uO(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),ae(e,i,"linePrefix",5)(u)}function i(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?l(u):H(u)?e.attempt(lO,a,l)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||H(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),o)}function l(u){return e.exit("codeIndented"),t(u)}}function cO(e,t,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):H(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):ae(e,i,"linePrefix",5)(a)}function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):H(a)?s(a):n(a)}}const dO={name:"codeText",previous:fO,resolve:hO,tokenize:pO};function hO(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function fO(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function pO(e,t,n){let r=0,s,i;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),o(d)}function o(d){return d===96?(e.consume(d),r++,o):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(i=e.enter("codeTextSequence"),s=0,c(d)):H(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||H(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),s++,c):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(i.type="codeTextData",u(d))}}class mO{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&gr(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),gr(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),gr(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);gr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);gr(this.left,n.reverse())}}}function gr(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ry(e){const t={};let n=-1,r,s,i,a,o,l,u;const c=new mO(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,gO(c,n)),n=t[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=c.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(c.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...c.get(s)[1].start},o=c.slice(s,n),o.unshift(r),c.splice(s,n-s+1,o))}}return st(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function gO(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let c,d,h=-1,f=n,m=0,y=0;const v=[y];for(;f;){for(;e.get(++s)[1]!==f;);i.push(s),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(y=h+1,v.push(y),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):v.pop(),h=v.length;h--;){const g=o.slice(v[h],v[h+1]),_=i.pop();l.push([_,_+g.length-1]),e.splice(_,2,g)}for(l.reverse(),h=-1;++h<l.length;)u[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return u}const yO={resolve:vO,tokenize:xO},bO={partial:!0,tokenize:_O};function vO(e){return ry(e),e}function xO(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?i(o):H(o)?e.check(bO,a,i)(o):(e.consume(o),s)}function i(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function _O(e,t,n){const r=this;return s;function s(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ae(e,i,"linePrefix")}function i(a){if(a===null||H(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function sy(e,t,n,r,s,i,a,o,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(g){return g===60?(e.enter(r),e.enter(s),e.enter(i),e.consume(g),e.exit(i),h):g===null||g===32||g===41||oi(g)?n(g):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),y(g))}function h(g){return g===62?(e.enter(i),e.consume(g),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(e.exit("chunkString"),e.exit(o),h(g)):g===null||g===60||H(g)?n(g):(e.consume(g),g===92?m:f)}function m(g){return g===60||g===62||g===92?(e.consume(g),f):f(g)}function y(g){return!c&&(g===null||g===41||ye(g))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(g)):c<u&&g===40?(e.consume(g),c++,y):g===41?(e.consume(g),c--,y):g===null||g===32||g===40||oi(g)?n(g):(e.consume(g),g===92?v:y)}function v(g){return g===40||g===41||g===92?(e.consume(g),y):y(g)}}function iy(e,t,n,r,s,i){const a=this;let o=0,l;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(i),c}function c(f){return o>999||f===null||f===91||f===93&&!l||f===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(e.exit(i),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):H(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||H(f)||o++>999?(e.exit("chunkString"),c(f)):(e.consume(f),l||(l=!re(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(e.consume(f),o++,d):d(f)}}function ay(e,t,n,r,s,i){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(s),e.consume(h),e.exit(s),a=h===40?41:h,l):n(h)}function l(h){return h===a?(e.enter(s),e.consume(h),e.exit(s),e.exit(r),t):(e.enter(i),u(h))}function u(h){return h===a?(e.exit(i),l(a)):h===null?n(h):H(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),ae(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===a||h===null||H(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?d:c)}function d(h){return h===a||h===92?(e.consume(h),c):c(h)}}function Pr(e,t){let n;return r;function r(s){return H(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):re(s)?ae(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const wO={name:"definition",tokenize:SO},kO={partial:!0,tokenize:IO};function SO(e,t,n){const r=this;let s;return i;function i(f){return e.enter("definition"),a(f)}function a(f){return iy.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return s=xt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),l):n(f)}function l(f){return ye(f)?Pr(e,u)(f):u(f)}function u(f){return sy(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return e.attempt(kO,d,d)(f)}function d(f){return re(f)?ae(e,h,"whitespace")(f):h(f)}function h(f){return f===null||H(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function IO(e,t,n){return r;function r(o){return ye(o)?Pr(e,s)(o):n(o)}function s(o){return ay(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function i(o){return re(o)?ae(e,a,"whitespace")(o):a(o)}function a(o){return o===null||H(o)?t(o):n(o)}}const TO={name:"hardBreakEscape",tokenize:CO};function CO(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return H(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const EO={name:"headingAtx",resolve:RO,tokenize:AO};function RO(e,t){let n=e.length-2,r=3,s,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},st(e,r,n-r+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function AO(e,t,n){let r=0;return s;function s(c){return e.enter("atxHeading"),i(c)}function i(c){return e.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(e.consume(c),a):c===null||ye(c)?(e.exit("atxHeadingSequence"),o(c)):n(c)}function o(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||H(c)?(e.exit("atxHeading"),t(c)):re(c)?ae(e,o,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),o(c))}function u(c){return c===null||c===35||ye(c)?(e.exit("atxHeadingText"),o(c)):(e.consume(c),u)}}const PO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],td=["pre","script","style","textarea"],MO={concrete:!0,name:"htmlFlow",resolveTo:jO,tokenize:DO},NO={partial:!0,tokenize:LO},OO={partial:!0,tokenize:zO};function jO(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DO(e,t,n){const r=this;let s,i,a,o,l;return u;function u(k){return c(k)}function c(k){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(k),d}function d(k){return k===33?(e.consume(k),h):k===47?(e.consume(k),i=!0,y):k===63?(e.consume(k),s=3,r.interrupt?t:w):Je(k)?(e.consume(k),a=String.fromCharCode(k),v):n(k)}function h(k){return k===45?(e.consume(k),s=2,f):k===91?(e.consume(k),s=5,o=0,m):Je(k)?(e.consume(k),s=4,r.interrupt?t:w):n(k)}function f(k){return k===45?(e.consume(k),r.interrupt?t:w):n(k)}function m(k){const qe="CDATA[";return k===qe.charCodeAt(o++)?(e.consume(k),o===qe.length?r.interrupt?t:F:m):n(k)}function y(k){return Je(k)?(e.consume(k),a=String.fromCharCode(k),v):n(k)}function v(k){if(k===null||k===47||k===62||ye(k)){const qe=k===47,St=a.toLowerCase();return!qe&&!i&&td.includes(St)?(s=1,r.interrupt?t(k):F(k)):PO.includes(a.toLowerCase())?(s=6,qe?(e.consume(k),g):r.interrupt?t(k):F(k)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(k):i?_(k):x(k))}return k===45||Ze(k)?(e.consume(k),a+=String.fromCharCode(k),v):n(k)}function g(k){return k===62?(e.consume(k),r.interrupt?t:F):n(k)}function _(k){return re(k)?(e.consume(k),_):C(k)}function x(k){return k===47?(e.consume(k),C):k===58||k===95||Je(k)?(e.consume(k),T):re(k)?(e.consume(k),x):C(k)}function T(k){return k===45||k===46||k===58||k===95||Ze(k)?(e.consume(k),T):E(k)}function E(k){return k===61?(e.consume(k),I):re(k)?(e.consume(k),E):x(k)}function I(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),l=k,P):re(k)?(e.consume(k),I):N(k)}function P(k){return k===l?(e.consume(k),l=null,q):k===null||H(k)?n(k):(e.consume(k),P)}function N(k){return k===null||k===34||k===39||k===47||k===60||k===61||k===62||k===96||ye(k)?E(k):(e.consume(k),N)}function q(k){return k===47||k===62||re(k)?x(k):n(k)}function C(k){return k===62?(e.consume(k),L):n(k)}function L(k){return k===null||H(k)?F(k):re(k)?(e.consume(k),L):n(k)}function F(k){return k===45&&s===2?(e.consume(k),be):k===60&&s===1?(e.consume(k),Oe):k===62&&s===4?(e.consume(k),Ee):k===63&&s===3?(e.consume(k),w):k===93&&s===5?(e.consume(k),G):H(k)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(NO,Le,ue)(k)):k===null||H(k)?(e.exit("htmlFlowData"),ue(k)):(e.consume(k),F)}function ue(k){return e.check(OO,pe,Le)(k)}function pe(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),ne}function ne(k){return k===null||H(k)?ue(k):(e.enter("htmlFlowData"),F(k))}function be(k){return k===45?(e.consume(k),w):F(k)}function Oe(k){return k===47?(e.consume(k),a="",ze):F(k)}function ze(k){if(k===62){const qe=a.toLowerCase();return td.includes(qe)?(e.consume(k),Ee):F(k)}return Je(k)&&a.length<8?(e.consume(k),a+=String.fromCharCode(k),ze):F(k)}function G(k){return k===93?(e.consume(k),w):F(k)}function w(k){return k===62?(e.consume(k),Ee):k===45&&s===2?(e.consume(k),w):F(k)}function Ee(k){return k===null||H(k)?(e.exit("htmlFlowData"),Le(k)):(e.consume(k),Ee)}function Le(k){return e.exit("htmlFlow"),t(k)}}function zO(e,t,n){const r=this;return s;function s(a){return H(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function LO(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(ds,t,n)}}const $O={name:"htmlText",tokenize:FO};function FO(e,t,n){const r=this;let s,i,a;return o;function o(w){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(w),l}function l(w){return w===33?(e.consume(w),u):w===47?(e.consume(w),E):w===63?(e.consume(w),x):Je(w)?(e.consume(w),N):n(w)}function u(w){return w===45?(e.consume(w),c):w===91?(e.consume(w),i=0,m):Je(w)?(e.consume(w),_):n(w)}function c(w){return w===45?(e.consume(w),f):n(w)}function d(w){return w===null?n(w):w===45?(e.consume(w),h):H(w)?(a=d,Oe(w)):(e.consume(w),d)}function h(w){return w===45?(e.consume(w),f):d(w)}function f(w){return w===62?be(w):w===45?h(w):d(w)}function m(w){const Ee="CDATA[";return w===Ee.charCodeAt(i++)?(e.consume(w),i===Ee.length?y:m):n(w)}function y(w){return w===null?n(w):w===93?(e.consume(w),v):H(w)?(a=y,Oe(w)):(e.consume(w),y)}function v(w){return w===93?(e.consume(w),g):y(w)}function g(w){return w===62?be(w):w===93?(e.consume(w),g):y(w)}function _(w){return w===null||w===62?be(w):H(w)?(a=_,Oe(w)):(e.consume(w),_)}function x(w){return w===null?n(w):w===63?(e.consume(w),T):H(w)?(a=x,Oe(w)):(e.consume(w),x)}function T(w){return w===62?be(w):x(w)}function E(w){return Je(w)?(e.consume(w),I):n(w)}function I(w){return w===45||Ze(w)?(e.consume(w),I):P(w)}function P(w){return H(w)?(a=P,Oe(w)):re(w)?(e.consume(w),P):be(w)}function N(w){return w===45||Ze(w)?(e.consume(w),N):w===47||w===62||ye(w)?q(w):n(w)}function q(w){return w===47?(e.consume(w),be):w===58||w===95||Je(w)?(e.consume(w),C):H(w)?(a=q,Oe(w)):re(w)?(e.consume(w),q):be(w)}function C(w){return w===45||w===46||w===58||w===95||Ze(w)?(e.consume(w),C):L(w)}function L(w){return w===61?(e.consume(w),F):H(w)?(a=L,Oe(w)):re(w)?(e.consume(w),L):q(w)}function F(w){return w===null||w===60||w===61||w===62||w===96?n(w):w===34||w===39?(e.consume(w),s=w,ue):H(w)?(a=F,Oe(w)):re(w)?(e.consume(w),F):(e.consume(w),pe)}function ue(w){return w===s?(e.consume(w),s=void 0,ne):w===null?n(w):H(w)?(a=ue,Oe(w)):(e.consume(w),ue)}function pe(w){return w===null||w===34||w===39||w===60||w===61||w===96?n(w):w===47||w===62||ye(w)?q(w):(e.consume(w),pe)}function ne(w){return w===47||w===62||ye(w)?q(w):n(w)}function be(w){return w===62?(e.consume(w),e.exit("htmlTextData"),e.exit("htmlText"),t):n(w)}function Oe(w){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),ze}function ze(w){return re(w)?ae(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):G(w)}function G(w){return e.enter("htmlTextData"),a(w)}}const wl={name:"labelEnd",resolveAll:VO,resolveTo:qO,tokenize:HO},BO={tokenize:WO},UO={tokenize:GO},ZO={tokenize:JO};function VO(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&st(e,0,e.length,n),e}function qO(e,t){let n=e.length,r=0,s,i,a,o;for(;n--;)if(s=e[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const l={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[a][1].end}},c={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",l,t],["enter",u,t]],o=ct(o,e.slice(i+1,i+r+3)),o=ct(o,[["enter",c,t]]),o=ct(o,ji(t.parser.constructs.insideSpan.null,e.slice(i+r+4,a-3),t)),o=ct(o,[["exit",c,t],e[a-2],e[a-1],["exit",u,t]]),o=ct(o,e.slice(a+1)),o=ct(o,[["exit",l,t]]),st(e,i,e.length,o),e}function HO(e,t,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return o;function o(h){return i?i._inactive?d(h):(a=r.parser.defined.includes(xt(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),l):n(h)}function l(h){return h===40?e.attempt(BO,c,a?c:d)(h):h===91?e.attempt(UO,c,a?u:d)(h):a?c(h):d(h)}function u(h){return e.attempt(ZO,c,d)(h)}function c(h){return t(h)}function d(h){return i._balanced=!0,n(h)}}function WO(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),s}function s(d){return ye(d)?Pr(e,i)(d):i(d)}function i(d){return d===41?c(d):sy(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return ye(d)?Pr(e,l)(d):c(d)}function o(d){return n(d)}function l(d){return d===34||d===39||d===40?ay(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return ye(d)?Pr(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function GO(e,t,n){const r=this;return s;function s(o){return iy.call(r,e,i,a,"reference","referenceMarker","referenceString")(o)}function i(o){return r.parser.defined.includes(xt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function JO(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const KO={name:"labelStartImage",resolveAll:wl.resolveAll,tokenize:YO};function YO(e,t,n){const r=this;return s;function s(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),i}function i(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const XO={name:"labelStartLink",resolveAll:wl.resolveAll,tokenize:QO};function QO(e,t,n){const r=this;return s;function s(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const ma={name:"lineEnding",tokenize:ej};function ej(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ae(e,t,"linePrefix")}}const Fs={name:"thematicBreak",tokenize:tj};function tj(e,t,n){let r=0,s;return i;function i(u){return e.enter("thematicBreak"),a(u)}function a(u){return s=u,o(u)}function o(u){return u===s?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||H(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===s?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),re(u)?ae(e,o,"whitespace")(u):o(u))}}const Xe={continuation:{tokenize:ij},exit:oj,name:"list",tokenize:sj},nj={partial:!0,tokenize:lj},rj={partial:!0,tokenize:aj};function sj(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return o;function o(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:co(f)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Fs,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(f)}return n(f)}function l(f){return co(f)&&++a<10?(e.consume(f),l):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(ds,r.interrupt?n:c,e.attempt(nj,h,d))}function c(f){return r.containerState.initialBlankLine=!0,i++,h(f)}function d(f){return re(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function ij(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ds,s,i);function s(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ae(e,t,"listItemIndent",r.containerState.size+1)(o)}function i(o){return r.containerState.furtherBlankLines||!re(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(rj,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,ae(e,e.attempt(Xe,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function aj(e,t,n){const r=this;return ae(e,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(i):n(i)}}function oj(e){e.exit(this.containerState.type)}function lj(e,t,n){const r=this;return ae(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!re(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const nd={name:"setextUnderline",resolveTo:uj,tokenize:cj};function uj(e,t){let n=e.length,r,s,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function cj(e,t,n){const r=this;let s;return i;function i(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===s?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),re(u)?ae(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||H(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const dj={tokenize:hj};function hj(e){const t=this,n=e.attempt(ds,r,e.attempt(this.parser.constructs.flowInitial,s,ae(e,e.attempt(this.parser.constructs.flow,s,e.attempt(yO,s)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const fj={resolveAll:ly()},pj=oy("string"),mj=oy("text");function oy(e){return{resolveAll:ly(e==="text"?gj:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],i=n.attempt(s,a,o);return a;function a(c){return u(c)?i(c):o(c)}function o(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),i(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=s[c];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function ly(e){return t;function t(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(n,r):n}}function gj(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let i=s.length,a=-1,o=0,l;for(;i--;){const u=s[i];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const u={type:n===e.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const yj={42:Xe,43:Xe,45:Xe,48:Xe,49:Xe,50:Xe,51:Xe,52:Xe,53:Xe,54:Xe,55:Xe,56:Xe,57:Xe,62:ey},bj={91:wO},vj={[-2]:pa,[-1]:pa,32:pa},xj={35:EO,42:Fs,45:[nd,Fs],60:MO,61:nd,95:Fs,96:ed,126:ed},_j={38:ny,92:ty},wj={[-5]:ma,[-4]:ma,[-3]:ma,33:KO,38:ny,42:ho,60:[XN,$O],91:XO,92:[TO,ty],93:wl,95:ho,96:dO},kj={null:[ho,fj]},Sj={null:[42,95]},Ij={null:[]},Tj=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Sj,contentInitial:bj,disable:Ij,document:yj,flow:xj,flowInitial:vj,insideSpan:kj,string:_j,text:wj},Symbol.toStringTag,{value:"Module"}));function Cj(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],o=[];const l={attempt:P(E),check:P(I),consume:_,enter:x,exit:T,interrupt:P(I,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:m,parser:e,previous:null,sliceSerialize:h,sliceStream:f,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&i.push(t),u;function d(L){return a=ct(a,L),v(),a[a.length-1]!==null?[]:(N(t,0),u.events=ji(i,u.events,u),u.events)}function h(L,F){return Rj(f(L),F)}function f(L){return Ej(a,L)}function m(){const{_bufferIndex:L,_index:F,line:ue,column:pe,offset:ne}=r;return{_bufferIndex:L,_index:F,line:ue,column:pe,offset:ne}}function y(L){s[L.line]=L.column,C()}function v(){let L;for(;r._index<a.length;){const F=a[r._index];if(typeof F=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<F.length;)g(F.charCodeAt(r._bufferIndex));else g(F)}}function g(L){c=c(L)}function _(L){H(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,C()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=L}function x(L,F){const ue=F||{};return ue.type=L,ue.start=m(),u.events.push(["enter",ue,u]),o.push(ue),ue}function T(L){const F=o.pop();return F.end=m(),u.events.push(["exit",F,u]),F}function E(L,F){N(L,F.from)}function I(L,F){F.restore()}function P(L,F){return ue;function ue(pe,ne,be){let Oe,ze,G,w;return Array.isArray(pe)?Le(pe):"tokenize"in pe?Le([pe]):Ee(pe);function Ee(Ie){return lt;function lt(pt){const Ue=pt!==null&&Ie[pt],jt=pt!==null&&Ie.null,fs=[...Array.isArray(Ue)?Ue:Ue?[Ue]:[],...Array.isArray(jt)?jt:jt?[jt]:[]];return Le(fs)(pt)}}function Le(Ie){return Oe=Ie,ze=0,Ie.length===0?be:k(Ie[ze])}function k(Ie){return lt;function lt(pt){return w=q(),G=Ie,Ie.partial||(u.currentConstruct=Ie),Ie.name&&u.parser.constructs.disable.null.includes(Ie.name)?St():Ie.tokenize.call(F?Object.assign(Object.create(u),F):u,l,qe,St)(pt)}}function qe(Ie){return L(G,w),ne}function St(Ie){return w.restore(),++ze<Oe.length?k(Oe[ze]):be}}}function N(L,F){L.resolveAll&&!i.includes(L)&&i.push(L),L.resolve&&st(u.events,F,u.events.length-F,L.resolve(u.events.slice(F),u)),L.resolveTo&&(u.events=L.resolveTo(u.events,u))}function q(){const L=m(),F=u.previous,ue=u.currentConstruct,pe=u.events.length,ne=Array.from(o);return{from:pe,restore:be};function be(){r=L,u.previous=F,u.currentConstruct=ue,u.events.length=pe,o=ne,C()}}function C(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Ej(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}function Rj(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function Aj(e){const r={constructs:Xg([Tj,...(e||{}).extensions||[]]),content:s(qN),defined:[],document:s(WN),flow:s(dj),lazy:{},string:s(pj),text:s(mj)};return r;function s(i){return a;function a(o){return Cj(r,i,o)}}}function Pj(e){for(;!ry(e););return e}const rd=/[\0\t\n\r]/g;function Mj(){let e=1,t="",n=!0,r;return s;function s(i,a,o){const l=[];let u,c,d,h,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),d=0,t="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(rd.lastIndex=d,u=rd.exec(i),h=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(h),!u){t=i.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(i.slice(d,h)),e+=h-d),f){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return o&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Nj=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Oj(e){return e.replace(Nj,jj)}function jj(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Qg(n.slice(i?2:1),i?16:10)}return _l(n)||e}const uy={}.hasOwnProperty;function Dj(e,t,n){return typeof t!="string"&&(n=t,t=void 0),zj(n)(Pj(Aj(n).document().write(Mj()(e,t,!0))))}function zj(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(jl),autolinkProtocol:q,autolinkEmail:q,atxHeading:i(Ml),blockQuote:i(jt),characterEscape:q,characterReference:q,codeFenced:i(fs),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(fs,a),codeText:i(Xy,a),codeTextData:q,data:q,codeFlowValue:q,definition:i(Qy),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(eb),hardBreakEscape:i(Nl),hardBreakTrailing:i(Nl),htmlFlow:i(Ol,a),htmlFlowData:q,htmlText:i(Ol,a),htmlTextData:q,image:i(tb),label:a,link:i(jl),listItem:i(nb),listItemValue:h,listOrdered:i(Dl,d),listUnordered:i(Dl),paragraph:i(rb),reference:k,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(Ml),strong:i(sb),thematicBreak:i(ab)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:Ue,autolinkProtocol:pt,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:St,characterReferenceMarkerNumeric:St,characterReferenceValue:Ie,characterReference:lt,codeFenced:l(v),codeFencedFence:y,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:C,codeIndented:l(g),codeText:l(ne),codeTextData:C,data:C,definition:l(),definitionDestinationString:T,definitionLabelString:_,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(F),hardBreakTrailing:l(F),htmlFlow:l(ue),htmlFlowData:C,htmlText:l(pe),htmlTextData:C,image:l(Oe),label:G,labelText:ze,lineEnding:L,link:l(be),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:qe,resourceDestinationString:w,resourceTitleString:Ee,resource:Le,setextHeading:l(N),setextHeadingLineSequence:P,setextHeadingText:I,strong:l(),thematicBreak:l()}};cy(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(A){let D={type:"root",children:[]};const X={stack:[D],tokenStack:[],config:t,enter:o,exit:u,buffer:a,resume:c,data:n},se=[];let me=-1;for(;++me<A.length;)if(A[me][1].type==="listOrdered"||A[me][1].type==="listUnordered")if(A[me][0]==="enter")se.push(me);else{const mt=se.pop();me=s(A,mt,me)}for(me=-1;++me<A.length;){const mt=t[A[me][0]];uy.call(mt,A[me][1].type)&&mt[A[me][1].type].call(Object.assign({sliceSerialize:A[me][2].sliceSerialize},X),A[me][1])}if(X.tokenStack.length>0){const mt=X.tokenStack[X.tokenStack.length-1];(mt[1]||sd).call(X,void 0,mt[0])}for(D.position={start:Vt(A.length>0?A[0][1].start:{line:1,column:1,offset:0}),end:Vt(A.length>0?A[A.length-2][1].end:{line:1,column:1,offset:0})},me=-1;++me<t.transforms.length;)D=t.transforms[me](D)||D;return D}function s(A,D,X){let se=D-1,me=-1,mt=!1,un,Dt,cr,dr;for(;++se<=X;){const tt=A[se];switch(tt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tt[0]==="enter"?me++:me--,dr=void 0;break}case"lineEndingBlank":{tt[0]==="enter"&&(un&&!dr&&!me&&!cr&&(cr=se),dr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dr=void 0}if(!me&&tt[0]==="enter"&&tt[1].type==="listItemPrefix"||me===-1&&tt[0]==="exit"&&(tt[1].type==="listUnordered"||tt[1].type==="listOrdered")){if(un){let Mn=se;for(Dt=void 0;Mn--;){const zt=A[Mn];if(zt[1].type==="lineEnding"||zt[1].type==="lineEndingBlank"){if(zt[0]==="exit")continue;Dt&&(A[Dt][1].type="lineEndingBlank",mt=!0),zt[1].type="lineEnding",Dt=Mn}else if(!(zt[1].type==="linePrefix"||zt[1].type==="blockQuotePrefix"||zt[1].type==="blockQuotePrefixWhitespace"||zt[1].type==="blockQuoteMarker"||zt[1].type==="listItemIndent"))break}cr&&(!Dt||cr<Dt)&&(un._spread=!0),un.end=Object.assign({},Dt?A[Dt][1].start:tt[1].end),A.splice(Dt||se,0,["exit",un,tt[2]]),se++,X++}if(tt[1].type==="listItemPrefix"){const Mn={type:"listItem",_spread:!1,start:Object.assign({},tt[1].start),end:void 0};un=Mn,A.splice(se,0,["enter",Mn,tt[2]]),se++,X++,cr=void 0,dr=!0}}}return A[D][1]._spread=mt,X}function i(A,D){return X;function X(se){o.call(this,A(se),se),D&&D.call(this,se)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(A,D,X){this.stack[this.stack.length-1].children.push(A),this.stack.push(A),this.tokenStack.push([D,X||void 0]),A.position={start:Vt(D.start),end:void 0}}function l(A){return D;function D(X){A&&A.call(this,X),u.call(this,X)}}function u(A,D){const X=this.stack.pop(),se=this.tokenStack.pop();if(se)se[0].type!==A.type&&(D?D.call(this,A,se[0]):(se[1]||sd).call(this,A,se[0]));else throw new Error("Cannot close `"+A.type+"` ("+Ar({start:A.start,end:A.end})+"): its not open");X.position.end=Vt(A.end)}function c(){return xl(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(A){if(this.data.expectingFirstListItemValue){const D=this.stack[this.stack.length-2];D.start=Number.parseInt(this.sliceSerialize(A),10),this.data.expectingFirstListItemValue=void 0}}function f(){const A=this.resume(),D=this.stack[this.stack.length-1];D.lang=A}function m(){const A=this.resume(),D=this.stack[this.stack.length-1];D.meta=A}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A.replace(/(\r?\n|\r)$/g,"")}function _(A){const D=this.resume(),X=this.stack[this.stack.length-1];X.label=D,X.identifier=xt(this.sliceSerialize(A)).toLowerCase()}function x(){const A=this.resume(),D=this.stack[this.stack.length-1];D.title=A}function T(){const A=this.resume(),D=this.stack[this.stack.length-1];D.url=A}function E(A){const D=this.stack[this.stack.length-1];if(!D.depth){const X=this.sliceSerialize(A).length;D.depth=X}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function P(A){const D=this.stack[this.stack.length-1];D.depth=this.sliceSerialize(A).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function q(A){const X=this.stack[this.stack.length-1].children;let se=X[X.length-1];(!se||se.type!=="text")&&(se=ib(),se.position={start:Vt(A.start),end:void 0},X.push(se)),this.stack.push(se)}function C(A){const D=this.stack.pop();D.value+=this.sliceSerialize(A),D.position.end=Vt(A.end)}function L(A){const D=this.stack[this.stack.length-1];if(this.data.atHardBreak){const X=D.children[D.children.length-1];X.position.end=Vt(A.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(D.type)&&(q.call(this,A),C.call(this,A))}function F(){this.data.atHardBreak=!0}function ue(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A}function pe(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A}function ne(){const A=this.resume(),D=this.stack[this.stack.length-1];D.value=A}function be(){const A=this.stack[this.stack.length-1];if(this.data.inReference){const D=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=D,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function Oe(){const A=this.stack[this.stack.length-1];if(this.data.inReference){const D=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=D,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function ze(A){const D=this.sliceSerialize(A),X=this.stack[this.stack.length-2];X.label=Oj(D),X.identifier=xt(D).toLowerCase()}function G(){const A=this.stack[this.stack.length-1],D=this.resume(),X=this.stack[this.stack.length-1];if(this.data.inReference=!0,X.type==="link"){const se=A.children;X.children=se}else X.alt=D}function w(){const A=this.resume(),D=this.stack[this.stack.length-1];D.url=A}function Ee(){const A=this.resume(),D=this.stack[this.stack.length-1];D.title=A}function Le(){this.data.inReference=void 0}function k(){this.data.referenceType="collapsed"}function qe(A){const D=this.resume(),X=this.stack[this.stack.length-1];X.label=D,X.identifier=xt(this.sliceSerialize(A)).toLowerCase(),this.data.referenceType="full"}function St(A){this.data.characterReferenceType=A.type}function Ie(A){const D=this.sliceSerialize(A),X=this.data.characterReferenceType;let se;X?(se=Qg(D,X==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):se=_l(D);const me=this.stack[this.stack.length-1];me.value+=se}function lt(A){const D=this.stack.pop();D.position.end=Vt(A.end)}function pt(A){C.call(this,A);const D=this.stack[this.stack.length-1];D.url=this.sliceSerialize(A)}function Ue(A){C.call(this,A);const D=this.stack[this.stack.length-1];D.url="mailto:"+this.sliceSerialize(A)}function jt(){return{type:"blockquote",children:[]}}function fs(){return{type:"code",lang:null,meta:null,value:""}}function Xy(){return{type:"inlineCode",value:""}}function Qy(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function eb(){return{type:"emphasis",children:[]}}function Ml(){return{type:"heading",depth:0,children:[]}}function Nl(){return{type:"break"}}function Ol(){return{type:"html",value:""}}function tb(){return{type:"image",title:null,url:"",alt:null}}function jl(){return{type:"link",title:null,url:"",children:[]}}function Dl(A){return{type:"list",ordered:A.type==="listOrdered",start:null,spread:A._spread,children:[]}}function nb(A){return{type:"listItem",spread:A._spread,checked:null,children:[]}}function rb(){return{type:"paragraph",children:[]}}function sb(){return{type:"strong",children:[]}}function ib(){return{type:"text",value:""}}function ab(){return{type:"thematicBreak"}}}function Vt(e){return{line:e.line,column:e.column,offset:e.offset}}function cy(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?cy(e,r):Lj(e,r)}}function Lj(e,t){let n;for(n in t)if(uy.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function sd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ar({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ar({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ar({start:t.start,end:t.end})+") is still open")}function $j(e){const t=this;t.parser=n;function n(r){return Dj(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Fj(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Bj(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Uj(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Zj(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vj(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qj(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=ur(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Hj(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Wj(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function dy(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function Gj(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return dy(e,t);const s={src:ur(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function Jj(e,t){const n={src:ur(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Kj(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Yj(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return dy(e,t);const s={href:ur(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Xj(e,t){const n={href:ur(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Qj(e,t,n){const r=e.all(t),s=n?eD(n):hy(t),i={},a=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(s||o!==0||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!s?a.push(...c.children):a.push(c)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,u),e.applyData(t,u)}function eD(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=hy(n[r])}return t}function hy(e){const t=e.spread;return t??e.children.length>1}function tD(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function nD(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rD(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function sD(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iD(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=gl(t.children[1]),l=qg(t.children[t.children.length-1]);o&&l&&(a.position={start:o,end:l}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function aD(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let l=-1;const u=[];for(;++l<o;){const d=t.children[l],h={},f=a?a[l]:void 0;f&&(h.align=f);let m={type:"element",tagName:i,properties:h,children:[]};d&&(m.children=e.all(d),e.patch(d,m),m=e.applyData(d,m)),u.push(m)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function oD(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const id=9,ad=32;function lD(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(od(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(od(t.slice(s),s>0,!1)),i.join("")}function od(e,t,n){let r=0,s=e.length;if(t){let i=e.codePointAt(r);for(;i===id||i===ad;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(s-1);for(;i===id||i===ad;)s--,i=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function uD(e,t){const n={type:"text",value:lD(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function cD(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const dD={blockquote:Fj,break:Bj,code:Uj,delete:Zj,emphasis:Vj,footnoteReference:qj,heading:Hj,html:Wj,imageReference:Gj,image:Jj,inlineCode:Kj,linkReference:Yj,link:Xj,listItem:Qj,list:tD,paragraph:nD,root:rD,strong:sD,table:iD,tableCell:oD,tableRow:aD,text:uD,thematicBreak:cD,toml:Cs,yaml:Cs,definition:Cs,footnoteDefinition:Cs};function Cs(){}const fy=-1,Di=0,Mr=1,li=2,kl=3,Sl=4,Il=5,Tl=6,py=7,my=8,ld=typeof self=="object"?self:globalThis,hD=(e,t)=>{const n=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case Di:case fy:return n(a,s);case Mr:{const o=n([],s);for(const l of a)o.push(r(l));return o}case li:{const o=n({},s);for(const[l,u]of a)o[r(l)]=r(u);return o}case kl:return n(new Date(a),s);case Sl:{const{source:o,flags:l}=a;return n(new RegExp(o,l),s)}case Il:{const o=n(new Map,s);for(const[l,u]of a)o.set(r(l),r(u));return o}case Tl:{const o=n(new Set,s);for(const l of a)o.add(r(l));return o}case py:{const{name:o,message:l}=a;return n(new ld[o](l),s)}case my:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new ld[i](a),s)};return r},ud=e=>hD(new Map,e)(0),zn="",{toString:fD}={},{keys:pD}=Object,yr=e=>{const t=typeof e;if(t!=="object"||!e)return[Di,t];const n=fD.call(e).slice(8,-1);switch(n){case"Array":return[Mr,zn];case"Object":return[li,zn];case"Date":return[kl,zn];case"RegExp":return[Sl,zn];case"Map":return[Il,zn];case"Set":return[Tl,zn];case"DataView":return[Mr,n]}return n.includes("Array")?[Mr,n]:n.includes("Error")?[py,n]:[li,n]},Es=([e,t])=>e===Di&&(t==="function"||t==="symbol"),mD=(e,t,n,r)=>{const s=(a,o)=>{const l=r.push(a)-1;return n.set(o,l),l},i=a=>{if(n.has(a))return n.get(a);let[o,l]=yr(a);switch(o){case Di:{let c=a;switch(l){case"bigint":o=my,c=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return s([fy],a)}return s([o,c],a)}case Mr:{if(l){let h=a;return l==="DataView"?h=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(a)),s([l,[...h]],a)}const c=[],d=s([o,c],a);for(const h of a)c.push(i(h));return d}case li:{if(l)switch(l){case"BigInt":return s([l,a.toString()],a);case"Boolean":case"Number":case"String":return s([l,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const c=[],d=s([o,c],a);for(const h of pD(a))(e||!Es(yr(a[h])))&&c.push([i(h),i(a[h])]);return d}case kl:return s([o,a.toISOString()],a);case Sl:{const{source:c,flags:d}=a;return s([o,{source:c,flags:d}],a)}case Il:{const c=[],d=s([o,c],a);for(const[h,f]of a)(e||!(Es(yr(h))||Es(yr(f))))&&c.push([i(h),i(f)]);return d}case Tl:{const c=[],d=s([o,c],a);for(const h of a)(e||!Es(yr(h)))&&c.push(i(h));return d}}const{message:u}=a;return s([o,{name:l,message:u}],a)};return i},cd=(e,{json:t,lossy:n}={})=>{const r=[];return mD(!(t||n),!!t,new Map,r)(e),r},ui=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?ud(cd(e,t)):structuredClone(e):(e,t)=>ud(cd(e,t));function gD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function yD(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function bD(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||gD,r=e.options.footnoteBackLabel||yD,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),h=ur(d.toLowerCase());let f=0;const m=[],y=e.footnoteCounts.get(d);for(;y!==void 0&&++f<=y;){m.length>0&&m.push({type:"text",value:" "});let _=typeof n=="string"?n:n(l,f);typeof _=="string"&&(_={type:"text",value:_}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const v=c[c.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const _=v.children[v.children.length-1];_&&_.type==="text"?_.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...m)}else c.push(...m);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(c,!0)};e.patch(u,g),o.push(g)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...ui(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const zi=function(e){if(e==null)return wD;if(typeof e=="function")return Li(e);if(typeof e=="object")return Array.isArray(e)?vD(e):xD(e);if(typeof e=="string")return _D(e);throw new Error("Expected function, string, or object as test")};function vD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=zi(e[n]);return Li(r);function r(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function xD(e){const t=e;return Li(n);function n(r){const s=r;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function _D(e){return Li(t);function t(n){return n&&n.type===e}}function Li(e){return t;function t(n,r,s){return!!(kD(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function wD(){return!0}function kD(e){return e!==null&&typeof e=="object"&&"type"in e}const gy=[],SD=!0,fo=!1,ID="skip";function yy(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const i=zi(s),a=r?-1:1;o(e,void 0,[])();function o(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=gy,m,y,v;if((!t||i(l,u,c[c.length-1]||void 0))&&(f=TD(n(l,c)),f[0]===fo))return f;if("children"in l&&l.children){const g=l;if(g.children&&f[0]!==ID)for(y=(r?g.children.length:-1)+a,v=c.concat(g);y>-1&&y<g.children.length;){const _=g.children[y];if(m=o(_,y,v)(),m[0]===fo)return m;y=typeof m[1]=="number"?m[1]:y+a}}return f}}}function TD(e){return Array.isArray(e)?e:typeof e=="number"?[SD,e]:e==null?gy:[e]}function Cl(e,t,n,r){let s,i,a;typeof t=="function"?(i=void 0,a=t,s=n):(i=t,a=n,s=r),yy(e,i,o,s);function o(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return a(l,d,c)}}const po={}.hasOwnProperty,CD={};function ED(e,t){const n=t||CD,r=new Map,s=new Map,i=new Map,a={...dD,...n.handlers},o={all:u,applyData:AD,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:l,options:n,patch:RD,wrap:MD};return Cl(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:s,h=String(c.identifier).toUpperCase();d.has(h)||d.set(h,c)}}),o;function l(c,d){const h=c.type,f=o.handlers[h];if(po.call(o.handlers,h)&&f)return f(o,c,d);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in c){const{children:y,...v}=c,g=ui(v);return g.children=o.all(c),g}return ui(c)}return(o.options.unknownHandler||PD)(o,c,d)}function u(c){const d=[];if("children"in c){const h=c.children;let f=-1;for(;++f<h.length;){const m=o.one(h[f],c);if(m){if(f&&h[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=dd(m.value)),!Array.isArray(m)&&m.type==="element")){const y=m.children[0];y&&y.type==="text"&&(y.value=dd(y.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function RD(e,t){e.position&&(t.position=yN(e))}function AD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,ui(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function PD(e,t){const n=t.data||{},r="value"in t&&!(po.call(n,"hProperties")||po.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function MD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function dd(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function hd(e,t){const n=ED(e,t),r=n.one(e,void 0),s=bD(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function ND(e,t){return e&&"run"in e?async function(n,r){const s=hd(n,{file:r,...t});await e.run(s,r)}:function(n,r){return hd(n,{file:r,...e||t})}}function fd(e){if(e)throw e}var Bs=Object.prototype.hasOwnProperty,by=Object.prototype.toString,pd=Object.defineProperty,md=Object.getOwnPropertyDescriptor,gd=function(t){return typeof Array.isArray=="function"?Array.isArray(t):by.call(t)==="[object Array]"},yd=function(t){if(!t||by.call(t)!=="[object Object]")return!1;var n=Bs.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Bs.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||Bs.call(t,s)},bd=function(t,n){pd&&n.name==="__proto__"?pd(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},vd=function(t,n){if(n==="__proto__")if(Bs.call(t,n)){if(md)return md(t,n).value}else return;return t[n]},OD=function e(){var t,n,r,s,i,a,o=arguments[0],l=1,u=arguments.length,c=!1;for(typeof o=="boolean"&&(c=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=vd(o,n),s=vd(t,n),o!==s&&(c&&s&&(yd(s)||(i=gd(s)))?(i?(i=!1,a=r&&gd(r)?r:[]):a=r&&yd(r)?r:{},bd(o,{name:n,newValue:e(c,a,s)})):typeof s<"u"&&bd(o,{name:n,newValue:s}));return o};const ga=hi(OD);function mo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function jD(){const e=[],t={run:n,use:r};return t;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...s);function o(l,...u){const c=e[++i];let d=-1;if(l){a(l);return}for(;++d<s.length;)(u[d]===null||u[d]===void 0)&&(u[d]=s[d]);s=u,c?DD(c,o)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function DD(e,t){let n;return r;function r(...a){const o=e.length>a.length;let l;o&&a.push(s);try{l=e.apply(this,a)}catch(u){const c=u;if(o&&n)throw c;return s(c)}o||(l&&l.then&&typeof l.then=="function"?l.then(i,s):l instanceof Error?s(l):i(l))}function s(a,...o){n||(n=!0,t(a,...o))}function i(a){s(null,a)}}const Tt={basename:zD,dirname:LD,extname:$D,join:FD,sep:"/"};function zD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');hs(e);let n=0,r=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),o>-1&&(e.codePointAt(s)===t.codePointAt(o--)?o<0&&(r=s):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function LD(e){if(hs(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function $D(e){hs(e);let t=e.length,n=-1,r=0,s=-1,i=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function FD(...e){let t=-1,n;for(;++t<e.length;)hs(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":BD(n)}function BD(e){hs(e);const t=e.codePointAt(0)===47;let n=UD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function UD(e,t){let n="",r=0,s=-1,i=0,a=-1,o,l;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),r=a-s-1;s=a,i=0}else o===46&&i>-1?i++:i=-1}return n}function hs(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ZD={cwd:VD};function VD(){return"/"}function go(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function qD(e){if(typeof e=="string")e=new URL(e);else if(!go(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return HD(e)}function HD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const ya=["history","path","basename","stem","extname","dirname"];class vy{constructor(t){let n;t?go(t)?n={path:t}:typeof t=="string"||WD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":ZD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ya.length;){const i=ya[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)ya.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Tt.basename(this.path):void 0}set basename(t){va(t,"basename"),ba(t,"basename"),this.path=Tt.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Tt.dirname(this.path):void 0}set dirname(t){xd(this.basename,"dirname"),this.path=Tt.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Tt.extname(this.path):void 0}set extname(t){if(ba(t,"extname"),xd(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tt.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){go(t)&&(t=qD(t)),va(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Tt.basename(this.path,this.extname):void 0}set stem(t){va(t,"stem"),ba(t,"stem"),this.path=Tt.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Ve(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ba(e,t){if(e&&e.includes(Tt.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tt.sep+"`")}function va(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function xd(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function WD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const GD=function(e){const r=this.constructor.prototype,s=r[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},JD={}.hasOwnProperty;class El extends GD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=jD()}copy(){const t=new El;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ga(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(wa("data",this.frozen),this.namespace[t]=n,this):JD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(wa("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Rs(t),r=this.parser||this.Parser;return xa("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),xa("process",this.parser||this.Parser),_a("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const o=Rs(t),l=r.parse(o);r.run(l,o,function(c,d,h){if(c||!d||!h)return u(c);const f=d,m=r.stringify(f,h);XD(m)?h.value=m:h.result=m,u(c,h)});function u(c,d){c||!d?a(c):i?i(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),xa("processSync",this.parser||this.Parser),_a("processSync",this.compiler||this.Compiler),this.process(t,s),wd("processSync","process",n),r;function s(i,a){n=!0,fd(i),r=a}}run(t,n,r){_d(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,o){const l=Rs(n);s.run(t,l,u);function u(c,d,h){const f=d||t;c?o(c):a?a(f):r(void 0,f,h)}}}runSync(t,n){let r=!1,s;return this.run(t,n,i),wd("runSync","run",r),s;function i(a,o){fd(a),s=o,r=!0}}stringify(t,n){this.freeze();const r=Rs(n),s=this.compiler||this.Compiler;return _a("stringify",s),_d(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(wa("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(s.settings=ga(!0,s.settings,u.settings))}function o(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];i(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===u){h=d;break}if(h===-1)r.push([u,...c]);else if(c.length>0){let[f,...m]=c;const y=r[h][1];mo(y)&&mo(f)&&(f=ga(!0,y,f)),r[h]=[u,f,...m]}}}}const KD=new El().freeze();function xa(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function _a(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function wa(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _d(e){if(!mo(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function wd(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Rs(e){return YD(e)?e:new vy(e)}function YD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function XD(e){return typeof e=="string"||QD(e)}function QD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ez="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",kd=[],Sd={allowDangerousHtml:!0},tz=/^(https?|ircs?|mailto|xmpp)$/i,nz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function rz(e){const t=sz(e),n=iz(e);return az(t.runSync(t.parse(n),n),e)}function sz(e){const t=e.rehypePlugins||kd,n=e.remarkPlugins||kd,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Sd}:Sd;return KD().use($j).use(n).use(ND,r).use(t)}function iz(e){const t=e.children||"",n=new vy;return typeof t=="string"&&(n.value=t),n}function az(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,i=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||oz;for(const c of nz)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+ez+c.id,void 0);return Cl(e,u),wN(e,{Fragment:p.Fragment,components:s,ignoreInvalidStyle:!0,jsx:p.jsx,jsxs:p.jsxs,passKeys:!0,passNode:!0});function u(c,d,h){if(c.type==="raw"&&h&&typeof d=="number")return a?h.children.splice(d,1):h.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let f;for(f in fa)if(Object.hasOwn(fa,f)&&Object.hasOwn(c.properties,f)){const m=c.properties[f],y=fa[f];(y===null||y.includes(c.tagName))&&(c.properties[f]=l(String(m||""),f,c))}}if(c.type==="element"){let f=n?!n.includes(c.tagName):i?i.includes(c.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(c,d,h)),f&&h&&typeof d=="number")return o&&c.children?h.children.splice(d,1,...c.children):h.children.splice(d,1),d}}}function oz(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||tz.test(e.slice(0,t))?e:""}const lz=(e,t)=>typeof e=="string"?e===t:JSON.stringify(e)===JSON.stringify(t),uz=(e,t)=>{if(!e||!t)return!1;const n=r=>{const{position:s,data:i,...a}=r||{};return a};return JSON.stringify(n(e.properties))===JSON.stringify(n(t.properties))&&lz(e.children,t.children)},xy=(e,t)=>uz(e.node,t.node),cz=(e={})=>Object.fromEntries(Object.entries(e??{}).map(([t,n])=>{if(!n)return[t,n];const r=n,s=({node:i,...a})=>p.jsx(r,{...a});return[t,b.memo(s,xy)]})),_y=b.createContext(null),dz=()=>b.useContext(_y)!==null,hz=({children:e,...t})=>p.jsx(_y.Provider,{value:t,children:e});b.memo(hz,xy);function Id(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function fz(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function pz(e,t,n){const s=zi((n||{}).ignore||[]),i=mz(t);let a=-1;for(;++a<i.length;)yy(e,"text",o);function o(u,c){let d=-1,h;for(;++d<c.length;){const f=c[d],m=h?h.children:void 0;if(s(f,m?m.indexOf(f):void 0,h))return;h=f}if(h)return l(u,c)}function l(u,c){const d=c[c.length-1],h=i[a][0],f=i[a][1];let m=0;const v=d.children.indexOf(u);let g=!1,_=[];h.lastIndex=0;let x=h.exec(u.value);for(;x;){const T=x.index,E={index:x.index,input:x.input,stack:[...c,u]};let I=f(...x,E);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?h.lastIndex=T+1:(m!==T&&_.push({type:"text",value:u.value.slice(m,T)}),Array.isArray(I)?_.push(...I):I&&_.push(I),m=T+x[0].length,g=!0),!h.global)break;x=h.exec(u.value)}return g?(m<u.value.length&&_.push({type:"text",value:u.value.slice(m)}),d.children.splice(v,1,..._)):_=[u],v+_.length}}function mz(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([gz(s[0]),yz(s[1])])}return t}function gz(e){return typeof e=="string"?new RegExp(fz(e),"g"):e}function yz(e){return typeof e=="function"?e:function(){return e}}const ka="phrasing",Sa=["autolink","link","image","label"];function bz(){return{transforms:[Iz],enter:{literalAutolink:xz,literalAutolinkEmail:Ia,literalAutolinkHttp:Ia,literalAutolinkWww:Ia},exit:{literalAutolink:Sz,literalAutolinkEmail:kz,literalAutolinkHttp:_z,literalAutolinkWww:wz}}}function vz(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ka,notInConstruct:Sa},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ka,notInConstruct:Sa},{character:":",before:"[ps]",after:"\\/",inConstruct:ka,notInConstruct:Sa}]}}function xz(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ia(e){this.config.enter.autolinkProtocol.call(this,e)}function _z(e){this.config.exit.autolinkProtocol.call(this,e)}function wz(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function kz(e){this.config.exit.autolinkEmail.call(this,e)}function Sz(e){this.exit(e)}function Iz(e){pz(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Tz],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Cz]],{ignore:["link","linkReference"]})}function Tz(e,t,n,r,s){let i="";if(!wy(s)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!Ez(n)))return!1;const a=Rz(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:i+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function Cz(e,t,n,r){return!wy(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Ez(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Rz(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=Id(e,"(");let i=Id(e,")");for(;r!==-1&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function wy(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Sn(n)||Oi(n))&&(!t||n!==47)}ky.peek=Lz;function Az(){this.buffer()}function Pz(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Mz(){this.buffer()}function Nz(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Oz(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=xt(this.sliceSerialize(e)).toLowerCase(),n.label=t}function jz(e){this.exit(e)}function Dz(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=xt(this.sliceSerialize(e)).toLowerCase(),n.label=t}function zz(e){this.exit(e)}function Lz(){return"["}function ky(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),o(),a(),i+=s.move("]"),i}function $z(){return{enter:{gfmFootnoteCallString:Az,gfmFootnoteCall:Pz,gfmFootnoteDefinitionLabelString:Mz,gfmFootnoteDefinition:Nz},exit:{gfmFootnoteCallString:Oz,gfmFootnoteCall:jz,gfmFootnoteDefinitionLabelString:Dz,gfmFootnoteDefinition:zz}}}function Fz(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:ky},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,a){const o=i.createTracker(a);let l=o.move("[^");const u=i.enter("footnoteDefinition"),c=i.enter("label");return l+=o.move(i.safe(i.associationId(r),{before:l,after:"]"})),c(),l+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),l+=o.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,o.current()),t?Sy:Bz))),u(),l}}function Bz(e,t,n){return t===0?e:Sy(e,t,n)}function Sy(e,t,n){return(n?"":"    ")+e}const Uz=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Iy.peek=Wz;function Zz(){return{canContainEols:["delete"],enter:{strikethrough:qz},exit:{strikethrough:Hz}}}function Vz(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Uz}],handlers:{delete:Iy}}}function qz(e){this.enter({type:"delete",children:[]},e)}function Hz(e){this.exit(e)}function Iy(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(e,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),i(),a}function Wz(){return"~"}function Gz(e){return e.length}function Jz(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||Gz,i=[],a=[],o=[],l=[];let u=0,c=-1;for(;++c<e.length;){const y=[],v=[];let g=-1;for(e[c].length>u&&(u=e[c].length);++g<e[c].length;){const _=Kz(e[c][g]);if(n.alignDelimiters!==!1){const x=s(_);v[g]=x,(l[g]===void 0||x>l[g])&&(l[g]=x)}y.push(_)}a[c]=y,o[c]=v}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)i[d]=Td(r[d]);else{const y=Td(r);for(;++d<u;)i[d]=y}d=-1;const h=[],f=[];for(;++d<u;){const y=i[d];let v="",g="";y===99?(v=":",g=":"):y===108?v=":":y===114&&(g=":");let _=n.alignDelimiters===!1?1:Math.max(1,l[d]-v.length-g.length);const x=v+"-".repeat(_)+g;n.alignDelimiters!==!1&&(_=v.length+_+g.length,_>l[d]&&(l[d]=_),f[d]=_),h[d]=x}a.splice(1,0,h),o.splice(1,0,f),c=-1;const m=[];for(;++c<a.length;){const y=a[c],v=o[c];d=-1;const g=[];for(;++d<u;){const _=y[d]||"";let x="",T="";if(n.alignDelimiters!==!1){const E=l[d]-(v[d]||0),I=i[d];I===114?x=" ".repeat(E):I===99?E%2?(x=" ".repeat(E/2+.5),T=" ".repeat(E/2-.5)):(x=" ".repeat(E/2),T=x):T=" ".repeat(E)}n.delimiterStart!==!1&&!d&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||d)&&g.push(" "),n.alignDelimiters!==!1&&g.push(x),g.push(_),n.alignDelimiters!==!1&&g.push(T),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&g.push("|")}m.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return m.join(`
`)}function Kz(e){return e==null?"":String(e)}function Td(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Yz(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),Xz);return s(),a}function Xz(e,t,n){return">"+(n?"":" ")+e}function Qz(e,t){return Cd(e,t.inConstruct,!0)&&!Cd(e,t.notInConstruct,!1)}function Cd(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Ed(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&Qz(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function eL(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>a&&(a=i):i=1,s=r+t.length,r=n.indexOf(t,s);return a}function tL(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function nL(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function rL(e,t,n,r){const s=nL(n),i=e.value||"",a=s==="`"?"GraveAccent":"Tilde";if(tL(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(i,sL);return d(),h}const o=n.createTracker(r),l=s.repeat(Math.max(eL(i,s)+1,3)),u=n.enter("codeFenced");let c=o.move(l);if(e.lang){const d=n.enter(`codeFencedLang${a}`);c+=o.move(n.safe(e.lang,{before:c,after:" ",encode:["`"],...o.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${a}`);c+=o.move(" "),c+=o.move(n.safe(e.meta,{before:c,after:`
`,encode:["`"],...o.current()})),d()}return c+=o.move(`
`),i&&(c+=o.move(i+`
`)),c+=o.move(l),u(),c}function sL(e,t,n){return(n?"":"    ")+e}function Rl(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function iL(e,t,n,r){const s=Rl(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(e),{before:u,after:"]",...l.current()})),u+=l.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...l.current()}))),o(),e.title&&(o=n.enter(`title${i}`),u+=l.move(" "+s),u+=l.move(n.safe(e.title,{before:u,after:s,...l.current()})),u+=l.move(s),o()),a(),u}function aL(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Jr(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ci(e,t,n){const r=rr(e),s=rr(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Ty.peek=oL;function Ty(e,t,n,r){const s=aL(n),i=n.enter("emphasis"),a=n.createTracker(r),o=a.move(s);let l=a.move(n.containerPhrasing(e,{after:s,before:o,...a.current()}));const u=l.charCodeAt(0),c=ci(r.before.charCodeAt(r.before.length-1),u,s);c.inside&&(l=Jr(u)+l.slice(1));const d=l.charCodeAt(l.length-1),h=ci(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+Jr(d));const f=a.move(s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:c.outside},o+l+f}function oL(e,t,n){return n.options.emphasis||"*"}function lL(e,t){let n=!1;return Cl(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fo}),!!((!e.depth||e.depth<3)&&xl(e)&&(t.options.setext||n))}function uL(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(lL(e,n)){const c=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return d(),c(),h+`
`+(s===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(s),o=n.enter("headingAtx"),l=n.enter("phrasing");i.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(u)&&(u=Jr(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),o(),u}Cy.peek=cL;function Cy(e){return e.value||""}function cL(){return"<"}Ey.peek=dL;function Ey(e,t,n,r){const s=Rl(n),i=s==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(e.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=n.enter(`title${i}`),u+=l.move(" "+s),u+=l.move(n.safe(e.title,{before:u,after:s,...l.current()})),u+=l.move(s),o()),u+=l.move(")"),a(),u}function dL(){return"!"}Ry.peek=hL;function Ry(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const u=n.safe(e.alt,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=c,i(),s==="full"||!u||u!==d?l+=o.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function hL(){return"!"}Ay.peek=fL;function Ay(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const a=n.unsafe[i],o=n.compilePattern(a);let l;if(a.atBreak)for(;l=o.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return s+r+s}function fL(){return"`"}function Py(e,t){const n=xl(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}My.peek=pL;function My(e,t,n,r){const s=Rl(n),i=s==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,l;if(Py(e,n)){const c=n.stack;n.stack=[],o=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(e,{before:d,after:">",...a.current()})),d+=a.move(">"),o(),n.stack=c,d}o=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${i}`),u+=a.move(" "+s),u+=a.move(n.safe(e.title,{before:u,after:s,...a.current()})),u+=a.move(s),l()),u+=a.move(")"),o(),u}function pL(e,t,n){return Py(e,n)?"<":"["}Ny.peek=mL;function Ny(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const u=n.containerPhrasing(e,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=c,i(),s==="full"||!u||u!==d?l+=o.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function mL(){return"["}function Al(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function gL(e){const t=Al(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function yL(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Oy(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function bL(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?yL(n):Al(n);const o=e.ordered?a==="."?")":".":gL(n);let l=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Oy(n)===a&&c){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=i,s(),u}function vL(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function xL(e,t,n,r){const s=vL(n);let i=n.bulletCurrent||Al(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let a=i.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(i+" ".repeat(a-i.length)),o.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,o.current()),c);return l(),u;function c(d,h,f){return h?(f?"":" ".repeat(a))+d:(f?i:i+" ".repeat(a-i.length))+d}}function _L(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,r);return i(),s(),a}const wL=zi(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kL(e,t,n,r){return(e.children.some(function(a){return wL(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function SL(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}jy.peek=IL;function jy(e,t,n,r){const s=SL(n),i=n.enter("strong"),a=n.createTracker(r),o=a.move(s+s);let l=a.move(n.containerPhrasing(e,{after:s,before:o,...a.current()}));const u=l.charCodeAt(0),c=ci(r.before.charCodeAt(r.before.length-1),u,s);c.inside&&(l=Jr(u)+l.slice(1));const d=l.charCodeAt(l.length-1),h=ci(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+Jr(d));const f=a.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:c.outside},o+l+f}function IL(e,t,n){return n.options.strong||"*"}function TL(e,t,n,r){return n.safe(e.value,r)}function CL(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function EL(e,t,n){const r=(Oy(n)+(n.options.ruleSpaces?" ":"")).repeat(CL(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Dy={blockquote:Yz,break:Ed,code:rL,definition:iL,emphasis:Ty,hardBreak:Ed,heading:uL,html:Cy,image:Ey,imageReference:Ry,inlineCode:Ay,link:My,linkReference:Ny,list:bL,listItem:xL,paragraph:_L,root:kL,strong:jy,text:TL,thematicBreak:EL};function RL(){return{enter:{table:AL,tableData:Rd,tableHeader:Rd,tableRow:ML},exit:{codeText:NL,table:PL,tableData:Ta,tableHeader:Ta,tableRow:Ta}}}function AL(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function PL(e){this.exit(e),this.data.inTable=void 0}function ML(e){this.enter({type:"tableRow",children:[]},e)}function Ta(e){this.exit(e)}function Rd(e){this.enter({type:"tableCell",children:[]},e)}function NL(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,OL));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function OL(e,t){return t==="|"?t:e}function jL(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:l,tableRow:o}};function a(f,m,y,v){return u(c(f,y,v),f.align)}function o(f,m,y,v){const g=d(f,y,v),_=u([g]);return _.slice(0,_.indexOf(`
`))}function l(f,m,y,v){const g=y.enter("tableCell"),_=y.enter("phrasing"),x=y.containerPhrasing(f,{...v,before:i,after:i});return _(),g(),x}function u(f,m){return Jz(f,{align:m,alignDelimiters:r,padding:n,stringLength:s})}function c(f,m,y){const v=f.children;let g=-1;const _=[],x=m.enter("table");for(;++g<v.length;)_[g]=d(v[g],m,y);return x(),_}function d(f,m,y){const v=f.children;let g=-1;const _=[],x=m.enter("tableRow");for(;++g<v.length;)_[g]=l(v[g],f,m,y);return x(),_}function h(f,m,y){let v=Dy.inlineCode(f,m,y);return y.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function DL(){return{exit:{taskListCheckValueChecked:Ad,taskListCheckValueUnchecked:Ad,paragraph:LL}}}function zL(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:$L}}}function Ad(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function LL(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let i=-1,a;for(;++i<s.length;){const o=s[i];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function $L(e,t,n,r){const s=e.children[0],i=typeof e.checked=="boolean"&&s&&s.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);i&&o.move(a);let l=Dy.listItem(e,t,n,{...r,...o.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+a}}function FL(){return[bz(),$z(),Zz(),RL(),DL()]}function BL(e){return{extensions:[vz(),Fz(e),Vz(),jL(e),zL()]}}const UL={tokenize:GL,partial:!0},zy={tokenize:JL,partial:!0},Ly={tokenize:KL,partial:!0},$y={tokenize:YL,partial:!0},ZL={tokenize:XL,partial:!0},Fy={name:"wwwAutolink",tokenize:HL,previous:Uy},By={name:"protocolAutolink",tokenize:WL,previous:Zy},Zt={name:"emailAutolink",tokenize:qL,previous:Vy},Ot={};function VL(){return{text:Ot}}let hn=48;for(;hn<123;)Ot[hn]=Zt,hn++,hn===58?hn=65:hn===91&&(hn=97);Ot[43]=Zt;Ot[45]=Zt;Ot[46]=Zt;Ot[95]=Zt;Ot[72]=[Zt,By];Ot[104]=[Zt,By];Ot[87]=[Zt,Fy];Ot[119]=[Zt,Fy];function qL(e,t,n){const r=this;let s,i;return a;function a(d){return!yo(d)||!Vy.call(r,r.previous)||Pl(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(d))}function o(d){return yo(d)?(e.consume(d),o):d===64?(e.consume(d),l):n(d)}function l(d){return d===46?e.check(ZL,c,u)(d):d===45||d===95||Ze(d)?(i=!0,e.consume(d),l):c(d)}function u(d){return e.consume(d),s=!0,l}function c(d){return i&&s&&Je(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function HL(e,t,n){const r=this;return s;function s(a){return a!==87&&a!==119||!Uy.call(r,r.previous)||Pl(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(UL,e.attempt(zy,e.attempt(Ly,i),n),n)(a))}function i(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function WL(e,t,n){const r=this;let s="",i=!1;return a;function a(d){return(d===72||d===104)&&Zy.call(r,r.previous)&&!Pl(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),e.consume(d),o):n(d)}function o(d){if(Je(d)&&s.length<5)return s+=String.fromCodePoint(d),e.consume(d),o;if(d===58){const h=s.toLowerCase();if(h==="http"||h==="https")return e.consume(d),l}return n(d)}function l(d){return d===47?(e.consume(d),i?u:(i=!0,l)):n(d)}function u(d){return d===null||oi(d)||ye(d)||Sn(d)||Oi(d)?n(d):e.attempt(zy,e.attempt(Ly,c),n)(d)}function c(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function GL(e,t,n){let r=0;return s;function s(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),s):a===46&&r===3?(e.consume(a),i):n(a)}function i(a){return a===null?n(a):t(a)}}function JL(e,t,n){let r,s,i;return a;function a(u){return u===46||u===95?e.check($y,l,o)(u):u===null||ye(u)||Sn(u)||u!==45&&Oi(u)?l(u):(i=!0,e.consume(u),a)}function o(u){return u===95?r=!0:(s=r,r=void 0),e.consume(u),a}function l(u){return s||r||!i?n(u):t(u)}}function KL(e,t){let n=0,r=0;return s;function s(a){return a===40?(n++,e.consume(a),s):a===41&&r<n?i(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check($y,t,i)(a):a===null||ye(a)||Sn(a)?t(a):(e.consume(a),s)}function i(a){return a===41&&r++,e.consume(a),s}}function YL(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),i):o===93?(e.consume(o),s):o===60||o===null||ye(o)||Sn(o)?t(o):n(o)}function s(o){return o===null||o===40||o===91||ye(o)||Sn(o)?t(o):r(o)}function i(o){return Je(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):Je(o)?(e.consume(o),a):n(o)}}function XL(e,t,n){return r;function r(i){return e.consume(i),s}function s(i){return Ze(i)?n(i):t(i)}}function Uy(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ye(e)}function Zy(e){return!Je(e)}function Vy(e){return!(e===47||yo(e))}function yo(e){return e===43||e===45||e===46||e===95||Ze(e)}function Pl(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const QL={tokenize:o$,partial:!0};function e$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:s$,continuation:{tokenize:i$},exit:a$}},text:{91:{name:"gfmFootnoteCall",tokenize:r$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:t$,resolveTo:n$}}}}function t$(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return n(l);const u=xt(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function n$(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function r$(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,a;return o;function o(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(i>999||d===93&&!a||d===null||d===91||ye(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return s.includes(xt(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return ye(d)||(a=!0),i++,e.consume(d),d===92?c:u}function c(d){return d===91||d===92||d===93?(e.consume(d),i++,u):u(d)}}function s$(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0,o;return l;function l(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(m)}function c(m){if(a>999||m===93&&!o||m===null||m===91||ye(m))return n(m);if(m===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return i=xt(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return ye(m)||(o=!0),a++,e.consume(m),m===92?d:c}function d(m){return m===91||m===92||m===93?(e.consume(m),a++,c):c(m)}function h(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),s.includes(i)||s.push(i),ae(e,f,"gfmFootnoteDefinitionWhitespace")):n(m)}function f(m){return t(m)}}function i$(e,t,n){return e.check(ds,t,e.attempt(QL,t,n))}function a$(e){e.exit("gfmFootnoteDefinition")}function o$(e,t,n){const r=this;return ae(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(i):n(i)}}function l$(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let u=l;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[l][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[l][1].end)},d={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[l][1].start)},h=[["enter",c,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",d,o]],f=o.parser.constructs.insideSpan.null;f&&st(h,h.length,0,ji(f,a.slice(u+1,l),o)),st(h,h.length,0,[["exit",d,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",c,o]]),st(a,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function i(a,o,l){const u=this.previous,c=this.events;let d=0;return h;function h(m){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(m):(a.enter("strikethroughSequenceTemporary"),f(m))}function f(m){const y=rr(u);if(m===126)return d>1?l(m):(a.consume(m),d++,f);if(d<2&&!n)return l(m);const v=a.exit("strikethroughSequenceTemporary"),g=rr(m);return v._open=!g||g===2&&!!y,v._close=!y||y===2&&!!g,o(m)}}}class u${constructor(){this.map=[]}add(t,n,r){c$(this,t,n,r)}consume(t){if(this.map.sort(function(i,a){return i[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const i of s)t.push(i);s=r.pop()}this.map.length=0}}function c$(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function d$(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function h$(){return{flow:{null:{name:"table",tokenize:f$,resolveAll:p$}}}}function f$(e,t,n){const r=this;let s=0,i=0,a;return o;function o(C){let L=r.events.length-1;for(;L>-1;){const pe=r.events[L][1].type;if(pe==="lineEnding"||pe==="linePrefix")L--;else break}const F=L>-1?r.events[L][1].type:null,ue=F==="tableHead"||F==="tableRow"?I:l;return ue===I&&r.parser.lazy[r.now().line]?n(C):ue(C)}function l(C){return e.enter("tableHead"),e.enter("tableRow"),u(C)}function u(C){return C===124||(a=!0,i+=1),c(C)}function c(C){return C===null?n(C):H(C)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),f):n(C):re(C)?ae(e,c,"whitespace")(C):(i+=1,a&&(a=!1,s+=1),C===124?(e.enter("tableCellDivider"),e.consume(C),e.exit("tableCellDivider"),a=!0,c):(e.enter("data"),d(C)))}function d(C){return C===null||C===124||ye(C)?(e.exit("data"),c(C)):(e.consume(C),C===92?h:d)}function h(C){return C===92||C===124?(e.consume(C),d):d(C)}function f(C){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(C):(e.enter("tableDelimiterRow"),a=!1,re(C)?ae(e,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):m(C))}function m(C){return C===45||C===58?v(C):C===124?(a=!0,e.enter("tableCellDivider"),e.consume(C),e.exit("tableCellDivider"),y):E(C)}function y(C){return re(C)?ae(e,v,"whitespace")(C):v(C)}function v(C){return C===58?(i+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(C),e.exit("tableDelimiterMarker"),g):C===45?(i+=1,g(C)):C===null||H(C)?T(C):E(C)}function g(C){return C===45?(e.enter("tableDelimiterFiller"),_(C)):E(C)}function _(C){return C===45?(e.consume(C),_):C===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(C),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(C))}function x(C){return re(C)?ae(e,T,"whitespace")(C):T(C)}function T(C){return C===124?m(C):C===null||H(C)?!a||s!==i?E(C):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(C)):E(C)}function E(C){return n(C)}function I(C){return e.enter("tableRow"),P(C)}function P(C){return C===124?(e.enter("tableCellDivider"),e.consume(C),e.exit("tableCellDivider"),P):C===null||H(C)?(e.exit("tableRow"),t(C)):re(C)?ae(e,P,"whitespace")(C):(e.enter("data"),N(C))}function N(C){return C===null||C===124||ye(C)?(e.exit("data"),P(C)):(e.consume(C),C===92?q:N)}function q(C){return C===92||C===124?(e.consume(C),N):N(C)}}function p$(e,t){let n=-1,r=!0,s=0,i=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,u,c,d;const h=new u$;for(;++n<e.length;){const f=e[n],m=f[1];f[0]==="enter"?m.type==="tableHead"?(o=!1,l!==0&&(Pd(h,t,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",u,t]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,c={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",c,t]])),s=m.type==="tableDelimiterRow"?2:c?3:1):s&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(i[1]!==0&&(a[0]=a[1],d=As(h,t,i,s,void 0,d),i=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(a[0]=a[1],d=As(h,t,i,s,void 0,d)),i=a,a=[i[1],n,0,0])):m.type==="tableHead"?(o=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,i[1]!==0?(a[0]=a[1],d=As(h,t,i,s,n,d)):a[1]!==0&&(d=As(h,t,a,s,n,d)),s=0):s&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(l!==0&&Pd(h,t,l,u,c),h.consume(t.events),n=-1;++n<t.events.length;){const f=t.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=d$(t.events,n))}return e}function As(e,t,n,r,s,i){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(i.end=Object.assign({},Bn(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const l=Bn(t.events,n[1]);if(i={type:a,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=Bn(t.events,n[2]),c=Bn(t.events,n[3]),d={type:o,start:Object.assign({},u),end:Object.assign({},c)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],f=t.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,y=n[3]-n[2]-1;e.add(m,y,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return s!==void 0&&(i.end=Object.assign({},Bn(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function Pd(e,t,n,r,s){const i=[],a=Bn(t.events,n);s&&(s.end=Object.assign({},a),i.push(["exit",s,t])),r.end=Object.assign({},a),i.push(["exit",r,t]),e.add(n+1,0,i)}function Bn(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const m$={name:"tasklistCheck",tokenize:y$};function g$(){return{text:{91:m$}}}function y$(e,t,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),i)}function i(l){return ye(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),a):n(l)}function a(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(l)}function o(l){return H(l)?t(l):re(l)?e.check({tokenize:b$},t,n)(l):n(l)}}function b$(e,t,n){return ae(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function v$(e){return Xg([VL(),e$(),l$(e),h$(),g$()])}const x$={};function _$(e){const t=this,n=e||x$,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(v$(n)),i.push(FL()),a.push(BL(n))}const w$=()=>{const t=uI().content.filter(n=>n.type==="text").map(n=>n.text).join("");return p.jsx("div",{className:"aui-md",children:p.jsx(rz,{remarkPlugins:[_$],components:T$,children:t})})},k$=b.memo(w$),S$=({language:e,code:t})=>{const{isCopied:n,copyToClipboard:r}=I$(),s=()=>{!t||n||r(t)};return p.jsxs("div",{className:"aui-code-header-root mt-2.5 flex items-center justify-between rounded-t-lg border border-border/50 border-b-0 bg-muted/50 px-3 py-1.5 text-xs",children:[p.jsx("span",{className:"aui-code-header-language font-medium text-muted-foreground lowercase",children:e}),p.jsxs(ht,{tooltip:"Copy",onClick:s,children:[!n&&p.jsx(Mg,{}),n&&p.jsx(hl,{})]})]})},I$=({copiedDuration:e=3e3}={})=>{const[t,n]=b.useState(!1);return{isCopied:t,copyToClipboard:s=>{s&&navigator.clipboard.writeText(s).then(()=>{n(!0),setTimeout(()=>n(!1),e)})}}},T$=cz({h1:({className:e,...t})=>p.jsx("h1",{className:K("aui-md-h1 mb-2 scroll-m-20 font-semibold text-base first:mt-0 last:mb-0",e),...t}),h2:({className:e,...t})=>p.jsx("h2",{className:K("aui-md-h2 mt-3 mb-1.5 scroll-m-20 font-semibold text-sm first:mt-0 last:mb-0",e),...t}),h3:({className:e,...t})=>p.jsx("h3",{className:K("aui-md-h3 mt-2.5 mb-1 scroll-m-20 font-semibold text-sm first:mt-0 last:mb-0",e),...t}),h4:({className:e,...t})=>p.jsx("h4",{className:K("aui-md-h4 mt-2 mb-1 scroll-m-20 font-medium text-sm first:mt-0 last:mb-0",e),...t}),h5:({className:e,...t})=>p.jsx("h5",{className:K("aui-md-h5 mt-2 mb-1 font-medium text-sm first:mt-0 last:mb-0",e),...t}),h6:({className:e,...t})=>p.jsx("h6",{className:K("aui-md-h6 mt-2 mb-1 font-medium text-sm first:mt-0 last:mb-0",e),...t}),p:({className:e,...t})=>p.jsx("p",{className:K("aui-md-p my-2.5 leading-normal first:mt-0 last:mb-0",e),...t}),a:({className:e,...t})=>p.jsx("a",{className:K("aui-md-a text-primary underline underline-offset-2 hover:text-primary/80",e),...t}),blockquote:({className:e,...t})=>p.jsx("blockquote",{className:K("aui-md-blockquote my-2.5 border-muted-foreground/30 border-l-2 pl-3 text-muted-foreground italic",e),...t}),ul:({className:e,...t})=>p.jsx("ul",{className:K("aui-md-ul my-2 ml-4 list-disc marker:text-muted-foreground [&>li]:mt-1",e),...t}),ol:({className:e,...t})=>p.jsx("ol",{className:K("aui-md-ol my-2 ml-4 list-decimal marker:text-muted-foreground [&>li]:mt-1",e),...t}),hr:({className:e,...t})=>p.jsx("hr",{className:K("aui-md-hr my-2 border-muted-foreground/20",e),...t}),table:({className:e,...t})=>p.jsx("table",{className:K("aui-md-table my-2 w-full border-separate border-spacing-0 overflow-y-auto",e),...t}),th:({className:e,...t})=>p.jsx("th",{className:K("aui-md-th bg-muted px-2 py-1 text-left font-medium first:rounded-tl-lg last:rounded-tr-lg [[align=center]]:text-center [[align=right]]:text-right",e),...t}),td:({className:e,...t})=>p.jsx("td",{className:K("aui-md-td border-muted-foreground/20 border-b border-l px-2 py-1 text-left last:border-r [[align=center]]:text-center [[align=right]]:text-right",e),...t}),tr:({className:e,...t})=>p.jsx("tr",{className:K("aui-md-tr m-0 border-b p-0 first:border-t [&:last-child>td:first-child]:rounded-bl-lg [&:last-child>td:last-child]:rounded-br-lg",e),...t}),li:({className:e,...t})=>p.jsx("li",{className:K("aui-md-li leading-normal",e),...t}),sup:({className:e,...t})=>p.jsx("sup",{className:K("aui-md-sup [&>a]:text-xs [&>a]:no-underline",e),...t}),pre:({className:e,...t})=>p.jsx("pre",{className:K("aui-md-pre overflow-x-auto rounded-t-none rounded-b-lg border border-border/50 border-t-0 bg-muted/30 p-3 text-xs leading-relaxed",e),...t}),code:function({className:t,...n}){const r=dz();return p.jsx("code",{className:K(!r&&"aui-md-inline-code rounded-md border border-border/50 bg-muted/50 px-1.5 py-0.5 font-mono text-[0.85em]",t),...n})},CodeHeader:S$});function C$({...e}){return p.jsx(kb,{"data-slot":"collapsible",...e})}function E$({...e}){return p.jsx(Zd,{"data-slot":"collapsible-trigger",...e})}function R$({...e}){return p.jsx(Vd,{"data-slot":"collapsible-content",...e})}const Md=200;function qy({className:e,open:t,onOpenChange:n,defaultOpen:r=!1,children:s,...i}){const a=b.useRef(null),[o,l]=b.useState(r),u=BT(a,Md),c=t!==void 0,d=c?t:o,h=b.useCallback(f=>{f||u(),c||l(f),n==null||n(f)},[u,c,n]);return p.jsx(C$,{ref:a,"data-slot":"tool-fallback-root",open:d,onOpenChange:h,className:K("aui-tool-fallback-root group/tool-fallback-root w-full rounded-lg border py-3",e),style:{"--animation-duration":`${Md}ms`},...i,children:s})}const A$={running:WP,complete:hl,incomplete:$P,"requires-action":zP};function Hy({toolName:e,status:t,className:n,...r}){const s=(t==null?void 0:t.type)??"complete",i=s==="running",a=(t==null?void 0:t.type)==="incomplete"&&t.reason==="cancelled",o=A$[s],l=a?"Cancelled tool":"Used tool";return p.jsxs(E$,{"data-slot":"tool-fallback-trigger",className:K("aui-tool-fallback-trigger group/trigger flex w-full items-center gap-2 px-4 text-sm transition-colors",n),...r,children:[p.jsx(o,{"data-slot":"tool-fallback-trigger-icon",className:K("aui-tool-fallback-trigger-icon size-4 shrink-0",a&&"text-muted-foreground",i&&"animate-spin")}),p.jsxs("span",{"data-slot":"tool-fallback-trigger-label",className:K("aui-tool-fallback-trigger-label-wrapper relative inline-block grow text-left leading-none",a&&"text-muted-foreground line-through"),children:[p.jsxs("span",{children:[l,": ",p.jsx("b",{children:e})]}),i&&p.jsxs("span",{"aria-hidden":!0,"data-slot":"tool-fallback-trigger-shimmer",className:"aui-tool-fallback-trigger-shimmer shimmer pointer-events-none absolute inset-0 motion-reduce:animate-none",children:[l,": ",p.jsx("b",{children:e})]})]}),p.jsx(PP,{"data-slot":"tool-fallback-trigger-chevron",className:K("aui-tool-fallback-trigger-chevron size-4 shrink-0","transition-transform duration-(--animation-duration) ease-out","group-data-[state=closed]/trigger:-rotate-90","group-data-[state=open]/trigger:rotate-0")})]})}function Wy({className:e,children:t,...n}){return p.jsx(R$,{"data-slot":"tool-fallback-content",className:K("aui-tool-fallback-content relative overflow-hidden text-sm outline-none","group/collapsible-content ease-out","data-[state=closed]:animate-collapsible-up","data-[state=open]:animate-collapsible-down","data-[state=closed]:fill-mode-forwards","data-[state=closed]:pointer-events-none","data-[state=open]:duration-(--animation-duration)","data-[state=closed]:duration-(--animation-duration)",e),...n,children:p.jsx("div",{className:"mt-3 flex flex-col gap-2 border-t pt-2",children:t})})}function Gy({argsText:e,className:t,...n}){return e?p.jsx("div",{"data-slot":"tool-fallback-args",className:K("aui-tool-fallback-args px-4",t),...n,children:p.jsx("pre",{className:"aui-tool-fallback-args-value whitespace-pre-wrap",children:e})}):null}function Jy({result:e,className:t,...n}){return e===void 0?null:p.jsxs("div",{"data-slot":"tool-fallback-result",className:K("aui-tool-fallback-result border-t border-dashed px-4 pt-2",t),...n,children:[p.jsx("p",{className:"aui-tool-fallback-result-header font-semibold",children:"Result:"}),p.jsx("pre",{className:"aui-tool-fallback-result-content whitespace-pre-wrap",children:typeof e=="string"?e:JSON.stringify(e,null,2)})]})}function Ky({status:e,className:t,...n}){if((e==null?void 0:e.type)!=="incomplete")return null;const r=e.error,s=r?typeof r=="string"?r:JSON.stringify(r):null;if(!s)return null;const a=e.reason==="cancelled"?"Cancelled reason:":"Error:";return p.jsxs("div",{"data-slot":"tool-fallback-error",className:K("aui-tool-fallback-error px-4",t),...n,children:[p.jsx("p",{className:"aui-tool-fallback-error-header font-semibold text-muted-foreground",children:a}),p.jsx("p",{className:"aui-tool-fallback-error-reason text-muted-foreground",children:s})]})}const P$=({toolName:e,argsText:t,result:n,status:r})=>{const s=(r==null?void 0:r.type)==="incomplete"&&r.reason==="cancelled";return p.jsxs(qy,{className:K(s&&"border-muted-foreground/30 bg-muted/30"),children:[p.jsx(Hy,{toolName:e,status:r}),p.jsxs(Wy,{children:[p.jsx(Ky,{status:r}),p.jsx(Gy,{argsText:t,className:K(s&&"opacity-60")}),!s&&p.jsx(Jy,{result:n})]})]})},ln=b.memo(P$);ln.displayName="ToolFallback";ln.Root=qy;ln.Trigger=Hy;ln.Content=Wy;ln.Args=Gy;ln.Result=Jy;ln.Error=Ky;const M$=()=>p.jsxs(nm,{className:"aui-root aui-thread-root @container flex h-full min-h-0 flex-col bg-background",style:{"--thread-max-width":"44rem"},children:[p.jsxs(sm,{className:"aui-thread-viewport relative flex min-h-0 flex-1 flex-col overflow-x-auto overflow-y-auto scroll-smooth px-4 pt-4",children:[p.jsx(en,{condition:({thread:e})=>e.isEmpty,children:p.jsx(O$,{})}),p.jsx(ET,{components:{UserMessage:U$,EditComposer:V$,AssistantMessage:F$}}),p.jsx(im,{className:"aui-thread-viewport-footer sticky bottom-0 mx-auto mt-auto flex w-full max-w-(--thread-max-width) flex-col gap-4 overflow-visible rounded-t-3xl pb-4 md:pb-6",children:p.jsx(N$,{})})]}),p.jsx("div",{className:"aui-composer-outer flex-shrink-0 px-4 pb-4",children:p.jsx(z$,{})})]}),N$=()=>p.jsx(AT,{asChild:!0,children:p.jsx(ht,{tooltip:"Scroll to bottom",variant:"outline",className:"aui-thread-scroll-to-bottom absolute -top-12 z-10 self-center rounded-full p-4 disabled:invisible dark:bg-background dark:hover:bg-accent",children:p.jsx(TP,{})})}),O$=()=>p.jsxs("div",{className:"aui-thread-welcome-root mx-auto my-auto flex w-full max-w-(--thread-max-width) grow flex-col",children:[p.jsx("div",{className:"aui-thread-welcome-center flex w-full grow flex-col items-center justify-center",children:p.jsxs("div",{className:"aui-thread-welcome-message flex size-full flex-col justify-center px-4",children:[p.jsx("h1",{className:"aui-thread-welcome-message-inner fade-in slide-in-from-bottom-1 animate-in font-semibold text-2xl duration-200",children:"Hello there!"}),p.jsx("p",{className:"aui-thread-welcome-message-inner fade-in slide-in-from-bottom-1 animate-in text-muted-foreground text-xl delay-75 duration-200",children:"How can I help you today?"})]})}),p.jsx(j$,{})]}),j$=()=>p.jsx("div",{className:"aui-thread-welcome-suggestions grid w-full @md:grid-cols-2 gap-2 pb-4",children:p.jsx(MT,{components:{Suggestion:D$}})}),D$=()=>p.jsx("div",{className:"aui-thread-welcome-suggestion-display fade-in slide-in-from-bottom-2 @md:nth-[n+3]:block nth-[n+3]:hidden animate-in fill-mode-both duration-200",children:p.jsx(OT,{send:!0,asChild:!0,children:p.jsxs(kn,{variant:"ghost",className:"aui-thread-welcome-suggestion h-auto w-full @md:flex-col flex-wrap items-start justify-start gap-1 rounded-2xl border px-4 py-3 text-left text-sm transition-colors hover:bg-muted",children:[p.jsx("span",{className:"aui-thread-welcome-suggestion-text-1 font-medium",children:p.jsx(dm,{})}),p.jsx("span",{className:"aui-thread-welcome-suggestion-text-2 text-muted-foreground",children:p.jsx(hm,{})})]})})}),z$=()=>p.jsx(el,{className:"aui-composer-root relative flex w-full flex-col",children:p.jsxs(Qp,{className:"aui-composer-attachment-dropzone flex w-full flex-col rounded-2xl border border-border bg-background p-0 outline-none transition-shadow has-[textarea:focus-visible]:border-ring has-[textarea:focus-visible]:ring-2 has-[textarea:focus-visible]:ring-ring/20 data-[dragging=true]:border-ring data-[dragging=true]:border-dashed data-[dragging=true]:bg-accent/50",children:[p.jsx(SM,{}),p.jsx(nl,{asChild:!0,children:p.jsx("textarea",{placeholder:"Send a message...",rows:3,style:{height:"4.5rem",minHeight:"4.5rem",maxHeight:"4.5rem",resize:"none",border:"none",outline:"none"},className:"aui-composer-input m-0 w-full overflow-y-auto border-0 bg-transparent px-4 pt-3 pb-3 text-sm outline-none placeholder:text-muted-foreground focus-visible:ring-0 focus:border-0 focus:outline-none","aria-label":"Message input"})}),p.jsx(L$,{})]})}),L$=()=>p.jsxs("div",{className:"aui-composer-action-wrapper relative mx-2 mb-2 flex items-center justify-between",children:[p.jsx(IM,{}),p.jsx(en,{condition:({thread:e})=>!e.isRunning,children:p.jsx(Gp,{asChild:!0,children:p.jsx(ht,{tooltip:"Send message",side:"bottom",type:"submit",variant:"default",size:"icon",className:"aui-composer-send size-8 rounded-full","aria-label":"Send message",children:p.jsx(EP,{className:"aui-composer-send-icon size-4"})})})}),p.jsx(en,{condition:({thread:e})=>e.isRunning,children:p.jsx(Kp,{asChild:!0,children:p.jsx(kn,{type:"button",variant:"default",size:"icon",className:"aui-composer-cancel size-8 rounded-full","aria-label":"Stop generating",children:p.jsx(eM,{className:"aui-composer-cancel-icon size-3 fill-current"})})})})]}),$$=()=>p.jsx(qp,{children:p.jsx(em,{className:"aui-message-error-root mt-2 rounded-md border border-destructive bg-destructive/10 p-3 text-destructive text-sm dark:bg-destructive/5 dark:text-red-200",children:p.jsx(tm,{className:"aui-message-error-message line-clamp-2"})})}),F$=()=>p.jsxs(Ci,{className:"aui-assistant-message-root fade-in slide-in-from-bottom-1 relative mx-auto w-full max-w-(--thread-max-width) animate-in py-3 duration-150","data-role":"assistant",children:[p.jsxs("div",{className:"aui-assistant-message-content break-words px-2 text-foreground leading-relaxed",children:[p.jsx(k$,{}),p.jsx(Qo,{components:{Text:()=>null,Reasoning:e=>p.jsxs("details",{className:"aui-reasoning-root","data-part":"reasoning",children:[p.jsx("summary",{className:"aui-reasoning-header",children:"Chain of Thought"}),p.jsx("div",{className:"aui-reasoning-content",children:e.text})]}),tools:{Fallback:ln}}}),p.jsx($$,{})]}),p.jsxs("div",{className:"aui-assistant-message-footer mt-1 ml-2 flex",children:[p.jsx(Yy,{}),p.jsx(B$,{})]})]}),B$=()=>p.jsxs(Yo,{hideWhenRunning:!0,autohide:"not-last",autohideFloat:"single-branch",className:"aui-assistant-action-bar-root col-start-3 row-start-2 -ml-1 flex gap-1 text-muted-foreground data-floating:absolute data-floating:rounded-md data-floating:border data-floating:bg-background data-floating:p-1 data-floating:shadow-sm",children:[p.jsx(Tp,{asChild:!0,children:p.jsxs(ht,{tooltip:"Copy",children:[p.jsx(en,{condition:({message:e})=>e.isCopied,children:p.jsx(hl,{})}),p.jsx(en,{condition:({message:e})=>!e.isCopied,children:p.jsx(Mg,{})})]})}),p.jsx(_I,{asChild:!0,children:p.jsx(ht,{tooltip:"Refresh",children:p.jsx(XP,{})})}),p.jsxs(Ep,{children:[p.jsx(Rp,{asChild:!0,children:p.jsx(ht,{tooltip:"More",className:"data-[state=open]:bg-accent",children:p.jsx(Ng,{})})}),p.jsx(Ap,{side:"bottom",align:"start",className:"aui-action-bar-more-content z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",children:p.jsx(Cp,{asChild:!0,children:p.jsxs(Pp,{className:"aui-action-bar-more-item flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[p.jsx(UP,{className:"size-4"}),"Export as Markdown"]})})})]})]}),U$=()=>p.jsxs(Ci,{className:"aui-user-message-root fade-in slide-in-from-bottom-1 mx-auto grid w-full max-w-(--thread-max-width) animate-in auto-rows-auto grid-cols-[minmax(72px,1fr)_auto] content-start gap-y-2 px-2 py-3 duration-150 [&:where(>*)]:col-start-2","data-role":"user",children:[p.jsx(kM,{}),p.jsxs("div",{className:"aui-user-message-content-wrapper relative col-start-2 min-w-0",children:[p.jsx("div",{className:"aui-user-message-content break-words rounded-2xl bg-muted px-4 py-2.5 text-foreground",children:p.jsx(Qo,{})}),p.jsx("div",{className:"aui-user-action-bar-wrapper absolute top-1/2 left-0 -translate-x-full -translate-y-1/2 pr-2",children:p.jsx(Z$,{})})]}),p.jsx(Yy,{className:"aui-user-branch-picker col-span-full col-start-1 row-start-3 -mr-1 justify-end"})]}),Z$=()=>p.jsx(Yo,{hideWhenRunning:!0,autohide:"not-last",className:"aui-user-action-bar-root flex flex-col items-end",children:p.jsx(kI,{asChild:!0,children:p.jsx(ht,{tooltip:"Edit",className:"aui-user-action-edit p-4",children:p.jsx(JP,{})})})}),V$=()=>p.jsx(Ci,{className:"aui-edit-composer-wrapper mx-auto flex w-full max-w-(--thread-max-width) flex-col px-2 py-3",children:p.jsxs(el,{className:"aui-edit-composer-root ml-auto flex w-full max-w-[85%] flex-col rounded-2xl bg-muted",children:[p.jsx(nl,{className:"aui-edit-composer-input min-h-14 w-full resize-none bg-transparent p-4 text-foreground text-sm outline-none",autoFocus:!0}),p.jsxs("div",{className:"aui-edit-composer-footer mx-3 mb-3 flex items-center gap-2 self-end",children:[p.jsx(Kp,{asChild:!0,children:p.jsx(kn,{variant:"ghost",size:"sm",children:"Cancel"})}),p.jsx(Gp,{asChild:!0,children:p.jsx(kn,{size:"sm",children:"Update"})})]})]})}),Yy=({className:e,...t})=>p.jsxs(Hp,{hideWhenSingleBranch:!0,className:K("aui-branch-picker-root mr-2 -ml-2 inline-flex items-center text-muted-foreground text-xs",e),...t,children:[p.jsx(AI,{asChild:!0,children:p.jsx(ht,{tooltip:"Previous",children:p.jsx(NP,{})})}),p.jsxs("span",{className:"aui-branch-picker-state font-medium",children:[p.jsx(jp,{})," / ",p.jsx(Op,{})]}),p.jsx(EI,{asChild:!0,children:p.jsx(ht,{tooltip:"Next",children:p.jsx(jP,{})})})]}),q$=Vr({nodeType:xR().describe("Node type to add (e.g., 'KSampler', 'CheckpointLoaderSimple', 'LoadImage')"),position:Vr({x:yn().describe("X coordinate on the canvas"),y:yn().describe("Y coordinate on the canvas")}).optional().describe("Optional node position on the canvas. If not specified, adds at default position")}),Ca={name:"addNode",description:"Adds a new node to the ComfyUI workflow. Allows specifying the node type and optionally its position on the canvas.",parameters:q$},H$=Vr({nodeId:yn().describe("ID of the node to remove")}),Ea={name:"removeNode",description:"Removes an existing node from the ComfyUI workflow by its ID.",parameters:H$},W$=Vr({includeNodeDetails:_R().optional().describe("If true, includes full details of each node. Defaults to false for faster responses")}),Ra={name:"getWorkflowInfo",description:"Gets information about the current ComfyUI workflow, including the list of nodes, connections, and general configuration.",parameters:W$},G$=Vr({sourceNodeId:yn().describe("ID of the source node"),sourceSlot:yn().describe("Output slot index of the source node"),targetNodeId:yn().describe("ID of the target node"),targetSlot:yn().describe("Input slot index of the target node")}),Aa={name:"connectNodes",description:"Connects two nodes in the ComfyUI workflow. Creates a connection from an output slot of one node to an input slot of another node.",parameters:G$};async function J$(e,t){var r;const{app:n}=t;if(!(n!=null&&n.graph))return{success:!1,error:"ComfyUI app is not available"};try{console.log("[AddNode] Attempting to add node:",e.nodeType);const s=window.LiteGraph;if(!s)return{success:!1,error:"LiteGraph is not available. Make sure ComfyUI is loaded."};console.log("[AddNode] Creating node with LiteGraph.createNode...");const i=s.createNode(e.nodeType);if(!i)return{success:!1,error:`Could not create node of type: ${e.nodeType}. Verify that the node type is valid.`};if(console.log("[AddNode] Node created:",i.id,i.type),n.graph.add(i),e.position)console.log("[AddNode] Using specified position:",e.position),i.pos=[e.position.x,e.position.y];else{const o=n.canvas;let l=50,u=50;if(o){const f=o.visible_area;f&&(l=f[0]+100,u=f[1]+100)}let c=l,d=u;for(const f of n.graph._nodes)if(f.pos&&f.id!==i.id){const m=f.pos[0]+(((r=f.size)==null?void 0:r[0])||200),y=f.pos[1];m>c&&(c=m,d=y)}const h=[c+250,d];console.log("[AddNode] Using auto position:",h),i.pos=h}return console.log("[AddNode] Final node position:",i.pos),n.graph.setDirtyCanvas(!0,!0),console.log("[AddNode] Node added successfully with id:",i.id),{success:!0,data:{nodeId:i.id,nodeType:e.nodeType,position:i.pos}}}catch(s){return console.error("[AddNode] Error:",s),{success:!1,error:s instanceof Error?s.message:String(s)}}}async function K$(e,t){const{app:n}=t;if(!(n!=null&&n.graph))return{success:!1,error:"ComfyUI app is not available"};try{const r=n.graph.getNodeById(e.nodeId);return r?(n.graph.remove(r),n.graph.setDirtyCanvas(!0,!0),{success:!0,data:{nodeId:e.nodeId,removed:!0}}):{success:!1,error:`Node with ID ${e.nodeId} not found`}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error removing node"}}}async function Y$(e,t){const{app:n}=t;if(!(n!=null&&n.graph))return{success:!1,error:"ComfyUI app is not available"};try{const r=[],s=[];for(const i of n.graph._nodes){const a={id:i.id,type:i.type,position:i.pos};if(e.includeNodeDetails&&(a.size=i.size,a.title=i.title),r.push(a),i.outputs)for(let o=0;o<i.outputs.length;o++){const l=i.outputs[o];if(l.links)for(const u of l.links){const c=n.graph.links[u];c&&s.push({sourceNodeId:i.id,sourceSlot:o,targetNodeId:c.target_id,targetSlot:c.target_slot})}}}return{success:!0,data:{nodeCount:r.length,nodes:r,connections:s,canvasSize:n.canvas?{width:n.canvas.canvas.width,height:n.canvas.canvas.height}:void 0}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error getting workflow information"}}}async function X$(e,t){const{app:n}=t;if(!(n!=null&&n.graph))return{success:!1,error:"ComfyUI app is not available"};try{const r=n.graph.getNodeById(e.sourceNodeId),s=n.graph.getNodeById(e.targetNodeId);if(!r)return{success:!1,error:`Source node with ID ${e.sourceNodeId} not found`};if(!s)return{success:!1,error:`Target node with ID ${e.targetNodeId} not found`};if(!r.outputs||e.sourceSlot>=r.outputs.length)return{success:!1,error:`Source node does not have an output slot at index ${e.sourceSlot}`};if(!s.inputs||e.targetSlot>=s.inputs.length)return{success:!1,error:`Target node does not have an input slot at index ${e.targetSlot}`};const i=r.connect(e.sourceSlot,s,e.targetSlot);return i==null?{success:!1,error:"Could not create connection. Data types might be incompatible."}:(n.graph.setDirtyCanvas(!0,!0),{success:!0,data:{sourceNodeId:e.sourceNodeId,sourceSlot:e.sourceSlot,targetNodeId:e.targetNodeId,targetSlot:e.targetSlot,linkId:i}})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error connecting nodes"}}}function Ps(){return window.app?{app:window.app}:null}function Q$(){ws({toolName:Ca.name,description:Ca.description,parameters:Ca.parameters,execute:async e=>{const t=Ps();return t?J$(e,t):{success:!1,error:"ComfyUI app is not available"}}}),ws({toolName:Ea.name,description:Ea.description,parameters:Ea.parameters,execute:async e=>{const t=Ps();return t?K$(e,t):{success:!1,error:"ComfyUI app is not available"}}}),ws({toolName:Aa.name,description:Aa.description,parameters:Aa.parameters,execute:async e=>{const t=Ps();return t?X$(e,t):{success:!1,error:"ComfyUI app is not available"}}}),ws({toolName:Ra.name,description:Ra.description,parameters:Ra.parameters,execute:async e=>{const t=Ps();return t?Y$(e,t):{success:!1,error:"ComfyUI app is not available"}}})}function eF(){return Q$(),p.jsxs("div",{className:"flex h-full min-h-0 flex-col overflow-hidden",children:[p.jsx(sM,{}),p.jsx(M$,{})]})}function dF(){const e=pP({transport:new so({api:"/api/chat"})});return p.jsx(BS,{runtime:e,children:p.jsx(eF,{})})}export{dF as default};
