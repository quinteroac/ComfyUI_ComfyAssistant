import { ComfyApp } from '@comfyorg/comfyui-frontend-types'
import { AssistantRuntimeProvider } from "@assistant-ui/react";
import { useChatRuntime, AssistantChatTransport } from "@assistant-ui/react-ai-sdk";
import { ThreadList } from "@/components/assistant-ui/thread-list";
import { Thread } from "@/components/assistant-ui/thread";
import './App.css'

// Type definitions for the global ComfyUI objects
declare global {
  interface Window {
    app?: ComfyApp
  }
}


function App() {
  const runtime = useChatRuntime({
    transport: new AssistantChatTransport({
      api: "/api/chat",
    }),
  });
  
  return (
      <AssistantRuntimeProvider runtime={runtime}>
          <div className="flex h-full min-h-0 flex-col overflow-hidden">
            <ThreadList />
            <Thread />
          </div>
      </AssistantRuntimeProvider>
  )
}

export default App
