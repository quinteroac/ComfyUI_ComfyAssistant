{
  "version": 3,
  "sources": ["../../secure-json-parse/index.js", "../../@assistant-ui/tap/src/react/use-resource.ts", "../../@assistant-ui/tap/src/core/commit.ts", "../../@assistant-ui/tap/src/core/env.ts", "../../@assistant-ui/tap/src/core/execution-context.ts", "../../@assistant-ui/tap/src/core/callResourceFn.ts", "../../@assistant-ui/tap/src/core/ResourceFiber.ts", "../../@assistant-ui/tap/src/core/resource.ts", "../../@assistant-ui/tap/src/core/withKey.ts", "../../@assistant-ui/tap/src/hooks/tap-state.ts", "../../@assistant-ui/tap/src/hooks/utils/depsShallowEqual.ts", "../../@assistant-ui/tap/src/hooks/utils/tapHook.ts", "../../@assistant-ui/tap/src/hooks/tap-effect.ts", "../../@assistant-ui/tap/src/hooks/tap-ref.ts", "../../@assistant-ui/tap/src/hooks/tap-const.ts", "../../@assistant-ui/tap/src/hooks/tap-memo.ts", "../../@assistant-ui/tap/src/hooks/tap-callback.ts", "../../@assistant-ui/tap/src/hooks/tap-effect-event.ts", "../../@assistant-ui/tap/src/hooks/tap-resource.ts", "../../@assistant-ui/tap/src/hooks/tap-inline-resource.ts", "../../@assistant-ui/tap/src/hooks/tap-resources.ts", "../../@assistant-ui/tap/src/core/scheduler.ts", "../../@assistant-ui/tap/src/tapSubscribableResource.ts", "../../@assistant-ui/tap/src/core/createResource.ts", "../../@assistant-ui/tap/src/core/context.ts", "../../@assistant-ui/store/src/utils/react-assistant-context.tsx", "../../@assistant-ui/store/src/utils/tap-client-stack-context.ts", "../../@assistant-ui/store/src/utils/BaseProxyHandler.ts", "../../@assistant-ui/store/src/wrapperResource.ts", "../../@assistant-ui/store/src/tapClientResource.ts", "../../@assistant-ui/store/src/utils/proxied-assistant-state.tsx", "../../@assistant-ui/store/src/Derived.ts", "../../@assistant-ui/store/src/attachDefaultPeers.ts", "../../@assistant-ui/store/src/utils/splitClients.ts", "../../@assistant-ui/store/src/types/events.ts", "../../@assistant-ui/store/src/utils/NotificationManager.ts", "../../@assistant-ui/store/src/utils/tap-assistant-context.ts", "../../@assistant-ui/store/src/useAui.tsx", "../../@assistant-ui/store/src/useAuiState.tsx", "../../@assistant-ui/store/src/useAuiEvent.ts", "../../use-effect-event/src/useEffectEvent.ts", "../../@assistant-ui/store/src/AuiIf.tsx", "../../@assistant-ui/store/src/tapClientLookup.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/useRemoteThreadListRuntime.tsx", "../../@assistant-ui/react/src/model-context/ModelContextTypes.ts", "../../@assistant-ui/react/src/utils/CompositeContextProvider.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/core/BaseAssistantRuntimeCore.tsx", "../../@assistant-ui/react/src/internal.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/BaseSubscribable.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/composer/BaseComposerRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/composer/DefaultThreadComposerRuntimeCore.tsx", "../../@assistant-ui/react/node_modules/nanoid/non-secure/index.js", "../../@assistant-ui/react/src/utils/idUtils.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/auto-status.tsx", "../../assistant-stream/src/utils/json/parse-partial-json-object.ts", "../../assistant-stream/src/utils/json/fix-json.ts", "../../assistant-stream/src/utils/AsyncIterableStream.ts", "../../assistant-stream/src/core/AssistantStream.ts", "../../assistant-stream/src/utils/promiseWithResolvers.ts", "../../assistant-stream/src/core/utils/stream/merge.ts", "../../assistant-stream/src/core/modules/text.ts", "../../assistant-stream/src/core/modules/tool-call.ts", "../../assistant-stream/src/core/utils/Counter.ts", "../../assistant-stream/src/core/utils/stream/path-utils.ts", "../../assistant-stream/src/core/utils/stream/PipeableTransformStream.ts", "../../assistant-stream/src/core/serialization/data-stream/chunk-types.ts", "../../assistant-stream/src/core/utils/stream/LineDecoderStream.ts", "../../assistant-stream/src/core/serialization/data-stream/serialization.ts", "../../assistant-stream/src/core/utils/stream/AssistantMetaTransformStream.ts", "../../assistant-stream/src/core/serialization/data-stream/DataStream.ts", "../../assistant-stream/node_modules/nanoid/non-secure/index.js", "../../assistant-stream/src/core/utils/generateId.tsx", "../../assistant-stream/src/core/modules/assistant-stream.ts", "../../assistant-stream/src/core/utils/stream/AssistantTransformStream.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ThreadMessageLike.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/utils/MessageRepository.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/BaseSubject.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/SKIP_UPDATE.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/LazyMemoizeSubject.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/ThreadListItemRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/shallowEqual.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/ShallowMemoizeSubject.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/getExternalStoreMessage.tsx", "../../@assistant-ui/react/src/utils/getThreadMessageText.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime/AttachmentRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/EventSubscriptionSubject.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/ComposerRuntime.ts", "../../assistant-stream/src/core/object/ObjectStreamAccumulator.ts", "../../assistant-stream/src/core/accumulators/assistant-message-accumulator.ts", "../../assistant-stream/src/core/serialization/PlainText.ts", "../../assistant-stream/src/core/serialization/assistant-transport/AssistantTransport.ts", "../../assistant-stream/src/core/serialization/ui-message-stream/UIMessageStream.ts", "../../assistant-stream/src/core/accumulators/AssistantMessageStream.ts", "../../assistant-stream/src/core/tool/ToolResponse.ts", "../../assistant-stream/src/core/tool/ToolExecutionStream.ts", "../../assistant-stream/src/core/utils/withPromiseOrValue.ts", "../../assistant-stream/src/core/tool/ToolCallReader.ts", "../../assistant-stream/src/core/tool/toolResultStream.ts", "../../assistant-stream/src/core/tool/schema-utils.ts", "../../assistant-stream/src/core/utils/stream/SSE.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/MessagePartRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/subscribable/NestedSubscriptionSubject.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/MessageRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/ThreadRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/ThreadListRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/attachment/SimpleImageAttachmentAdapter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/attachment/SimpleTextAttachmentAdapter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/attachment/CompositeAttachmentAdapter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/attachment/CloudFileAttachmentAdapter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/speech/WebSpeechSynthesisAdapter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/speech/WebSpeechDictationAdapter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/adapters/RuntimeAdapterProvider.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/useExternalStoreRuntime.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ExternalStoreThreadListRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ThreadMessageConverter.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/composer/DefaultEditComposerRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/core/BaseThreadRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ExternalStoreThreadRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/ExternalStoreRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/useAssistantTransportRuntime.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/commandQueue.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/runManager.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/useLatestRef.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/useConvertedState.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/useToolInvocations.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/assistant-transport/utils.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/adapter/in-memory.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/external-message-converter.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/external-store/createMessageConverter.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/local/useLocalRuntime.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/local/shouldContinue.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/local/LocalThreadRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/local/LocalThreadListRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/local/LocalRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/adapter/cloud.tsx", "../../assistant-cloud/src/AssistantCloudAuthStrategy.tsx", "../../assistant-cloud/src/AssistantCloudAPI.tsx", "../../assistant-cloud/src/AssistantCloudAuthTokens.tsx", "../../assistant-cloud/src/AssistantCloudRuns.tsx", "../../assistant-cloud/src/AssistantCloudThreadMessages.tsx", "../../assistant-cloud/src/AssistantCloudThreads.tsx", "../../assistant-cloud/src/AssistantCloudFiles.tsx", "../../assistant-cloud/src/AssistantCloud.tsx", "../../@assistant-ui/react/src/legacy-runtime/cloud/AssistantCloudThreadHistoryAdapter.tsx", "../../@assistant-ui/react/src/utils/json/is-json.ts", "../../@assistant-ui/react/src/legacy-runtime/cloud/auiV0.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime/AssistantRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/local/LocalRuntimeOptions.tsx", "../../@assistant-ui/react/src/utils/smooth/useSmooth.tsx", "../../@assistant-ui/react/src/utils/smooth/SmoothContext.tsx", "../../zustand/esm/vanilla.mjs", "../../zustand/esm/react.mjs", "../../@assistant-ui/react/src/context/react/utils/createContextStoreHook.ts", "../../@assistant-ui/react/src/context/ReadonlyStore.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/RemoteThreadListHookInstanceManager.tsx", "../../@assistant-ui/react/src/legacy-runtime/AssistantRuntimeProvider.tsx", "../../@assistant-ui/react/src/legacy-runtime/util-hooks/tapSubscribable.ts", "../../@assistant-ui/react/src/legacy-runtime/client/ThreadListItemRuntimeClient.ts", "../../@assistant-ui/react/src/legacy-runtime/client/AttachmentRuntimeClient.ts", "../../@assistant-ui/react/src/legacy-runtime/client/ComposerRuntimeClient.ts", "../../@assistant-ui/react/src/legacy-runtime/client/MessagePartRuntimeClient.ts", "../../@assistant-ui/react/src/legacy-runtime/client/MessageRuntimeClient.ts", "../../@assistant-ui/react/src/legacy-runtime/client/ThreadRuntimeClient.ts", "../../@assistant-ui/react/src/legacy-runtime/client/ThreadListRuntimeClient.ts", "../../@assistant-ui/react/src/client/ModelContextClient.ts", "../../@assistant-ui/react/src/model-context/useAssistantTool.tsx", "../../@assistant-ui/react/src/model-context/makeAssistantTool.tsx", "../../@assistant-ui/react/src/model-context/useAssistantToolUI.tsx", "../../@assistant-ui/react/src/model-context/makeAssistantToolUI.tsx", "../../@assistant-ui/react/src/model-context/useAssistantInstructions.tsx", "../../@assistant-ui/react/src/model-context/useInlineRender.tsx", "../../@assistant-ui/react/src/model-context/tool.ts", "../../@assistant-ui/react/src/model-context/makeAssistantVisible.tsx", "../../@assistant-ui/react/src/client/Tools.ts", "../../@assistant-ui/react/src/client/Suggestions.ts", "../../@assistant-ui/react/src/model-context/registry/ModelContextRegistry.ts", "../../@assistant-ui/react/src/model-context/frame/AssistantFrameTypes.ts", "../../@assistant-ui/react/src/model-context/frame/AssistantFrameHost.ts", "../../@assistant-ui/react/node_modules/zod/v4/classic/external.js", "../../@assistant-ui/react/node_modules/zod/v4/core/index.js", "../../@assistant-ui/react/node_modules/zod/v4/core/core.js", "../../@assistant-ui/react/node_modules/zod/v4/core/util.js", "../../@assistant-ui/react/node_modules/zod/v4/core/errors.js", "../../@assistant-ui/react/node_modules/zod/v4/core/parse.js", "../../@assistant-ui/react/node_modules/zod/v4/core/regexes.js", "../../@assistant-ui/react/node_modules/zod/v4/core/checks.js", "../../@assistant-ui/react/node_modules/zod/v4/core/doc.js", "../../@assistant-ui/react/node_modules/zod/v4/core/versions.js", "../../@assistant-ui/react/node_modules/zod/v4/core/schemas.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/index.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ar.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/az.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/be.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/bg.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ca.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/cs.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/da.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/de.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/en.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/eo.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/es.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/fa.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/fi.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/fr.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/fr-CA.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/he.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/hu.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/hy.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/id.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/is.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/it.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ja.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ka.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/km.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/kh.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ko.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/lt.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/mk.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ms.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/nl.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/no.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ota.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ps.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/pl.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/pt.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ru.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/sl.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/sv.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ta.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/th.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/tr.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/uk.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ua.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/ur.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/uz.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/vi.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/zh-CN.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/zh-TW.js", "../../@assistant-ui/react/node_modules/zod/v4/locales/yo.js", "../../@assistant-ui/react/node_modules/zod/v4/core/registries.js", "../../@assistant-ui/react/node_modules/zod/v4/core/api.js", "../../@assistant-ui/react/node_modules/zod/v4/core/to-json-schema.js", "../../@assistant-ui/react/node_modules/zod/v4/core/json-schema-processors.js", "../../@assistant-ui/react/node_modules/zod/v4/core/json-schema-generator.js", "../../@assistant-ui/react/node_modules/zod/v4/core/json-schema.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/schemas.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/checks.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/iso.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/errors.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/parse.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/compat.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/from-json-schema.js", "../../@assistant-ui/react/node_modules/zod/v4/classic/coerce.js", "../../@assistant-ui/react/src/model-context/frame/AssistantFrameProvider.ts", "../../@assistant-ui/react/src/model-context/frame/useAssistantFrameHost.ts", "../../@assistant-ui/react/src/legacy-runtime/RuntimeAdapter.ts", "../../@assistant-ui/react/src/context/providers/ThreadViewportProvider.tsx", "../../@assistant-ui/react/src/context/stores/ThreadViewport.tsx", "../../@assistant-ui/react/src/context/react/ThreadViewportContext.ts", "../../@assistant-ui/react/src/context/react/utils/createContextHook.ts", "../../@assistant-ui/react/src/devtools/DevToolsHooks.ts", "../../@assistant-ui/react/src/context/providers/ThreadListItemProvider.tsx", "../../@assistant-ui/react/src/context/providers/MessageByIndexProvider.tsx", "../../@assistant-ui/react/src/context/providers/SuggestionByIndexProvider.tsx", "../../@assistant-ui/react/src/context/providers/PartByIndexProvider.tsx", "../../@assistant-ui/react/src/context/providers/AttachmentByIndexProvider.tsx", "../../@assistant-ui/react/src/context/providers/TextMessagePartProvider.tsx", "../../@assistant-ui/react/src/client/NoOpComposerClient.tsx", "../../@assistant-ui/react/src/client/ThreadMessageClient.tsx", "../../@assistant-ui/react/src/context/providers/MessageProvider.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/EMPTY_THREAD_CORE.tsx", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/OptimisticState.ts", "../../@assistant-ui/react/src/legacy-runtime/runtime-cores/remote-thread-list/RemoteThreadListThreadListRuntimeCore.tsx", "../../@assistant-ui/react/src/legacy-runtime/cloud/useCloudThreadListRuntime.tsx", "../../@assistant-ui/react/src/context/react/utils/useRuntimeState.ts", "../../@assistant-ui/react/src/context/react/utils/ensureBinding.ts", "../../@assistant-ui/react/src/context/react/utils/createStateHookForRuntime.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/AssistantContext.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/AttachmentContext.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/ComposerContext.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/MessageContext.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/MessagePartContext.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/ThreadContext.ts", "../../@assistant-ui/react/src/legacy-runtime/hooks/ThreadListItemContext.ts", "../../@assistant-ui/react/src/primitives/actionBar/index.ts", "../../@assistant-ui/react/node_modules/@radix-ui/react-primitive/src/primitive.tsx", "../../@assistant-ui/react/node_modules/@radix-ui/react-slot/src/slot.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarRoot.tsx", "../../@assistant-ui/react/src/primitives/actionBar/useActionBarFloatStatus.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarCopy.tsx", "../../@assistant-ui/react/src/utils/createActionButton.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarReload.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarEdit.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarSpeak.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarStopSpeaking.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarFeedbackPositive.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarFeedbackNegative.tsx", "../../@assistant-ui/react/src/primitives/actionBar/ActionBarExportMarkdown.tsx", "../../@assistant-ui/react/src/primitives/actionBarMore/index.ts", "../../@assistant-ui/react/src/primitives/actionBarMore/scope.tsx", "../../@assistant-ui/react/src/primitives/actionBarMore/ActionBarMoreRoot.tsx", "../../@assistant-ui/react/src/primitives/actionBarMore/ActionBarMoreTrigger.tsx", "../../@assistant-ui/react/src/primitives/actionBarMore/ActionBarMoreContent.tsx", "../../@assistant-ui/react/src/primitives/actionBarMore/ActionBarMoreItem.tsx", "../../@assistant-ui/react/src/primitives/actionBarMore/ActionBarMoreSeparator.tsx", "../../@assistant-ui/react/src/primitives/assistantModal/index.ts", "../../@assistant-ui/react/src/primitives/assistantModal/AssistantModalRoot.tsx", "../../@assistant-ui/react/src/primitives/assistantModal/scope.tsx", "../../@assistant-ui/react/src/primitives/assistantModal/AssistantModalTrigger.tsx", "../../@assistant-ui/react/src/primitives/assistantModal/AssistantModalContent.tsx", "../../@assistant-ui/react/src/primitives/assistantModal/AssistantModalAnchor.tsx", "../../@assistant-ui/react/src/primitives/attachment/index.ts", "../../@assistant-ui/react/src/primitives/attachment/AttachmentRoot.tsx", "../../@assistant-ui/react/src/primitives/attachment/AttachmentThumb.tsx", "../../@assistant-ui/react/src/primitives/attachment/AttachmentName.tsx", "../../@assistant-ui/react/src/primitives/attachment/AttachmentRemove.tsx", "../../@assistant-ui/react/src/primitives/branchPicker/index.ts", "../../@assistant-ui/react/src/primitives/branchPicker/BranchPickerNext.tsx", "../../@assistant-ui/react/src/primitives/branchPicker/BranchPickerPrevious.tsx", "../../@assistant-ui/react/src/primitives/branchPicker/BranchPickerCount.tsx", "../../@assistant-ui/react/src/primitives/branchPicker/BranchPickerNumber.tsx", "../../@assistant-ui/react/src/primitives/branchPicker/BranchPickerRoot.tsx", "../../@assistant-ui/react/src/primitives/message/index.ts", "../../@assistant-ui/react/src/primitives/message/MessageRoot.tsx", "../../@assistant-ui/react/src/utils/hooks/useManagedRef.ts", "../../@assistant-ui/react/src/utils/hooks/useSizeHandle.ts", "../../@assistant-ui/react/src/primitives/thread/ThreadViewportSlack.tsx", "../../@assistant-ui/react/src/primitives/message/MessageParts.tsx", "../../@assistant-ui/react/src/client/ChainOfThoughtClient.ts", "../../@assistant-ui/react/src/context/providers/ChainOfThoughtByIndicesProvider.tsx", "../../@assistant-ui/react/src/primitives/messagePart/MessagePartText.tsx", "../../@assistant-ui/react/src/primitives/messagePart/useMessagePartText.tsx", "../../@assistant-ui/react/src/primitives/messagePart/MessagePartImage.tsx", "../../@assistant-ui/react/src/primitives/messagePart/useMessagePartImage.tsx", "../../@assistant-ui/react/src/primitives/messagePart/MessagePartInProgress.tsx", "../../@assistant-ui/react/src/primitives/message/MessageIf.tsx", "../../@assistant-ui/react/src/primitives/message/MessageAttachments.tsx", "../../@assistant-ui/react/src/primitives/message/MessageError.tsx", "../../@assistant-ui/react/src/primitives/message/MessagePartsGrouped.tsx", "../../@assistant-ui/react/src/primitives/chainOfThought/index.ts", "../../@assistant-ui/react/src/primitives/chainOfThought/ChainOfThoughtRoot.tsx", "../../@assistant-ui/react/src/primitives/chainOfThought/ChainOfThoughtAccordionTrigger.tsx", "../../@assistant-ui/react/src/primitives/chainOfThought/ChainOfThoughtParts.tsx", "../../@assistant-ui/react/src/context/providers/ChainOfThoughtPartByIndexProvider.tsx", "../../@assistant-ui/react/src/primitives/composer/index.ts", "../../@assistant-ui/react/src/primitives/composer/ComposerRoot.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerSend.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerInput.tsx", "../../@babel/runtime/helpers/esm/extends.js", "../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js", "../../react-textarea-autosize/dist/react-textarea-autosize.browser.development.esm.js", "../../use-latest/dist/use-latest.esm.js", "../../use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js", "../../use-composed-ref/dist/use-composed-ref.esm.js", "../../@assistant-ui/react/src/utils/hooks/useOnScrollToBottom.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerCancel.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerAddAttachment.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerAttachments.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerAttachmentDropzone.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerDictate.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerStopDictation.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerDictationTranscript.tsx", "../../@assistant-ui/react/src/primitives/composer/ComposerIf.tsx", "../../@assistant-ui/react/src/primitives/messagePart/index.ts", "../../@assistant-ui/react/src/primitives/error/index.ts", "../../@assistant-ui/react/src/primitives/error/ErrorRoot.tsx", "../../@assistant-ui/react/src/primitives/error/ErrorMessage.tsx", "../../@assistant-ui/react/src/primitives/thread/index.ts", "../../@assistant-ui/react/src/primitives/thread/ThreadRoot.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadEmpty.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadIf.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadViewport.tsx", "../../@assistant-ui/react/src/primitives/thread/useThreadViewportAutoScroll.tsx", "../../@assistant-ui/react/src/utils/hooks/useOnResizeContent.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadViewportFooter.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadMessages.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadScrollToBottom.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadSuggestion.tsx", "../../@assistant-ui/react/src/primitives/thread/ThreadSuggestions.tsx", "../../@assistant-ui/react/src/primitives/suggestion/index.ts", "../../@assistant-ui/react/src/primitives/suggestion/SuggestionTitle.tsx", "../../@assistant-ui/react/src/primitives/suggestion/SuggestionDescription.tsx", "../../@assistant-ui/react/src/primitives/suggestion/SuggestionTrigger.tsx", "../../@assistant-ui/react/src/primitives/threadList/index.ts", "../../@assistant-ui/react/src/primitives/threadList/ThreadListNew.tsx", "../../@assistant-ui/react/src/primitives/threadList/ThreadListItems.tsx", "../../@assistant-ui/react/src/primitives/threadList/ThreadListRoot.tsx", "../../@assistant-ui/react/src/primitives/threadListItem/index.ts", "../../@assistant-ui/react/src/primitives/threadListItem/ThreadListItemRoot.tsx", "../../@assistant-ui/react/src/primitives/threadListItem/ThreadListItemArchive.ts", "../../@assistant-ui/react/src/primitives/threadListItem/ThreadListItemUnarchive.ts", "../../@assistant-ui/react/src/primitives/threadListItem/ThreadListItemDelete.ts", "../../@assistant-ui/react/src/primitives/threadListItem/ThreadListItemTrigger.ts", "../../@assistant-ui/react/src/primitives/threadListItem/ThreadListItemTitle.tsx", "../../@assistant-ui/react/src/primitives/threadListItemMore/index.ts", "../../@assistant-ui/react/src/primitives/threadListItemMore/scope.tsx", "../../@assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreRoot.tsx", "../../@assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreTrigger.tsx", "../../@assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreContent.tsx", "../../@assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreItem.tsx", "../../@assistant-ui/react/src/primitives/threadListItemMore/ThreadListItemMoreSeparator.tsx", "../../@assistant-ui/react/src/primitives/messagePart/useMessagePartReasoning.tsx", "../../@assistant-ui/react/src/primitives/messagePart/useMessagePartSource.tsx", "../../@assistant-ui/react/src/primitives/messagePart/useMessagePartFile.tsx", "../../@assistant-ui/react/src/primitives/messagePart/useMessagePartData.tsx", "../../@assistant-ui/react/src/primitives/reasoning/useScrollLock.tsx", "../../@assistant-ui/react/src/client/ExternalThread.ts", "../../@assistant-ui/react/src/client/InMemoryThreadList.ts"],
  "sourcesContent": ["'use strict'\n\nconst hasBuffer = typeof Buffer !== 'undefined'\nconst suspectProtoRx = /\"(?:_|\\\\u005[Ff])(?:_|\\\\u005[Ff])(?:p|\\\\u0070)(?:r|\\\\u0072)(?:o|\\\\u006[Ff])(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:_|\\\\u005[Ff])(?:_|\\\\u005[Ff])\"\\s*:/\nconst suspectConstructorRx = /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/\n\n/**\n * @description Internal parse function that parses JSON text with security checks.\n * @private\n * @param {string|Buffer} text - The JSON text string or Buffer to parse.\n * @param {Function} [reviver] - The JSON.parse() optional reviver argument.\n * @param {import('./types').ParseOptions} [options] - Optional configuration object.\n * @returns {*} The parsed object.\n * @throws {SyntaxError} If a forbidden prototype property is found and `options.protoAction` or\n * `options.constructorAction` is `'error'`.\n */\nfunction _parse (text, reviver, options) {\n  // Normalize arguments\n  if (options == null) {\n    if (reviver !== null && typeof reviver === 'object') {\n      options = reviver\n      reviver = undefined\n    }\n  }\n\n  if (hasBuffer && Buffer.isBuffer(text)) {\n    text = text.toString()\n  }\n\n  // BOM checker\n  if (text && text.charCodeAt(0) === 0xFEFF) {\n    text = text.slice(1)\n  }\n\n  // Parse normally, allowing exceptions\n  const obj = JSON.parse(text, reviver)\n\n  // Ignore null and non-objects\n  if (obj === null || typeof obj !== 'object') {\n    return obj\n  }\n\n  const protoAction = (options && options.protoAction) || 'error'\n  const constructorAction = (options && options.constructorAction) || 'error'\n\n  // options: 'error' (default) / 'remove' / 'ignore'\n  if (protoAction === 'ignore' && constructorAction === 'ignore') {\n    return obj\n  }\n\n  if (protoAction !== 'ignore' && constructorAction !== 'ignore') {\n    if (suspectProtoRx.test(text) === false && suspectConstructorRx.test(text) === false) {\n      return obj\n    }\n  } else if (protoAction !== 'ignore' && constructorAction === 'ignore') {\n    if (suspectProtoRx.test(text) === false) {\n      return obj\n    }\n  } else {\n    if (suspectConstructorRx.test(text) === false) {\n      return obj\n    }\n  }\n\n  // Scan result for proto keys\n  return filter(obj, { protoAction, constructorAction, safe: options && options.safe })\n}\n\n/**\n * @description Scans and filters an object for forbidden prototype properties.\n * @param {Object} obj - The object being scanned.\n * @param {import('./types').ParseOptions} [options] - Optional configuration object.\n * @returns {Object|null} The filtered object, or `null` if safe mode is enabled and issues are found.\n * @throws {SyntaxError} If a forbidden prototype property is found and `options.protoAction` or\n * `options.constructorAction` is `'error'`.\n */\nfunction filter (obj, { protoAction = 'error', constructorAction = 'error', safe } = {}) {\n  let next = [obj]\n\n  while (next.length) {\n    const nodes = next\n    next = []\n\n    for (const node of nodes) {\n      if (protoAction !== 'ignore' && Object.prototype.hasOwnProperty.call(node, '__proto__')) { // Avoid calling node.hasOwnProperty directly\n        if (safe === true) {\n          return null\n        } else if (protoAction === 'error') {\n          throw new SyntaxError('Object contains forbidden prototype property')\n        }\n\n        delete node.__proto__ // eslint-disable-line no-proto\n      }\n\n      if (constructorAction !== 'ignore' &&\n          Object.prototype.hasOwnProperty.call(node, 'constructor') &&\n          node.constructor !== null &&\n          typeof node.constructor === 'object' &&\n          Object.prototype.hasOwnProperty.call(node.constructor, 'prototype')) { // Avoid calling node.hasOwnProperty directly\n        if (safe === true) {\n          return null\n        } else if (constructorAction === 'error') {\n          throw new SyntaxError('Object contains forbidden prototype property')\n        }\n\n        delete node.constructor\n      }\n\n      for (const key in node) {\n        const value = node[key]\n        if (value && typeof value === 'object') {\n          next.push(value)\n        }\n      }\n    }\n  }\n  return obj\n}\n\n/**\n * @description Parses a given JSON-formatted text into an object.\n * @param {string|Buffer} text - The JSON text string or Buffer to parse.\n * @param {Function} [reviver] - The `JSON.parse()` optional reviver argument, or options object.\n * @param {import('./types').ParseOptions} [options] - Optional configuration object.\n * @returns {*} The parsed object.\n * @throws {SyntaxError} If the JSON text is malformed or contains forbidden prototype properties\n * when `options.protoAction` or `options.constructorAction` is `'error'`.\n */\nfunction parse (text, reviver, options) {\n  const { stackTraceLimit } = Error\n  Error.stackTraceLimit = 0\n  try {\n    return _parse(text, reviver, options)\n  } finally {\n    Error.stackTraceLimit = stackTraceLimit\n  }\n}\n\n/**\n * @description Safely parses a given JSON-formatted text into an object.\n * @param {string|Buffer} text - The JSON text string or Buffer to parse.\n * @param {Function} [reviver] - The `JSON.parse()` optional reviver argument.\n * @returns {*|null|undefined} The parsed object, `null` if security issues found, or `undefined` on parse error.\n */\nfunction safeParse (text, reviver) {\n  const { stackTraceLimit } = Error\n  Error.stackTraceLimit = 0\n  try {\n    return _parse(text, reviver, { safe: true })\n  } catch {\n    return undefined\n  } finally {\n    Error.stackTraceLimit = stackTraceLimit\n  }\n}\n\nmodule.exports = parse\nmodule.exports.default = parse\nmodule.exports.parse = parse\nmodule.exports.safeParse = safeParse\nmodule.exports.scan = filter\n", "import { useLayoutEffect, useMemo, useReducer, useRef, useState } from \"react\";\nimport type { ExtractResourceReturnType, ResourceElement } from \"../core/types\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"../core/ResourceFiber\";\nimport { isDevelopment } from \"../core/env\";\n\nconst useDevStrictMode = () => {\n  if (!isDevelopment) return null;\n\n  const count = useRef(0);\n  const isFirstRender = count.current === 0;\n  useState(() => count.current++);\n  if (count.current !== 2) return null;\n  return isFirstRender ? (\"child\" as const) : (\"root\" as const);\n};\n\nconst resourceReducer = (version: number, callback: () => boolean) => {\n  return version + (callback() ? 1 : 0);\n};\n\nexport function useResource<E extends ResourceElement<any, any>>(\n  element: E,\n): ExtractResourceReturnType<E> {\n  const [, dispatch] = useReducer(resourceReducer, 0);\n\n  const devStrictMode = useDevStrictMode();\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: user provided deps instead of prop identity\n  const fiber = useMemo(() => {\n    return createResourceFiber(element.type, dispatch, devStrictMode);\n  }, [element.type, element.key]);\n\n  const result = renderResourceFiber(fiber, element.props);\n  useLayoutEffect(() => {\n    return () => unmountResourceFiber(fiber);\n  }, [fiber]);\n  useLayoutEffect(() => {\n    commitResourceFiber(fiber, result);\n  });\n\n  return result.output;\n}\n", "import { ResourceFiber, RenderResult } from \"./types\";\n\nexport function commitRender(renderResult: RenderResult): void {\n  const errors: unknown[] = [];\n\n  for (const task of renderResult.commitTasks) {\n    try {\n      task();\n    } catch (error) {\n      errors.push(error);\n    }\n  }\n\n  if (errors.length > 0) {\n    if (errors.length === 1) {\n      throw errors[0];\n    } else {\n      for (const error of errors) {\n        console.error(error);\n      }\n      throw new AggregateError(errors, \"Errors during commit\");\n    }\n  }\n}\n\nexport function cleanupAllEffects<R, P>(executionContext: ResourceFiber<R, P>) {\n  const errors: unknown[] = [];\n  for (const cell of executionContext.cells) {\n    if (cell?.type === \"effect\") {\n      cell.deps = null; // Reset deps so effect runs again on next mount\n\n      if (cell.cleanup) {\n        try {\n          cell.cleanup?.();\n        } catch (e) {\n          errors.push(e);\n        } finally {\n          cell.cleanup = undefined;\n        }\n      }\n    }\n  }\n  if (errors.length > 0) {\n    if (errors.length === 1) {\n      throw errors[0];\n    } else {\n      for (const error of errors) {\n        console.error(error);\n      }\n      throw new AggregateError(errors, \"Errors during cleanup\");\n    }\n  }\n}\n", "export const isDevelopment =\n  typeof process !== \"undefined\" &&\n  (process.env[\"NODE_ENV\"] === \"development\" ||\n    process.env[\"NODE_ENV\"] === \"test\");\n", "import { isDevelopment } from \"./env\";\nimport { ResourceFiber } from \"./types\";\n\nlet currentResourceFiber: ResourceFiber<any, any> | null = null;\n\nexport function withResourceFiber<R, P>(\n  fiber: ResourceFiber<R, P>,\n  fn: () => void,\n): void {\n  fiber.currentIndex = 0;\n\n  const previousContext = currentResourceFiber;\n  currentResourceFiber = fiber;\n  try {\n    fn();\n\n    fiber.isFirstRender = false;\n\n    // ensure hook count matches\n    if (fiber.cells.length !== fiber.currentIndex) {\n      throw new Error(\n        `Rendered ${fiber.currentIndex} hooks but expected ${fiber.cells.length}. ` +\n          \"Hooks must be called in the exact same order in every render.\",\n      );\n    }\n  } finally {\n    currentResourceFiber = previousContext;\n  }\n}\nexport function getCurrentResourceFiber(): ResourceFiber<unknown, unknown> {\n  if (!currentResourceFiber) {\n    throw new Error(\"No resource fiber available\");\n  }\n  return currentResourceFiber;\n}\n\nexport function getDevStrictMode(enable: boolean) {\n  if (!isDevelopment) return null;\n  if (currentResourceFiber?.devStrictMode)\n    return currentResourceFiber.isFirstRender ? \"child\" : \"root\";\n\n  return enable ? \"root\" : null;\n}\n", "import { Resource } from \"./types\";\n\n/**\n * Renders a resource with the given props.\n * @internal This is for internal use only.\n */\nexport function callResourceFn<R, P>(resource: Resource<R, P>, props: P): R {\n  const fn = (resource as unknown as { [fnSymbol]?: (props: P) => R })[\n    fnSymbol\n  ];\n  if (!fn) {\n    throw new Error(\"ResourceElement.type is not a valid Resource\");\n  }\n  return fn(props);\n}\n\n/**\n * Symbol used to store the ResourceFn in the Resource constructor.\n * @internal This is for internal use only.\n */\nexport const fnSymbol = Symbol(\"fnSymbol\");\n", "import { ResourceFiber, RenderResult, Resource } from \"./types\";\nimport { commitRender, cleanupAllEffects } from \"./commit\";\nimport { getDevStrictMode, withResourceFiber } from \"./execution-context\";\nimport { callResourceFn } from \"./callResourceFn\";\nimport { isDevelopment } from \"./env\";\n\nexport function createResourceFiber<R, P>(\n  type: Resource<R, P>,\n  dispatchUpdate: (callback: () => boolean) => void,\n  strictMode: \"root\" | \"child\" | null = getDevStrictMode(false),\n): ResourceFiber<R, P> {\n  return {\n    type,\n    dispatchUpdate,\n    devStrictMode: strictMode,\n    cells: [],\n    currentIndex: 0,\n    renderContext: undefined,\n    isFirstRender: true,\n    isMounted: false,\n    isNeverMounted: true,\n  };\n}\n\nexport function unmountResourceFiber<R, P>(fiber: ResourceFiber<R, P>): void {\n  if (!fiber.isMounted)\n    throw new Error(\"Tried to unmount a fiber that is already unmounted\");\n\n  fiber.isMounted = false;\n  cleanupAllEffects(fiber);\n}\n\nexport function renderResourceFiber<R, P>(\n  fiber: ResourceFiber<R, P>,\n  props: P,\n): RenderResult {\n  const result = {\n    commitTasks: [],\n    props,\n    output: undefined as R | undefined,\n  };\n\n  withResourceFiber(fiber, () => {\n    fiber.renderContext = result;\n    try {\n      result.output = callResourceFn(fiber.type, props);\n    } finally {\n      fiber.renderContext = undefined;\n    }\n  });\n\n  return result;\n}\n\nexport function commitResourceFiber<R, P>(\n  fiber: ResourceFiber<R, P>,\n  result: RenderResult,\n): void {\n  fiber.isMounted = true;\n\n  if (isDevelopment && fiber.isNeverMounted && fiber.devStrictMode === \"root\") {\n    commitRender(result);\n    cleanupAllEffects(fiber);\n  }\n\n  fiber.isNeverMounted = false;\n  commitRender(result);\n}\n", "import { ResourceElement } from \"./types\";\nimport { fnSymbol } from \"./callResourceFn\";\n\nexport function resource<R>(fn: () => R): () => ResourceElement<R, undefined>;\nexport function resource<R, P>(\n  fn: (props: P) => R,\n): (props: P) => ResourceElement<R, P>;\nexport function resource<R, P>(\n  fn: (props?: P) => R,\n): (props?: P) => ResourceElement<R, P | undefined>;\nexport function resource<R, P = undefined>(fn: (props: P) => R) {\n  const type = (props?: P) => {\n    return {\n      type,\n      props: props!,\n    } satisfies ResourceElement<R, P>;\n  };\n\n  type[fnSymbol] = fn;\n\n  return type;\n}\n", "import { ResourceElement } from \"./types\";\n\nexport function withKey<E extends ResourceElement<any, any>>(\n  key: string | number,\n  element: E,\n): E {\n  return { ...element, key };\n}\n", "import { isDevelopment } from \"../core/env\";\nimport { getCurrentResourceFiber } from \"../core/execution-context\";\nimport { Cell, ResourceFiber } from \"../core/types\";\n\nexport namespace tapState {\n  export type StateUpdater<S> = S | ((prev: S) => S);\n}\n\nconst dispatchOnFiber = (\n  fiber: ResourceFiber<any, any>,\n  callback: () => boolean,\n) => {\n  if (fiber.renderContext) {\n    throw new Error(\"Resource updated during render\");\n  }\n\n  if (fiber.isMounted) {\n    // Only schedule rerender if currently mounted\n    fiber.dispatchUpdate(callback);\n  } else if (fiber.isNeverMounted) {\n    throw new Error(\"Resource updated before mount\");\n  }\n\n  // TODO mark dirty\n};\n\nfunction getStateCell<T>(\n  initialValue: T | (() => T),\n): Cell & { type: \"state\" } {\n  const fiber = getCurrentResourceFiber();\n  const index = fiber.currentIndex++;\n\n  // Check if we're trying to use more hooks than in previous renders\n  if (!fiber.isFirstRender && index >= fiber.cells.length) {\n    throw new Error(\n      \"Rendered more hooks than during the previous render. \" +\n        \"Hooks must be called in the exact same order in every render.\",\n    );\n  }\n\n  const cell = fiber.cells[index];\n  if (cell) {\n    if (cell.type !== \"state\")\n      throw new Error(\"Hook order changed between renders\");\n\n    return cell as Cell & { type: \"state\" };\n  }\n\n  const value =\n    typeof initialValue === \"function\"\n      ? (initialValue as () => T)()\n      : initialValue;\n\n  if (\n    isDevelopment &&\n    fiber.devStrictMode &&\n    typeof initialValue === \"function\"\n  ) {\n    void (initialValue as () => T)();\n  }\n\n  const newCell: Cell & { type: \"state\" } = {\n    type: \"state\",\n    value,\n    set: (updater: tapState.StateUpdater<T>) => {\n      dispatchOnFiber(fiber, () => {\n        const currentValue = newCell.value;\n        const nextValue =\n          typeof updater === \"function\"\n            ? (updater as (prev: T) => T)(currentValue)\n            : updater;\n\n        if (\n          isDevelopment &&\n          fiber.devStrictMode &&\n          typeof updater === \"function\"\n        ) {\n          void (updater as (prev: T) => T)(currentValue);\n        }\n\n        if (Object.is(currentValue, nextValue)) return false;\n\n        newCell.value = nextValue;\n        return true;\n      });\n    },\n  };\n\n  fiber.cells[index] = newCell;\n  return newCell;\n}\n\nexport function tapState<S = undefined>(): [\n  S | undefined,\n  (updater: tapState.StateUpdater<S>) => void,\n];\nexport function tapState<S>(\n  initial: S | (() => S),\n): [S, (updater: tapState.StateUpdater<S>) => void];\nexport function tapState<S>(\n  initial?: S | (() => S),\n): [S | undefined, (updater: tapState.StateUpdater<S>) => void] {\n  const cell = getStateCell(initial as S | (() => S));\n\n  return [cell.value, cell.set];\n}\n", "export const depsShallowEqual = (\n  a: readonly unknown[],\n  b: readonly unknown[],\n) => {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (!Object.is(a[i], b[i])) return false;\n  }\n  return true;\n};\n", "import { getCurrentResourceFiber } from \"../../core/execution-context\";\nimport { Cell } from \"../../core/types\";\n\nexport const tapHook = <T extends \"effect\" | \"memo\">(\n  type: T,\n  init: () => Cell,\n): Cell & { type: T } => {\n  const fiber = getCurrentResourceFiber();\n  const index = fiber.currentIndex++;\n\n  if (!fiber.isFirstRender && index >= fiber.cells.length) {\n    // Check if we're trying to use more hooks than in previous renders\n    throw new Error(\n      \"Rendered more hooks than during the previous render. \" +\n        \"Hooks must be called in the exact same order in every render.\",\n    );\n  }\n\n  let cell = fiber.cells[index];\n  if (!cell) {\n    cell = init();\n    fiber.cells[index] = cell;\n  }\n\n  if (cell.type !== type) {\n    throw new Error(\"Hook order changed between renders\");\n  }\n\n  return cell as Cell & { type: T };\n};\n\nexport const registerRenderMountTask = (task: () => void) => {\n  const fiber = getCurrentResourceFiber();\n  fiber.renderContext!.commitTasks.push(task);\n};\n", "import { Cell } from \"../core/types\";\nimport { depsShallowEqual } from \"./utils/depsShallowEqual\";\nimport { tapHook, registerRenderMountTask } from \"./utils/tapHook\";\n\nconst newEffect = (): Cell & { type: \"effect\" } => ({\n  type: \"effect\",\n  cleanup: undefined,\n  deps: null, // null means the effect has never been run\n});\n\nexport namespace tapEffect {\n  export type Destructor = () => void;\n  export type EffectCallback = () => void | Destructor;\n}\n\nexport function tapEffect(effect: tapEffect.EffectCallback): void;\nexport function tapEffect(\n  effect: tapEffect.EffectCallback,\n  deps: readonly unknown[],\n): void;\nexport function tapEffect(\n  effect: tapEffect.EffectCallback,\n  deps?: readonly unknown[],\n): void {\n  const cell = tapHook(\"effect\", newEffect);\n\n  if (deps && cell.deps && depsShallowEqual(cell.deps, deps)) return;\n  if (cell.deps !== null && !!deps !== !!cell.deps)\n    throw new Error(\n      \"tapEffect called with and without dependencies across re-renders\",\n    );\n\n  registerRenderMountTask(() => {\n    const errors: unknown[] = [];\n\n    try {\n      cell.cleanup?.();\n    } catch (error) {\n      errors.push(error);\n    } finally {\n      cell.cleanup = undefined;\n    }\n\n    try {\n      const cleanup = effect();\n\n      if (cleanup !== undefined && typeof cleanup !== \"function\") {\n        throw new Error(\n          \"An effect function must either return a cleanup function or nothing. \" +\n            `Received: ${typeof cleanup}`,\n        );\n      }\n\n      cell.cleanup = cleanup;\n    } catch (error) {\n      errors.push(error);\n    }\n\n    cell.deps = deps;\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        for (const error of errors) {\n          console.error(error);\n        }\n        throw new AggregateError(errors, \"Errors during commit\");\n      }\n    }\n  });\n}\n", "import { tapState } from \"./tap-state\";\n\nexport namespace tapRef {\n  export interface RefObject<T> {\n    current: T;\n  }\n}\n\nexport function tapRef<T>(initialValue: T): tapRef.RefObject<T>;\nexport function tapRef<T = undefined>(): tapRef.RefObject<T | undefined>;\nexport function tapRef<T>(initialValue?: T): tapRef.RefObject<T | undefined> {\n  const [state] = tapState(() => ({\n    current: initialValue,\n  }));\n  return state;\n}\n", "import { tapState } from \"./tap-state\";\n\nexport function tapConst<T>(getValue: () => T, _deps: readonly never[]): T {\n  const [state] = tapState(getValue);\n  return state;\n}\n", "import { isDevelopment } from \"../core/env\";\nimport { getCurrentResourceFiber } from \"../core/execution-context\";\nimport { tapRef } from \"./tap-ref\";\nimport { depsShallowEqual } from \"./utils/depsShallowEqual\";\n\nexport const tapMemo = <T>(fn: () => T, deps: readonly unknown[]) => {\n  const dataRef = tapRef<{ value: T; deps: readonly unknown[] }>();\n  if (!dataRef.current) {\n    if (isDevelopment) {\n      const fiber = getCurrentResourceFiber();\n      if (fiber.devStrictMode) {\n        void fn();\n      }\n    }\n\n    dataRef.current = { value: fn(), deps };\n  }\n\n  if (!depsShallowEqual(dataRef.current.deps, deps)) {\n    dataRef.current.value = fn();\n    dataRef.current.deps = deps;\n  }\n\n  return dataRef.current.value;\n};\n", "import { tapMemo } from \"./tap-memo\";\n\nexport const tapCallback = <T extends (...args: any[]) => any>(\n  fn: T,\n  deps: readonly unknown[],\n): T => {\n  // biome-ignore lint/correctness/useExhaustiveDependencies: user provided deps instead of callback identity\n  return tapMemo(() => fn, deps);\n};\n", "import { tapRef } from \"./tap-ref\";\nimport { tapEffect } from \"./tap-effect\";\nimport { isDevelopment } from \"../core/env\";\nimport { tapCallback } from \"./tap-callback\";\nimport { getCurrentResourceFiber } from \"../core/execution-context\";\n\n/**\n * Creates a stable function reference that always calls the most recent version of the callback.\n * Similar to React's useEffectEvent hook.\n *\n * @param callback - The callback function to wrap\n * @returns A stable function reference that always calls the latest callback\n *\n * @example\n * ```typescript\n * const handleClick = tapEffectEvent((value: string) => {\n *   console.log(value);\n * });\n * // handleClick reference is stable, but always calls the latest version\n * ```\n */\nexport function tapEffectEvent<T extends (...args: any[]) => any>(\n  callback: T,\n): T {\n  const callbackRef = tapRef(callback);\n\n  tapEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  if (isDevelopment) {\n    const fiber = getCurrentResourceFiber();\n    return tapCallback(\n      ((...args: Parameters<T>) => {\n        if (fiber.renderContext)\n          throw new Error(\"tapEffectEvent cannot be called during render\");\n        return callbackRef.current(...args);\n      }) as T,\n      [fiber],\n    );\n  }\n\n  return callbackRef.current;\n}\n", "import { ExtractResourceReturnType, ResourceElement } from \"../core/types\";\nimport { tapEffect } from \"./tap-effect\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"../core/ResourceFiber\";\nimport { tapMemo } from \"./tap-memo\";\nimport { tapState } from \"./tap-state\";\nimport { tapConst } from \"./tap-const\";\n\nexport function tapResource<E extends ResourceElement<any, any>>(\n  element: E,\n): ExtractResourceReturnType<E>;\nexport function tapResource<E extends ResourceElement<any, any>>(\n  element: E,\n  propsDeps: readonly unknown[],\n): ExtractResourceReturnType<E>;\nexport function tapResource<E extends ResourceElement<any, any>>(\n  element: E,\n  propsDeps?: readonly unknown[],\n): ExtractResourceReturnType<E> {\n  const [version, setVersion] = tapState(0);\n  const rerender = tapConst(() => () => setVersion((v) => v + 1), []);\n\n  const fiber = tapMemo(() => {\n    void element.key;\n    return createResourceFiber(element.type, (callback) => {\n      if (callback()) rerender();\n    });\n  }, [element.type, element.key]);\n\n  const result = propsDeps\n    ? // biome-ignore lint/correctness/useExhaustiveDependencies: user provided deps instead of prop identity\n      tapMemo(\n        () => renderResourceFiber(fiber, element.props),\n        [fiber, ...propsDeps, version],\n      )\n    : renderResourceFiber(fiber, element.props);\n\n  tapEffect(() => () => unmountResourceFiber(fiber), [fiber]);\n  tapEffect(() => {\n    commitResourceFiber(fiber, result);\n  }, [fiber, result]);\n\n  return result.output;\n}\n", "import { ExtractResourceReturnType, ResourceElement } from \"../core/types\";\nimport { callResourceFn } from \"../core/callResourceFn\";\n\nexport function tapInlineResource<E extends ResourceElement<any, any>>(\n  element: E,\n): ExtractResourceReturnType<E> {\n  return callResourceFn(element.type, element.props);\n}\n", "import {\n  ExtractResourceReturnType,\n  RenderResult,\n  ResourceElement,\n  ResourceFiber,\n} from \"../core/types\";\nimport { tapEffect } from \"./tap-effect\";\nimport { tapMemo } from \"./tap-memo\";\nimport { tapState } from \"./tap-state\";\nimport { tapCallback } from \"./tap-callback\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"../core/ResourceFiber\";\nimport { tapConst } from \"./tap-const\";\n\ntype FiberState = {\n  fiber: ResourceFiber<unknown, unknown>;\n  next:\n    | RenderResult\n    | [ResourceFiber<unknown, unknown>, RenderResult]\n    | \"delete\";\n};\n\nexport function tapResources<E extends ResourceElement<any, any>>(\n  getElements: () => readonly E[],\n  getElementsDeps?: readonly unknown[],\n): ExtractResourceReturnType<E>[] {\n  const [version, setVersion] = tapState(0);\n  const rerender = tapConst(() => () => setVersion((v) => v + 1), []);\n\n  const fibers = tapConst(() => new Map<string | number, FiberState>(), []);\n\n  const getElementsMemo = getElementsDeps\n    ? // biome-ignore lint/correctness/useExhaustiveDependencies: library code\n      tapCallback(getElements, getElementsDeps)\n    : getElements;\n\n  // Process each element\n\n  const res = tapMemo(() => {\n    void version;\n\n    const elementsArray = getElementsMemo();\n    const seenKeys = new Set<string | number>();\n    const results: any[] = [];\n    let newCount = 0;\n\n    // Create/update fibers and render\n    for (let i = 0; i < elementsArray.length; i++) {\n      const element = elementsArray[i]!;\n\n      const elementKey = element.key;\n      if (elementKey === undefined) {\n        throw new Error(\n          `tapResources did not provide a key for array at index ${i}`,\n        );\n      }\n\n      if (seenKeys.has(elementKey))\n        throw new Error(`Duplicate key ${elementKey} in tapResources`);\n      seenKeys.add(elementKey);\n\n      let state = fibers.get(elementKey);\n      if (!state) {\n        const fiber = createResourceFiber(element.type, (callback) => {\n          if (callback()) rerender();\n        });\n        const result = renderResourceFiber(fiber, element.props);\n        state = {\n          fiber,\n          next: result,\n        };\n        newCount++;\n        fibers.set(elementKey, state);\n        results.push(result.output);\n      } else if (state.fiber.type !== element.type) {\n        const fiber = createResourceFiber(element.type, (callback) => {\n          if (callback()) rerender();\n        });\n        const result = renderResourceFiber(fiber, element.props);\n        state.next = [fiber, result];\n        results.push(result.output);\n      } else {\n        state.next = renderResourceFiber(state.fiber, element.props);\n        results.push(state.next.output);\n      }\n    }\n\n    // Clean up removed fibers (only if there might be stale ones)\n    if (fibers.size > results.length - newCount) {\n      for (const key of fibers.keys()) {\n        if (!seenKeys.has(key)) {\n          fibers.get(key)!.next = \"delete\";\n        }\n      }\n    }\n\n    return results;\n  }, [getElementsMemo, version]);\n\n  // Cleanup on unmount\n  tapEffect(() => {\n    return () => {\n      for (const key of fibers.keys()) {\n        const fiber = fibers.get(key)!.fiber;\n        unmountResourceFiber(fiber);\n      }\n    };\n  }, []);\n\n  tapEffect(() => {\n    res; // as a performance optimization, we only run if the results have changed\n\n    for (const [key, state] of fibers.entries()) {\n      if (state.next === \"delete\") {\n        if (state.fiber.isMounted) {\n          unmountResourceFiber(state.fiber);\n        }\n\n        fibers.delete(key);\n      } else if (Array.isArray(state.next)) {\n        unmountResourceFiber(state.fiber);\n        state.fiber = state.next[0];\n        commitResourceFiber(state.fiber, state.next[1]);\n      } else {\n        commitResourceFiber(state.fiber, state.next);\n      }\n    }\n  }, [res]);\n\n  return res;\n}\n", "type Task = () => void;\n\ntype GlobalFlushState = {\n  schedulers: Set<UpdateScheduler>;\n  isScheduled: boolean;\n};\n\nconst MAX_FLUSH_LIMIT = 50;\nlet flushState: GlobalFlushState = {\n  schedulers: new Set([]),\n  isScheduled: false,\n};\n\nexport class UpdateScheduler {\n  private _isDirty = false;\n\n  constructor(private readonly _task: Task) {}\n\n  get isDirty() {\n    return this._isDirty;\n  }\n\n  markDirty() {\n    this._isDirty = true;\n\n    flushState.schedulers.add(this);\n    scheduleFlush();\n  }\n\n  runTask() {\n    this._isDirty = false;\n    this._task();\n  }\n}\n\nconst scheduleFlush = () => {\n  if (flushState.isScheduled) return;\n  flushState.isScheduled = true;\n  queueMicrotask(flushScheduled);\n};\n\nconst flushScheduled = () => {\n  try {\n    const errors = [];\n    let flushDepth = 0;\n\n    for (const scheduler of flushState.schedulers) {\n      flushState.schedulers.delete(scheduler);\n      if (!scheduler.isDirty) continue;\n\n      flushDepth++;\n\n      if (flushDepth > MAX_FLUSH_LIMIT) {\n        throw new Error(\n          `Maximum update depth exceeded. This can happen when a resource ` +\n            `repeatedly calls setState inside tapEffect.`,\n        );\n      }\n\n      try {\n        scheduler.runTask();\n      } catch (error) {\n        errors.push(error);\n      }\n    }\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        for (const error of errors) {\n          console.error(error);\n        }\n        throw new AggregateError(errors, \"Errors occurred during flushSync\");\n      }\n    }\n  } finally {\n    flushState.schedulers.clear();\n    flushState.isScheduled = false;\n  }\n};\n\nexport const flushResourcesSync = <T>(callback: () => T): T => {\n  const prev = flushState;\n  flushState = {\n    schedulers: new Set([]),\n    isScheduled: true,\n  };\n\n  try {\n    const result = callback();\n    flushScheduled();\n\n    return result;\n  } finally {\n    flushState = prev;\n  }\n};\n", "import {\n  commitResourceFiber,\n  createResourceFiber,\n  renderResourceFiber,\n  unmountResourceFiber,\n} from \"./core/ResourceFiber\";\nimport { flushResourcesSync, UpdateScheduler } from \"./core/scheduler\";\nimport { tapConst } from \"./hooks/tap-const\";\nimport { tapMemo } from \"./hooks/tap-memo\";\nimport { tapEffect } from \"./hooks/tap-effect\";\nimport { tapEffectEvent } from \"./hooks/tap-effect-event\";\nimport { tapRef } from \"./hooks/tap-ref\";\nimport { RenderResult, ResourceElement } from \"./core/types\";\n\nexport namespace tapSubscribableResource {\n  export type Unsubscribe = () => void;\n\n  export interface SubscribableResource<TState> {\n    /**\n     * Get the current state of the store.\n     */\n    getValue(): TState;\n\n    /**\n     * Subscribe to the store.\n     */\n    subscribe(listener: () => void): Unsubscribe;\n  }\n}\n\nexport const tapSubscribableResource = <TState>(\n  element: ResourceElement<TState>,\n): tapSubscribableResource.SubscribableResource<TState> => {\n  const scheduler = tapConst(\n    () =>\n      new UpdateScheduler(() => {\n        lastRenderRef.current = null;\n        handleUpdate();\n      }),\n    [],\n  );\n  const fiber = tapMemo(() => {\n    void element.key;\n\n    return createResourceFiber(element.type, (callback) => {\n      if (callback()) {\n        scheduler.markDirty();\n      }\n    });\n  }, [element.type, element.key]);\n\n  const lastRenderRef = tapRef<RenderResult | null>(null);\n  lastRenderRef.current = renderResourceFiber(fiber, element.props);\n\n  const isMountedRef = tapRef(false);\n  const committedPropsRef = tapRef(element.props);\n  const valueRef = tapRef<TState>(lastRenderRef.current.output);\n  const subscribers = tapConst(() => new Set<() => void>(), []);\n  const handleUpdate = tapEffectEvent(() => {\n    if (!isMountedRef.current) return; // skip update if not mounted\n\n    if (lastRenderRef.current === null) {\n      lastRenderRef.current = renderResourceFiber(\n        fiber,\n        committedPropsRef.current,\n      );\n    }\n\n    if (scheduler.isDirty) return;\n    committedPropsRef.current = lastRenderRef.current.props;\n    commitResourceFiber(fiber, lastRenderRef.current);\n\n    if (scheduler.isDirty || valueRef.current === lastRenderRef.current.output)\n      return;\n    valueRef.current = lastRenderRef.current.output;\n    subscribers.forEach((callback) => callback());\n  });\n\n  tapEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n      unmountResourceFiber(fiber);\n    };\n  }, [fiber]);\n\n  tapEffect(() => {\n    flushResourcesSync(handleUpdate);\n  });\n\n  return tapMemo(\n    () => ({\n      getValue: () => valueRef.current,\n      subscribe: (listener: () => void) => {\n        subscribers.add(listener);\n        return () => subscribers.delete(listener);\n      },\n    }),\n    [],\n  );\n};\n", "import { RenderResult, ResourceElement } from \"./types\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"./ResourceFiber\";\nimport { flushResourcesSync, UpdateScheduler } from \"./scheduler\";\nimport { tapRef } from \"../hooks/tap-ref\";\nimport { tapState } from \"../hooks/tap-state\";\nimport { tapMemo } from \"../hooks/tap-memo\";\nimport { tapEffect } from \"../hooks/tap-effect\";\nimport { resource } from \"./resource\";\nimport { tapResource } from \"../hooks/tap-resource\";\nimport { tapConst } from \"../hooks/tap-const\";\nimport { getDevStrictMode } from \"./execution-context\";\nimport { isDevelopment } from \"./env\";\n\nexport namespace createResource {\n  export type Unsubscribe = () => void;\n\n  export interface Handle<R, P> {\n    getValue(): R;\n    subscribe(callback: () => void): Unsubscribe;\n    render(element: ResourceElement<R, P>): void;\n    unmount(): void;\n  }\n}\n\nconst HandleWrapperResource = resource(\n  <R, P>(state: {\n    elementRef: {\n      current: ResourceElement<R, P>;\n    };\n    onRender: (changed: boolean) => boolean;\n    onUnmount: () => void;\n  }): createResource.Handle<R, P> => {\n    const [, setElement] = tapState(state.elementRef.current);\n    const output = tapResource(state.elementRef.current);\n\n    const subscribers = tapConst(() => new Set<() => void>(), []);\n    const valueRef = tapRef(output);\n\n    tapEffect(() => {\n      if (output !== valueRef.current) {\n        valueRef.current = output;\n        subscribers.forEach((callback) => callback());\n      }\n    });\n\n    const handle = tapMemo(\n      () => ({\n        getValue: () => valueRef.current,\n        subscribe: (callback: () => void) => {\n          subscribers.add(callback);\n          return () => subscribers.delete(callback);\n        },\n\n        render: (el: ResourceElement<R, P>) => {\n          const changed = state.elementRef.current !== el;\n          state.elementRef.current = el;\n\n          if (state.onRender(changed)) {\n            setElement(el);\n          }\n        },\n        unmount: state.onUnmount,\n      }),\n      [state],\n    );\n\n    return handle;\n  },\n);\n\nexport const createResource = <R, P>(\n  element: ResourceElement<R, P>,\n  {\n    mount = true,\n    devStrictMode = false,\n  }: { mount?: boolean; devStrictMode?: boolean } = {},\n): createResource.Handle<R, P> => {\n  let isMounted = mount;\n  let render: RenderResult;\n  const props = {\n    elementRef: { current: element },\n    onRender: (changed: boolean) => {\n      if (isMounted) return changed;\n      isMounted = true;\n\n      if (\n        isDevelopment &&\n        fiber.isNeverMounted &&\n        fiber.devStrictMode === \"child\"\n      ) {\n        if (changed) {\n          render = renderResourceFiber(fiber, props);\n        }\n        commitResourceFiber(fiber, render);\n      } else {\n        flushResourcesSync(() => {\n          if (changed) {\n            // In strict mode, render twice to detect side effects\n            if (isDevelopment && fiber.devStrictMode === \"root\") {\n              void renderResourceFiber(fiber, props);\n            }\n\n            render = renderResourceFiber(fiber, props);\n          }\n\n          if (scheduler.isDirty) return;\n          commitResourceFiber(fiber, render!);\n        });\n      }\n\n      return false;\n    },\n    onUnmount: () => {\n      if (!isMounted) throw new Error(\"Resource not mounted\");\n      isMounted = false;\n\n      unmountResourceFiber(fiber);\n    },\n  };\n\n  const scheduler = new UpdateScheduler(() => {\n    // In strict mode, render twice to detect side effects\n    if (\n      isDevelopment &&\n      (fiber.devStrictMode === \"root\" ||\n        (fiber.devStrictMode && !fiber.isFirstRender))\n    ) {\n      void renderResourceFiber(fiber, props);\n    }\n\n    render = renderResourceFiber(fiber, props);\n\n    if (scheduler.isDirty || !isMounted) return;\n    commitResourceFiber(fiber, render);\n  });\n\n  const fiber = createResourceFiber(\n    HandleWrapperResource<R, P>,\n    (callback) => {\n      if (callback()) scheduler.markDirty();\n    },\n    getDevStrictMode(devStrictMode),\n  );\n\n  flushResourcesSync(() => {\n    scheduler.markDirty();\n  });\n\n  return render!.output;\n};\n", "const contextValue: unique symbol = Symbol(\"tap.Context\");\ntype Context<T> = {\n  [contextValue]: T;\n};\n\nexport const createResourceContext = <T>(defaultValue: T): Context<T> => {\n  return {\n    [contextValue]: defaultValue,\n  };\n};\n\nexport const withContextProvider = <T, TResult>(\n  context: Context<T>,\n  value: T,\n  fn: () => TResult,\n) => {\n  const previousValue = context[contextValue];\n  context[contextValue] = value;\n  try {\n    return fn();\n  } finally {\n    context[contextValue] = previousValue;\n  }\n};\n\nexport const tap = <T>(context: Context<T>) => {\n  return context[contextValue];\n};\n", "import React, { createContext, useContext } from \"react\";\nimport type { AssistantClient, AssistantClientAccessor } from \"../types/client\";\nimport {\n  createProxiedAssistantState,\n  PROXIED_ASSISTANT_STATE_SYMBOL,\n} from \"./proxied-assistant-state\";\nimport { BaseProxyHandler, handleIntrospectionProp } from \"./BaseProxyHandler\";\n\nconst NO_OP_SUBSCRIBE = () => () => {};\n\nconst createErrorClientField = (\n  message: string,\n): AssistantClientAccessor<never> => {\n  const fn = (() => {\n    throw new Error(message);\n  }) as AssistantClientAccessor<never>;\n  fn.source = null;\n  fn.query = null;\n  return fn;\n};\n\nclass DefaultAssistantClientProxyHandler\n  extends BaseProxyHandler\n  implements ProxyHandler<AssistantClient>\n{\n  get(_: unknown, prop: string | symbol) {\n    if (prop === \"subscribe\") return NO_OP_SUBSCRIBE;\n    if (prop === \"on\") return NO_OP_SUBSCRIBE;\n    if (prop === PROXIED_ASSISTANT_STATE_SYMBOL)\n      return DefaultAssistantClientProxiedAssistantState;\n    const introspection = handleIntrospectionProp(\n      prop,\n      \"DefaultAssistantClient\",\n    );\n    if (introspection !== false) return introspection;\n    return createErrorClientField(\n      \"You are using a component or hook that requires an AuiProvider. Wrap your component in an <AuiProvider> component.\",\n    );\n  }\n\n  ownKeys(): ArrayLike<string | symbol> {\n    return [\"subscribe\", \"on\", PROXIED_ASSISTANT_STATE_SYMBOL];\n  }\n\n  has(_: unknown, prop: string | symbol): boolean {\n    return (\n      prop === \"subscribe\" ||\n      prop === \"on\" ||\n      prop === PROXIED_ASSISTANT_STATE_SYMBOL\n    );\n  }\n}\n/** Default context value - throws \"wrap in AuiProvider\" error */\nexport const DefaultAssistantClient: AssistantClient =\n  new Proxy<AssistantClient>(\n    {} as AssistantClient,\n    new DefaultAssistantClientProxyHandler(),\n  );\n\nconst DefaultAssistantClientProxiedAssistantState = createProxiedAssistantState(\n  DefaultAssistantClient,\n);\n\n/** Root prototype for created clients - throws \"scope not defined\" error */\nexport const createRootAssistantClient = (): AssistantClient =>\n  new Proxy<AssistantClient>({} as AssistantClient, {\n    get(_: AssistantClient, prop: string | symbol) {\n      const introspection = handleIntrospectionProp(prop, \"AssistantClient\");\n      if (introspection !== false) return introspection;\n\n      return createErrorClientField(\n        `The current scope does not have a \"${String(prop)}\" property.`,\n      );\n    },\n  });\n\n/**\n * React Context for the AssistantClient\n */\nconst AssistantContext = createContext<AssistantClient>(DefaultAssistantClient);\n\nexport const useAssistantContextValue = (): AssistantClient => {\n  return useContext(AssistantContext);\n};\n\n/**\n * Provider component for AssistantClient\n *\n * @example\n * ```typescript\n * <AuiProvider value={aui}>\n *   <YourApp />\n * </AuiProvider>\n * ```\n */\nexport const AuiProvider = ({\n  value,\n  children,\n}: {\n  value: AssistantClient;\n  children: React.ReactNode;\n}): React.ReactElement => {\n  return (\n    <AssistantContext.Provider value={value}>\n      {children}\n    </AssistantContext.Provider>\n  );\n};\n", "import {\n  createResourceContext,\n  tap,\n  withContextProvider,\n  tapMemo,\n} from \"@assistant-ui/tap\";\nimport type { ClientMethods } from \"../types/client\";\n\n/**\n * Symbol used to get the client index from a ClientProxy.\n */\nexport const SYMBOL_CLIENT_INDEX = Symbol(\"assistant-ui.store.clientIndex\");\n\n/**\n * Get the index of a client (its position in the client stack when created).\n */\nexport const getClientIndex = (client: ClientMethods): number => {\n  return (client as unknown as { [SYMBOL_CLIENT_INDEX]: number })[\n    SYMBOL_CLIENT_INDEX\n  ];\n};\n\n/**\n * The client stack - an array of clients representing the current hierarchy.\n */\nexport type ClientStack = readonly ClientMethods[];\n\nconst ClientStackContext = createResourceContext<ClientStack>([]);\n\n/**\n * Get the current client stack inside a tap resource.\n */\nexport const tapClientStack = (): ClientStack => {\n  return tap(ClientStackContext);\n};\n\n/**\n * Execute a callback with a client pushed onto the stack.\n * The stack is duplicated, not mutated.\n */\nexport const tapWithClientStack = <T>(\n  client: ClientMethods,\n  callback: () => T,\n): T => {\n  const currentStack = tapClientStack();\n  const newStack = tapMemo(\n    () => [...currentStack, client],\n    [currentStack, client],\n  );\n  return withContextProvider(ClientStackContext, newStack, callback);\n};\n", "const INTROSPECTION_PROPS = new Set([\"$$typeof\", \"nodeType\", \"then\"]);\n\n/**\n * Handles common proxy introspection properties.\n * Returns the appropriate value for toStringTag, toJSON, and props that should return undefined.\n * Returns `false` if the prop should be handled by the subclass.\n */\nexport const handleIntrospectionProp = (\n  prop: string | symbol,\n  name: string,\n): unknown | false => {\n  if (prop === Symbol.toStringTag) return name;\n  if (typeof prop === \"symbol\") return undefined;\n  if (prop === \"toJSON\") return () => name;\n  if (INTROSPECTION_PROPS.has(prop)) return undefined;\n  return false;\n};\n\nexport abstract class BaseProxyHandler implements ProxyHandler<object> {\n  abstract get(_: unknown, prop: string | symbol, receiver?: unknown): unknown;\n  abstract ownKeys(): ArrayLike<string | symbol>;\n  abstract has(_: unknown, prop: string | symbol): boolean;\n\n  getOwnPropertyDescriptor(_: unknown, prop: string | symbol) {\n    const value = this.get(_, prop);\n    if (value === undefined) return undefined;\n    return {\n      value,\n      writable: false,\n      enumerable: true,\n      configurable: false,\n    };\n  }\n\n  set() {\n    return false;\n  }\n  setPrototypeOf() {\n    return false;\n  }\n  defineProperty() {\n    return false;\n  }\n  deleteProperty() {\n    return false;\n  }\n  preventExtensions(): boolean {\n    return false;\n  }\n}\n", "import {\n  type ResourceElement,\n  Resource,\n  resource,\n  withKey,\n} from \"@assistant-ui/tap\";\n\nexport const wrapperResource = <R, P>(\n  fn: (props: ResourceElement<P>) => R,\n): Resource<R, ResourceElement<P>> => {\n  const res = resource(fn);\n  return (props: ResourceElement<P>) => {\n    const el = res(props);\n    if (props.key === undefined) return el;\n    return withKey(props.key, el);\n  };\n};\n", "import {\n  tapEffect,\n  tapMemo,\n  tapRef,\n  type ResourceElement,\n  tapResource,\n  tapInlineResource,\n} from \"@assistant-ui/tap\";\nimport type { ClientMethods, ClientOutputOf } from \"./types/client\";\nimport {\n  tapClientStack,\n  tapWithClientStack,\n  SYMBOL_CLIENT_INDEX,\n} from \"./utils/tap-client-stack-context\";\nimport {\n  BaseProxyHandler,\n  handleIntrospectionProp,\n} from \"./utils/BaseProxyHandler\";\nimport { wrapperResource } from \"./wrapperResource\";\n\n/**\n * Symbol used internally to get state from ClientProxy.\n * This allows getState() to be optional in the user-facing client.\n */\nconst SYMBOL_GET_OUTPUT = Symbol(\"assistant-ui.store.getValue\");\n\ntype ClientInternal = {\n  [SYMBOL_GET_OUTPUT]: ClientOutputOf<unknown, ClientMethods>;\n};\n\nexport const getClientState = (client: ClientMethods) => {\n  const output = (client as unknown as ClientInternal)[SYMBOL_GET_OUTPUT];\n  if (!output) {\n    throw new Error(\n      \"Client scope contains a non-client resource. \" +\n        \"Ensure your Derived get() returns a client created with tapClientResource(), not a plain resource.\",\n    );\n  }\n  return output.state;\n};\n\n// Global cache for function templates by field name\nconst fieldAccessFns = new Map<\n  string | symbol,\n  (this: unknown, ...args: unknown[]) => unknown\n>();\n\nfunction getOrCreateProxyFn(prop: string | symbol) {\n  let template = fieldAccessFns.get(prop);\n  if (!template) {\n    template = function (this: unknown, ...args: unknown[]) {\n      if (!this || typeof this !== \"object\") {\n        throw new Error(\n          `Method \"${String(prop)}\" called without proper context. ` +\n            `This may indicate the function was called incorrectly.`,\n        );\n      }\n\n      const output = (this as ClientInternal)[SYMBOL_GET_OUTPUT];\n      if (!output) {\n        throw new Error(\n          `Method \"${String(prop)}\" called on invalid client proxy. ` +\n            `Ensure you are calling this method on a valid client instance.`,\n        );\n      }\n\n      const method = output.methods[prop];\n      if (!method)\n        throw new Error(`Method \"${String(prop)}\" is not implemented.`);\n      if (typeof method !== \"function\")\n        throw new Error(`\"${String(prop)}\" is not a function.`);\n      return method(...args);\n    };\n    fieldAccessFns.set(prop, template);\n  }\n  return template;\n}\n\nclass ClientProxyHandler\n  extends BaseProxyHandler\n  implements ProxyHandler<object>\n{\n  private boundFns: Map<string | symbol, Function> | undefined;\n  private cachedReceiver: unknown;\n\n  constructor(\n    private readonly outputRef: {\n      current: ClientOutputOf<unknown, ClientMethods>;\n    },\n    private readonly index: number,\n  ) {\n    super();\n  }\n\n  get(_: unknown, prop: string | symbol, receiver: unknown) {\n    if (prop === SYMBOL_GET_OUTPUT) return this.outputRef.current;\n    if (prop === SYMBOL_CLIENT_INDEX) return this.index;\n    const introspection = handleIntrospectionProp(prop, \"ClientProxy\");\n    if (introspection !== false) return introspection;\n    const value = this.outputRef.current.methods[prop];\n    if (typeof value === \"function\") {\n      if (this.cachedReceiver !== receiver) {\n        this.boundFns = new Map();\n        this.cachedReceiver = receiver;\n      }\n      let bound = this.boundFns!.get(prop);\n      if (!bound) {\n        bound = getOrCreateProxyFn(prop).bind(receiver);\n        this.boundFns!.set(prop, bound);\n      }\n      return bound;\n    }\n    return value;\n  }\n\n  ownKeys(): ArrayLike<string | symbol> {\n    return Object.keys(this.outputRef.current.methods);\n  }\n\n  has(_: unknown, prop: string | symbol) {\n    if (prop === SYMBOL_GET_OUTPUT) return true;\n    if (prop === SYMBOL_CLIENT_INDEX) return true;\n    return prop in this.outputRef.current.methods;\n  }\n}\n\n/**\n * Resource that wraps a plain resource element to create a stable client proxy.\n *\n * Takes a ResourceElement that returns { state, methods } and\n * wraps it to produce a stable client proxy. This adds the client to the\n * client stack, enabling event scoping.\n *\n * Use this for 1:1 client mappings where you want event scoping to work correctly.\n *\n * @example\n * ```typescript\n * const MessageResource = resource(({ messageId }: { messageId: string }) => {\n *   return tapInlineResource(\n *     tapClientResource(InnerMessageResource({ messageId }))\n *   );\n * });\n * ```\n */\nexport const ClientResource = wrapperResource(\n  <TState, TMethods extends ClientMethods>(\n    element: ResourceElement<ClientOutputOf<TState, TMethods>>,\n  ): ClientOutputOf<TState, TMethods> & {\n    key: string | number | undefined;\n  } => {\n    const valueRef = tapRef(\n      null as unknown as ClientOutputOf<TState, TMethods>,\n    );\n\n    const index = tapClientStack().length;\n    const methods = tapMemo(\n      () =>\n        new Proxy<TMethods>(\n          {} as TMethods,\n          new ClientProxyHandler(valueRef, index),\n        ),\n      [index],\n    );\n\n    const value = tapWithClientStack(methods, () => tapResource(element));\n    if (!valueRef.current) {\n      valueRef.current = value;\n    }\n\n    tapEffect(() => {\n      valueRef.current = value;\n    });\n\n    return { methods, state: value.state, key: element.key };\n  },\n);\n\nexport const tapClientResource = <TState, TMethods extends ClientMethods>(\n  element: ResourceElement<ClientOutputOf<TState, TMethods>>,\n) => {\n  return tapInlineResource(ClientResource(element));\n};\n", "\"use client\";\nimport { getClientState } from \"../tapClientResource\";\nimport type { AssistantClient, AssistantState } from \"../types/client\";\nimport { BaseProxyHandler, handleIntrospectionProp } from \"./BaseProxyHandler\";\n\nexport const PROXIED_ASSISTANT_STATE_SYMBOL = Symbol(\n  \"assistant-ui.store.proxiedAssistantState\",\n);\n\nconst isIgnoredKey = (key: string | symbol): key is \"on\" | \"subscribe\" => {\n  return key === \"on\" || key === \"subscribe\" || typeof key === \"symbol\";\n};\n\n/**\n * Proxied state that lazily accesses scope states\n */\nexport const createProxiedAssistantState = (\n  client: AssistantClient,\n): AssistantState => {\n  class ProxiedAssistantStateProxyHandler\n    extends BaseProxyHandler\n    implements ProxyHandler<AssistantState>\n  {\n    get(_: unknown, prop: string | symbol) {\n      const introspection = handleIntrospectionProp(prop, \"AssistantState\");\n      if (introspection !== false) return introspection;\n      const scope = prop as keyof AssistantClient;\n      if (isIgnoredKey(scope)) return undefined;\n      return getClientState(client[scope]());\n    }\n\n    ownKeys(): ArrayLike<string | symbol> {\n      return Object.keys(client).filter((key) => !isIgnoredKey(key));\n    }\n\n    has(_: unknown, prop: string | symbol): boolean {\n      return !isIgnoredKey(prop) && prop in client;\n    }\n  }\n\n  return new Proxy<AssistantState>(\n    {} as AssistantState,\n    new ProxiedAssistantStateProxyHandler(),\n  );\n};\n\nexport const getProxiedAssistantState = (\n  client: AssistantClient,\n): AssistantState => {\n  return (\n    client as unknown as { [PROXIED_ASSISTANT_STATE_SYMBOL]: AssistantState }\n  )[PROXIED_ASSISTANT_STATE_SYMBOL];\n};\n", "import { resource, ResourceElement } from \"@assistant-ui/tap\";\nimport type {\n  AssistantClient,\n  ClientNames,\n  AssistantClientAccessor,\n  ClientMeta,\n} from \"./types/client\";\n\n/**\n * Creates a derived client field that references a client from a parent scope.\n * The get callback always calls the most recent version (useEffectEvent pattern).\n *\n * IMPORTANT: The `get` callback must return a client that was created via\n * `tapClientResource` (or `tapClientLookup`/`tapClientList` which use it internally).\n * This is required for event scoping to work correctly.\n *\n * @example\n * ```typescript\n * const aui = useAui({\n *   message: Derived({\n *     source: \"thread\",\n *     query: { index: 0 },\n *     get: (aui) => aui.thread().message({ index: 0 }),\n *   }),\n * });\n * ```\n */\nexport const Derived = resource(\n  <K extends ClientNames>(_config: Derived.Props<K>): null => {\n    return null;\n  },\n);\n\nexport type DerivedElement<K extends ClientNames> = ResourceElement<\n  null,\n  Derived.Props<K>\n>;\n\nexport namespace Derived {\n  /**\n   * Props passed to a derived client resource element.\n   */\n  export type Props<K extends ClientNames> = {\n    get: (client: AssistantClient) => ReturnType<AssistantClientAccessor<K>>;\n  } & (ClientMeta<K> | { getMeta: (client: AssistantClient) => ClientMeta<K> });\n}\n", "import type { ResourceElement } from \"@assistant-ui/tap\";\nimport type { ClientElement, ClientNames } from \"./types/client\";\nimport type { DerivedElement } from \"./Derived\";\n\n/**\n * Symbol used to store default peer clients on a resource.\n */\nconst DEFAULT_PEERS = Symbol(\"assistant-ui.default-peers\");\n\n/**\n * Type for resources that have default peers attached.\n */\nexport type ResourceWithDefaultPeers = {\n  [DEFAULT_PEERS]?: DefaultPeers;\n};\n\n/**\n * Default peers configuration - can be either root clients or derived clients.\n */\nexport type DefaultPeers = {\n  [K in ClientNames]?: ClientElement<K> | DerivedElement<K>;\n};\n\n/**\n * Attaches default peer clients to a resource.\n *\n * Default peers are only applied if the scope doesn't exist:\n * - Not defined in parent context\n * - Not provided by user\n * - Not already defined by a previous resource's default peers\n *\n * First definition wins - no overriding is permitted.\n *\n * @param resource - The resource to attach default peers to\n * @param peers - The default peer clients to attach\n * @throws Error if a peer key already exists in the resource's default peers\n *\n * @example\n * ```typescript\n * const ThreadListClient = resource(({ ... }) => { ... });\n *\n * attachDefaultPeers(ThreadListClient, {\n *   // Derived default peers\n *   thread: Derived({ source: \"threads\", query: { type: \"main\" }, get: ... }),\n *   threadListItem: Derived({ ... }),\n *   composer: Derived({ getMeta: ..., get: ... }),\n *\n *   // Root default peers\n *   tools: Tools({}),\n *   modelContext: ModelContext({}),\n * });\n * ```\n */\nexport function attachDefaultPeers<\n  T extends (...args: any[]) => ResourceElement<any>,\n>(resource: T, peers: DefaultPeers): void {\n  const resourceWithPeers = resource as T & ResourceWithDefaultPeers;\n  const existing = resourceWithPeers[DEFAULT_PEERS] ?? {};\n\n  for (const key of Object.keys(peers)) {\n    if (key in existing) {\n      throw new Error(\n        `Default peer \"${key}\" is already attached to this resource`,\n      );\n    }\n  }\n\n  resourceWithPeers[DEFAULT_PEERS] = { ...existing, ...peers };\n}\n\n/**\n * Gets the default peers attached to a resource, if any.\n */\nexport function getDefaultPeers<\n  T extends (...args: any[]) => ResourceElement<any>,\n>(resource: T): DefaultPeers | undefined {\n  return (resource as T & ResourceWithDefaultPeers)[DEFAULT_PEERS];\n}\n", "import { Derived, DerivedElement } from \"../Derived\";\nimport type {\n  AssistantClient,\n  ClientElement,\n  ClientNames,\n} from \"../types/client\";\nimport { getDefaultPeers } from \"../attachDefaultPeers\";\nimport type { useAui } from \"../useAui\";\nimport { tapMemo } from \"@assistant-ui/tap\";\n\nexport type RootClients = Partial<\n  Record<ClientNames, ClientElement<ClientNames>>\n>;\nexport type DerivedClients = Partial<\n  Record<ClientNames, DerivedElement<ClientNames>>\n>;\n\n/**\n * Splits a clients object into root clients and derived clients.\n *\n * @param clients - The clients input object to split\n * @returns An object with { rootClients, derivedClients }\n *\n * @example\n * ```typescript\n * const clients = {\n *   foo: RootClient({ ... }),\n *   bar: Derived({ ... }),\n * };\n *\n * const { rootClients, derivedClients } = splitClients(clients);\n * // rootClients = { foo: ... }\n * // derivedClients = { bar: ... }\n * ```\n */\nfunction splitClients(clients: useAui.Props, baseClient: AssistantClient) {\n  const rootClients: RootClients = {};\n  const derivedClients: DerivedClients = {};\n\n  for (const [key, clientElement] of Object.entries(clients) as [\n    keyof useAui.Props,\n    NonNullable<useAui.Props[keyof useAui.Props]>,\n  ][]) {\n    if (clientElement.type === Derived) {\n      derivedClients[key] = clientElement as DerivedElement<ClientNames>;\n    } else {\n      rootClients[key] = clientElement as ClientElement<ClientNames>;\n    }\n  }\n\n  // Recursively gather all default peers, flattening nested ones\n  const gatherDefaultPeers = (\n    clientElement: ClientElement<ClientNames>,\n    visited = new Set<ClientElement<ClientNames>>(),\n  ): Array<\n    [ClientNames, ClientElement<ClientNames> | DerivedElement<ClientNames>]\n  > => {\n    // Prevent infinite loops\n    if (visited.has(clientElement)) return [];\n    visited.add(clientElement);\n\n    const defaultPeers = getDefaultPeers(clientElement.type);\n    if (!defaultPeers) return [];\n\n    const result: Array<\n      [ClientNames, ClientElement<ClientNames> | DerivedElement<ClientNames>]\n    > = [];\n\n    for (const [key, peerElement] of Object.entries(defaultPeers) as [\n      ClientNames,\n      ClientElement<ClientNames> | DerivedElement<ClientNames>,\n    ][]) {\n      result.push([key, peerElement]);\n\n      // If this peer is a root client with its own default peers, recursively gather them\n      if (peerElement.type !== Derived<ClientNames>) {\n        const nestedPeers = gatherDefaultPeers(\n          peerElement as ClientElement<ClientNames>,\n          visited,\n        );\n        result.push(...nestedPeers);\n      }\n    }\n\n    return result;\n  };\n\n  // Apply flattened default peers for each root client\n  for (const [_clientKey, clientElement] of Object.entries(rootClients) as [\n    ClientNames,\n    ClientElement<ClientNames>,\n  ][]) {\n    const allPeers = gatherDefaultPeers(clientElement);\n\n    for (const [key, peerElement] of allPeers) {\n      // Skip if already exists (first wins)\n      if (\n        key in rootClients ||\n        key in derivedClients ||\n        baseClient[key].source !== null\n      )\n        continue;\n\n      if (peerElement.type === Derived<ClientNames>) {\n        derivedClients[key] = peerElement as DerivedElement<ClientNames>;\n      } else {\n        rootClients[key] = peerElement as ClientElement<ClientNames>;\n      }\n    }\n  }\n\n  return { rootClients, derivedClients };\n}\n\nconst tapShallowMemoObject = <T extends object>(object: T) => {\n  // biome-ignore lint/correctness/useExhaustiveDependencies: shallow memo\n  return tapMemo(() => object, [...Object.entries(object).flat()]);\n};\n\nexport const tapSplitClients = (\n  clients: useAui.Props,\n  baseClient: AssistantClient,\n) => {\n  const { rootClients, derivedClients } = splitClients(clients, baseClient);\n\n  return {\n    rootClients: tapShallowMemoObject(rootClients),\n    derivedClients: tapShallowMemoObject(derivedClients),\n  };\n};\n", "import type {\n  AssistantClientAccessor,\n  ClientEvents,\n  ClientNames,\n} from \"./client\";\n\n// --- Event Map Construction ---\ntype UnionToIntersection<U> = (\n  U extends unknown\n    ? (x: U) => void\n    : never\n) extends (x: infer I) => void\n  ? I\n  : never;\n\ntype ClientEventMap = UnionToIntersection<\n  { [K in ClientNames]: ClientEvents<K> }[ClientNames]\n>;\n\n// --- Core Types ---\n\ntype WildcardPayload = {\n  [K in keyof ClientEventMap]: { event: K; payload: ClientEventMap[K] };\n}[keyof ClientEventMap];\n\nexport type AssistantEventPayload = ClientEventMap & { \"*\": WildcardPayload };\n\nexport type AssistantEventName = keyof AssistantEventPayload;\n\ntype EventSource<T extends AssistantEventName> =\n  T extends `${infer Source}.${string}` ? Source : never;\n\n// --- Scoping ---\n\ntype ParentOf<K extends ClientNames> =\n  AssistantClientAccessor<K> extends { source: infer S }\n    ? S extends ClientNames\n      ? S\n      : never\n    : never;\n\ntype AncestorsOf<\n  K extends ClientNames,\n  Seen extends ClientNames = never,\n> = K extends Seen\n  ? never\n  : ParentOf<K> extends never\n    ? never\n    : ParentOf<K> | AncestorsOf<ParentOf<K>, Seen | K>;\n\n/** Valid scopes: `\"*\"` | event source | ancestors of event source */\nexport type AssistantEventScope<TEvent extends AssistantEventName> =\n  | \"*\"\n  | EventSource<TEvent>\n  | (EventSource<TEvent> extends ClientNames\n      ? AncestorsOf<EventSource<TEvent>>\n      : never);\n\n// --- Selection & Callbacks ---\n\nexport type AssistantEventSelector<TEvent extends AssistantEventName> =\n  | TEvent\n  | { scope: AssistantEventScope<TEvent>; event: TEvent };\n\nexport const normalizeEventSelector = <TEvent extends AssistantEventName>(\n  selector: AssistantEventSelector<TEvent>,\n) => {\n  if (typeof selector === \"string\") {\n    const source = selector.split(\".\")[0] as AssistantEventScope<TEvent>;\n    return { scope: source, event: selector };\n  }\n  return { scope: selector.scope, event: selector.event };\n};\n\nexport type AssistantEventCallback<TEvent extends AssistantEventName> = (\n  payload: AssistantEventPayload[TEvent],\n) => void;\n", "import { resource } from \"@assistant-ui/tap\";\nimport type { ClientStack } from \"./tap-client-stack-context\";\nimport type {\n  AssistantEventName,\n  AssistantEventPayload,\n} from \"../types/events\";\nimport { Unsubscribe } from \"../types/client\";\nimport { tapConst } from \"@assistant-ui/tap\";\n\ntype InternalCallback = (payload: unknown, clientStack: ClientStack) => void;\n\nexport type NotificationManager = {\n  on<TEvent extends AssistantEventName>(\n    event: TEvent,\n    callback: (\n      payload: AssistantEventPayload[TEvent],\n      clientStack: ClientStack,\n    ) => void,\n  ): Unsubscribe;\n  emit<TEvent extends Exclude<AssistantEventName, \"*\">>(\n    event: TEvent,\n    payload: AssistantEventPayload[TEvent],\n    clientStack: ClientStack,\n  ): void;\n  subscribe(callback: () => void): Unsubscribe;\n  notifySubscribers(): void;\n};\n\nexport const NotificationManager = resource((): NotificationManager => {\n  return tapConst(() => {\n    const listeners = new Map<string, Set<InternalCallback>>();\n    const wildcardListeners = new Set<InternalCallback>();\n    const subscribers = new Set<() => void>();\n\n    return {\n      on(event, callback) {\n        const cb = callback as InternalCallback;\n        if (event === \"*\") {\n          wildcardListeners.add(cb);\n          return () => wildcardListeners.delete(cb);\n        }\n\n        let set = listeners.get(event);\n        if (!set) {\n          set = new Set();\n          listeners.set(event, set);\n        }\n        set.add(cb);\n\n        return () => {\n          set!.delete(cb);\n          if (set!.size === 0) listeners.delete(event);\n        };\n      },\n\n      emit(event, payload, clientStack) {\n        const eventListeners = listeners.get(event);\n        if (!eventListeners && wildcardListeners.size === 0) return;\n\n        queueMicrotask(() => {\n          const errors = [];\n          if (eventListeners) {\n            for (const cb of eventListeners) {\n              try {\n                cb(payload, clientStack);\n              } catch (e) {\n                errors.push(e);\n              }\n            }\n          }\n          if (wildcardListeners.size > 0) {\n            const wrapped = { event, payload };\n            for (const cb of wildcardListeners) {\n              try {\n                cb(wrapped, clientStack);\n              } catch (e) {\n                errors.push(e);\n              }\n            }\n          }\n\n          if (errors.length > 0) {\n            if (errors.length === 1) {\n              throw errors[0];\n            } else {\n              for (const error of errors) {\n                console.error(error);\n              }\n              throw new AggregateError(\n                errors,\n                \"Errors occurred during event emission\",\n              );\n            }\n          }\n        });\n      },\n\n      subscribe(callback) {\n        subscribers.add(callback);\n        return () => subscribers.delete(callback);\n      },\n\n      notifySubscribers() {\n        for (const cb of subscribers) {\n          try {\n            cb();\n          } catch (e) {\n            console.error(\"NotificationManager: subscriber callback error\", e);\n          }\n        }\n      },\n    };\n  }, []);\n});\n", "import {\n  createResourceContext,\n  tap,\n  withContextProvider,\n  tapEffectEvent,\n} from \"@assistant-ui/tap\";\nimport type {\n  AssistantEventName,\n  AssistantEventPayload,\n} from \"../types/events\";\nimport type { AssistantClient } from \"../types/client\";\nimport { tapClientStack, type ClientStack } from \"./tap-client-stack-context\";\n\ntype EmitFn = <TEvent extends Exclude<AssistantEventName, \"*\">>(\n  event: TEvent,\n  payload: AssistantEventPayload[TEvent],\n  clientStack: ClientStack,\n) => void;\n\nexport type AssistantTapContextValue = {\n  clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  emit: EmitFn;\n};\n\nconst AssistantTapContext =\n  createResourceContext<AssistantTapContextValue | null>(null);\n\nexport const withAssistantTapContextProvider = <TResult>(\n  value: AssistantTapContextValue,\n  fn: () => TResult,\n) => {\n  return withContextProvider(AssistantTapContext, value, fn);\n};\n\nconst tapAssistantTapContext = () => {\n  const ctx = tap(AssistantTapContext);\n  if (!ctx) throw new Error(\"AssistantTapContext is not available\");\n\n  return ctx;\n};\n\nexport const tapAssistantClientRef = () => {\n  return tapAssistantTapContext().clientRef;\n};\n\nexport const tapAssistantEmit = () => {\n  const { emit } = tapAssistantTapContext();\n  const clientStack = tapClientStack();\n\n  return tapEffectEvent(\n    <TEvent extends Exclude<AssistantEventName, \"*\">>(\n      event: TEvent,\n      payload: AssistantEventPayload[TEvent],\n    ) => {\n      emit(event, payload, clientStack);\n    },\n  );\n};\n", "\"use client\";\n\nimport { useResource } from \"@assistant-ui/tap/react\";\nimport {\n  resource,\n  tapMemo,\n  tapResources,\n  tapEffectEvent,\n  tapInlineResource,\n  tapEffect,\n  tapRef,\n  tapResource,\n  withKey,\n  tapSubscribableResource,\n} from \"@assistant-ui/tap\";\nimport type {\n  AssistantClient,\n  AssistantClientAccessor,\n  ClientNames,\n  ClientElement,\n  ClientMeta,\n} from \"./types/client\";\nimport { Derived, DerivedElement } from \"./Derived\";\nimport {\n  useAssistantContextValue,\n  DefaultAssistantClient,\n  createRootAssistantClient,\n} from \"./utils/react-assistant-context\";\nimport {\n  DerivedClients,\n  RootClients,\n  tapSplitClients,\n} from \"./utils/splitClients\";\nimport {\n  normalizeEventSelector,\n  type AssistantEventName,\n  type AssistantEventCallback,\n  type AssistantEventSelector,\n} from \"./types/events\";\nimport { NotificationManager } from \"./utils/NotificationManager\";\nimport { withAssistantTapContextProvider } from \"./utils/tap-assistant-context\";\nimport { tapClientResource } from \"./tapClientResource\";\nimport { getClientIndex } from \"./utils/tap-client-stack-context\";\nimport {\n  PROXIED_ASSISTANT_STATE_SYMBOL,\n  createProxiedAssistantState,\n} from \"./utils/proxied-assistant-state\";\n\nconst tapShallowMemoArray = <T,>(array: readonly T[]) => {\n  // biome-ignore lint/correctness/useExhaustiveDependencies: shallow memo\n  return tapMemo(() => array, array);\n};\n\nconst RootClientResource = resource(\n  <K extends ClientNames>({\n    element,\n    emit,\n    clientRef,\n  }: {\n    element: ClientElement<K>;\n    emit: NotificationManager[\"emit\"];\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  }) => {\n    const { methods, state } = withAssistantTapContextProvider(\n      { clientRef, emit },\n      () => tapClientResource(element),\n    );\n    return tapMemo(() => ({ state, methods }), [methods, state]);\n  },\n);\n\nconst RootClientAccessorResource = resource(\n  <K extends ClientNames>({\n    element,\n    notifications,\n    clientRef,\n    name,\n  }: {\n    element: ClientElement<K>;\n    notifications: NotificationManager;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n    name: K;\n  }): AssistantClientAccessor<K> => {\n    const store = tapSubscribableResource(\n      RootClientResource({ element, emit: notifications.emit, clientRef }),\n    );\n\n    tapEffect(() => {\n      return store.subscribe(notifications.notifySubscribers);\n    }, [store, notifications]);\n\n    return tapMemo(() => {\n      const clientFunction = () => store.getValue().methods;\n      Object.defineProperties(clientFunction, {\n        source: {\n          value: \"root\" as const,\n          writable: false,\n        },\n        query: {\n          value: {} as Record<string, never>,\n          writable: false,\n        },\n        name: {\n          value: name,\n          configurable: true,\n        },\n      });\n      return clientFunction as AssistantClientAccessor<K>;\n    }, [store, name]);\n  },\n);\n\nconst NoOpRootClientsAccessorsResource = resource(() => {\n  return tapMemo(\n    () => ({\n      clients: [] as AssistantClientAccessor<ClientNames>[],\n      subscribe: undefined,\n      on: undefined,\n    }),\n    [],\n  );\n});\n\nconst RootClientsAccessorsResource = resource(\n  ({\n    clients: inputClients,\n    clientRef,\n  }: {\n    clients: RootClients;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  }) => {\n    const notifications = tapInlineResource(NotificationManager());\n\n    tapEffect(\n      () => clientRef.parent.subscribe(notifications.notifySubscribers),\n      [clientRef, notifications],\n    );\n\n    const results = tapShallowMemoArray(\n      tapResources(\n        () =>\n          Object.keys(inputClients).map((key) =>\n            withKey(\n              key,\n              RootClientAccessorResource({\n                element: inputClients[key as keyof typeof inputClients]!,\n                notifications,\n                clientRef,\n                name: key as keyof typeof inputClients,\n              }),\n            ),\n          ),\n        [inputClients, notifications, clientRef],\n      ),\n    );\n\n    return tapMemo(() => {\n      return {\n        clients: results,\n        subscribe: notifications.subscribe,\n        on: function <TEvent extends AssistantEventName>(\n          this: AssistantClient,\n          selector: AssistantEventSelector<TEvent>,\n          callback: AssistantEventCallback<TEvent>,\n        ) {\n          if (!this) {\n            throw new Error(\n              \"const { on } = useAui() is not supported. Use aui.on() instead.\",\n            );\n          }\n\n          const { scope, event } = normalizeEventSelector(selector);\n\n          if (scope !== \"*\") {\n            const source = this[scope as ClientNames].source;\n            if (source === null) {\n              throw new Error(\n                `Scope \"${scope}\" is not available. Use { scope: \"*\", event: \"${event}\" } to listen globally.`,\n              );\n            }\n          }\n\n          const localUnsub = notifications.on(event, (payload, clientStack) => {\n            if (scope === \"*\") {\n              callback(payload);\n              return;\n            }\n\n            const scopeClient = this[scope as ClientNames]();\n            const index = getClientIndex(scopeClient);\n            if (scopeClient === clientStack[index]) {\n              callback(payload);\n            }\n          });\n          if (\n            scope !== \"*\" &&\n            clientRef.parent[scope as ClientNames].source === null\n          )\n            return localUnsub;\n\n          const parentUnsub = clientRef.parent.on(selector, callback);\n\n          return () => {\n            localUnsub();\n            parentUnsub();\n          };\n        },\n      };\n    }, [results, notifications, clientRef]);\n  },\n);\n\ntype MetaMemo<K extends ClientNames> = {\n  meta?: ClientMeta<K>;\n  dep?: unknown;\n};\n\nconst getMeta = <K extends ClientNames>(\n  props: Derived.Props<K>,\n  clientRef: { parent: AssistantClient; current: AssistantClient | null },\n  memo: MetaMemo<K>,\n): ClientMeta<K> => {\n  if (\"source\" in props && \"query\" in props) return props;\n  if (memo.dep === props) return memo.meta!;\n  const meta = props.getMeta(clientRef.current!);\n  memo.meta = meta;\n  memo.dep = props;\n  return meta;\n};\n\nconst DerivedClientAccessorResource = resource(\n  <K extends ClientNames>({\n    element,\n    clientRef,\n    name,\n  }: {\n    element: DerivedElement<K>;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n    name: K;\n  }) => {\n    const get = tapEffectEvent(() => element.props);\n\n    return tapMemo(() => {\n      const clientFunction = () => get().get(clientRef.current!);\n      const metaMemo = {};\n      Object.defineProperties(clientFunction, {\n        source: {\n          get: () => getMeta(get(), clientRef, metaMemo).source,\n        },\n        query: {\n          get: () => getMeta(get(), clientRef, metaMemo).query,\n        },\n        name: {\n          value: name,\n          configurable: true,\n        },\n      });\n      return clientFunction as AssistantClientAccessor<K>;\n    }, [clientRef, name]);\n  },\n);\n\nconst DerivedClientsAccessorsResource = resource(\n  ({\n    clients,\n    clientRef,\n  }: {\n    clients: DerivedClients;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  }) => {\n    return tapShallowMemoArray(\n      tapResources(\n        () =>\n          Object.keys(clients).map((key) =>\n            withKey(\n              key,\n              DerivedClientAccessorResource({\n                element: clients[key as keyof typeof clients]!,\n                clientRef,\n                name: key as keyof typeof clients,\n              }),\n            ),\n          ),\n        [clients, clientRef],\n      ),\n    );\n  },\n);\n\n/**\n * Resource that creates an extended AssistantClient.\n */\nexport const AssistantClientResource = resource(\n  ({\n    parent,\n    clients,\n  }: {\n    parent: AssistantClient;\n    clients: useAui.Props;\n  }): AssistantClient => {\n    const { rootClients, derivedClients } = tapSplitClients(clients, parent);\n\n    const clientRef = tapRef({\n      parent: parent,\n      current: null as AssistantClient | null,\n    }).current;\n\n    tapEffect(() => {\n      // if (clientRef.current && clientRef.current !== client)\n      //   throw new Error(\"clientRef.current !== client\");\n\n      clientRef.current = client;\n    });\n\n    const rootFields = tapResource(\n      Object.keys(rootClients).length > 0\n        ? RootClientsAccessorsResource({ clients: rootClients, clientRef })\n        : NoOpRootClientsAccessorsResource(),\n    );\n\n    const derivedFields = tapInlineResource(\n      DerivedClientsAccessorsResource({ clients: derivedClients, clientRef }),\n    );\n\n    const client = tapMemo(() => {\n      // Swap DefaultAssistantClient -> createRootAssistantClient at root to change error message\n      const proto =\n        parent === DefaultAssistantClient\n          ? createRootAssistantClient()\n          : parent;\n\n      const client = Object.create(proto) as AssistantClient;\n      Object.assign(client, {\n        subscribe: rootFields.subscribe ?? parent.subscribe,\n        on: rootFields.on ?? parent.on,\n        [PROXIED_ASSISTANT_STATE_SYMBOL]: createProxiedAssistantState(client),\n      });\n\n      for (const field of rootFields.clients) {\n        (client as any)[field.name] = field;\n      }\n      for (const field of derivedFields) {\n        (client as any)[field.name] = field;\n      }\n\n      return client;\n    }, [parent, rootFields, derivedFields]);\n\n    if (clientRef.current === null) {\n      clientRef.current = client;\n    }\n\n    return client;\n  },\n);\n\nexport namespace useAui {\n  export type Props = {\n    [K in ClientNames]?: ClientElement<K> | DerivedElement<K>;\n  };\n}\n\nexport function useAui(): AssistantClient;\nexport function useAui(clients: useAui.Props): AssistantClient;\nexport function useAui(\n  clients: useAui.Props,\n  config: { parent: null | AssistantClient },\n): AssistantClient;\n/** @deprecated This API is highly experimental and may be changed in a minor release */\nexport function useAui(\n  clients?: useAui.Props,\n  { parent }: { parent: null | AssistantClient } = {\n    parent: useAssistantContextValue(),\n  },\n): AssistantClient {\n  if (clients) {\n    return useResource(\n      AssistantClientResource({\n        parent: parent ?? DefaultAssistantClient,\n        clients,\n      }),\n    );\n  }\n  if (parent === null)\n    throw new Error(\"received null parent, this usage is not allowed\");\n  return parent;\n}\n", "import { useSyncExternalStore, useDebugValue } from \"react\";\nimport type { AssistantState } from \"./types/client\";\nimport { useAui } from \"./useAui\";\nimport { getProxiedAssistantState } from \"./utils/proxied-assistant-state\";\n\n/**\n * Hook to access a slice of the assistant state with automatic subscription\n *\n * @param selector - Function to select a slice of the state\n * @returns The selected state slice\n *\n * @example\n * ```typescript\n * const aui = useAui({\n *   foo: RootScope({ ... }),\n * });\n *\n * const bar = useAuiState((state) => state.foo.bar);\n * ```\n */\nexport const useAuiState = <T,>(selector: (state: AssistantState) => T): T => {\n  const aui = useAui();\n  const proxiedState = getProxiedAssistantState(aui);\n\n  const slice = useSyncExternalStore(\n    aui.subscribe,\n    () => selector(proxiedState),\n    () => selector(proxiedState),\n  );\n\n  if (slice === proxiedState) {\n    throw new Error(\n      \"You tried to return the entire AssistantState. This is not supported due to technical limitations.\",\n    );\n  }\n\n  useDebugValue(slice);\n\n  return slice;\n};\n", "import { useEffect } from \"react\";\nimport { useEffectEvent } from \"use-effect-event\";\nimport { useAui } from \"./useAui\";\nimport type {\n  AssistantEventName,\n  AssistantEventCallback,\n  AssistantEventSelector,\n} from \"./types/events\";\nimport { normalizeEventSelector } from \"./types/events\";\n\nexport const useAuiEvent = <TEvent extends AssistantEventName>(\n  selector: AssistantEventSelector<TEvent>,\n  callback: AssistantEventCallback<TEvent>,\n) => {\n  const aui = useAui();\n  const callbackRef = useEffectEvent(callback);\n\n  const { scope, event } = normalizeEventSelector(selector);\n  useEffect(\n    () => aui.on({ scope, event }, callbackRef),\n    [aui, scope, event, callbackRef],\n  );\n};\n", "import React from 'react'\n\nconst context = React.createContext(true)\n\nfunction forbiddenInRender() {\n  throw new Error(\"A function wrapped in useEffectEvent can't be called during rendering.\")\n}\n\n// We can only check if we're in a render phase, beyond initial render, in React 19, with its `React.use` hook.\nconst isInvalidExecutionContextForEventFunction =\n  'use' in React\n    ? () => {\n        // There's no way to check if we're in a render phase from outside of React, the API used by useEffectEvent is private: https://github.com/facebook/react/blob/a00ca6f6b51e46a0ccec54a2231bfe7a1ed9ae1d/packages/react-reconciler/src/ReactFiberWorkLoop.js#L1785-L1788\n        // So to emulate the same behavior, we call the use hook and if it doesn't throw, we're in a render phase.\n        try {\n          return React.use(context)\n        } catch {\n          return false\n        }\n      }\n    : () => false\n\n/**\n * This is a ponyfill of the upcoming `useEffectEvent` hook that'll arrive in React 19.\n * https://19.react.dev/learn/separating-events-from-effects#declaring-an-effect-event\n * To learn more about the ponyfill itself, see: https://blog.bitsrc.io/a-look-inside-the-useevent-polyfill-from-the-new-react-docs-d1c4739e8072\n * @public\n */\nexport function useEffectEvent<const T extends (...args: any[]) => void>(fn: T): T {\n  /**\n   * For both React 18 and 19 we set the ref to the forbiddenInRender function, to catch illegal calls to the function during render.\n   * Once the insertion effect runs, we set the ref to the actual function.\n   */\n  const ref = React.useRef(forbiddenInRender as T)\n\n  React.useInsertionEffect(() => {\n    ref.current = fn\n  }, [fn])\n\n  return ((...args: any) => {\n    // Performs a similar check to what React does for `useEffectEvent`:\n    // 1. https://github.com/facebook/react/blob/b7e2de632b2a160bc09edda1fbb9b8f85a6914e8/packages/react-reconciler/src/ReactFiberHooks.js#L2729-L2733\n    // 2. https://github.com/facebook/react/blob/b7e2de632b2a160bc09edda1fbb9b8f85a6914e8/packages/react-reconciler/src/ReactFiberHooks.js#L2746C9-L2750\n    if (isInvalidExecutionContextForEventFunction()) {\n      forbiddenInRender()\n    }\n\n    const latestFn = ref.current!\n    return latestFn(...args)\n  }) as T\n}\n", "\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"./useAuiState\";\nimport type { AssistantState } from \"./types/client\";\n\nexport namespace AuiIf {\n  export type Props = PropsWithChildren<{ condition: AuiIf.Condition }>;\n  export type Condition = (state: AssistantState) => boolean;\n}\n\nexport const AuiIf: FC<AuiIf.Props> = ({ children, condition }) => {\n  const result = useAuiState(condition);\n  return result ? children : null;\n};\n\nAuiIf.displayName = \"AuiIf\";\n", "import {\n  tapInlineResource,\n  tapMemo,\n  tapResources,\n  type ResourceElement,\n} from \"@assistant-ui/tap\";\nimport type { ClientMethods, ClientOutputOf } from \"./types/client\";\nimport { ClientResource } from \"./tapClientResource\";\nimport { wrapperResource } from \"./wrapperResource\";\n\nconst ClientResourceWithKey = wrapperResource(\n  <TState, TMethods extends ClientMethods>(\n    el: ResourceElement<ClientOutputOf<TState, TMethods>>,\n  ) => {\n    if (el.key === undefined) {\n      throw new Error(\"tapClientResource: Element has no key\");\n    }\n    return tapInlineResource(ClientResource(el)) as ClientOutputOf<\n      TState,\n      TMethods\n    > & { key: string | number };\n  },\n);\n\nexport function tapClientLookup<TState, TMethods extends ClientMethods>(\n  getElements: () => readonly ResourceElement<\n    ClientOutputOf<TState, TMethods>\n  >[],\n  getElementsDeps: readonly unknown[],\n): {\n  state: TState[];\n  get: (lookup: { index: number } | { key: string }) => TMethods;\n} {\n  const resources = tapResources(\n    () => getElements().map((el) => ClientResourceWithKey(el)),\n    // biome-ignore lint/correctness/useExhaustiveDependencies: getElementsDeps is passed through from caller\n    getElementsDeps,\n  );\n\n  const keys = tapMemo(() => Object.keys(resources), [resources]);\n\n  // For arrays, track element key -> index mapping\n  const keyToIndex = tapMemo(() => {\n    return resources.reduce(\n      (acc, resource, index) => {\n        acc[resource.key] = index;\n        return acc;\n      },\n      {} as Record<string, number>,\n    );\n  }, [resources]);\n\n  const state = tapMemo(() => {\n    return resources.map((r) => r.state);\n  }, [resources]);\n\n  return {\n    state,\n    get: (lookup: { index: number } | { key: string }) => {\n      if (\"index\" in lookup) {\n        if (lookup.index < 0 || lookup.index >= keys.length) {\n          throw new Error(\n            `tapClientLookup: Index ${lookup.index} out of bounds (length: ${keys.length})`,\n          );\n        }\n        return resources[lookup.index]!.methods;\n      }\n\n      const index = keyToIndex[lookup.key];\n      if (index === undefined) {\n        throw new Error(`tapClientLookup: Key \"${lookup.key}\" not found`);\n      }\n      return resources[index]!.methods;\n    },\n  };\n}\n", "\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { BaseAssistantRuntimeCore } from \"../core/BaseAssistantRuntimeCore\";\nimport { RemoteThreadListThreadListRuntimeCore } from \"./RemoteThreadListThreadListRuntimeCore\";\nimport { RemoteThreadListOptions } from \"./types\";\nimport { AssistantRuntimeImpl } from \"../../../internal\";\nimport { AssistantRuntimeCore } from \"../core/AssistantRuntimeCore\";\nimport { AssistantRuntime } from \"../../runtime/AssistantRuntime\";\nimport { useAui } from \"@assistant-ui/store\";\n\nclass RemoteThreadListRuntimeCore\n  extends BaseAssistantRuntimeCore\n  implements AssistantRuntimeCore\n{\n  public readonly threads;\n\n  constructor(options: RemoteThreadListOptions) {\n    super();\n    this.threads = new RemoteThreadListThreadListRuntimeCore(\n      options,\n      this._contextProvider,\n    );\n  }\n\n  public get RenderComponent() {\n    return this.threads.__internal_RenderComponent;\n  }\n}\n\nconst useRemoteThreadListRuntimeImpl = (\n  options: RemoteThreadListOptions,\n): AssistantRuntime => {\n  const [runtime] = useState(() => new RemoteThreadListRuntimeCore(options));\n  useEffect(() => {\n    runtime.threads.__internal_setOptions(options);\n    runtime.threads.__internal_load();\n  }, [runtime, options]);\n  return useMemo(() => new AssistantRuntimeImpl(runtime), [runtime]);\n};\n\nexport const useRemoteThreadListRuntime = (\n  options: RemoteThreadListOptions,\n): AssistantRuntime => {\n  const aui = useAui();\n  const isNested = aui.threadListItem.source !== null;\n\n  if (isNested) {\n    if (!options.allowNesting) {\n      throw new Error(\n        \"useRemoteThreadListRuntime cannot be nested inside another RemoteThreadListRuntime. \" +\n          \"Set allowNesting: true to allow nesting (the inner runtime will become a no-op).\",\n      );\n    }\n\n    // If allowNesting is true and already inside a thread list context,\n    // just call the runtimeHook directly (no-op behavior)\n    return options.runtimeHook();\n  }\n\n  return useRemoteThreadListRuntimeImpl(options);\n};\n", "import { Unsubscribe } from \"../types/Unsubscribe\";\nimport { Tool } from \"assistant-stream\";\n\nexport type LanguageModelV1CallSettings = {\n  maxTokens?: number;\n  temperature?: number;\n  topP?: number;\n  presencePenalty?: number;\n  frequencyPenalty?: number;\n  seed?: number;\n  headers?: Record<string, string | undefined>;\n};\n\nexport type LanguageModelConfig = {\n  apiKey?: string;\n  baseUrl?: string;\n  modelName?: string;\n};\n\nexport type ModelContext = {\n  priority?: number | undefined;\n  system?: string | undefined;\n  tools?: Record<string, Tool<any, any>> | undefined;\n  callSettings?: LanguageModelV1CallSettings | undefined;\n  config?: LanguageModelConfig | undefined;\n};\n\nexport type ModelContextProvider = {\n  getModelContext: () => ModelContext;\n  subscribe?: (callback: () => void) => Unsubscribe;\n};\n\nexport const mergeModelContexts = (\n  configSet: Set<ModelContextProvider>,\n): ModelContext => {\n  const configs = Array.from(configSet)\n    .map((c) => c.getModelContext())\n    .sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0));\n\n  return configs.reduce((acc, config) => {\n    if (config.system) {\n      if (acc.system) {\n        // TODO should the separator be configurable?\n        acc.system += `\\n\\n${config.system}`;\n      } else {\n        acc.system = config.system;\n      }\n    }\n    if (config.tools) {\n      for (const [name, tool] of Object.entries(config.tools)) {\n        const existing = acc.tools?.[name];\n        if (existing && existing !== tool) {\n          throw new Error(\n            `You tried to define a tool with the name ${name}, but it already exists.`,\n          );\n        }\n\n        if (!acc.tools) acc.tools = {};\n        acc.tools[name] = tool;\n      }\n    }\n    if (config.config) {\n      acc.config = {\n        ...acc.config,\n        ...config.config,\n      };\n    }\n    if (config.callSettings) {\n      acc.callSettings = {\n        ...acc.callSettings,\n        ...config.callSettings,\n      };\n    }\n    return acc;\n  }, {} as ModelContext);\n};\n", "import {\n  type ModelContextProvider,\n  mergeModelContexts,\n} from \"../model-context/ModelContextTypes\";\n\nexport class CompositeContextProvider implements ModelContextProvider {\n  private _providers = new Set<ModelContextProvider>();\n\n  getModelContext() {\n    return mergeModelContexts(this._providers);\n  }\n\n  registerModelContextProvider(provider: ModelContextProvider) {\n    this._providers.add(provider);\n    const unsubscribe = provider.subscribe?.(() => {\n      this.notifySubscribers();\n    });\n    this.notifySubscribers();\n    return () => {\n      this._providers.delete(provider);\n      unsubscribe?.();\n      this.notifySubscribers();\n    };\n  }\n\n  private _subscribers = new Set<() => void>();\n\n  notifySubscribers() {\n    for (const callback of this._subscribers) callback();\n  }\n\n  subscribe(callback: () => void) {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n}\n", "import { type ModelContextProvider } from \"../../../model-context/ModelContextTypes\";\nimport type { Unsubscribe } from \"../../../types/Unsubscribe\";\nimport type { AssistantRuntimeCore } from \"./AssistantRuntimeCore\";\nimport { CompositeContextProvider } from \"../../../utils/CompositeContextProvider\";\nimport { ThreadListRuntimeCore } from \"./ThreadListRuntimeCore\";\n\nexport abstract class BaseAssistantRuntimeCore implements AssistantRuntimeCore {\n  protected readonly _contextProvider = new CompositeContextProvider();\n  public abstract get threads(): ThreadListRuntimeCore;\n\n  public registerModelContextProvider(\n    provider: ModelContextProvider,\n  ): Unsubscribe {\n    return this._contextProvider.registerModelContextProvider(provider);\n  }\n\n  public getModelContextProvider(): ModelContextProvider {\n    return this._contextProvider;\n  }\n}\n", "export type { ThreadRuntimeCore } from \"./legacy-runtime/runtime-cores/core/ThreadRuntimeCore\";\nexport type { ThreadListRuntimeCore } from \"./legacy-runtime/runtime-cores/core/ThreadListRuntimeCore\";\nexport { DefaultThreadComposerRuntimeCore } from \"./legacy-runtime/runtime-cores/composer/DefaultThreadComposerRuntimeCore\";\nexport { CompositeContextProvider } from \"./utils/CompositeContextProvider\";\nexport { MessageRepository } from \"./legacy-runtime/runtime-cores/utils/MessageRepository\";\nexport { BaseAssistantRuntimeCore } from \"./legacy-runtime/runtime-cores/core/BaseAssistantRuntimeCore\";\nexport { generateId } from \"./utils/idUtils\";\nexport { AssistantRuntimeImpl } from \"./legacy-runtime/runtime/AssistantRuntime\";\nexport {\n  ThreadRuntimeImpl,\n  type ThreadRuntimeCoreBinding,\n  type ThreadListItemRuntimeBinding,\n} from \"./legacy-runtime/runtime/ThreadRuntime\";\nexport { fromThreadMessageLike } from \"./legacy-runtime/runtime-cores/external-store/ThreadMessageLike\";\nexport { getAutoStatus } from \"./legacy-runtime/runtime-cores/external-store/auto-status\";\nexport { splitLocalRuntimeOptions } from \"./legacy-runtime/runtime-cores/local/LocalRuntimeOptions\";\nexport {\n  useToolInvocations,\n  type ToolExecutionStatus,\n} from \"./legacy-runtime/runtime-cores/assistant-transport/useToolInvocations\";\n\nexport * from \"./utils/smooth\";\n", "import { Unsubscribe } from \"../../../types\";\n\nexport class BaseSubscribable {\n  private _subscribers = new Set<() => void>();\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n\n  public waitForUpdate() {\n    return new Promise<void>((resolve) => {\n      const unsubscribe = this.subscribe(() => {\n        unsubscribe();\n        resolve();\n      });\n    });\n  }\n\n  protected _notifySubscribers() {\n    const errors = [];\n    for (const callback of this._subscribers) {\n      try {\n        callback();\n      } catch (error) {\n        errors.push(error);\n      }\n    }\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        for (const error of errors) {\n          console.error(error);\n        }\n        throw new AggregateError(errors);\n      }\n    }\n  }\n}\n", "import type {\n  Attachment,\n  CompleteAttachment,\n  PendingAttachment,\n} from \"../../../types/AttachmentTypes\";\nimport type { AppendMessage, Unsubscribe } from \"../../../types\";\nimport type { AttachmentAdapter } from \"../adapters/attachment\";\nimport type {\n  ComposerRuntimeCore,\n  ComposerRuntimeEventType,\n  DictationState,\n} from \"../core/ComposerRuntimeCore\";\nimport type { MessageRole, RunConfig } from \"../../../types/AssistantTypes\";\nimport { BaseSubscribable } from \"../remote-thread-list/BaseSubscribable\";\nimport type { DictationAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\n\nconst isAttachmentComplete = (a: Attachment): a is CompleteAttachment =>\n  a.status.type === \"complete\";\n\nexport abstract class BaseComposerRuntimeCore\n  extends BaseSubscribable\n  implements ComposerRuntimeCore\n{\n  public readonly isEditing = true;\n\n  protected abstract getAttachmentAdapter(): AttachmentAdapter | undefined;\n  protected abstract getDictationAdapter(): DictationAdapter | undefined;\n\n  public get attachmentAccept(): string {\n    return this.getAttachmentAdapter()?.accept ?? \"*\";\n  }\n\n  private _attachments: readonly Attachment[] = [];\n  public get attachments() {\n    return this._attachments;\n  }\n\n  protected setAttachments(value: readonly Attachment[]) {\n    this._attachments = value;\n    this._notifySubscribers();\n  }\n\n  public abstract get canCancel(): boolean;\n\n  public get isEmpty() {\n    return !this.text.trim() && !this.attachments.length;\n  }\n\n  private _text = \"\";\n\n  get text() {\n    return this._text;\n  }\n\n  private _role: MessageRole = \"user\";\n\n  get role() {\n    return this._role;\n  }\n\n  private _runConfig: RunConfig = {};\n\n  get runConfig() {\n    return this._runConfig;\n  }\n\n  public setText(value: string) {\n    if (this._text === value) return;\n\n    this._text = value;\n    // When dictation is active and the user manually edits the composer text,\n    // treat the new text as the updated base so speech results are appended\n    // instead of overwriting manual edits.\n    if (this._dictation) {\n      this._dictationBaseText = value;\n      this._currentInterimText = \"\";\n      const { status, inputDisabled } = this._dictation;\n      this._dictation = inputDisabled ? { status, inputDisabled } : { status };\n    }\n    this._notifySubscribers();\n  }\n\n  public setRole(role: MessageRole) {\n    if (this._role === role) return;\n\n    this._role = role;\n    this._notifySubscribers();\n  }\n\n  public setRunConfig(runConfig: RunConfig) {\n    if (this._runConfig === runConfig) return;\n\n    this._runConfig = runConfig;\n    this._notifySubscribers();\n  }\n\n  private _emptyTextAndAttachments() {\n    this._attachments = [];\n    this._text = \"\";\n    this._notifySubscribers();\n  }\n\n  private async _onClearAttachments() {\n    const adapter = this.getAttachmentAdapter();\n    if (adapter) {\n      await Promise.all(this._attachments.map((a) => adapter.remove(a)));\n    }\n  }\n\n  public async reset() {\n    if (\n      this._attachments.length === 0 &&\n      this._text === \"\" &&\n      this._role === \"user\" &&\n      Object.keys(this._runConfig).length === 0\n    ) {\n      return;\n    }\n\n    this._role = \"user\";\n    this._runConfig = {};\n\n    const task = this._onClearAttachments();\n    this._emptyTextAndAttachments();\n    await task;\n  }\n\n  public async clearAttachments() {\n    const task = this._onClearAttachments();\n    this.setAttachments([]);\n\n    await task;\n  }\n\n  public async send() {\n    if (this._dictationSession) {\n      this._dictationSession.cancel();\n      this._cleanupDictation();\n    }\n\n    const adapter = this.getAttachmentAdapter();\n    const attachments =\n      adapter && this.attachments.length > 0\n        ? Promise.all(\n            this.attachments.map(async (a) => {\n              if (isAttachmentComplete(a)) return a;\n              const result = await adapter.send(a);\n              return result as CompleteAttachment;\n            }),\n          )\n        : [];\n\n    const text = this.text;\n    this._emptyTextAndAttachments();\n    const message: Omit<AppendMessage, \"parentId\" | \"sourceId\"> = {\n      createdAt: new Date(),\n      role: this.role,\n      content: text ? [{ type: \"text\", text }] : [],\n      attachments: await attachments,\n      runConfig: this.runConfig,\n      metadata: { custom: {} },\n    };\n\n    this.handleSend(message);\n    this._notifyEventSubscribers(\"send\");\n  }\n\n  public cancel() {\n    this.handleCancel();\n  }\n\n  protected abstract handleSend(\n    message: Omit<AppendMessage, \"parentId\" | \"sourceId\">,\n  ): void;\n  protected abstract handleCancel(): void;\n\n  async addAttachment(file: File) {\n    const adapter = this.getAttachmentAdapter();\n    if (!adapter) throw new Error(\"Attachments are not supported\");\n\n    const upsertAttachment = (a: PendingAttachment) => {\n      const idx = this._attachments.findIndex(\n        (attachment) => attachment.id === a.id,\n      );\n      if (idx !== -1)\n        this._attachments = [\n          ...this._attachments.slice(0, idx),\n          a,\n          ...this._attachments.slice(idx + 1),\n        ];\n      else {\n        this._attachments = [...this._attachments, a];\n      }\n\n      this._notifySubscribers();\n    };\n\n    const promiseOrGenerator = adapter.add({ file });\n    if (Symbol.asyncIterator in promiseOrGenerator) {\n      for await (const r of promiseOrGenerator) {\n        upsertAttachment(r);\n      }\n    } else {\n      upsertAttachment(await promiseOrGenerator);\n    }\n\n    this._notifyEventSubscribers(\"attachmentAdd\");\n    this._notifySubscribers();\n  }\n\n  async removeAttachment(attachmentId: string) {\n    const adapter = this.getAttachmentAdapter();\n    if (!adapter) throw new Error(\"Attachments are not supported\");\n\n    const index = this._attachments.findIndex((a) => a.id === attachmentId);\n    if (index === -1) throw new Error(\"Attachment not found\");\n    const attachment = this._attachments[index]!;\n\n    await adapter.remove(attachment);\n\n    // this._attachments.toSpliced(index, 1); - not yet widely supported\n    this._attachments = [\n      ...this._attachments.slice(0, index),\n      ...this._attachments.slice(index + 1),\n    ];\n    this._notifySubscribers();\n  }\n\n  private _dictation: DictationState | undefined;\n  private _dictationSession: DictationAdapter.Session | undefined;\n  private _dictationUnsubscribes: Unsubscribe[] = [];\n  private _dictationBaseText = \"\";\n  private _currentInterimText = \"\";\n  private _dictationSessionIdCounter = 0;\n  private _activeDictationSessionId: number | undefined;\n  private _isCleaningDictation = false;\n\n  public get dictation(): DictationState | undefined {\n    return this._dictation;\n  }\n\n  private _isActiveSession(\n    sessionId: number,\n    session: DictationAdapter.Session,\n  ): boolean {\n    return (\n      this._activeDictationSessionId === sessionId &&\n      this._dictationSession === session\n    );\n  }\n\n  public startDictation(): void {\n    const adapter = this.getDictationAdapter();\n    if (!adapter) {\n      throw new Error(\"Dictation adapter not configured\");\n    }\n\n    if (this._dictationSession) {\n      for (const unsub of this._dictationUnsubscribes) {\n        unsub();\n      }\n      this._dictationUnsubscribes = [];\n      const oldSession = this._dictationSession;\n      oldSession.stop().catch(() => {});\n      this._dictationSession = undefined;\n    }\n\n    const inputDisabled = adapter.disableInputDuringDictation ?? false;\n\n    this._dictationBaseText = this._text;\n    this._currentInterimText = \"\";\n\n    const session = adapter.listen();\n    this._dictationSession = session;\n    const sessionId = ++this._dictationSessionIdCounter;\n    this._activeDictationSessionId = sessionId;\n    this._dictation = { status: session.status, inputDisabled };\n    this._notifySubscribers();\n\n    const unsubSpeech = session.onSpeech((result) => {\n      if (!this._isActiveSession(sessionId, session)) return;\n      const isFinal = result.isFinal !== false;\n\n      const needsSeparator =\n        this._dictationBaseText &&\n        !this._dictationBaseText.endsWith(\" \") &&\n        result.transcript;\n      const separator = needsSeparator ? \" \" : \"\";\n\n      if (isFinal) {\n        this._dictationBaseText =\n          this._dictationBaseText + separator + result.transcript;\n        this._currentInterimText = \"\";\n        this._text = this._dictationBaseText;\n\n        if (this._dictation) {\n          const { transcript: _, ...rest } = this._dictation;\n          this._dictation = rest;\n        }\n        this._notifySubscribers();\n      } else {\n        this._currentInterimText = separator + result.transcript;\n        this._text = this._dictationBaseText + this._currentInterimText;\n\n        if (this._dictation) {\n          this._dictation = {\n            ...this._dictation,\n            transcript: result.transcript,\n          };\n        }\n        this._notifySubscribers();\n      }\n    });\n    this._dictationUnsubscribes.push(unsubSpeech);\n\n    const unsubStart = session.onSpeechStart(() => {\n      if (!this._isActiveSession(sessionId, session)) return;\n\n      this._dictation = {\n        status: { type: \"running\" },\n        inputDisabled,\n        ...(this._dictation?.transcript && {\n          transcript: this._dictation.transcript,\n        }),\n      };\n      this._notifySubscribers();\n    });\n    this._dictationUnsubscribes.push(unsubStart);\n\n    const unsubEnd = session.onSpeechEnd(() => {\n      this._cleanupDictation({ sessionId });\n    });\n    this._dictationUnsubscribes.push(unsubEnd);\n\n    const statusInterval = setInterval(() => {\n      if (!this._isActiveSession(sessionId, session)) return;\n\n      if (session.status.type === \"ended\") {\n        this._cleanupDictation({ sessionId });\n      }\n    }, 100);\n    this._dictationUnsubscribes.push(() => clearInterval(statusInterval));\n  }\n\n  public stopDictation(): void {\n    if (!this._dictationSession) return;\n\n    const session = this._dictationSession;\n    const sessionId = this._activeDictationSessionId;\n    session.stop().finally(() => {\n      this._cleanupDictation({ sessionId });\n    });\n  }\n\n  private _cleanupDictation(options?: { sessionId: number | undefined }): void {\n    const isStaleSession =\n      options?.sessionId !== undefined &&\n      options.sessionId !== this._activeDictationSessionId;\n    if (isStaleSession || this._isCleaningDictation) return;\n\n    this._isCleaningDictation = true;\n    try {\n      for (const unsub of this._dictationUnsubscribes) {\n        unsub();\n      }\n      this._dictationUnsubscribes = [];\n      this._dictationSession = undefined;\n      this._activeDictationSessionId = undefined;\n      this._dictation = undefined;\n      this._dictationBaseText = \"\";\n      this._currentInterimText = \"\";\n      this._notifySubscribers();\n    } finally {\n      this._isCleaningDictation = false;\n    }\n  }\n\n  private _eventSubscribers = new Map<\n    ComposerRuntimeEventType,\n    Set<() => void>\n  >();\n\n  protected _notifyEventSubscribers(event: ComposerRuntimeEventType) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) return;\n\n    for (const callback of subscribers) callback();\n  }\n\n  public unstable_on(event: ComposerRuntimeEventType, callback: () => void) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) {\n      this._eventSubscribers.set(event, new Set([callback]));\n    } else {\n      subscribers.add(callback);\n    }\n\n    return () => {\n      const subscribers = this._eventSubscribers.get(event);\n      if (!subscribers) return;\n      subscribers.delete(callback);\n    };\n  }\n}\n", "import type { AppendMessage, PendingAttachment } from \"../../../types\";\nimport type { AttachmentAdapter } from \"../adapters/attachment\";\nimport type { DictationAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\nimport type { ThreadComposerRuntimeCore } from \"../core/ComposerRuntimeCore\";\nimport type { ThreadRuntimeCore } from \"../core/ThreadRuntimeCore\";\nimport { BaseComposerRuntimeCore } from \"./BaseComposerRuntimeCore\";\n\nexport class DefaultThreadComposerRuntimeCore\n  extends BaseComposerRuntimeCore\n  implements ThreadComposerRuntimeCore\n{\n  private _canCancel = false;\n  public get canCancel() {\n    return this._canCancel;\n  }\n\n  public override get attachments(): readonly PendingAttachment[] {\n    return super.attachments as readonly PendingAttachment[];\n  }\n\n  protected getAttachmentAdapter() {\n    return this.runtime.adapters?.attachments;\n  }\n\n  protected getDictationAdapter() {\n    return this.runtime.adapters?.dictation;\n  }\n\n  constructor(\n    private runtime: Omit<ThreadRuntimeCore, \"composer\"> & {\n      adapters?:\n        | {\n            attachments?: AttachmentAdapter | undefined;\n            dictation?: DictationAdapter | undefined;\n          }\n        | undefined;\n    },\n  ) {\n    super();\n    this.connect();\n  }\n\n  public connect() {\n    return this.runtime.subscribe(() => {\n      if (this.canCancel !== this.runtime.capabilities.cancel) {\n        this._canCancel = this.runtime.capabilities.cancel;\n        this._notifySubscribers();\n      }\n    });\n  }\n\n  public async handleSend(\n    message: Omit<AppendMessage, \"parentId\" | \"sourceId\">,\n  ) {\n    this.runtime.append({\n      ...(message as AppendMessage),\n      parentId: this.runtime.messages.at(-1)?.id ?? null,\n      sourceId: null,\n    });\n  }\n\n  public async handleCancel() {\n    this.runtime.cancelRun();\n  }\n}\n", "/* @ts-self-types=\"./index.d.ts\" */\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "import { customAlphabet } from \"nanoid/non-secure\";\n\nexport const generateId = customAlphabet(\n  \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  7,\n);\n\nconst optimisticPrefix = \"__optimistic__\";\nexport const generateOptimisticId = () => `${optimisticPrefix}${generateId()}`;\nexport const isOptimisticId = (id: string) => id.startsWith(optimisticPrefix);\n\nconst errorPrefix = \"__error__\";\nexport const generateErrorMessageId = () => `${errorPrefix}${generateId()}`;\nexport const isErrorMessageId = (id: string) => id.startsWith(errorPrefix);\n", "import { ReadonlyJSONValue } from \"assistant-stream/utils\";\nimport { MessageStatus } from \"../../../types\";\n\nconst symbolAutoStatus = Symbol(\"autoStatus\");\n\nconst AUTO_STATUS_RUNNING = Object.freeze(\n  Object.assign({ type: \"running\" as const }, { [symbolAutoStatus]: true }),\n);\nconst AUTO_STATUS_COMPLETE = Object.freeze(\n  Object.assign(\n    {\n      type: \"complete\" as const,\n      reason: \"unknown\" as const,\n    },\n    { [symbolAutoStatus]: true },\n  ),\n);\n\nconst AUTO_STATUS_PENDING = Object.freeze(\n  Object.assign(\n    {\n      type: \"requires-action\" as const,\n      reason: \"tool-calls\" as const,\n    },\n    { [symbolAutoStatus]: true },\n  ),\n);\n\nconst AUTO_STATUS_INTERRUPT = Object.freeze(\n  Object.assign(\n    {\n      type: \"requires-action\" as const,\n      reason: \"interrupt\" as const,\n    },\n    { [symbolAutoStatus]: true },\n  ),\n);\n\nexport const isAutoStatus = (status: MessageStatus) =>\n  (status as any)[symbolAutoStatus] === true;\n\nexport const getAutoStatus = (\n  isLast: boolean,\n  isRunning: boolean,\n  hasInterruptedToolCalls: boolean,\n  hasPendingToolCalls: boolean,\n  error?: ReadonlyJSONValue,\n): MessageStatus => {\n  if (isLast && error) {\n    return Object.assign(\n      {\n        type: \"incomplete\" as const,\n        reason: \"error\" as const,\n        error: error,\n      },\n      { [symbolAutoStatus]: true },\n    );\n  }\n\n  return isLast && isRunning\n    ? AUTO_STATUS_RUNNING\n    : hasInterruptedToolCalls\n      ? AUTO_STATUS_INTERRUPT\n      : hasPendingToolCalls\n        ? AUTO_STATUS_PENDING\n        : AUTO_STATUS_COMPLETE;\n};\n", "import sjson from \"secure-json-parse\";\nimport { fixJson } from \"./fix-json\";\nimport { ReadonlyJSONObject } from \"./json-value\";\n\nconst PARTIAL_JSON_OBJECT_META_SYMBOL = Symbol(\n  \"aui.parse-partial-json-object.meta\",\n);\n\ntype FieldState = \"complete\" | \"partial\";\n\ntype PartialJsonObjectMeta = {\n  state: \"complete\" | \"partial\";\n  partialPath: string[];\n};\n\nexport const getPartialJsonObjectMeta = (\n  obj: Record<symbol, unknown>,\n): PartialJsonObjectMeta | undefined => {\n  return obj?.[PARTIAL_JSON_OBJECT_META_SYMBOL] as PartialJsonObjectMeta;\n};\n\nexport const parsePartialJsonObject = (\n  json: string,\n):\n  | (ReadonlyJSONObject & {\n      [PARTIAL_JSON_OBJECT_META_SYMBOL]: PartialJsonObjectMeta;\n    })\n  | undefined => {\n  if (json.length === 0)\n    return {\n      [PARTIAL_JSON_OBJECT_META_SYMBOL]: { state: \"partial\", partialPath: [] },\n    };\n\n  try {\n    const res = sjson.parse(json);\n    if (typeof res !== \"object\" || res === null)\n      throw new Error(\"argsText is expected to be an object\");\n\n    res[PARTIAL_JSON_OBJECT_META_SYMBOL] = {\n      state: \"complete\",\n      partialPath: [],\n    };\n    return res;\n  } catch {\n    try {\n      const [fixedJson, partialPath] = fixJson(json);\n      const res = sjson.parse(fixedJson);\n      if (typeof res !== \"object\" || res === null)\n        throw new Error(\"argsText is expected to be an object\");\n\n      res[PARTIAL_JSON_OBJECT_META_SYMBOL] = {\n        state: \"partial\",\n        partialPath,\n      };\n      return res;\n    } catch {\n      return undefined;\n    }\n  }\n};\n\nconst getFieldState = (\n  parent: unknown,\n  parentMeta: PartialJsonObjectMeta,\n  fieldPath: string[],\n): FieldState => {\n  if (typeof parent !== \"object\" || parent === null) return parentMeta.state;\n\n  // 1) parent is complete: return \"complete\"\n  if (parentMeta.state === \"complete\") return \"complete\";\n\n  // 2) we finished traversing: return parent state\n  if (fieldPath.length === 0) return parentMeta.state;\n\n  const [field, ...restPath] = fieldPath as [string, ...string[]];\n\n  // 3) field doesn't yet exist in parent: return \"partial\"\n  if (!Object.prototype.hasOwnProperty.call(parent, field)) return \"partial\";\n\n  const [partialField, ...restPartialPath] = parentMeta.partialPath;\n\n  // 4) field exists but is not partial: return \"complete\"\n  if (field !== partialField) return \"complete\";\n\n  // 5) field exists and is partial: return child state\n  const child = (parent as Record<string, unknown>)[field];\n  const childMeta: PartialJsonObjectMeta = {\n    state: \"partial\",\n    partialPath: restPartialPath,\n  };\n\n  return getFieldState(child, childMeta, restPath);\n};\n\nexport const getPartialJsonObjectFieldState = (\n  obj: Record<string, unknown>,\n  fieldPath: (string | number)[],\n): FieldState => {\n  const meta = getPartialJsonObjectMeta(obj);\n  if (!meta) throw new Error(\"unable to determine object state\");\n\n  return getFieldState(obj, meta, fieldPath.map(String));\n};\n", "// LICENSE for this file only\n\n// MIT License\n\n// Copyright (c) 2025 AgentbaseAI Inc.\n// Copyright (c) 2023 Lars Grammel\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\ntype State =\n  | \"ROOT\"\n  | \"FINISH\"\n  | \"INSIDE_STRING\"\n  | \"INSIDE_STRING_ESCAPE\"\n  | \"INSIDE_LITERAL\"\n  | \"INSIDE_NUMBER\"\n  | \"INSIDE_OBJECT_START\"\n  | \"INSIDE_OBJECT_KEY\"\n  | \"INSIDE_OBJECT_AFTER_KEY\"\n  | \"INSIDE_OBJECT_BEFORE_VALUE\"\n  | \"INSIDE_OBJECT_AFTER_VALUE\"\n  | \"INSIDE_OBJECT_AFTER_COMMA\"\n  | \"INSIDE_ARRAY_START\"\n  | \"INSIDE_ARRAY_AFTER_VALUE\"\n  | \"INSIDE_ARRAY_AFTER_COMMA\";\n\n// Implemented as a scanner with additional fixing\n// that performs a single linear time scan pass over the partial JSON.\n//\n// The states should ideally match relevant states from the JSON spec:\n// https://www.json.org/json-en.html\n//\n// Please note that invalid JSON is not considered/covered, because it\n// is assumed that the resulting JSON will be processed by a standard\n// JSON parser that will detect any invalid JSON.\n\n// Returns a tuple of [fixedJson, partialPath]\n// partialPath is an array of object/array keys that represent\n// the currently partial values. An object is considered partial\n// if through appending extra characters to the JSON string, its\n// value could change.\n\n// Example input: '{\"foo\":[{\"a\":f'\n// Example output: ['{\"foo\":[{\"a\":false}]}', ['foo', '0']]\n// Example input: '{\"foo\":'\n// Example output: ['{}', []]\n\nexport function fixJson(input: string): [string, string[]] {\n  const stack: State[] = [\"ROOT\"];\n  let lastValidIndex = -1;\n  let literalStart: number | null = null;\n  const path: string[] = [];\n  let currentKey: string | undefined;\n\n  function pushCurrentKeyToPath(): void {\n    if (currentKey !== undefined) {\n      path.push(JSON.parse(`\"${currentKey}\"`));\n      currentKey = undefined;\n    }\n  }\n\n  function processValueStart(char: string, i: number, swapState: State) {\n    switch (char) {\n      case '\"': {\n        lastValidIndex = i;\n        stack.pop();\n        stack.push(swapState);\n        stack.push(\"INSIDE_STRING\");\n\n        pushCurrentKeyToPath();\n        break;\n      }\n\n      case \"f\":\n      case \"t\":\n      case \"n\": {\n        lastValidIndex = i;\n        literalStart = i;\n        stack.pop();\n        stack.push(swapState);\n        stack.push(\"INSIDE_LITERAL\");\n        break;\n      }\n\n      case \"-\": {\n        stack.pop();\n        stack.push(swapState);\n        stack.push(\"INSIDE_NUMBER\");\n\n        pushCurrentKeyToPath();\n        break;\n      }\n      case \"0\":\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n      case \"5\":\n      case \"6\":\n      case \"7\":\n      case \"8\":\n      case \"9\": {\n        lastValidIndex = i;\n        stack.pop();\n        stack.push(swapState);\n        stack.push(\"INSIDE_NUMBER\");\n\n        pushCurrentKeyToPath();\n        break;\n      }\n\n      case \"{\": {\n        lastValidIndex = i;\n        stack.pop();\n        stack.push(swapState);\n        stack.push(\"INSIDE_OBJECT_START\");\n\n        pushCurrentKeyToPath();\n        break;\n      }\n\n      case \"[\": {\n        lastValidIndex = i;\n        stack.pop();\n        stack.push(swapState);\n        stack.push(\"INSIDE_ARRAY_START\");\n\n        pushCurrentKeyToPath();\n        break;\n      }\n    }\n  }\n\n  function processAfterObjectValue(char: string, i: number) {\n    switch (char) {\n      case \",\": {\n        stack.pop();\n        stack.push(\"INSIDE_OBJECT_AFTER_COMMA\");\n        break;\n      }\n      case \"}\": {\n        lastValidIndex = i;\n        stack.pop();\n        currentKey = path.pop();\n        break;\n      }\n    }\n  }\n\n  function processAfterArrayValue(char: string, i: number) {\n    switch (char) {\n      case \",\": {\n        stack.pop();\n        stack.push(\"INSIDE_ARRAY_AFTER_COMMA\");\n        currentKey = (Number(currentKey) + 1).toString();\n        break;\n      }\n      case \"]\": {\n        lastValidIndex = i;\n        stack.pop();\n        currentKey = path.pop();\n        break;\n      }\n    }\n  }\n\n  for (let i = 0; i < input.length; i++) {\n    const char = input[i]!;\n    const currentState = stack[stack.length - 1];\n\n    switch (currentState) {\n      case \"ROOT\":\n        processValueStart(char, i, \"FINISH\");\n        break;\n\n      case \"INSIDE_OBJECT_START\": {\n        switch (char) {\n          case '\"': {\n            stack.pop();\n            stack.push(\"INSIDE_OBJECT_KEY\");\n            currentKey = \"\";\n            break;\n          }\n          case \"}\": {\n            lastValidIndex = i;\n            stack.pop();\n            currentKey = path.pop();\n            break;\n          }\n        }\n        break;\n      }\n\n      case \"INSIDE_OBJECT_AFTER_COMMA\": {\n        switch (char) {\n          case '\"': {\n            stack.pop();\n            stack.push(\"INSIDE_OBJECT_KEY\");\n            currentKey = \"\";\n            break;\n          }\n        }\n        break;\n      }\n\n      case \"INSIDE_OBJECT_KEY\": {\n        switch (char) {\n          case '\"': {\n            stack.pop();\n            stack.push(\"INSIDE_OBJECT_AFTER_KEY\");\n            break;\n          }\n          case \"\\\\\": {\n            stack.push(\"INSIDE_STRING_ESCAPE\");\n            currentKey += char;\n            break;\n          }\n          default: {\n            currentKey += char;\n            break;\n          }\n        }\n        break;\n      }\n\n      case \"INSIDE_OBJECT_AFTER_KEY\": {\n        switch (char) {\n          case \":\": {\n            stack.pop();\n            stack.push(\"INSIDE_OBJECT_BEFORE_VALUE\");\n\n            break;\n          }\n        }\n        break;\n      }\n\n      case \"INSIDE_OBJECT_BEFORE_VALUE\": {\n        processValueStart(char, i, \"INSIDE_OBJECT_AFTER_VALUE\");\n        break;\n      }\n\n      case \"INSIDE_OBJECT_AFTER_VALUE\": {\n        processAfterObjectValue(char, i);\n        break;\n      }\n\n      case \"INSIDE_STRING\": {\n        switch (char) {\n          case '\"': {\n            stack.pop();\n            lastValidIndex = i;\n\n            currentKey = path.pop();\n            break;\n          }\n\n          case \"\\\\\": {\n            stack.push(\"INSIDE_STRING_ESCAPE\");\n            break;\n          }\n\n          default: {\n            lastValidIndex = i;\n          }\n        }\n\n        break;\n      }\n\n      case \"INSIDE_ARRAY_START\": {\n        switch (char) {\n          case \"]\": {\n            lastValidIndex = i;\n            stack.pop();\n            currentKey = path.pop();\n            break;\n          }\n\n          default: {\n            lastValidIndex = i;\n            currentKey = \"0\";\n            processValueStart(char, i, \"INSIDE_ARRAY_AFTER_VALUE\");\n            break;\n          }\n        }\n        break;\n      }\n\n      case \"INSIDE_ARRAY_AFTER_VALUE\": {\n        switch (char) {\n          case \",\": {\n            stack.pop();\n            stack.push(\"INSIDE_ARRAY_AFTER_COMMA\");\n\n            currentKey = (Number(currentKey) + 1).toString();\n            break;\n          }\n\n          case \"]\": {\n            lastValidIndex = i;\n            stack.pop();\n            currentKey = path.pop();\n            break;\n          }\n\n          default: {\n            lastValidIndex = i;\n            break;\n          }\n        }\n\n        break;\n      }\n\n      case \"INSIDE_ARRAY_AFTER_COMMA\": {\n        processValueStart(char, i, \"INSIDE_ARRAY_AFTER_VALUE\");\n        break;\n      }\n\n      case \"INSIDE_STRING_ESCAPE\": {\n        stack.pop();\n\n        if (stack[stack.length - 1] === \"INSIDE_STRING\") {\n          lastValidIndex = i;\n        } else if (stack[stack.length - 1] === \"INSIDE_OBJECT_KEY\") {\n          currentKey += char;\n        }\n\n        break;\n      }\n\n      case \"INSIDE_NUMBER\": {\n        switch (char) {\n          case \"0\":\n          case \"1\":\n          case \"2\":\n          case \"3\":\n          case \"4\":\n          case \"5\":\n          case \"6\":\n          case \"7\":\n          case \"8\":\n          case \"9\": {\n            lastValidIndex = i;\n            break;\n          }\n\n          case \"e\":\n          case \"E\":\n          case \"-\":\n          case \".\": {\n            break;\n          }\n\n          case \",\": {\n            stack.pop();\n            currentKey = path.pop();\n\n            if (stack[stack.length - 1] === \"INSIDE_ARRAY_AFTER_VALUE\") {\n              processAfterArrayValue(char, i);\n            }\n\n            if (stack[stack.length - 1] === \"INSIDE_OBJECT_AFTER_VALUE\") {\n              processAfterObjectValue(char, i);\n            }\n\n            break;\n          }\n\n          case \"}\": {\n            stack.pop();\n            currentKey = path.pop();\n\n            if (stack[stack.length - 1] === \"INSIDE_OBJECT_AFTER_VALUE\") {\n              processAfterObjectValue(char, i);\n            }\n\n            break;\n          }\n\n          case \"]\": {\n            stack.pop();\n            currentKey = path.pop();\n\n            if (stack[stack.length - 1] === \"INSIDE_ARRAY_AFTER_VALUE\") {\n              processAfterArrayValue(char, i);\n            }\n\n            break;\n          }\n\n          default: {\n            stack.pop();\n            currentKey = path.pop();\n            break;\n          }\n        }\n\n        break;\n      }\n\n      case \"INSIDE_LITERAL\": {\n        const partialLiteral = input.substring(literalStart!, i + 1);\n\n        if (\n          !\"false\".startsWith(partialLiteral) &&\n          !\"true\".startsWith(partialLiteral) &&\n          !\"null\".startsWith(partialLiteral)\n        ) {\n          stack.pop();\n\n          if (stack[stack.length - 1] === \"INSIDE_OBJECT_AFTER_VALUE\") {\n            processAfterObjectValue(char, i);\n          } else if (stack[stack.length - 1] === \"INSIDE_ARRAY_AFTER_VALUE\") {\n            processAfterArrayValue(char, i);\n          }\n        } else {\n          lastValidIndex = i;\n        }\n\n        break;\n      }\n    }\n  }\n\n  let result = input.slice(0, lastValidIndex + 1);\n\n  for (let i = stack.length - 1; i >= 0; i--) {\n    const state = stack[i];\n\n    switch (state) {\n      case \"INSIDE_STRING\": {\n        result += '\"';\n        break;\n      }\n\n      case \"INSIDE_OBJECT_KEY\":\n      case \"INSIDE_OBJECT_AFTER_KEY\":\n      case \"INSIDE_OBJECT_AFTER_COMMA\":\n      case \"INSIDE_OBJECT_START\":\n      case \"INSIDE_OBJECT_BEFORE_VALUE\":\n      case \"INSIDE_OBJECT_AFTER_VALUE\": {\n        result += \"}\";\n        break;\n      }\n\n      case \"INSIDE_ARRAY_START\":\n      case \"INSIDE_ARRAY_AFTER_COMMA\":\n      case \"INSIDE_ARRAY_AFTER_VALUE\": {\n        result += \"]\";\n        break;\n      }\n\n      case \"INSIDE_LITERAL\": {\n        const partialLiteral = input.substring(literalStart!, input.length);\n\n        if (\"true\".startsWith(partialLiteral)) {\n          result += \"true\".slice(partialLiteral.length);\n        } else if (\"false\".startsWith(partialLiteral)) {\n          result += \"false\".slice(partialLiteral.length);\n        } else if (\"null\".startsWith(partialLiteral)) {\n          result += \"null\".slice(partialLiteral.length);\n        }\n      }\n    }\n  }\n\n  return [result, path];\n}\n", "export type AsyncIterableStream<T> = AsyncIterable<T> & ReadableStream<T>;\n\nasync function* streamGeneratorPolyfill<T>(\n  this: ReadableStream<T>,\n): AsyncIterator<T, undefined, unknown> {\n  const reader = this.getReader();\n  try {\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) break;\n      yield value;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport function asAsyncIterableStream<T>(\n  source: ReadableStream<T>,\n): AsyncIterableStream<T> {\n  (source as AsyncIterableStream<T>)[Symbol.asyncIterator] ??=\n    streamGeneratorPolyfill;\n  return source as AsyncIterableStream<T>;\n}\n", "import { AssistantStreamChunk } from \"./AssistantStreamChunk\";\n\nexport type AssistantStream = ReadableStream<AssistantStreamChunk>;\n\nexport type AssistantStreamEncoder = ReadableWritablePair<\n  Uint8Array<ArrayBuffer>,\n  AssistantStreamChunk\n> & {\n  headers?: Headers;\n};\n\nexport const AssistantStream = {\n  toResponse(stream: AssistantStream, transformer: AssistantStreamEncoder) {\n    return new Response(AssistantStream.toByteStream(stream, transformer), {\n      headers: transformer.headers ?? {},\n    });\n  },\n\n  fromResponse(\n    response: Response,\n    transformer: ReadableWritablePair<\n      AssistantStreamChunk,\n      Uint8Array<ArrayBuffer>\n    >,\n  ) {\n    return AssistantStream.fromByteStream(response.body!, transformer);\n  },\n\n  toByteStream(\n    stream: AssistantStream,\n    transformer: ReadableWritablePair<\n      Uint8Array<ArrayBuffer>,\n      AssistantStreamChunk\n    >,\n  ) {\n    return stream.pipeThrough(transformer);\n  },\n\n  fromByteStream(\n    readable: ReadableStream<Uint8Array<ArrayBuffer>>,\n    transformer: ReadableWritablePair<\n      AssistantStreamChunk,\n      Uint8Array<ArrayBuffer>\n    >,\n  ) {\n    return readable.pipeThrough(transformer);\n  },\n};\n", "export const promiseWithResolvers = function <T>() {\n  let resolve: ((value: T | PromiseLike<T>) => void) | undefined;\n  let reject: ((reason?: unknown) => void) | undefined;\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  if (!resolve || !reject) throw new Error(\"Failed to create promise\");\n  return { promise, resolve, reject };\n};\n", "import { AssistantStreamChunk } from \"../../AssistantStreamChunk\";\nimport { promiseWithResolvers } from \"../../../utils/promiseWithResolvers\";\n\ntype MergeStreamItem = {\n  reader: ReadableStreamDefaultReader<AssistantStreamChunk>;\n  promise?: Promise<unknown> | undefined;\n};\n\nexport const createMergeStream = () => {\n  const list: MergeStreamItem[] = [];\n  let sealed = false;\n  let controller: ReadableStreamDefaultController<AssistantStreamChunk>;\n  let currentPull: ReturnType<typeof promiseWithResolvers<void>> | undefined;\n\n  const handlePull = (item: MergeStreamItem) => {\n    if (!item.promise) {\n      // TODO for most streams, we can directly pipeTo to avoid the microTask queue\n      // add an option to eagerly pipe the stream to the merge stream\n      // ideally, using assistant-stream w sync run method + piping to a sync WritableStream runs in the same microtask\n      // this is useful because we often use AssistantStreams internally as a serialization utility, e. g. AssistantTransformStream\n      // idea: avoid reader.read() by instead using a WritableStream & if (!hasPendingPull) await waitForPull()?\n      item.promise = item.reader\n        .read()\n        .then(({ done, value }) => {\n          item.promise = undefined;\n          if (done) {\n            list.splice(list.indexOf(item), 1);\n            if (sealed && list.length === 0) {\n              controller.close();\n            }\n          } else {\n            controller.enqueue(value);\n          }\n\n          currentPull?.resolve();\n          currentPull = undefined;\n        })\n        .catch((e) => {\n          console.error(e);\n\n          list.forEach((item) => {\n            item.reader.cancel();\n          });\n          list.length = 0;\n\n          controller.error(e);\n\n          currentPull?.reject(e);\n          currentPull = undefined;\n        });\n    }\n  };\n\n  const readable = new ReadableStream<AssistantStreamChunk>({\n    start(c) {\n      controller = c;\n    },\n    pull() {\n      currentPull = promiseWithResolvers();\n      list.forEach((item) => {\n        handlePull(item);\n      });\n\n      return currentPull.promise;\n    },\n    cancel() {\n      list.forEach((item) => {\n        item.reader.cancel();\n      });\n      list.length = 0;\n    },\n  });\n\n  return {\n    readable,\n    isSealed() {\n      return sealed;\n    },\n    seal() {\n      sealed = true;\n      if (list.length === 0) controller.close();\n    },\n    addStream(stream: ReadableStream<AssistantStreamChunk>) {\n      if (sealed)\n        throw new Error(\n          \"Cannot add streams after the run callback has settled.\",\n        );\n\n      const item = { reader: stream.getReader() };\n      list.push(item);\n      handlePull(item);\n    },\n    enqueue(chunk: AssistantStreamChunk) {\n      this.addStream(\n        new ReadableStream({\n          start(c) {\n            c.enqueue(chunk);\n            c.close();\n          },\n        }),\n      );\n    },\n  };\n};\n\n// TODO\n// export class SpanContainerMerger {\n//   public get isSealed() {\n//     return this.mergeStream.isSealed();\n//   }\n\n//   public get readable() {\n//     return this.mergeStream.readable;\n//   }\n\n//   private subAllocator = new Counter();\n//   private mergeStream = createMergeStream();\n\n//   constructor() {\n//     // id 0 is auto allocated\n//     this.subAllocator.up();\n//   }\n\n//   add(stream: ReadableStream<AssistantStreamChunk>) {\n//     this.mergeStream.addStream(\n//       stream.pipeThrough(new SpanParentEncoder(this.subAllocator)),\n//     );\n//   }\n\n//   enqueue(chunk: AssistantStreamChunk & { parentId: 0 }) {\n//     this.mergeStream.addStream(\n//       new ReadableStream({\n//         start(c) {\n//           c.enqueue(chunk);\n//           c.close();\n//         },\n//       }),\n//     );\n//   }\n\n//   seal() {\n//     this.mergeStream.seal();\n//   }\n// }\n\n// export class SpanContainerSplitter {\n//   public writable;\n\n//   private isSealed = false;\n//   private writers = new Map<\n//     number,\n//     WritableStreamDefaultWriter<AssistantStreamChunk>\n//   >();\n\n//   private closeTasks: Promise<void>[] = [];\n\n//   private allocator = new Counter();\n//   private subAllocator = new Counter();\n\n//   constructor() {\n//     // id 0 is auto-allocated\n//     this.allocator.up();\n\n//     this.writable = new WritableStream({\n//       write: (chunk) => {\n//         const { type, parentId } = chunk;\n\n//         const writer = this.writers.get(parentId);\n//         if (writer === undefined) throw new Error(\"Parent id not found\");\n\n//         writer.write(chunk);\n\n//         if (type === \"span\") {\n//           // allocate a new span id\n//           this.writers.set(this.allocator.up(), writer);\n//         }\n//         if (type === \"finish\") {\n//           this.writers.delete(parentId);\n//           writer.close();\n\n//           if (this.writers.size === 0) {\n//             const closeTask = this.writable.close();\n//             this.closeTasks.push(closeTask);\n//             closeTask.then(() => {\n//               this.closeTasks.splice(this.closeTasks.indexOf(closeTask), 1);\n//             });\n//           }\n//         }\n//       },\n//       close: async () => {\n//         if (this.writers.size > 0) throw new Error(\"Not all writers closed\");\n\n//         // await and throw on any errors\n//         await Promise.all(this.closeTasks);\n//       },\n//     });\n//   }\n\n//   add(stream: WritableStream<AssistantStreamChunk>) {\n//     if (this.isSealed) throw new Error(\"Cannot add streams after sealing\");\n\n//     const decoder = new SpanParentDecoder(this.subAllocator);\n//     decoder.readable.pipeTo(stream);\n\n//     this.writers.set(this.allocator.up(), decoder.writable.getWriter());\n//   }\n\n//   seal() {\n//     this.isSealed = true;\n//     if (this.writers.size === 0) this.writable.close();\n//   }\n// }\n", "import { AssistantStream } from \"../AssistantStream\";\nimport { AssistantStreamChunk } from \"../AssistantStreamChunk\";\nimport { UnderlyingReadable } from \"../utils/stream/UnderlyingReadable\";\n\nexport type TextStreamController = {\n  append(textDelta: string): void;\n  close(): void; // TODO reason? error?\n};\n\nclass TextStreamControllerImpl implements TextStreamController {\n  private _controller: ReadableStreamDefaultController<AssistantStreamChunk>;\n  private _isClosed = false;\n\n  constructor(\n    controller: ReadableStreamDefaultController<AssistantStreamChunk>,\n  ) {\n    this._controller = controller;\n  }\n\n  append(textDelta: string) {\n    this._controller.enqueue({\n      type: \"text-delta\",\n      path: [],\n      textDelta,\n    });\n    return this;\n  }\n\n  close() {\n    if (this._isClosed) return;\n    this._isClosed = true;\n    this._controller.enqueue({\n      type: \"part-finish\",\n      path: [],\n    });\n    this._controller.close();\n  }\n}\n\nexport const createTextStream = (\n  readable: UnderlyingReadable<TextStreamController>,\n): AssistantStream => {\n  return new ReadableStream({\n    start(c) {\n      return readable.start?.(new TextStreamControllerImpl(c));\n    },\n    pull(c) {\n      return readable.pull?.(new TextStreamControllerImpl(c));\n    },\n    cancel(c) {\n      return readable.cancel?.(c);\n    },\n  });\n};\n\nexport const createTextStreamController = () => {\n  let controller!: TextStreamController;\n  const stream = createTextStream({\n    start(c) {\n      controller = c;\n    },\n  });\n  return [stream, controller] as const;\n};\n", "import { AssistantStream } from \"../AssistantStream\";\nimport { AssistantStreamChunk } from \"../AssistantStreamChunk\";\nimport { ToolResponseLike } from \"../tool/ToolResponse\";\nimport { ReadonlyJSONValue } from \"../../utils/json/json-value\";\nimport { UnderlyingReadable } from \"../utils/stream/UnderlyingReadable\";\nimport { createTextStream, TextStreamController } from \"./text\";\n\nexport type ToolCallStreamController = {\n  argsText: TextStreamController;\n\n  setResponse(response: ToolResponseLike<ReadonlyJSONValue>): void;\n  close(): void;\n};\n\nclass ToolCallStreamControllerImpl implements ToolCallStreamController {\n  private _isClosed = false;\n\n  private _mergeTask: Promise<void>;\n  constructor(\n    private _controller: ReadableStreamDefaultController<AssistantStreamChunk>,\n  ) {\n    const stream = createTextStream({\n      start: (c) => {\n        this._argsTextController = c;\n      },\n    });\n\n    let hasArgsText = false;\n    this._mergeTask = stream.pipeTo(\n      new WritableStream({\n        write: (chunk) => {\n          switch (chunk.type) {\n            case \"text-delta\":\n              hasArgsText = true;\n              this._controller.enqueue(chunk);\n              break;\n\n            case \"part-finish\":\n              if (!hasArgsText) {\n                // if no argsText was provided, assume empty object\n                this._controller.enqueue({\n                  type: \"text-delta\",\n                  textDelta: \"{}\",\n                  path: [],\n                });\n              }\n              this._controller.enqueue({\n                type: \"tool-call-args-text-finish\",\n                path: [],\n              });\n              break;\n\n            default:\n              throw new Error(`Unexpected chunk type: ${chunk.type}`);\n          }\n        },\n      }),\n    );\n  }\n\n  get argsText() {\n    return this._argsTextController;\n  }\n\n  private _argsTextController!: TextStreamController;\n\n  async setResponse(response: ToolResponseLike<ReadonlyJSONValue>) {\n    this._argsTextController.close();\n    await Promise.resolve(); // flush microtask queue\n    // TODO switch argsTextController to be something that doesn'#t require this\n    this._controller.enqueue({\n      type: \"result\",\n      path: [],\n      ...(response.artifact !== undefined\n        ? { artifact: response.artifact }\n        : {}),\n      result: response.result,\n      isError: response.isError ?? false,\n    });\n  }\n\n  async close() {\n    if (this._isClosed) return;\n\n    this._isClosed = true;\n    this._argsTextController.close();\n    await this._mergeTask;\n\n    this._controller.enqueue({\n      type: \"part-finish\",\n      path: [],\n    });\n    this._controller.close();\n  }\n}\n\nexport const createToolCallStream = (\n  readable: UnderlyingReadable<ToolCallStreamController>,\n): AssistantStream => {\n  return new ReadableStream({\n    start(c) {\n      return readable.start?.(new ToolCallStreamControllerImpl(c));\n    },\n    pull(c) {\n      return readable.pull?.(new ToolCallStreamControllerImpl(c));\n    },\n    cancel(c) {\n      return readable.cancel?.(c);\n    },\n  });\n};\n\nexport const createToolCallStreamController = () => {\n  let controller!: ToolCallStreamController;\n  const stream = createToolCallStream({\n    start(c) {\n      controller = c;\n    },\n  });\n  return [stream, controller] as const;\n};\n", "export class Counter {\n  public value = -1;\n\n  up() {\n    return ++this.value;\n  }\n}\n", "import { AssistantStreamChunk } from \"../../AssistantStreamChunk\";\nimport { Counter } from \"../Counter\";\n\nexport class PathAppendEncoder extends TransformStream<\n  AssistantStreamChunk,\n  AssistantStreamChunk\n> {\n  constructor(idx: number) {\n    super({\n      transform(chunk, controller) {\n        controller.enqueue({\n          ...chunk,\n          path: [idx, ...chunk.path],\n        });\n      },\n    });\n  }\n}\n\nexport class PathAppendDecoder extends TransformStream<\n  AssistantStreamChunk,\n  AssistantStreamChunk\n> {\n  constructor(idx: number) {\n    super({\n      transform(chunk, controller) {\n        const {\n          path: [idx2, ...path],\n        } = chunk;\n\n        if (idx !== idx2)\n          throw new Error(`Path mismatch: expected ${idx}, got ${idx2}`);\n\n        controller.enqueue({\n          ...chunk,\n          path,\n        });\n      },\n    });\n  }\n}\n\nexport class PathMergeEncoder extends TransformStream<\n  AssistantStreamChunk,\n  AssistantStreamChunk\n> {\n  constructor(counter: Counter) {\n    const innerCounter = new Counter();\n    const mapping = new Map<number, number>();\n    super({\n      transform(chunk, controller) {\n        if (chunk.type === \"part-start\" && chunk.path.length === 0) {\n          mapping.set(innerCounter.up(), counter.up());\n        }\n\n        const [idx, ...path] = chunk.path;\n        if (idx === undefined) {\n          controller.enqueue(chunk);\n          return;\n        }\n        const mappedIdx = mapping.get(idx);\n        if (mappedIdx === undefined) throw new Error(\"Path not found\");\n\n        controller.enqueue({\n          ...chunk,\n          path: [mappedIdx, ...path],\n        });\n      },\n    });\n  }\n}\n", "export class PipeableTransformStream<I, O> extends TransformStream<I, O> {\n  constructor(transform: (readable: ReadableStream<I>) => ReadableStream<O>) {\n    super();\n    const readable = transform(super.readable as unknown as ReadableStream<I>);\n    Object.defineProperty(this, \"readable\", {\n      value: readable,\n      writable: false,\n    });\n  }\n}\n", "import {\n  ReadonlyJSONObject,\n  ReadonlyJSONValue,\n} from \"../../../utils/json/json-value\";\nimport { ObjectStreamOperation } from \"../../object/types\";\n\nexport type DataStreamChunk = {\n  [K in DataStreamStreamChunkType]: {\n    type: K;\n    value: DataStreamStreamChunkValue[K];\n  };\n}[DataStreamStreamChunkType];\n\ntype LanguageModelV1FinishReason =\n  | \"stop\"\n  | \"length\"\n  | \"content-filter\"\n  | \"tool-calls\"\n  | \"error\"\n  | \"other\"\n  | \"unknown\";\n\ntype LanguageModelV1Usage = {\n  promptTokens: number;\n  completionTokens: number;\n};\n\nexport enum DataStreamStreamChunkType {\n  TextDelta = \"0\",\n  Data = \"2\",\n  Error = \"3\",\n  Annotation = \"8\",\n  ToolCall = \"9\",\n  ToolCallResult = \"a\",\n  StartToolCall = \"b\",\n  ToolCallArgsTextDelta = \"c\",\n  FinishMessage = \"d\",\n  FinishStep = \"e\",\n  StartStep = \"f\",\n  ReasoningDelta = \"g\",\n  Source = \"h\",\n  RedactedReasoning = \"i\",\n  ReasoningSignature = \"j\",\n  File = \"k\",\n\n  AuiUpdateStateOperations = \"aui-state\",\n  AuiTextDelta = \"aui-text-delta\",\n  AuiReasoningDelta = \"aui-reasoning-delta\",\n}\ntype DataStreamStreamChunkValue = {\n  [DataStreamStreamChunkType.TextDelta]: string;\n  [DataStreamStreamChunkType.Data]: ReadonlyJSONValue[];\n  [DataStreamStreamChunkType.Annotation]: ReadonlyJSONValue[];\n  [DataStreamStreamChunkType.ToolCall]: {\n    toolCallId: string;\n    toolName: string;\n    args: ReadonlyJSONObject;\n  };\n  [DataStreamStreamChunkType.StartToolCall]: {\n    toolCallId: string;\n    toolName: string;\n    parentId?: string;\n  };\n  [DataStreamStreamChunkType.ToolCallArgsTextDelta]: {\n    toolCallId: string;\n    argsTextDelta: string;\n  };\n  [DataStreamStreamChunkType.ToolCallResult]: {\n    toolCallId: string;\n    result: ReadonlyJSONValue;\n\n    // aui-extensions\n    artifact?: ReadonlyJSONValue | undefined;\n    isError?: boolean;\n  };\n  [DataStreamStreamChunkType.Error]: string;\n  [DataStreamStreamChunkType.FinishStep]: {\n    finishReason: LanguageModelV1FinishReason;\n    usage: LanguageModelV1Usage;\n    isContinued: boolean;\n  };\n  [DataStreamStreamChunkType.FinishMessage]: {\n    finishReason: LanguageModelV1FinishReason;\n    usage: LanguageModelV1Usage;\n  };\n  [DataStreamStreamChunkType.StartStep]: {\n    messageId: string;\n  };\n  [DataStreamStreamChunkType.ReasoningDelta]: string;\n  [DataStreamStreamChunkType.Source]: {\n    sourceType: \"url\";\n    id: string;\n    url: string;\n    title?: string;\n    parentId?: string;\n  };\n  [DataStreamStreamChunkType.RedactedReasoning]: { data: string };\n  [DataStreamStreamChunkType.ReasoningSignature]: { signature: string };\n  [DataStreamStreamChunkType.File]: { data: string; mimeType: string };\n\n  // aui-extensions\n  [DataStreamStreamChunkType.AuiUpdateStateOperations]: ObjectStreamOperation[];\n  [DataStreamStreamChunkType.AuiTextDelta]: {\n    textDelta: string;\n    parentId: string;\n  };\n  [DataStreamStreamChunkType.AuiReasoningDelta]: {\n    reasoningDelta: string;\n    parentId: string;\n  };\n};\n", "export class LineDecoderStream extends TransformStream<string, string> {\n  private buffer = \"\";\n\n  constructor() {\n    super({\n      transform: (chunk, controller) => {\n        this.buffer += chunk;\n        const lines = this.buffer.split(\"\\n\");\n\n        // Process all complete lines\n        for (let i = 0; i < lines.length - 1; i++) {\n          controller.enqueue(lines[i]);\n        }\n\n        // Keep the last incomplete line in the buffer\n        this.buffer = lines[lines.length - 1] || \"\";\n      },\n      flush: () => {\n        // If there's content in the buffer when the stream ends, it means\n        // the stream ended with an incomplete line (no trailing newline)\n        if (this.buffer) {\n          throw new Error(\n            `Stream ended with an incomplete line: \"${this.buffer}\"`,\n          );\n        }\n      },\n    });\n  }\n}\n", "import { DataStreamChunk, DataStreamStreamChunkType } from \"./chunk-types\";\n\nexport class DataStreamChunkEncoder extends TransformStream<\n  DataStreamChunk,\n  string\n> {\n  constructor() {\n    super({\n      transform: (chunk, controller) => {\n        controller.enqueue(`${chunk.type}:${JSON.stringify(chunk.value)}\\n`);\n      },\n    });\n  }\n}\n\nexport class DataStreamChunkDecoder extends TransformStream<\n  string,\n  DataStreamChunk\n> {\n  constructor() {\n    super({\n      transform: (chunk, controller) => {\n        const index = chunk.indexOf(\":\");\n        if (index === -1) throw new Error(\"Invalid stream part\");\n        controller.enqueue({\n          type: chunk.slice(0, index) as DataStreamStreamChunkType,\n          value: JSON.parse(chunk.slice(index + 1)),\n        });\n      },\n    });\n  }\n}\n", "import { AssistantStreamChunk, PartInit } from \"../../AssistantStreamChunk\";\n\n/**\n * For chunk types that are associated with a part,\n * we require a nonnullable meta field.\n */\nexport type AssistantMetaStreamChunk =\n  | (AssistantStreamChunk & {\n      type: \"text-delta\" | \"part-finish\";\n      meta: PartInit;\n    })\n  | (AssistantStreamChunk & {\n      type: \"result\" | \"tool-call-args-text-finish\";\n      meta: PartInit & { type: \"tool-call\" };\n    })\n  | (AssistantStreamChunk & {\n      type: Exclude<\n        AssistantStreamChunk[\"type\"],\n        \"text-delta\" | \"result\" | \"tool-call-args-text-finish\" | \"part-finish\"\n      >;\n    });\nexport class AssistantMetaTransformStream extends TransformStream<\n  AssistantStreamChunk,\n  AssistantMetaStreamChunk\n> {\n  constructor() {\n    // We use an array to record parts as they are introduced.\n    const parts: PartInit[] = [];\n\n    super({\n      transform(chunk, controller) {\n        // For chunks that introduce a new part.\n        if (chunk.type === \"part-start\") {\n          if (chunk.path.length !== 0) {\n            controller.error(new Error(\"Nested parts are not supported\"));\n            return;\n          }\n          parts.push(chunk.part);\n          controller.enqueue(chunk);\n          return;\n        }\n\n        // For chunks that expect an associated part.\n        if (\n          chunk.type === \"text-delta\" ||\n          chunk.type === \"result\" ||\n          chunk.type === \"part-finish\" ||\n          chunk.type === \"tool-call-args-text-finish\"\n        ) {\n          if (chunk.path.length !== 1) {\n            controller.error(\n              new Error(`${chunk.type} chunks must have a path of length 1`),\n            );\n            return;\n          }\n          const idx = chunk.path[0]!;\n          if (idx < 0 || idx >= parts.length) {\n            controller.error(new Error(`Invalid path index: ${idx}`));\n            return;\n          }\n          const part = parts[idx]!;\n\n          controller.enqueue({\n            ...chunk,\n            meta: part as any, // TODO\n          });\n          return;\n        }\n\n        controller.enqueue(chunk);\n      },\n    });\n  }\n}\n", "import { AssistantStreamChunk } from \"../../AssistantStreamChunk\";\nimport { ToolCallStreamController } from \"../../modules/tool-call\";\nimport { AssistantTransformStream } from \"../../utils/stream/AssistantTransformStream\";\nimport { PipeableTransformStream } from \"../../utils/stream/PipeableTransformStream\";\nimport { DataStreamChunk, DataStreamStreamChunkType } from \"./chunk-types\";\nimport { LineDecoderStream } from \"../../utils/stream/LineDecoderStream\";\nimport {\n  DataStreamChunkDecoder,\n  DataStreamChunkEncoder,\n} from \"./serialization\";\nimport {\n  AssistantMetaStreamChunk,\n  AssistantMetaTransformStream,\n} from \"../../utils/stream/AssistantMetaTransformStream\";\nimport { TextStreamController } from \"../../modules/text\";\nimport { AssistantStreamEncoder } from \"../../AssistantStream\";\n\nexport class DataStreamEncoder\n  extends PipeableTransformStream<AssistantStreamChunk, Uint8Array<ArrayBuffer>>\n  implements AssistantStreamEncoder\n{\n  headers = new Headers({\n    \"Content-Type\": \"text/plain; charset=utf-8\",\n    \"x-vercel-ai-data-stream\": \"v1\",\n  });\n\n  constructor() {\n    super((readable) => {\n      const transform = new TransformStream<\n        AssistantMetaStreamChunk,\n        DataStreamChunk\n      >({\n        transform(chunk, controller) {\n          const type = chunk.type;\n          switch (type) {\n            case \"part-start\": {\n              const part = chunk.part;\n              if (part.type === \"tool-call\") {\n                const { type, ...value } = part;\n                controller.enqueue({\n                  type: DataStreamStreamChunkType.StartToolCall,\n                  value,\n                });\n              }\n              if (part.type === \"source\") {\n                const { type, ...value } = part;\n                controller.enqueue({\n                  type: DataStreamStreamChunkType.Source,\n                  value,\n                });\n              }\n              break;\n            }\n            case \"text-delta\": {\n              const part = chunk.meta;\n              switch (part.type) {\n                case \"text\": {\n                  if (part.parentId) {\n                    controller.enqueue({\n                      type: DataStreamStreamChunkType.AuiTextDelta,\n                      value: {\n                        textDelta: chunk.textDelta,\n                        parentId: part.parentId,\n                      },\n                    });\n                  } else {\n                    controller.enqueue({\n                      type: DataStreamStreamChunkType.TextDelta,\n                      value: chunk.textDelta,\n                    });\n                  }\n                  break;\n                }\n                case \"reasoning\": {\n                  if (part.parentId) {\n                    controller.enqueue({\n                      type: DataStreamStreamChunkType.AuiReasoningDelta,\n                      value: {\n                        reasoningDelta: chunk.textDelta,\n                        parentId: part.parentId,\n                      },\n                    });\n                  } else {\n                    controller.enqueue({\n                      type: DataStreamStreamChunkType.ReasoningDelta,\n                      value: chunk.textDelta,\n                    });\n                  }\n                  break;\n                }\n                case \"tool-call\": {\n                  controller.enqueue({\n                    type: DataStreamStreamChunkType.ToolCallArgsTextDelta,\n                    value: {\n                      toolCallId: part.toolCallId,\n                      argsTextDelta: chunk.textDelta,\n                    },\n                  });\n                  break;\n                }\n                default:\n                  throw new Error(\n                    `Unsupported part type for text-delta: ${part.type}`,\n                  );\n              }\n              break;\n            }\n            case \"result\": {\n              // Only tool-call parts can have results.\n              const part = chunk.meta;\n              if (part.type !== \"tool-call\") {\n                throw new Error(\n                  `Result chunk on non-tool-call part not supported: ${part.type}`,\n                );\n              }\n              controller.enqueue({\n                type: DataStreamStreamChunkType.ToolCallResult,\n                value: {\n                  toolCallId: part.toolCallId,\n                  result: chunk.result,\n                  artifact: chunk.artifact,\n                  ...(chunk.isError ? { isError: chunk.isError } : {}),\n                },\n              });\n              break;\n            }\n            case \"step-start\": {\n              const { type, ...value } = chunk;\n              controller.enqueue({\n                type: DataStreamStreamChunkType.StartStep,\n                value,\n              });\n              break;\n            }\n            case \"step-finish\": {\n              const { type, ...value } = chunk;\n              controller.enqueue({\n                type: DataStreamStreamChunkType.FinishStep,\n                value,\n              });\n              break;\n            }\n            case \"message-finish\": {\n              const { type, ...value } = chunk;\n              controller.enqueue({\n                type: DataStreamStreamChunkType.FinishMessage,\n                value,\n              });\n              break;\n            }\n            case \"error\": {\n              controller.enqueue({\n                type: DataStreamStreamChunkType.Error,\n                value: chunk.error,\n              });\n              break;\n            }\n            case \"annotations\": {\n              controller.enqueue({\n                type: DataStreamStreamChunkType.Annotation,\n                value: chunk.annotations,\n              });\n              break;\n            }\n            case \"data\": {\n              controller.enqueue({\n                type: DataStreamStreamChunkType.Data,\n                value: chunk.data,\n              });\n              break;\n            }\n\n            case \"update-state\": {\n              controller.enqueue({\n                type: DataStreamStreamChunkType.AuiUpdateStateOperations,\n                value: chunk.operations,\n              });\n              break;\n            }\n\n            // TODO ignore for now\n            // in the future, we should create a handler that waits for text parts to finish before continuing\n            case \"tool-call-args-text-finish\":\n            case \"part-finish\":\n              break;\n\n            default: {\n              const exhaustiveCheck: never = type;\n              throw new Error(`Unsupported chunk type: ${exhaustiveCheck}`);\n            }\n          }\n        },\n      });\n\n      return readable\n        .pipeThrough(new AssistantMetaTransformStream())\n        .pipeThrough(transform)\n        .pipeThrough(new DataStreamChunkEncoder())\n        .pipeThrough(new TextEncoderStream());\n    });\n  }\n}\n\nconst TOOL_CALL_ARGS_CLOSING_CHUNKS = [\n  DataStreamStreamChunkType.StartToolCall,\n  DataStreamStreamChunkType.ToolCall,\n  DataStreamStreamChunkType.TextDelta,\n  DataStreamStreamChunkType.ReasoningDelta,\n  DataStreamStreamChunkType.Source,\n  DataStreamStreamChunkType.Error,\n  DataStreamStreamChunkType.FinishStep,\n  DataStreamStreamChunkType.FinishMessage,\n  DataStreamStreamChunkType.AuiTextDelta,\n  DataStreamStreamChunkType.AuiReasoningDelta,\n];\n\nexport class DataStreamDecoder extends PipeableTransformStream<\n  Uint8Array<ArrayBuffer>,\n  AssistantStreamChunk\n> {\n  constructor() {\n    super((readable) => {\n      const toolCallControllers = new Map<string, ToolCallStreamController>();\n      let activeToolCallArgsText: TextStreamController | undefined;\n      const transform = new AssistantTransformStream<DataStreamChunk>({\n        transform(chunk, controller) {\n          const { type, value } = chunk;\n\n          if (TOOL_CALL_ARGS_CLOSING_CHUNKS.includes(type)) {\n            activeToolCallArgsText?.close();\n            activeToolCallArgsText = undefined;\n          }\n\n          switch (type) {\n            case DataStreamStreamChunkType.ReasoningDelta:\n              controller.appendReasoning(value);\n              break;\n\n            case DataStreamStreamChunkType.TextDelta:\n              controller.appendText(value);\n              break;\n\n            case DataStreamStreamChunkType.AuiTextDelta:\n              controller\n                .withParentId(value.parentId)\n                .appendText(value.textDelta);\n              break;\n\n            case DataStreamStreamChunkType.AuiReasoningDelta:\n              controller\n                .withParentId(value.parentId)\n                .appendReasoning(value.reasoningDelta);\n              break;\n\n            case DataStreamStreamChunkType.StartToolCall: {\n              const { toolCallId, toolName, parentId } = value;\n              const ctrl = parentId\n                ? controller.withParentId(parentId)\n                : controller;\n\n              if (toolCallControllers.has(toolCallId))\n                throw new Error(\n                  `Encountered duplicate tool call id: ${toolCallId}`,\n                );\n\n              const toolCallController = ctrl.addToolCallPart({\n                toolCallId,\n                toolName,\n              });\n              toolCallControllers.set(toolCallId, toolCallController);\n\n              activeToolCallArgsText = toolCallController.argsText;\n              break;\n            }\n\n            case DataStreamStreamChunkType.ToolCallArgsTextDelta: {\n              const { toolCallId, argsTextDelta } = value;\n              const toolCallController = toolCallControllers.get(toolCallId);\n              if (!toolCallController)\n                throw new Error(\n                  `Encountered tool call with unknown id: ${toolCallId}`,\n                );\n              toolCallController.argsText.append(argsTextDelta);\n              break;\n            }\n\n            case DataStreamStreamChunkType.ToolCallResult: {\n              const { toolCallId, artifact, result, isError } = value;\n              const toolCallController = toolCallControllers.get(toolCallId);\n              if (!toolCallController)\n                throw new Error(\n                  `Encountered tool call result with unknown id: ${toolCallId}`,\n                );\n              toolCallController.setResponse({\n                artifact,\n                result,\n                isError,\n              });\n              break;\n            }\n\n            case DataStreamStreamChunkType.ToolCall: {\n              const { toolCallId, toolName, args } = value;\n\n              let toolCallController = toolCallControllers.get(toolCallId);\n              if (toolCallController) {\n                toolCallController.argsText.close();\n              } else {\n                toolCallController = controller.addToolCallPart({\n                  toolCallId,\n                  toolName,\n                  args,\n                });\n                toolCallControllers.set(toolCallId, toolCallController);\n              }\n              break;\n            }\n\n            case DataStreamStreamChunkType.FinishMessage:\n              controller.enqueue({\n                type: \"message-finish\",\n                path: [],\n                ...value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.StartStep:\n              controller.enqueue({\n                type: \"step-start\",\n                path: [],\n                ...value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.FinishStep:\n              controller.enqueue({\n                type: \"step-finish\",\n                path: [],\n                ...value,\n              });\n              break;\n            case DataStreamStreamChunkType.Data:\n              controller.enqueue({\n                type: \"data\",\n                path: [],\n                data: value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.Annotation:\n              controller.enqueue({\n                type: \"annotations\",\n                path: [],\n                annotations: value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.Source: {\n              const { parentId, ...sourceData } = value;\n              const ctrl = parentId\n                ? controller.withParentId(parentId)\n                : controller;\n              ctrl.appendSource({\n                type: \"source\",\n                ...sourceData,\n              });\n              break;\n            }\n\n            case DataStreamStreamChunkType.Error:\n              controller.enqueue({\n                type: \"error\",\n                path: [],\n                error: value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.File:\n              controller.appendFile({\n                type: \"file\",\n                ...value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.AuiUpdateStateOperations:\n              controller.enqueue({\n                type: \"update-state\",\n                path: [],\n                operations: value,\n              });\n              break;\n\n            case DataStreamStreamChunkType.ReasoningSignature:\n            case DataStreamStreamChunkType.RedactedReasoning:\n              // ignore these for now\n              break;\n\n            default: {\n              const exhaustiveCheck: never = type;\n              throw new Error(`unsupported chunk type: ${exhaustiveCheck}`);\n            }\n          }\n        },\n        flush() {\n          activeToolCallArgsText?.close();\n          activeToolCallArgsText = undefined;\n          toolCallControllers.forEach((controller) => controller.close());\n          toolCallControllers.clear();\n        },\n      });\n\n      return readable\n        .pipeThrough(new TextDecoderStream())\n        .pipeThrough(new LineDecoderStream())\n        .pipeThrough(new DataStreamChunkDecoder())\n        .pipeThrough(transform);\n    });\n  }\n}\n", "/* @ts-self-types=\"./index.d.ts\" */\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "import { customAlphabet } from \"nanoid/non-secure\";\n\nexport const generateId = customAlphabet(\n  \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  7,\n);\n", "import { AssistantStream } from \"../AssistantStream\";\nimport { AssistantStreamChunk, PartInit } from \"../AssistantStreamChunk\";\nimport { createMergeStream } from \"../utils/stream/merge\";\nimport { createTextStreamController, TextStreamController } from \"./text\";\nimport {\n  createToolCallStreamController,\n  ToolCallStreamController,\n} from \"./tool-call\";\nimport { Counter } from \"../utils/Counter\";\nimport {\n  PathAppendEncoder,\n  PathMergeEncoder,\n} from \"../utils/stream/path-utils\";\nimport { DataStreamEncoder } from \"../serialization/data-stream/DataStream\";\nimport { FilePart, SourcePart } from \"../utils/types\";\nimport { generateId } from \"../utils/generateId\";\nimport {\n  ReadonlyJSONObject,\n  ReadonlyJSONValue,\n} from \"../../utils/json/json-value\";\nimport { ToolResponseLike } from \"../tool/ToolResponse\";\nimport { promiseWithResolvers } from \"../../utils/promiseWithResolvers\";\n\ntype ToolCallPartInit = {\n  toolCallId?: string;\n  toolName: string;\n  argsText?: string;\n  args?: ReadonlyJSONObject;\n  response?: ToolResponseLike<ReadonlyJSONValue>;\n};\n\nexport type AssistantStreamController = {\n  appendText(textDelta: string): void;\n  appendReasoning(reasoningDelta: string): void;\n  appendSource(options: SourcePart): void;\n  appendFile(options: FilePart): void;\n  addTextPart(): TextStreamController;\n  addToolCallPart(options: string): ToolCallStreamController;\n  addToolCallPart(options: ToolCallPartInit): ToolCallStreamController;\n  enqueue(chunk: AssistantStreamChunk): void;\n  merge(stream: AssistantStream): void;\n  close(): void;\n  withParentId(parentId: string): AssistantStreamController;\n};\n\n// Shared state between controller instances\ntype AssistantStreamControllerState = {\n  merger: ReturnType<typeof createMergeStream>;\n  append?:\n    | {\n        controller: TextStreamController;\n        kind: \"text\" | \"reasoning\";\n      }\n    | undefined;\n  contentCounter: Counter;\n  closeSubscriber?: () => void;\n};\n\nclass AssistantStreamControllerImpl implements AssistantStreamController {\n  private readonly _state: AssistantStreamControllerState;\n  private _parentId?: string;\n\n  constructor(state?: AssistantStreamControllerState) {\n    this._state = state || {\n      merger: createMergeStream(),\n      contentCounter: new Counter(),\n    };\n  }\n\n  get __internal_isClosed() {\n    return this._state.merger.isSealed();\n  }\n\n  __internal_getReadable() {\n    return this._state.merger.readable;\n  }\n\n  __internal_subscribeToClose(callback: () => void) {\n    this._state.closeSubscriber = callback;\n  }\n\n  private _addPart(part: PartInit, stream: AssistantStream) {\n    if (this._state.append) {\n      this._state.append.controller.close();\n      this._state.append = undefined;\n    }\n\n    this.enqueue({\n      type: \"part-start\",\n      part,\n      path: [],\n    });\n    this._state.merger.addStream(\n      stream.pipeThrough(\n        new PathAppendEncoder(this._state.contentCounter.value),\n      ),\n    );\n  }\n\n  merge(stream: AssistantStream) {\n    this._state.merger.addStream(\n      stream.pipeThrough(new PathMergeEncoder(this._state.contentCounter)),\n    );\n  }\n\n  appendText(textDelta: string) {\n    if (this._state.append?.kind !== \"text\") {\n      this._state.append = {\n        kind: \"text\",\n        controller: this.addTextPart(),\n      };\n    }\n    this._state.append.controller.append(textDelta);\n  }\n\n  appendReasoning(textDelta: string) {\n    if (this._state.append?.kind !== \"reasoning\") {\n      this._state.append = {\n        kind: \"reasoning\",\n        controller: this.addReasoningPart(),\n      };\n    }\n    this._state.append.controller.append(textDelta);\n  }\n\n  addTextPart() {\n    const [stream, controller] = createTextStreamController();\n    this._addPart({ type: \"text\" }, stream);\n    return controller;\n  }\n\n  addReasoningPart() {\n    const [stream, controller] = createTextStreamController();\n    this._addPart({ type: \"reasoning\" }, stream);\n    return controller;\n  }\n\n  addToolCallPart(\n    options: string | ToolCallPartInit,\n  ): ToolCallStreamController {\n    const opt = typeof options === \"string\" ? { toolName: options } : options;\n    const toolName = opt.toolName;\n    const toolCallId = opt.toolCallId ?? generateId();\n\n    const [stream, controller] = createToolCallStreamController();\n    this._addPart(\n      {\n        type: \"tool-call\",\n        toolName,\n        toolCallId,\n        ...(this._parentId && { parentId: this._parentId }),\n      },\n      stream,\n    );\n\n    if (opt.argsText !== undefined) {\n      controller.argsText.append(opt.argsText);\n      controller.argsText.close();\n    }\n    if (opt.args !== undefined) {\n      controller.argsText.append(JSON.stringify(opt.args));\n      controller.argsText.close();\n    }\n    if (opt.response !== undefined) {\n      controller.setResponse(opt.response);\n    }\n\n    return controller;\n  }\n\n  appendSource(options: SourcePart) {\n    this._addPart(\n      { ...options, ...(this._parentId && { parentId: this._parentId }) },\n      new ReadableStream({\n        start(controller) {\n          controller.enqueue({\n            type: \"part-finish\",\n            path: [],\n          });\n          controller.close();\n        },\n      }),\n    );\n  }\n\n  appendFile(options: FilePart) {\n    this._addPart(\n      options,\n      new ReadableStream({\n        start(controller) {\n          controller.enqueue({\n            type: \"part-finish\",\n            path: [],\n          });\n          controller.close();\n        },\n      }),\n    );\n  }\n\n  enqueue(chunk: AssistantStreamChunk) {\n    this._state.merger.enqueue(chunk);\n\n    if (chunk.type === \"part-start\" && chunk.path.length === 0) {\n      this._state.contentCounter.up();\n    }\n  }\n\n  withParentId(parentId: string): AssistantStreamController {\n    const controller = new AssistantStreamControllerImpl(this._state);\n    controller._parentId = parentId;\n    return controller;\n  }\n\n  close() {\n    this._state.append?.controller?.close();\n    this._state.merger.seal();\n\n    this._state.closeSubscriber?.();\n  }\n}\n\nexport function createAssistantStream(\n  callback: (controller: AssistantStreamController) => PromiseLike<void> | void,\n): AssistantStream {\n  const controller = new AssistantStreamControllerImpl();\n\n  const runTask = async () => {\n    try {\n      await callback(controller);\n    } catch (e) {\n      if (!controller.__internal_isClosed) {\n        controller.enqueue({\n          type: \"error\",\n          path: [],\n          error: String(e),\n        });\n      }\n      throw e;\n    } finally {\n      if (!controller.__internal_isClosed) {\n        controller.close();\n      }\n    }\n  };\n  runTask();\n\n  return controller.__internal_getReadable();\n}\n\nexport function createAssistantStreamController() {\n  const { resolve, promise } = promiseWithResolvers<void>();\n  let controller!: AssistantStreamController;\n  const stream = createAssistantStream((c) => {\n    controller = c;\n\n    (controller as AssistantStreamControllerImpl).__internal_subscribeToClose(\n      resolve,\n    );\n\n    return promise;\n  });\n  return [stream, controller] as const;\n}\n\nexport function createAssistantStreamResponse(\n  callback: (controller: AssistantStreamController) => PromiseLike<void> | void,\n) {\n  return AssistantStream.toResponse(\n    createAssistantStream(callback),\n    new DataStreamEncoder(),\n  );\n}\n", "import { AssistantStreamChunk } from \"../../AssistantStreamChunk\";\nimport {\n  AssistantStreamController,\n  createAssistantStreamController,\n} from \"../../modules/assistant-stream\";\n\ntype AssistantTransformerFlushCallback = (\n  controller: AssistantStreamController,\n) => void | PromiseLike<void>;\n\ntype AssistantTransformerStartCallback = (\n  controller: AssistantStreamController,\n) => void | PromiseLike<void>;\n\ntype AssistantTransformerTransformCallback<I> = (\n  chunk: I,\n  controller: AssistantStreamController,\n) => void | PromiseLike<void>;\n\ntype AssistantTransformer<I> = {\n  flush?: AssistantTransformerFlushCallback;\n  start?: AssistantTransformerStartCallback;\n  transform?: AssistantTransformerTransformCallback<I>;\n};\n\nexport class AssistantTransformStream<I> extends TransformStream<\n  I,\n  AssistantStreamChunk\n> {\n  constructor(\n    transformer: AssistantTransformer<I>,\n    writableStrategy?: QueuingStrategy<I>,\n    readableStrategy?: QueuingStrategy<AssistantStreamChunk>,\n  ) {\n    const [stream, runController] = createAssistantStreamController();\n\n    let runPipeTask: Promise<void>;\n    super(\n      {\n        start(controller) {\n          runPipeTask = stream\n            .pipeTo(\n              new WritableStream({\n                write(chunk) {\n                  controller.enqueue(chunk);\n                },\n                abort(reason?: any) {\n                  controller.error(reason);\n                },\n                close() {\n                  controller.terminate();\n                },\n              }),\n            )\n            .catch((error) => {\n              controller.error(error);\n            });\n\n          return transformer.start?.(runController);\n        },\n        transform(chunk) {\n          return transformer.transform?.(chunk, runController);\n        },\n        async flush() {\n          await transformer.flush?.(runController);\n          runController.close();\n          await runPipeTask;\n        },\n      },\n      writableStrategy,\n      readableStrategy,\n    );\n  }\n}\n", "import { parsePartialJsonObject } from \"assistant-stream/utils\";\nimport { generateId } from \"../../../utils/idUtils\";\nimport {\n  MessageStatus,\n  TextMessagePart,\n  ImageMessagePart,\n  ThreadMessage,\n  ThreadAssistantMessagePart,\n  ThreadAssistantMessage,\n  ThreadUserMessagePart,\n  ThreadUserMessage,\n  ThreadSystemMessage,\n  CompleteAttachment,\n  FileMessagePart,\n  DataMessagePart,\n  Unstable_AudioMessagePart,\n} from \"../../../types\";\nimport {\n  ReasoningMessagePart,\n  SourceMessagePart,\n  ThreadStep,\n} from \"../../../types/AssistantTypes\";\nimport { ReadonlyJSONObject, ReadonlyJSONValue } from \"assistant-stream/utils\";\n\nexport type ThreadMessageLike = {\n  readonly role: \"assistant\" | \"user\" | \"system\";\n  readonly content:\n    | string\n    | readonly (\n        | TextMessagePart\n        | ReasoningMessagePart\n        | SourceMessagePart\n        | ImageMessagePart\n        | FileMessagePart\n        | DataMessagePart\n        | Unstable_AudioMessagePart\n        | {\n            readonly type: \"tool-call\";\n            readonly toolCallId?: string;\n            readonly toolName: string;\n            readonly args?: ReadonlyJSONObject;\n            readonly argsText?: string;\n            readonly artifact?: any;\n            readonly result?: any | undefined;\n            readonly isError?: boolean | undefined;\n            readonly parentId?: string | undefined;\n            readonly messages?: readonly ThreadMessage[] | undefined;\n          }\n      )[];\n  readonly id?: string | undefined;\n  readonly createdAt?: Date | undefined;\n  readonly status?: MessageStatus | undefined;\n  readonly attachments?: readonly CompleteAttachment[] | undefined;\n  readonly metadata?:\n    | {\n        readonly unstable_state?: ReadonlyJSONValue;\n        readonly unstable_annotations?:\n          | readonly ReadonlyJSONValue[]\n          | undefined;\n        readonly unstable_data?: readonly ReadonlyJSONValue[] | undefined;\n        readonly steps?: readonly ThreadStep[] | undefined;\n        readonly submittedFeedback?: { readonly type: \"positive\" | \"negative\" };\n        readonly custom?: Record<string, unknown> | undefined;\n      }\n    | undefined;\n};\n\nexport const fromThreadMessageLike = (\n  like: ThreadMessageLike,\n  fallbackId: string,\n  fallbackStatus: MessageStatus,\n): ThreadMessage => {\n  const { role, id, createdAt, attachments, status, metadata } = like;\n  const common = {\n    id: id ?? fallbackId,\n    createdAt: createdAt ?? new Date(),\n  };\n\n  const content =\n    typeof like.content === \"string\"\n      ? [{ type: \"text\" as const, text: like.content }]\n      : like.content;\n\n  const sanitizeImageContent = ({\n    image,\n    ...rest\n  }: ImageMessagePart): ImageMessagePart | null => {\n    const match = image.match(\n      /^data:image\\/(png|jpeg|jpg|gif|webp);base64,(.*)$/,\n    );\n    if (match) {\n      return { ...rest, image };\n    }\n    console.warn(`Invalid image data format detected`);\n    return null;\n  };\n\n  if (role !== \"user\" && attachments?.length)\n    throw new Error(\"attachments are only supported for user messages\");\n\n  if (role !== \"assistant\" && status)\n    throw new Error(\"status is only supported for assistant messages\");\n\n  if (role !== \"assistant\" && metadata?.steps)\n    throw new Error(\"metadata.steps is only supported for assistant messages\");\n\n  switch (role) {\n    case \"assistant\":\n      return {\n        ...common,\n        role,\n        content: content\n          .map((part): ThreadAssistantMessagePart | null => {\n            const type = part.type;\n            switch (type) {\n              case \"text\":\n              case \"reasoning\":\n                if (part.text.trim().length === 0) return null;\n                return part;\n\n              case \"file\":\n              case \"source\":\n                return part;\n\n              case \"image\":\n                return sanitizeImageContent(part);\n\n              case \"data\":\n                return part;\n\n              case \"tool-call\": {\n                const { parentId, messages, ...basePart } = part;\n                const commonProps = {\n                  ...basePart,\n                  toolCallId: part.toolCallId ?? `tool-${generateId()}`,\n                  ...(parentId !== undefined && { parentId }),\n                  ...(messages !== undefined && { messages }),\n                };\n\n                if (part.args) {\n                  return {\n                    ...commonProps,\n                    args: part.args,\n                    argsText: part.argsText ?? JSON.stringify(part.args),\n                  };\n                }\n                return {\n                  ...commonProps,\n                  args: parsePartialJsonObject(part.argsText ?? \"\") ?? {},\n                  argsText: part.argsText ?? \"\",\n                };\n              }\n\n              default: {\n                const unhandledType: \"audio\" = type;\n                throw new Error(\n                  `Unsupported assistant message part type: ${unhandledType}`,\n                );\n              }\n            }\n          })\n          .filter((c) => !!c),\n        status: status ?? fallbackStatus,\n        metadata: {\n          unstable_state: metadata?.unstable_state ?? null,\n          unstable_annotations: metadata?.unstable_annotations ?? [],\n          unstable_data: metadata?.unstable_data ?? [],\n          custom: metadata?.custom ?? {},\n          steps: metadata?.steps ?? [],\n          ...(metadata?.submittedFeedback && {\n            submittedFeedback: metadata.submittedFeedback,\n          }),\n        },\n      } satisfies ThreadAssistantMessage;\n\n    case \"user\":\n      return {\n        ...common,\n        role,\n        content: content.map((part): ThreadUserMessagePart => {\n          const type = part.type;\n          switch (type) {\n            case \"text\":\n            case \"image\":\n            case \"audio\":\n            case \"file\":\n              return part;\n\n            default: {\n              const unhandledType:\n                | \"tool-call\"\n                | \"reasoning\"\n                | \"source\"\n                | \"data\" = type;\n              throw new Error(\n                `Unsupported user message part type: ${unhandledType}`,\n              );\n            }\n          }\n        }),\n        attachments: attachments ?? [],\n        metadata: {\n          custom: metadata?.custom ?? {},\n        },\n      } satisfies ThreadUserMessage;\n\n    case \"system\":\n      if (content.length !== 1 || content[0]!.type !== \"text\")\n        throw new Error(\n          \"System messages must have exactly one text message part.\",\n        );\n\n      return {\n        ...common,\n        role,\n        content: content as [TextMessagePart],\n        metadata: {\n          custom: metadata?.custom ?? {},\n        },\n      } satisfies ThreadSystemMessage;\n\n    default: {\n      const unsupportedRole: never = role;\n      throw new Error(`Unknown message role: ${unsupportedRole}`);\n    }\n  }\n};\n", "import type { ThreadMessage } from \"../../../types\";\nimport { RunConfig } from \"../../../types/AssistantTypes\";\nimport { generateId, generateOptimisticId } from \"../../../utils/idUtils\";\nimport { ThreadMessageLike } from \"../external-store\";\nimport { getAutoStatus } from \"../external-store/auto-status\";\nimport { fromThreadMessageLike } from \"../external-store/ThreadMessageLike\";\n\n/**\n * Represents a parent node in the repository tree structure.\n */\ntype RepositoryParent = {\n  /** IDs of child messages */\n  children: string[];\n  /** Reference to the next message in the active branch */\n  next: RepositoryMessage | null;\n};\n\n/**\n * Represents a message node in the repository tree structure.\n */\ntype RepositoryMessage = RepositoryParent & {\n  /** Reference to the parent message */\n  prev: RepositoryMessage | null;\n  /** The actual message data */\n  current: ThreadMessage;\n  /** The depth level in the tree (0 for root messages) */\n  level: number;\n};\n\n/**\n * Represents a message item that can be exported from the repository.\n */\nexport type ExportedMessageRepositoryItem = {\n  /** The message data */\n  message: ThreadMessage;\n  /** ID of the parent message, or null for root messages */\n  parentId: string | null;\n  /** The run configuration for the message */\n  runConfig?: RunConfig;\n};\n\n/**\n * Represents the entire repository state for export/import.\n */\nexport type ExportedMessageRepository = {\n  /** ID of the head message, or null/undefined if no head */\n  headId?: string | null;\n  /** Array of all messages with their parent references */\n  messages: Array<{\n    message: ThreadMessage;\n    parentId: string | null;\n    runConfig?: RunConfig;\n  }>;\n};\n\n/**\n * Utility functions for working with exported message repositories.\n */\nexport const ExportedMessageRepository = {\n  /**\n   * Converts an array of messages to an ExportedMessageRepository format.\n   * Creates parent-child relationships based on the order of messages in the array.\n   *\n   * @param messages - Array of message-like objects to convert\n   * @returns ExportedMessageRepository with parent-child relationships established\n   */\n  fromArray: (\n    messages: readonly ThreadMessageLike[],\n  ): ExportedMessageRepository => {\n    const conv = messages.map((m) =>\n      fromThreadMessageLike(\n        m,\n        generateId(),\n        getAutoStatus(false, false, false, false, undefined),\n      ),\n    );\n\n    return {\n      messages: conv.map((m, idx) => ({\n        parentId: idx > 0 ? conv[idx - 1]!.id : null,\n        message: m,\n      })),\n    };\n  },\n};\n\n/**\n * Recursively finds the head (leaf) message in a branch.\n *\n * @param message - The starting message or parent node\n * @returns The leaf message of the branch, or null if not found\n */\nconst findHead = (\n  message: RepositoryMessage | RepositoryParent,\n): RepositoryMessage | null => {\n  if (message.next) return findHead(message.next);\n  if (\"current\" in message) return message;\n  return null;\n};\n\n/**\n * A utility class for caching computed values and invalidating the cache when needed.\n */\nclass CachedValue<T> {\n  private _value: T | null = null;\n\n  /**\n   * @param func - The function that computes the cached value\n   */\n  constructor(private func: () => T) {}\n\n  /**\n   * Gets the cached value, computing it if necessary.\n   */\n  get value() {\n    if (this._value === null) {\n      this._value = this.func();\n    }\n    return this._value;\n  }\n\n  /**\n   * Invalidates the cache, forcing recomputation on next access.\n   */\n  dirty() {\n    this._value = null;\n  }\n}\n\n/**\n * A repository that manages a tree of messages with branching capabilities.\n * Supports operations like adding, updating, and deleting messages, as well as\n * managing multiple conversation branches.\n */\nexport class MessageRepository {\n  /** Map of message IDs to repository message objects */\n  private messages = new Map<string, RepositoryMessage>();\n  /** Reference to the current head (most recent) message in the active branch */\n  private head: RepositoryMessage | null = null;\n  /** Root node of the tree structure */\n  private root: RepositoryParent = {\n    children: [],\n    next: null,\n  };\n\n  /**\n   * Recursively updates the level of a message and all its descendants.\n   *\n   * @param message - The message to update\n   * @param newLevel - The new level for the message\n   */\n  private updateLevels(message: RepositoryMessage, newLevel: number) {\n    message.level = newLevel;\n    for (const childId of message.children) {\n      const childMessage = this.messages.get(childId);\n      if (childMessage) {\n        this.updateLevels(childMessage, newLevel + 1);\n      }\n    }\n  }\n\n  /**\n   * Performs link/unlink operations between messages in the tree.\n   *\n   * @param newParent - The new parent message, or null\n   * @param child - The child message to operate on\n   * @param operation - The type of operation to perform:\n   *   - \"cut\": Remove the child from its current parent\n   *   - \"link\": Add the child to a new parent\n   *   - \"relink\": Both cut and link operations\n   */\n  private performOp(\n    newParent: RepositoryMessage | null,\n    child: RepositoryMessage,\n    operation: \"cut\" | \"link\" | \"relink\",\n  ) {\n    const parentOrRoot = child.prev ?? this.root;\n    const newParentOrRoot = newParent ?? this.root;\n\n    if (operation === \"relink\" && parentOrRoot === newParentOrRoot) return;\n\n    // cut\n    if (operation !== \"link\") {\n      // remove from parentOrRoot.children\n      parentOrRoot.children = parentOrRoot.children.filter(\n        (m) => m !== child.current.id,\n      );\n\n      // update parentOrRoot.next\n      if (parentOrRoot.next === child) {\n        const fallbackId = parentOrRoot.children.at(-1);\n        const fallback = fallbackId ? this.messages.get(fallbackId) : null;\n        if (fallback === undefined) {\n          throw new Error(\n            \"MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.\",\n          );\n        }\n        parentOrRoot.next = fallback;\n      }\n    }\n\n    // link\n    if (operation !== \"cut\") {\n      // ensure the child is not part of parent tree\n      for (\n        let current: RepositoryMessage | null = newParent;\n        current;\n        current = current.prev\n      ) {\n        if (current.current.id === child.current.id) {\n          throw new Error(\n            \"MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.\",\n          );\n        }\n      }\n\n      // add to parentOrRoot.children\n      newParentOrRoot.children = [\n        ...newParentOrRoot.children,\n        child.current.id,\n      ];\n\n      // update parentOrRoot.next\n      if (findHead(child) === this.head || newParentOrRoot.next === null) {\n        newParentOrRoot.next = child;\n      }\n\n      child.prev = newParent;\n\n      // update levels when linking/relinking to a new parent\n      const newLevel = newParent ? newParent.level + 1 : 0;\n      this.updateLevels(child, newLevel);\n    }\n  }\n\n  /** Cached array of messages in the current active branch, from root to head */\n  private _messages = new CachedValue<readonly ThreadMessage[]>(() => {\n    const messages = new Array<ThreadMessage>((this.head?.level ?? -1) + 1);\n    for (let current = this.head; current; current = current.prev) {\n      messages[current.level] = current.current;\n    }\n    return messages;\n  });\n\n  /**\n   * Gets the ID of the current head message.\n   * @returns The ID of the head message, or null if no messages exist\n   */\n  get headId() {\n    return this.head?.current.id ?? null;\n  }\n\n  /**\n   * Gets all messages in the current active branch, from root to head.\n   * @param headId - Optional ID of the head message to get messages for. If not provided, uses the current head.\n   * @returns Array of messages in the specified branch\n   */\n  getMessages(headId?: string) {\n    if (headId === undefined || headId === this.head?.current.id) {\n      return this._messages.value;\n    }\n\n    const headMessage = this.messages.get(headId);\n    if (!headMessage) {\n      throw new Error(\n        \"MessageRepository(getMessages): Head message not found. This is likely an internal bug in assistant-ui.\",\n      );\n    }\n\n    const messages = new Array<ThreadMessage>(headMessage.level + 1);\n    for (\n      let current: RepositoryMessage | null = headMessage;\n      current;\n      current = current.prev\n    ) {\n      messages[current.level] = current.current;\n    }\n    return messages;\n  }\n\n  /**\n   * Adds a new message or updates an existing one in the repository.\n   * If the message ID already exists, the message is updated and potentially relinked to a new parent.\n   * If the message is new, it's added as a child of the specified parent.\n   *\n   * @param parentId - ID of the parent message, or null for root messages\n   * @param message - The message to add or update\n   * @throws Error if the parent message is not found\n   */\n  addOrUpdateMessage(parentId: string | null, message: ThreadMessage) {\n    const existingItem = this.messages.get(message.id);\n    const prev = parentId ? this.messages.get(parentId) : null;\n    if (prev === undefined)\n      throw new Error(\n        \"MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    // update existing message\n    if (existingItem) {\n      existingItem.current = message;\n      this.performOp(prev, existingItem, \"relink\");\n      this._messages.dirty();\n      return;\n    }\n\n    // create a new message\n    const newItem: RepositoryMessage = {\n      prev,\n      current: message,\n      next: null,\n      children: [],\n      level: prev ? prev.level + 1 : 0,\n    };\n\n    this.messages.set(message.id, newItem);\n    this.performOp(prev, newItem, \"link\");\n\n    if (this.head === prev) {\n      this.head = newItem;\n    }\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Gets a message and its parent ID by message ID.\n   *\n   * @param messageId - ID of the message to retrieve\n   * @returns Object containing the message and its parent ID\n   * @throws Error if the message is not found\n   */\n  getMessage(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    return {\n      parentId: message.prev?.current.id ?? null,\n      message: message.current,\n      index: message.level,\n    };\n  }\n\n  /**\n   * Adds an optimistic message to the repository.\n   * An optimistic message is a temporary placeholder that will be replaced by a real message later.\n   *\n   * @param parentId - ID of the parent message, or null for root messages\n   * @param message - The core message to convert to an optimistic message\n   * @returns The generated optimistic ID\n   */\n  appendOptimisticMessage(parentId: string | null, message: ThreadMessageLike) {\n    let optimisticId: string;\n    do {\n      optimisticId = generateOptimisticId();\n    } while (this.messages.has(optimisticId));\n\n    this.addOrUpdateMessage(\n      parentId,\n      fromThreadMessageLike(message, optimisticId, { type: \"running\" }),\n    );\n\n    return optimisticId;\n  }\n\n  /**\n   * Deletes a message from the repository and relinks its children.\n   *\n   * @param messageId - ID of the message to delete\n   * @param replacementId - Optional ID of the message to become the new parent of the children,\n   *                       undefined means use the deleted message's parent,\n   *                       null means use the root\n   * @throws Error if the message or replacement is not found\n   */\n  deleteMessage(messageId: string, replacementId?: string | null | undefined) {\n    const message = this.messages.get(messageId);\n\n    if (!message)\n      throw new Error(\n        \"MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const replacement =\n      replacementId === undefined\n        ? message.prev // if no replacementId is provided, use the parent\n        : replacementId === null\n          ? null\n          : this.messages.get(replacementId);\n    if (replacement === undefined)\n      throw new Error(\n        \"MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    for (const child of message.children) {\n      const childMessage = this.messages.get(child);\n      if (!childMessage)\n        throw new Error(\n          \"MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.\",\n        );\n      this.performOp(replacement, childMessage, \"relink\");\n    }\n\n    this.performOp(null, message, \"cut\");\n    this.messages.delete(messageId);\n\n    if (this.head === message) {\n      this.head = findHead(replacement ?? this.root);\n    }\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Gets all branch IDs (sibling messages) at the level of a specified message.\n   *\n   * @param messageId - ID of the message to find branches for\n   * @returns Array of message IDs representing branches\n   * @throws Error if the message is not found\n   */\n  getBranches(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const { children } = message.prev ?? this.root;\n    return children;\n  }\n\n  /**\n   * Switches the active branch to the one containing the specified message.\n   *\n   * @param messageId - ID of the message in the branch to switch to\n   * @throws Error if the branch is not found\n   */\n  switchToBranch(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const prevOrRoot = message.prev ?? this.root;\n    prevOrRoot.next = message;\n\n    this.head = findHead(message);\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Resets the head to a specific message or null.\n   *\n   * @param messageId - ID of the message to set as head, or null to clear the head\n   * @throws Error if the message is not found\n   */\n  resetHead(messageId: string | null) {\n    if (messageId === null) {\n      this.clear();\n      return;\n    }\n\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    if (message.children.length > 0) {\n      const deleteDescendants = (msg: RepositoryMessage) => {\n        for (const childId of msg.children) {\n          const childMessage = this.messages.get(childId);\n          if (childMessage) {\n            deleteDescendants(childMessage);\n            this.messages.delete(childId);\n          }\n        }\n      };\n      deleteDescendants(message);\n\n      message.children = [];\n      message.next = null;\n    }\n\n    this.head = message;\n    for (\n      let current: RepositoryMessage | null = message;\n      current;\n      current = current.prev\n    ) {\n      if (current.prev) {\n        current.prev.next = current;\n      }\n    }\n\n    this._messages.dirty();\n  }\n\n  /**\n   * Clears all messages from the repository.\n   */\n  clear(): void {\n    this.messages.clear();\n    this.head = null;\n    this.root = {\n      children: [],\n      next: null,\n    };\n    this._messages.dirty();\n  }\n\n  /**\n   * Exports the repository state for persistence.\n   *\n   * @returns Exportable repository state\n   */\n  export(): ExportedMessageRepository {\n    const exportItems: ExportedMessageRepository[\"messages\"] = [];\n\n    // hint: we are relying on the insertion order of the messages\n    // this is important for the import function to properly link the messages\n    for (const [, message] of this.messages) {\n      exportItems.push({\n        message: message.current,\n        parentId: message.prev?.current.id ?? null,\n      });\n    }\n\n    return {\n      headId: this.head?.current.id ?? null,\n      messages: exportItems,\n    };\n  }\n\n  /**\n   * Imports repository state from an exported repository.\n   *\n   * @param repository - The exported repository state to import\n   */\n  import({ headId, messages }: ExportedMessageRepository) {\n    for (const { message, parentId } of messages) {\n      this.addOrUpdateMessage(parentId, message);\n    }\n\n    // switch to the saved head id if it is not the most recent message\n    this.resetHead(headId ?? messages.at(-1)?.message.id ?? null);\n  }\n}\n", "import { Unsubscribe } from \"../../../types/Unsubscribe\";\n\nexport abstract class BaseSubject {\n  private _subscriptions = new Set<() => void>();\n  private _connection: Unsubscribe | undefined;\n\n  protected get isConnected() {\n    return !!this._connection;\n  }\n\n  protected abstract _connect(): Unsubscribe;\n\n  protected notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n\n  private _updateConnection() {\n    if (this._subscriptions.size > 0) {\n      if (this._connection) return;\n      this._connection = this._connect();\n    } else {\n      this._connection?.();\n      this._connection = undefined;\n    }\n  }\n\n  public subscribe(callback: () => void) {\n    this._subscriptions.add(callback);\n    this._updateConnection();\n\n    return () => {\n      this._subscriptions.delete(callback);\n      this._updateConnection();\n    };\n  }\n}\n", "export const SKIP_UPDATE = Symbol(\"skip-update\");\nexport type SKIP_UPDATE = typeof SKIP_UPDATE;\n", "import { BaseSubject } from \"./BaseSubject\";\nimport { SKIP_UPDATE } from \"./SKIP_UPDATE\";\nimport { SubscribableWithState } from \"./Subscribable\";\n\nexport class LazyMemoizeSubject<TState extends object, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(\n    private binding: SubscribableWithState<TState | SKIP_UPDATE, TPath>,\n  ) {\n    super();\n  }\n\n  private _previousStateDirty = true;\n  private _previousState: TState | undefined;\n  public getState = () => {\n    if (!this.isConnected || this._previousStateDirty) {\n      const newState = this.binding.getState();\n      if (newState !== SKIP_UPDATE) {\n        this._previousState = newState;\n      }\n      this._previousStateDirty = false;\n    }\n    if (this._previousState === undefined)\n      throw new Error(\"Entry not available in the store\");\n    return this._previousState;\n  };\n\n  protected _connect() {\n    const callback = () => {\n      this._previousStateDirty = true;\n      this.notifySubscribers();\n    };\n\n    return this.binding.subscribe(callback);\n  }\n}\n", "import { Unsubscribe } from \"../../types\";\nimport { ThreadListItemRuntimePath } from \"./RuntimePathTypes\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { ThreadListRuntimeCoreBinding } from \"./ThreadListRuntime\";\n\nexport type ThreadListItemEventType = \"switchedTo\" | \"switchedAway\";\n\nimport type {\n  ThreadListItemState,\n  ThreadListItemStatus,\n} from \"./RuntimeBindings\";\n\nexport type { ThreadListItemState, ThreadListItemStatus };\n\nexport type ThreadListItemRuntime = {\n  readonly path: ThreadListItemRuntimePath;\n  getState(): ThreadListItemState;\n\n  initialize(): Promise<{ remoteId: string; externalId: string | undefined }>;\n  generateTitle(): Promise<void>;\n\n  switchTo(): Promise<void>;\n  rename(newTitle: string): Promise<void>;\n  archive(): Promise<void>;\n  unarchive(): Promise<void>;\n  delete(): Promise<void>;\n\n  /**\n   * Detaches the ThreadListItem instance, unmounting the ThreadRuntime hook.\n   */\n  detach(): void;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  unstable_on(\n    event: ThreadListItemEventType,\n    callback: () => void,\n  ): Unsubscribe;\n\n  /** @internal */\n  __internal_getRuntime(): ThreadListItemRuntime;\n};\n\nexport type ThreadListItemStateBinding = SubscribableWithState<\n  ThreadListItemState,\n  ThreadListItemRuntimePath\n>;\n\nexport class ThreadListItemRuntimeImpl implements ThreadListItemRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  constructor(\n    private _core: ThreadListItemStateBinding,\n    private _threadListBinding: ThreadListRuntimeCoreBinding,\n  ) {\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.switchTo = this.switchTo.bind(this);\n    this.rename = this.rename.bind(this);\n    this.archive = this.archive.bind(this);\n    this.unarchive = this.unarchive.bind(this);\n    this.delete = this.delete.bind(this);\n    this.initialize = this.initialize.bind(this);\n    this.generateTitle = this.generateTitle.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.unstable_on = this.unstable_on.bind(this);\n    this.getState = this.getState.bind(this);\n    this.detach = this.detach.bind(this);\n  }\n\n  public getState(): ThreadListItemState {\n    return this._core.getState();\n  }\n\n  public switchTo(): Promise<void> {\n    const state = this._core.getState();\n    return this._threadListBinding.switchToThread(state.id);\n  }\n\n  public rename(newTitle: string): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.rename(state.id, newTitle);\n  }\n\n  public archive(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.archive(state.id);\n  }\n\n  public unarchive(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.unarchive(state.id);\n  }\n\n  public delete(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.delete(state.id);\n  }\n\n  public initialize(): Promise<{\n    remoteId: string;\n    externalId: string | undefined;\n  }> {\n    const state = this._core.getState();\n    return this._threadListBinding.initialize(state.id);\n  }\n\n  public generateTitle(): Promise<void> {\n    const state = this._core.getState();\n    return this._threadListBinding.generateTitle(state.id);\n  }\n\n  public unstable_on(event: ThreadListItemEventType, callback: () => void) {\n    // if the runtime is bound to a specific thread, trigger if isMain is toggled\n    // if the runtime is bound to the main thread, trigger switchedTo if threadId changes\n\n    let prevIsMain = this._core.getState().isMain;\n    let prevThreadId = this._core.getState().id;\n    return this.subscribe(() => {\n      const currentState = this._core.getState();\n      const newIsMain = currentState.isMain;\n      const newThreadId = currentState.id;\n      if (prevIsMain === newIsMain && prevThreadId === newThreadId) return;\n      prevIsMain = newIsMain;\n      prevThreadId = newThreadId;\n\n      if (event === \"switchedTo\" && !newIsMain) return;\n      if (event === \"switchedAway\" && newIsMain) return;\n      callback();\n    });\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    return this._core.subscribe(callback);\n  }\n\n  public detach(): void {\n    const state = this._core.getState();\n\n    this._threadListBinding.detach(state.id);\n  }\n\n  /** @internal */\n  public __internal_getRuntime(): ThreadListItemRuntime {\n    return this;\n  }\n}\n", "export function shallowEqual<T extends object>(\n  objA: T | undefined,\n  objB: T | undefined,\n) {\n  if (objA === undefined && objB === undefined) return true;\n  if (objA === undefined) return false;\n  if (objB === undefined) return false;\n\n  for (const key of Object.keys(objA)) {\n    const valueA = objA[key as keyof T];\n    const valueB = objB[key as keyof T];\n    if (!Object.is(valueA, valueB)) return false;\n  }\n\n  return true;\n}\n", "import { shallowEqual } from \"./shallowEqual\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport { SubscribableWithState } from \"./Subscribable\";\nimport { SKIP_UPDATE } from \"./SKIP_UPDATE\";\n\nexport class ShallowMemoizeSubject<TState extends object, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(\n    private binding: SubscribableWithState<TState | SKIP_UPDATE, TPath>,\n  ) {\n    super();\n    const state = binding.getState();\n    if (state === SKIP_UPDATE)\n      throw new Error(\"Entry not available in the store\");\n    this._previousState = state;\n  }\n\n  private _previousState: TState;\n  public getState = () => {\n    if (!this.isConnected) this._syncState();\n    return this._previousState;\n  };\n\n  private _syncState() {\n    const state = this.binding.getState();\n    if (state === SKIP_UPDATE) return false;\n    if (shallowEqual(state, this._previousState)) return false;\n    this._previousState = state;\n    return true;\n  }\n\n  protected _connect() {\n    const callback = () => {\n      if (this._syncState()) {\n        this.notifySubscribers();\n      }\n    };\n\n    return this.binding.subscribe(callback);\n  }\n}\n", "import { ThreadState } from \"../../runtime\";\nimport { ThreadMessage } from \"../../../types\";\n\nexport const symbolInnerMessage = Symbol(\"innerMessage\");\nconst symbolInnerMessages = Symbol(\"innerMessages\");\n\ntype WithInnerMessages<T> = {\n  [symbolInnerMessage]?: T | T[];\n  [symbolInnerMessages]?: T[];\n};\n\n/**\n * @deprecated Use `getExternalStoreMessages` (plural) instead. This function will be removed in 0.12.0.\n */\nexport const getExternalStoreMessage = <T,>(input: ThreadMessage) => {\n  const withInnerMessages = input as WithInnerMessages<T>;\n  return withInnerMessages[symbolInnerMessage];\n};\n\nconst EMPTY_ARRAY: never[] = [];\n\nexport const getExternalStoreMessages = <T,>(\n  input: ThreadState | ThreadMessage | ThreadMessage[\"content\"][number],\n) => {\n  // TODO temp until 0.12.0 (migrate useExternalStoreRuntime to always set an array)\n\n  const container = (\n    \"messages\" in input ? input.messages : input\n  ) as WithInnerMessages<T>;\n  const value = container[symbolInnerMessages] || container[symbolInnerMessage];\n  if (!value) return EMPTY_ARRAY;\n  if (Array.isArray(value)) {\n    return value;\n  }\n  container[symbolInnerMessages] = [value];\n  return container[symbolInnerMessages];\n};\n", "import type {\n  AppendMessage,\n  TextMessagePart,\n  ThreadMessage,\n} from \"../types/AssistantTypes\";\n\nexport const getThreadMessageText = (\n  message: ThreadMessage | AppendMessage,\n) => {\n  const textParts = message.content.filter(\n    (part) => part.type === \"text\",\n  ) as TextMessagePart[];\n\n  return textParts.map((part) => part.text).join(\"\\n\\n\");\n};\n", "import { SubscribableWithState } from \"./subscribable/Subscribable\";\n\nimport type { ComposerRuntimeCoreBinding } from \"./RuntimeBindings\";\nimport {\n  Attachment,\n  CompleteAttachment,\n  PendingAttachment,\n  Unsubscribe,\n} from \"../../types\";\nimport { AttachmentRuntimePath } from \"./RuntimePathTypes\";\n\ntype MessageAttachmentState = CompleteAttachment & {\n  readonly source: \"message\";\n};\n\ntype ThreadComposerAttachmentState = PendingAttachment & {\n  readonly source: \"thread-composer\";\n};\n\ntype EditComposerAttachmentState = Attachment & {\n  readonly source: \"edit-composer\";\n};\n\nexport type AttachmentState =\n  | ThreadComposerAttachmentState\n  | EditComposerAttachmentState\n  | MessageAttachmentState;\n\ntype AttachmentSnapshotBinding<Source extends AttachmentRuntimeSource> =\n  SubscribableWithState<\n    AttachmentState & { source: Source },\n    AttachmentRuntimePath & { attachmentSource: Source }\n  >;\n\ntype AttachmentRuntimeSource = AttachmentState[\"source\"];\n\nexport type AttachmentRuntime<\n  TSource extends AttachmentRuntimeSource = AttachmentRuntimeSource,\n> = {\n  readonly path: AttachmentRuntimePath & { attachmentSource: TSource };\n  readonly source: TSource;\n  getState(): AttachmentState & { source: TSource };\n  remove(): Promise<void>;\n  subscribe(callback: () => void): Unsubscribe;\n};\n\nexport abstract class AttachmentRuntimeImpl<\n  Source extends AttachmentRuntimeSource = AttachmentRuntimeSource,\n> implements AttachmentRuntime\n{\n  public get path() {\n    return this._core.path;\n  }\n\n  public abstract get source(): Source;\n\n  constructor(private _core: AttachmentSnapshotBinding<Source>) {\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.getState = this.getState.bind(this);\n    this.remove = this.remove.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n  }\n\n  public getState(): AttachmentState & { source: Source } {\n    return this._core.getState();\n  }\n\n  public abstract remove(): Promise<void>;\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n}\n\nabstract class ComposerAttachmentRuntime<\n  Source extends \"thread-composer\" | \"edit-composer\",\n> extends AttachmentRuntimeImpl<Source> {\n  constructor(\n    core: AttachmentSnapshotBinding<Source>,\n    private _composerApi: ComposerRuntimeCoreBinding,\n  ) {\n    super(core);\n  }\n\n  public remove() {\n    const core = this._composerApi.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.removeAttachment(this.getState().id);\n  }\n}\n\nexport class ThreadComposerAttachmentRuntimeImpl extends ComposerAttachmentRuntime<\"thread-composer\"> {\n  public get source(): \"thread-composer\" {\n    return \"thread-composer\";\n  }\n}\n\nexport class EditComposerAttachmentRuntimeImpl extends ComposerAttachmentRuntime<\"edit-composer\"> {\n  public get source(): \"edit-composer\" {\n    return \"edit-composer\";\n  }\n}\n\nexport class MessageAttachmentRuntimeImpl extends AttachmentRuntimeImpl<\"message\"> {\n  public get source(): \"message\" {\n    return \"message\";\n  }\n\n  constructor(core: AttachmentSnapshotBinding<\"message\">) {\n    super(core);\n  }\n\n  public remove(): never {\n    throw new Error(\"Message attachments cannot be removed\");\n  }\n}\n", "import { Unsubscribe } from \"../../../types\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport { EventSubscribable } from \"./Subscribable\";\n\nexport class EventSubscriptionSubject<\n  TEvent extends string,\n> extends BaseSubject {\n  constructor(private config: EventSubscribable<TEvent>) {\n    super();\n  }\n\n  public getState() {\n    return this.config.binding.getState();\n  }\n\n  public outerSubscribe(callback: () => void) {\n    return this.config.binding.subscribe(callback);\n  }\n\n  protected _connect(): Unsubscribe {\n    const callback = () => {\n      this.notifySubscribers();\n    };\n\n    let lastState = this.config.binding.getState();\n    let innerUnsubscribe = lastState?.unstable_on(this.config.event, callback);\n    const onRuntimeUpdate = () => {\n      const newState = this.config.binding.getState();\n      if (newState === lastState) return;\n      lastState = newState;\n\n      innerUnsubscribe?.();\n      innerUnsubscribe = this.config.binding\n        .getState()\n        ?.unstable_on(this.config.event, callback);\n    };\n\n    const outerUnsubscribe = this.outerSubscribe(onRuntimeUpdate);\n    return () => {\n      outerUnsubscribe?.();\n      innerUnsubscribe?.();\n    };\n  }\n}\n", "import type {\n  Attachment,\n  PendingAttachment,\n} from \"../../types/AttachmentTypes\";\nimport type {\n  ComposerRuntimeCore,\n  ComposerRuntimeEventType,\n  DictationState,\n  ThreadComposerRuntimeCore,\n} from \"../runtime-cores/core/ComposerRuntimeCore\";\nimport type { Unsubscribe } from \"../../types\";\nimport type { MessageRole, RunConfig } from \"../../types/AssistantTypes\";\nimport type {\n  ThreadComposerRuntimeCoreBinding,\n  EditComposerRuntimeCoreBinding,\n  ComposerRuntimeCoreBinding,\n} from \"./RuntimeBindings\";\nimport type { ComposerRuntimePath } from \"./RuntimePathTypes\";\n\nimport { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport {\n  type AttachmentRuntime,\n  type AttachmentState,\n  EditComposerAttachmentRuntimeImpl,\n  ThreadComposerAttachmentRuntimeImpl,\n} from \"./AttachmentRuntime\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { EventSubscriptionSubject } from \"./subscribable/EventSubscriptionSubject\";\n\nexport type {\n  ThreadComposerRuntimeCoreBinding,\n  EditComposerRuntimeCoreBinding,\n  ComposerRuntimeCoreBinding,\n};\n\ntype BaseComposerState = {\n  readonly canCancel: boolean;\n  readonly isEditing: boolean;\n  readonly isEmpty: boolean;\n\n  readonly text: string;\n  readonly role: MessageRole;\n  readonly attachments: readonly Attachment[];\n  readonly runConfig: RunConfig;\n\n  readonly attachmentAccept: string;\n\n  /**\n   * The current state of dictation.\n   * Undefined when dictation is not active.\n   */\n  readonly dictation: DictationState | undefined;\n};\n\nexport type ThreadComposerState = BaseComposerState & {\n  readonly type: \"thread\";\n\n  readonly attachments: readonly PendingAttachment[];\n};\n\nexport type EditComposerState = BaseComposerState & {\n  readonly type: \"edit\";\n};\n\nexport type ComposerState = ThreadComposerState | EditComposerState;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst EMPTY_OBJECT = Object.freeze({});\nconst getThreadComposerState = (\n  runtime: ThreadComposerRuntimeCore | undefined,\n): ThreadComposerState => {\n  return Object.freeze({\n    type: \"thread\",\n\n    isEditing: runtime?.isEditing ?? false,\n    canCancel: runtime?.canCancel ?? false,\n    isEmpty: runtime?.isEmpty ?? true,\n\n    attachments: runtime?.attachments ?? EMPTY_ARRAY,\n    text: runtime?.text ?? \"\",\n    role: runtime?.role ?? \"user\",\n    runConfig: runtime?.runConfig ?? EMPTY_OBJECT,\n    attachmentAccept: runtime?.attachmentAccept ?? \"\",\n    dictation: runtime?.dictation,\n\n    value: runtime?.text ?? \"\",\n  });\n};\n\nconst getEditComposerState = (\n  runtime: ComposerRuntimeCore | undefined,\n): EditComposerState => {\n  return Object.freeze({\n    type: \"edit\",\n\n    isEditing: runtime?.isEditing ?? false,\n    canCancel: runtime?.canCancel ?? false,\n    isEmpty: runtime?.isEmpty ?? true,\n\n    text: runtime?.text ?? \"\",\n    role: runtime?.role ?? \"user\",\n    attachments: runtime?.attachments ?? EMPTY_ARRAY,\n    runConfig: runtime?.runConfig ?? EMPTY_OBJECT,\n    attachmentAccept: runtime?.attachmentAccept ?? \"\",\n    dictation: runtime?.dictation,\n\n    value: runtime?.text ?? \"\",\n  });\n};\n\nexport type ComposerRuntime = {\n  readonly path: ComposerRuntimePath;\n  readonly type: \"edit\" | \"thread\";\n\n  /**\n   * Get the current state of the composer. Includes any data that has been added to the composer.\n   */\n  getState(): ComposerState;\n\n  /**\n   * Given a standard js File object, add it to the composer. A composer can have multiple attachments.\n   * @param file The file to add to the composer.\n   */\n  addAttachment(file: File): Promise<void>;\n\n  /**\n   * Set the text of the composer.\n   * @param text The text to set in the composer.\n   */\n  setText(text: string): void;\n\n  /**\n   * Set the role of the composer. For instance, if you'd like a specific message to have the 'assistant' role, you can do so here.\n   * @param role The role to set in the composer.\n   */\n  setRole(role: MessageRole): void;\n\n  /**\n   * Set the run config of the composer. This is used to send custom configuration data to the model.\n   * Within your backend, you can access this data using the `runConfig` object.\n   * Example:\n   * ```ts\n   * composerRuntime.setRunConfig({\n   *   custom: { customField: \"customValue\" }\n   * });\n   * ```\n   * @param runConfig The run config to set in the composer.\n   */\n  setRunConfig(runConfig: RunConfig): void;\n\n  /**\n   * Reset the composer. This will clear the entire state of the composer, including all text and attachments.\n   */\n  reset(): Promise<void>;\n\n  /**\n   * Clear all attachments from the composer.\n   */\n  clearAttachments(): Promise<void>;\n\n  /**\n   * Send a message. This will send whatever text or attachments are in the composer.\n   */\n  send(): void;\n\n  /**\n   * Cancel the current run. In edit mode, this will exit edit mode.\n   */\n  cancel(): void;\n\n  /**\n   * Listens for changes to the composer state.\n   * @param callback The callback to call when the composer state changes.\n   */\n  subscribe(callback: () => void): Unsubscribe;\n\n  /**\n   * Get an attachment by index.\n   * @param idx The index of the attachment to get.\n   */\n  getAttachmentByIndex(idx: number): AttachmentRuntime;\n\n  /**\n   * Start dictation to convert voice to text input.\n   * Requires a DictationAdapter to be configured.\n   */\n  startDictation(): void;\n\n  /**\n   * Stop the current dictation session.\n   */\n  stopDictation(): void;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  unstable_on(\n    event: ComposerRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe;\n};\n\nexport abstract class ComposerRuntimeImpl implements ComposerRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  public abstract get type(): \"edit\" | \"thread\";\n\n  constructor(protected _core: ComposerRuntimeCoreBinding) {}\n\n  protected __internal_bindMethods() {\n    this.setText = this.setText.bind(this);\n    this.setRunConfig = this.setRunConfig.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.addAttachment = this.addAttachment.bind(this);\n    this.reset = this.reset.bind(this);\n    this.clearAttachments = this.clearAttachments.bind(this);\n    this.send = this.send.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.setRole = this.setRole.bind(this);\n    this.getAttachmentByIndex = this.getAttachmentByIndex.bind(this);\n    this.startDictation = this.startDictation.bind(this);\n    this.stopDictation = this.stopDictation.bind(this);\n    this.unstable_on = this.unstable_on.bind(this);\n  }\n\n  public abstract getState(): ComposerState;\n\n  public setText(text: string) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setText(text);\n  }\n\n  public setRunConfig(runConfig: RunConfig) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setRunConfig(runConfig);\n  }\n\n  public addAttachment(file: File) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.addAttachment(file);\n  }\n\n  public reset() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.reset();\n  }\n\n  public clearAttachments() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.clearAttachments();\n  }\n\n  public send() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.send();\n  }\n\n  public cancel() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.cancel();\n  }\n\n  public setRole(role: MessageRole) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setRole(role);\n  }\n\n  public startDictation() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.startDictation();\n  }\n\n  public stopDictation() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.stopDictation();\n  }\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n\n  private _eventSubscriptionSubjects = new Map<\n    string,\n    EventSubscriptionSubject<ComposerRuntimeEventType>\n  >();\n\n  public unstable_on(\n    event: ComposerRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe {\n    let subject = this._eventSubscriptionSubjects.get(event);\n    if (!subject) {\n      subject = new EventSubscriptionSubject({\n        event: event,\n        binding: this._core,\n      });\n      this._eventSubscriptionSubjects.set(event, subject);\n    }\n    return subject.subscribe(callback);\n  }\n\n  public abstract getAttachmentByIndex(idx: number): AttachmentRuntime;\n}\n\nexport type ThreadComposerRuntime = Omit<\n  ComposerRuntime,\n  \"getState\" | \"getAttachmentByIndex\"\n> & {\n  readonly path: ComposerRuntimePath & { composerSource: \"thread\" };\n  readonly type: \"thread\";\n  getState(): ThreadComposerState;\n\n  getAttachmentByIndex(\n    idx: number,\n  ): AttachmentRuntime & { source: \"thread-composer\" };\n};\n\nexport class ThreadComposerRuntimeImpl\n  extends ComposerRuntimeImpl\n  implements ThreadComposerRuntime\n{\n  public override get path() {\n    return this._core.path as ComposerRuntimePath & {\n      composerSource: \"thread\";\n    };\n  }\n\n  public get type() {\n    return \"thread\" as const;\n  }\n\n  private _getState;\n\n  constructor(core: ThreadComposerRuntimeCoreBinding) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: core.path,\n      getState: () => getThreadComposerState(core.getState()),\n      subscribe: (callback) => core.subscribe(callback),\n    });\n    super({\n      path: core.path,\n      getState: () => core.getState(),\n      subscribe: (callback) => stateBinding.subscribe(callback),\n    });\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this.__internal_bindMethods();\n  }\n\n  public override getState(): ThreadComposerState {\n    return this._getState();\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new ThreadComposerAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          attachmentSource: \"thread-composer\",\n          attachmentSelector: { type: \"index\", index: idx },\n          ref: `${this.path.ref}.attachments[${idx}]`,\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"thread-composer\",\n          } satisfies AttachmentState & { source: \"thread-composer\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n\nexport type EditComposerRuntime = Omit<\n  ComposerRuntime,\n  \"getState\" | \"getAttachmentByIndex\"\n> & {\n  readonly path: ComposerRuntimePath & { composerSource: \"edit\" };\n  readonly type: \"edit\";\n\n  getState(): EditComposerState;\n  beginEdit(): void;\n\n  getAttachmentByIndex(\n    idx: number,\n  ): AttachmentRuntime & { source: \"edit-composer\" };\n};\n\nexport class EditComposerRuntimeImpl\n  extends ComposerRuntimeImpl\n  implements EditComposerRuntime\n{\n  public override get path() {\n    return this._core.path as ComposerRuntimePath & { composerSource: \"edit\" };\n  }\n\n  public get type() {\n    return \"edit\" as const;\n  }\n\n  private _getState;\n  constructor(\n    core: EditComposerRuntimeCoreBinding,\n    private _beginEdit: () => void,\n  ) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: core.path,\n      getState: () => getEditComposerState(core.getState()),\n      subscribe: (callback) => core.subscribe(callback),\n    });\n\n    super({\n      path: core.path,\n      getState: () => core.getState(),\n      subscribe: (callback) => stateBinding.subscribe(callback),\n    });\n\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this.__internal_bindMethods();\n  }\n\n  public override __internal_bindMethods() {\n    super.__internal_bindMethods();\n    this.beginEdit = this.beginEdit.bind(this);\n  }\n\n  public override getState(): EditComposerState {\n    return this._getState();\n  }\n\n  public beginEdit() {\n    this._beginEdit();\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new EditComposerAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          attachmentSource: \"edit-composer\",\n          attachmentSelector: { type: \"index\", index: idx },\n          ref: `${this.path.ref}.attachments[${idx}]`,\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"edit-composer\",\n          } satisfies AttachmentState & { source: \"edit-composer\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n", "import { ReadonlyJSONValue, ReadonlyJSONObject } from \"../../utils\";\nimport { ObjectStreamOperation } from \"./types\";\n\nexport class ObjectStreamAccumulator {\n  private _state: ReadonlyJSONValue;\n\n  constructor(initialValue: ReadonlyJSONValue = null) {\n    this._state = initialValue;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  append(ops: readonly ObjectStreamOperation[]) {\n    this._state = ops.reduce(\n      (state, op) => ObjectStreamAccumulator.apply(state, op),\n      this._state,\n    );\n  }\n\n  private static apply(state: ReadonlyJSONValue, op: ObjectStreamOperation) {\n    const type = op.type;\n    switch (type) {\n      case \"set\":\n        return ObjectStreamAccumulator.updatePath(\n          state,\n          op.path,\n          () => op.value,\n        );\n      case \"append-text\":\n        return ObjectStreamAccumulator.updatePath(state, op.path, (current) => {\n          if (typeof current !== \"string\")\n            throw new Error(`Expected string at path [${op.path.join(\", \")}]`);\n          return current + op.value;\n        });\n\n      default: {\n        const _exhaustiveCheck: never = type;\n        throw new Error(`Invalid operation type: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n\n  private static updatePath(\n    state: ReadonlyJSONValue | undefined,\n    path: readonly string[],\n    updater: (current: ReadonlyJSONValue | undefined) => ReadonlyJSONValue,\n  ): ReadonlyJSONValue {\n    if (path.length === 0) return updater(state);\n\n    // Initialize state as empty object if it's null and we're trying to set a property\n    state ??= {};\n\n    if (typeof state !== \"object\") {\n      throw new Error(`Invalid path: [${path.join(\", \")}]`);\n    }\n\n    const [key, ...rest] = path as [string, ...(readonly string[])];\n    if (Array.isArray(state)) {\n      const idx = Number(key);\n      if (Number.isNaN(idx))\n        throw new Error(`Expected array index at [${path.join(\", \")}]`);\n      if (idx > state.length || idx < 0)\n        throw new Error(`Insert array index out of bounds`);\n\n      const nextState = [...state];\n      nextState[idx] = this.updatePath(nextState[idx], rest, updater);\n\n      return nextState;\n    }\n\n    const nextState = { ...(state as ReadonlyJSONObject) };\n    nextState[key] = this.updatePath(nextState[key], rest, updater);\n\n    return nextState;\n  }\n}\n", "import { AssistantStreamChunk } from \"../AssistantStreamChunk\";\nimport { generateId } from \"../utils/generateId\";\nimport { parsePartialJsonObject } from \"../../utils/json/parse-partial-json-object\";\nimport {\n  AssistantMessage,\n  AssistantMessageStatus,\n  TextPart,\n  ToolCallPart,\n  SourcePart,\n  AssistantMessagePart,\n  ReasoningPart,\n  FilePart,\n} from \"../utils/types\";\nimport { ObjectStreamAccumulator } from \"../object/ObjectStreamAccumulator\";\nimport { ReadonlyJSONValue } from \"../../utils\";\n\nexport const createInitialMessage = ({\n  unstable_state = null,\n}: {\n  unstable_state?: ReadonlyJSONValue;\n} = {}): AssistantMessage => ({\n  role: \"assistant\",\n  status: { type: \"running\" },\n  parts: [],\n  get content() {\n    return this.parts;\n  },\n  metadata: {\n    unstable_state,\n    unstable_data: [],\n    unstable_annotations: [],\n    steps: [],\n    custom: {},\n  },\n});\n\nconst updatePartForPath = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk,\n  updater: (part: AssistantMessagePart) => AssistantMessagePart,\n): AssistantMessage => {\n  if (message.parts.length === 0) {\n    throw new Error(\"No parts available to update.\");\n  }\n\n  if (chunk.path.length !== 1)\n    throw new Error(\"Nested paths are not supported yet.\");\n\n  const partIndex = chunk.path[0]!;\n  const updatedPart = updater(message.parts[partIndex]!);\n  return {\n    ...message,\n    parts: [\n      ...message.parts.slice(0, partIndex),\n      updatedPart,\n      ...message.parts.slice(partIndex + 1),\n    ],\n    get content() {\n      return this.parts;\n    },\n  };\n};\n\nconst handlePartStart = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { readonly type: \"part-start\" },\n): AssistantMessage => {\n  const partInit = chunk.part;\n  if (partInit.type === \"text\" || partInit.type === \"reasoning\") {\n    const newTextPart: TextPart | ReasoningPart = {\n      type: partInit.type,\n      text: \"\",\n      status: { type: \"running\" },\n      ...(partInit.parentId && { parentId: partInit.parentId }),\n    };\n    return {\n      ...message,\n      parts: [...message.parts, newTextPart],\n      get content() {\n        return this.parts;\n      },\n    };\n  } else if (partInit.type === \"tool-call\") {\n    const newToolCallPart: ToolCallPart = {\n      type: \"tool-call\",\n      state: \"partial-call\",\n      status: { type: \"running\", isArgsComplete: false },\n      toolCallId: partInit.toolCallId,\n      toolName: partInit.toolName,\n      argsText: \"\",\n      args: {},\n      ...(partInit.parentId && { parentId: partInit.parentId }),\n    };\n    return {\n      ...message,\n      parts: [...message.parts, newToolCallPart],\n      get content() {\n        return this.parts;\n      },\n    };\n  } else if (partInit.type === \"source\") {\n    const newSourcePart: SourcePart = {\n      type: \"source\",\n      sourceType: partInit.sourceType,\n      id: partInit.id,\n      url: partInit.url,\n      ...(partInit.title ? { title: partInit.title } : undefined),\n      ...(partInit.parentId && { parentId: partInit.parentId }),\n    };\n    return {\n      ...message,\n      parts: [...message.parts, newSourcePart],\n      get content() {\n        return this.parts;\n      },\n    };\n  } else if (partInit.type === \"file\") {\n    const newFilePart: FilePart = {\n      type: \"file\",\n      mimeType: partInit.mimeType,\n      data: partInit.data,\n    };\n    return {\n      ...message,\n      parts: [...message.parts, newFilePart],\n      get content() {\n        return this.parts;\n      },\n    };\n  } else {\n    throw new Error(`Unsupported part type: ${partInit.type}`);\n  }\n};\n\nconst handleToolCallArgsTextFinish = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & {\n    readonly type: \"tool-call-args-text-finish\";\n  },\n): AssistantMessage => {\n  return updatePartForPath(message, chunk, (part) => {\n    if (part.type !== \"tool-call\") {\n      throw new Error(\"Last is not a tool call\");\n    }\n\n    // TODO this should never be hit; this happens if args-text-finish is emitted after result\n    if (part.state !== \"partial-call\") return part;\n    // throw new Error(\"Last is not a partial call\");\n\n    return {\n      ...part,\n      state: \"call\",\n    };\n  });\n};\n\nconst handlePartFinish = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { readonly type: \"part-finish\" },\n): AssistantMessage => {\n  return updatePartForPath(message, chunk, (part) => ({\n    ...part,\n    status: { type: \"complete\", reason: \"unknown\" },\n  }));\n};\n\nconst handleTextDelta = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"text-delta\" },\n): AssistantMessage => {\n  return updatePartForPath(message, chunk, (part) => {\n    if (part.type === \"text\" || part.type === \"reasoning\") {\n      return { ...part, text: part.text + chunk.textDelta };\n    } else if (part.type === \"tool-call\") {\n      const newArgsText = part.argsText + chunk.textDelta;\n\n      // Fall back to existing args if parsing fails\n      const newArgs = parsePartialJsonObject(newArgsText) ?? part.args;\n\n      return { ...part, argsText: newArgsText, args: newArgs };\n    } else {\n      throw new Error(\n        \"text-delta received but part is neither text nor tool-call\",\n      );\n    }\n  });\n};\n\nconst handleResult = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"result\" },\n): AssistantMessage => {\n  return updatePartForPath(message, chunk, (part) => {\n    if (part.type === \"tool-call\") {\n      return {\n        ...part,\n        state: \"result\",\n        ...(chunk.artifact !== undefined ? { artifact: chunk.artifact } : {}),\n        result: chunk.result,\n        isError: chunk.isError ?? false,\n        status: { type: \"complete\", reason: \"stop\" },\n      };\n    } else {\n      throw new Error(\"Result chunk received but part is not a tool-call\");\n    }\n  });\n};\n\nconst handleMessageFinish = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"message-finish\" },\n): AssistantMessage => {\n  // avoid edge case where providers send finish chunks that overwrite message error status (issue #2181)\n  if (\n    message.status?.type === \"incomplete\" &&\n    message.status?.reason === \"error\"\n  ) {\n    return message;\n  }\n\n  const newStatus = getStatus(chunk);\n  return { ...message, status: newStatus };\n};\n\nconst getStatus = (\n  chunk:\n    | (AssistantStreamChunk & { type: \"message-finish\" })\n    | (AssistantStreamChunk & { type: \"step-finish\" }),\n): AssistantMessageStatus => {\n  if (chunk.finishReason === \"tool-calls\") {\n    return {\n      type: \"requires-action\",\n      reason: \"tool-calls\",\n    };\n  } else if (\n    chunk.finishReason === \"stop\" ||\n    chunk.finishReason === \"unknown\"\n  ) {\n    return {\n      type: \"complete\",\n      reason: chunk.finishReason,\n    };\n  } else {\n    return {\n      type: \"incomplete\",\n      reason: chunk.finishReason,\n    };\n  }\n};\n\nconst handleAnnotations = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"annotations\" },\n): AssistantMessage => {\n  return {\n    ...message,\n    metadata: {\n      ...message.metadata,\n      unstable_annotations: [\n        ...message.metadata.unstable_annotations,\n        ...chunk.annotations,\n      ],\n    },\n  };\n};\n\nconst handleData = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"data\" },\n): AssistantMessage => {\n  return {\n    ...message,\n    metadata: {\n      ...message.metadata,\n      unstable_data: [...message.metadata.unstable_data, ...chunk.data],\n    },\n  };\n};\n\nconst handleStepStart = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"step-start\" },\n): AssistantMessage => {\n  return {\n    ...message,\n    metadata: {\n      ...message.metadata,\n      steps: [\n        ...message.metadata.steps,\n        { state: \"started\", messageId: chunk.messageId },\n      ],\n    },\n  };\n};\n\nconst handleStepFinish = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"step-finish\" },\n): AssistantMessage => {\n  const steps = message.metadata.steps.slice();\n  const lastIndex = steps.length - 1;\n\n  // Check if the previous step is a step-start (has state \"started\")\n  if (steps.length > 0 && steps[lastIndex]?.state === \"started\") {\n    steps[lastIndex] = {\n      ...steps[lastIndex],\n      state: \"finished\",\n      finishReason: chunk.finishReason,\n      usage: chunk.usage,\n      isContinued: chunk.isContinued,\n    };\n  } else {\n    // If no previous step-start exists, append a finished step\n    steps.push({\n      state: \"finished\",\n      messageId: generateId(),\n      finishReason: chunk.finishReason,\n      usage: chunk.usage,\n      isContinued: chunk.isContinued,\n    });\n  }\n\n  return {\n    ...message,\n    metadata: {\n      ...message.metadata,\n      steps,\n    },\n  };\n};\n\nconst handleErrorChunk = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"error\" },\n): AssistantMessage => {\n  return {\n    ...message,\n    status: { type: \"incomplete\", reason: \"error\", error: chunk.error },\n  };\n};\n\nconst handleUpdateState = (\n  message: AssistantMessage,\n  chunk: AssistantStreamChunk & { type: \"update-state\" },\n): AssistantMessage => {\n  const acc = new ObjectStreamAccumulator(message.metadata.unstable_state);\n  acc.append(chunk.operations);\n\n  return {\n    ...message,\n    metadata: {\n      ...message.metadata,\n      unstable_state: acc.state,\n    },\n  };\n};\n\nconst throttleCallback = (callback: () => void) => {\n  let hasScheduled = false;\n  return () => {\n    if (hasScheduled) return;\n    hasScheduled = true;\n    queueMicrotask(() => {\n      hasScheduled = false;\n      callback();\n    });\n  };\n};\n\nexport class AssistantMessageAccumulator extends TransformStream<\n  AssistantStreamChunk,\n  AssistantMessage\n> {\n  constructor({\n    initialMessage,\n    throttle,\n    onError,\n  }: {\n    initialMessage?: AssistantMessage;\n    throttle?: boolean;\n    onError?: (error: string) => void;\n  } = {}) {\n    let message = initialMessage ?? createInitialMessage();\n    let controller:\n      | TransformStreamDefaultController<AssistantMessage>\n      | undefined;\n    const emitChunk = throttle\n      ? throttleCallback(() => {\n          controller?.enqueue(message);\n        })\n      : () => {\n          controller?.enqueue(message);\n        };\n    super({\n      start(c) {\n        controller = c;\n      },\n      transform(chunk) {\n        const type = chunk.type;\n        switch (type) {\n          case \"part-start\":\n            message = handlePartStart(message, chunk);\n            break;\n\n          case \"tool-call-args-text-finish\":\n            message = handleToolCallArgsTextFinish(message, chunk);\n            break;\n\n          case \"part-finish\":\n            message = handlePartFinish(message, chunk);\n            break;\n\n          case \"text-delta\":\n            message = handleTextDelta(message, chunk);\n            break;\n          case \"result\":\n            message = handleResult(message, chunk);\n            break;\n          case \"message-finish\":\n            message = handleMessageFinish(message, chunk);\n            break;\n          case \"annotations\":\n            message = handleAnnotations(message, chunk);\n            break;\n          case \"data\":\n            message = handleData(message, chunk);\n            break;\n          case \"step-start\":\n            message = handleStepStart(message, chunk);\n            break;\n          case \"step-finish\":\n            message = handleStepFinish(message, chunk);\n            break;\n          case \"error\":\n            message = handleErrorChunk(message, chunk);\n            onError?.(chunk.error);\n            break;\n          case \"update-state\":\n            message = handleUpdateState(message, chunk);\n            break;\n          default: {\n            const unhandledType: never = type;\n            throw new Error(`Unsupported chunk type: ${unhandledType}`);\n          }\n        }\n        emitChunk();\n      },\n      flush(controller) {\n        if (message.status?.type === \"running\") {\n          // Check if there are any tool calls that require action\n          const requiresAction =\n            message.parts?.some(\n              (part) =>\n                part.type === \"tool-call\" &&\n                (part.state === \"call\" || part.state === \"partial-call\") &&\n                part.result === undefined,\n            ) ?? false;\n          message = handleMessageFinish(message, {\n            type: \"message-finish\",\n            path: [],\n            finishReason: requiresAction ? \"tool-calls\" : \"unknown\",\n            usage: {\n              promptTokens: 0,\n              completionTokens: 0,\n            },\n          });\n          controller.enqueue(message);\n        }\n      },\n    });\n  }\n}\n", "import { AssistantStreamEncoder } from \"../AssistantStream\";\nimport { AssistantStreamChunk } from \"../AssistantStreamChunk\";\nimport { AssistantTransformStream } from \"../utils/stream/AssistantTransformStream\";\nimport { PipeableTransformStream } from \"../utils/stream/PipeableTransformStream\";\n\nexport class PlainTextEncoder\n  extends PipeableTransformStream<AssistantStreamChunk, Uint8Array<ArrayBuffer>>\n  implements AssistantStreamEncoder\n{\n  headers = new Headers({\n    \"Content-Type\": \"text/plain; charset=utf-8\",\n    \"x-vercel-ai-data-stream\": \"v1\",\n  });\n\n  constructor() {\n    super((readable) => {\n      const transform = new TransformStream<AssistantStreamChunk, string>({\n        transform(chunk, controller) {\n          const type = chunk.type;\n          switch (type) {\n            case \"text-delta\":\n              controller.enqueue(chunk.textDelta);\n              break;\n\n            case \"part-start\":\n            case \"part-finish\":\n            case \"step-start\":\n            case \"step-finish\":\n            case \"message-finish\":\n            case \"error\":\n              break;\n\n            default:\n              const unsupportedType:\n                | \"tool-call-args-text-finish\"\n                | \"data\"\n                | \"annotations\"\n                | \"tool-call-begin\"\n                | \"tool-call-delta\"\n                | \"result\"\n                | \"update-state\" = type;\n              throw new Error(`unsupported chunk type: ${unsupportedType}`);\n          }\n        },\n      });\n\n      return readable\n        .pipeThrough(transform)\n        .pipeThrough(new TextEncoderStream());\n    });\n  }\n}\n\nexport class PlainTextDecoder extends PipeableTransformStream<\n  Uint8Array<ArrayBuffer>,\n  AssistantStreamChunk\n> {\n  constructor() {\n    super((readable) => {\n      const transform = new AssistantTransformStream<string>({\n        transform(chunk, controller) {\n          controller.appendText(chunk);\n        },\n      });\n\n      return readable\n        .pipeThrough(new TextDecoderStream())\n        .pipeThrough(transform);\n    });\n  }\n}\n", "import { AssistantStreamChunk } from \"../../AssistantStreamChunk\";\nimport { PipeableTransformStream } from \"../../utils/stream/PipeableTransformStream\";\nimport { LineDecoderStream } from \"../../utils/stream/LineDecoderStream\";\nimport { AssistantStreamEncoder } from \"../../AssistantStream\";\n\n/**\n * AssistantTransportEncoder encodes AssistantStreamChunks into SSE format\n * and emits [DONE] when the stream completes.\n */\nexport class AssistantTransportEncoder\n  extends PipeableTransformStream<AssistantStreamChunk, Uint8Array<ArrayBuffer>>\n  implements AssistantStreamEncoder\n{\n  headers = new Headers({\n    \"Content-Type\": \"text/event-stream\",\n    \"Cache-Control\": \"no-cache\",\n    Connection: \"keep-alive\",\n  });\n\n  constructor() {\n    super((readable) => {\n      return readable\n        .pipeThrough(\n          new TransformStream<AssistantStreamChunk, string>({\n            transform(chunk, controller) {\n              controller.enqueue(`data: ${JSON.stringify(chunk)}\\n\\n`);\n            },\n            flush(controller) {\n              controller.enqueue(\"data: [DONE]\\n\\n\");\n            },\n          }),\n        )\n        .pipeThrough(new TextEncoderStream());\n    });\n  }\n}\n\ntype SSEEvent = {\n  event: string;\n  data: string;\n  id?: string | undefined;\n  retry?: number | undefined;\n};\n\nclass SSEEventStream extends TransformStream<string, SSEEvent> {\n  constructor() {\n    let eventBuffer: Partial<SSEEvent> = {};\n    let dataLines: string[] = [];\n\n    super({\n      start() {\n        eventBuffer = {};\n        dataLines = [];\n      },\n      transform(line, controller) {\n        if (line.startsWith(\":\")) return; // Ignore comments\n\n        if (line === \"\") {\n          if (dataLines.length > 0) {\n            controller.enqueue({\n              event: eventBuffer.event || \"message\",\n              data: dataLines.join(\"\\n\"),\n              id: eventBuffer.id,\n              retry: eventBuffer.retry,\n            });\n          }\n          eventBuffer = {};\n          dataLines = [];\n          return;\n        }\n\n        const [field, ...rest] = line.split(\":\");\n        const value = rest.join(\":\").trimStart();\n\n        switch (field) {\n          case \"event\":\n            eventBuffer.event = value;\n            break;\n          case \"data\":\n            dataLines.push(value);\n            break;\n          case \"id\":\n            eventBuffer.id = value;\n            break;\n          case \"retry\":\n            eventBuffer.retry = Number(value);\n            break;\n        }\n      },\n      flush(controller) {\n        if (dataLines.length > 0) {\n          controller.enqueue({\n            event: eventBuffer.event || \"message\",\n            data: dataLines.join(\"\\n\"),\n            id: eventBuffer.id,\n            retry: eventBuffer.retry,\n          });\n        }\n      },\n    });\n  }\n}\n\n/**\n * AssistantTransportDecoder decodes SSE format into AssistantStreamChunks.\n * It stops decoding when it encounters [DONE].\n */\nexport class AssistantTransportDecoder extends PipeableTransformStream<\n  Uint8Array<ArrayBuffer>,\n  AssistantStreamChunk\n> {\n  constructor() {\n    super((readable) => {\n      let receivedDone = false;\n\n      return readable\n        .pipeThrough(new TextDecoderStream())\n        .pipeThrough(new LineDecoderStream())\n        .pipeThrough(new SSEEventStream())\n        .pipeThrough(\n          new TransformStream<SSEEvent, AssistantStreamChunk>({\n            transform(event, controller) {\n              switch (event.event) {\n                case \"message\":\n                  if (event.data === \"[DONE]\") {\n                    // Mark that we received [DONE]\n                    receivedDone = true;\n                    // Stop processing when we encounter [DONE]\n                    controller.terminate();\n                  } else {\n                    controller.enqueue(JSON.parse(event.data));\n                  }\n                  break;\n                default:\n                  throw new Error(`Unknown SSE event type: ${event.event}`);\n              }\n            },\n            flush() {\n              if (!receivedDone) {\n                throw new Error(\n                  \"Stream ended abruptly without receiving [DONE] marker\",\n                );\n              }\n            },\n          }),\n        );\n    });\n  }\n}\n", "import type { AssistantStreamChunk } from \"../../AssistantStreamChunk\";\nimport type { ToolCallStreamController } from \"../../modules/tool-call\";\nimport type { TextStreamController } from \"../../modules/text\";\nimport { AssistantTransformStream } from \"../../utils/stream/AssistantTransformStream\";\nimport { PipeableTransformStream } from \"../../utils/stream/PipeableTransformStream\";\nimport { LineDecoderStream } from \"../../utils/stream/LineDecoderStream\";\nimport {\n  type UIMessageStreamChunk,\n  type UIMessageStreamDataChunk,\n} from \"./chunk-types\";\nimport { generateId } from \"../../utils/generateId\";\n\nexport type { UIMessageStreamChunk, UIMessageStreamDataChunk };\n\nexport type UIMessageStreamDecoderOptions = {\n  onData?: (data: {\n    type: string;\n    name: string;\n    data: unknown;\n    transient?: boolean;\n  }) => void;\n};\n\ntype SSEEvent = {\n  event: string;\n  data: string;\n  id?: string | undefined;\n  retry?: number | undefined;\n};\n\nclass SSEEventStream extends TransformStream<string, SSEEvent> {\n  constructor() {\n    let eventBuffer: Partial<SSEEvent> = {};\n    let dataLines: string[] = [];\n\n    super({\n      start() {\n        eventBuffer = {};\n        dataLines = [];\n      },\n      transform(line, controller) {\n        if (line.startsWith(\":\")) return;\n\n        if (line === \"\") {\n          if (dataLines.length > 0) {\n            controller.enqueue({\n              event: eventBuffer.event || \"message\",\n              data: dataLines.join(\"\\n\"),\n              id: eventBuffer.id,\n              retry: eventBuffer.retry,\n            });\n          }\n          eventBuffer = {};\n          dataLines = [];\n          return;\n        }\n\n        const [field, ...rest] = line.split(\":\");\n        const value = rest.join(\":\").trimStart();\n\n        switch (field) {\n          case \"event\":\n            eventBuffer.event = value;\n            break;\n          case \"data\":\n            dataLines.push(value);\n            break;\n          case \"id\":\n            eventBuffer.id = value;\n            break;\n          case \"retry\":\n            eventBuffer.retry = Number(value);\n            break;\n        }\n      },\n      flush(controller) {\n        if (dataLines.length > 0) {\n          controller.enqueue({\n            event: eventBuffer.event || \"message\",\n            data: dataLines.join(\"\\n\"),\n            id: eventBuffer.id,\n            retry: eventBuffer.retry,\n          });\n        }\n      },\n    });\n  }\n}\n\nconst isDataChunk = (\n  chunk: UIMessageStreamChunk,\n): chunk is UIMessageStreamDataChunk => chunk.type.startsWith(\"data-\");\n\n/**\n * Decodes AI SDK v6 UI Message Stream format into AssistantStreamChunks.\n */\nexport class UIMessageStreamDecoder extends PipeableTransformStream<\n  Uint8Array<ArrayBuffer>,\n  AssistantStreamChunk\n> {\n  constructor(options: UIMessageStreamDecoderOptions = {}) {\n    super((readable) => {\n      const toolCallControllers = new Map<string, ToolCallStreamController>();\n      let activeToolCallArgsText: TextStreamController | undefined;\n      let currentMessageId: string | undefined;\n      let receivedDone = false;\n\n      const transform = new AssistantTransformStream<UIMessageStreamChunk>({\n        transform(chunk, controller) {\n          const type = chunk.type;\n\n          if (isDataChunk(chunk)) {\n            const name = chunk.type.slice(5);\n\n            if (options.onData) {\n              options.onData({\n                type: chunk.type,\n                name,\n                data: chunk.data,\n                ...(chunk.transient !== undefined && {\n                  transient: chunk.transient,\n                }),\n              });\n            }\n\n            if (!chunk.transient) {\n              controller.enqueue({\n                type: \"data\",\n                path: [],\n                data: [{ name, data: chunk.data }],\n              });\n            }\n            return;\n          }\n\n          switch (type) {\n            case \"start\":\n              currentMessageId = chunk.messageId;\n              controller.enqueue({\n                type: \"step-start\",\n                path: [],\n                messageId: chunk.messageId,\n              });\n              break;\n\n            case \"text-start\":\n            case \"text-end\":\n            case \"reasoning-start\":\n            case \"reasoning-end\":\n              break;\n\n            case \"text-delta\":\n              controller.appendText(chunk.textDelta);\n              break;\n\n            case \"reasoning-delta\":\n              controller.appendReasoning(chunk.delta);\n              break;\n\n            case \"source\":\n              controller.appendSource({\n                type: \"source\",\n                sourceType: chunk.source.sourceType,\n                id: chunk.source.id,\n                url: chunk.source.url,\n                ...(chunk.source.title && { title: chunk.source.title }),\n              });\n              break;\n\n            case \"file\":\n              controller.appendFile({\n                type: \"file\",\n                mimeType: chunk.file.mimeType,\n                data: chunk.file.data,\n              });\n              break;\n\n            case \"tool-call-start\": {\n              activeToolCallArgsText?.close();\n              activeToolCallArgsText = undefined;\n\n              if (toolCallControllers.has(chunk.toolCallId)) {\n                throw new Error(\n                  `Encountered duplicate tool call id: ${chunk.toolCallId}`,\n                );\n              }\n\n              const toolCallController = controller.addToolCallPart({\n                toolCallId: chunk.toolCallId,\n                toolName: chunk.toolName,\n              });\n              toolCallControllers.set(chunk.toolCallId, toolCallController);\n              activeToolCallArgsText = toolCallController.argsText;\n              break;\n            }\n\n            case \"tool-call-delta\":\n              activeToolCallArgsText?.append(chunk.argsText);\n              break;\n\n            case \"tool-call-end\":\n              activeToolCallArgsText?.close();\n              activeToolCallArgsText = undefined;\n              break;\n\n            case \"tool-result\": {\n              const toolCallController = toolCallControllers.get(\n                chunk.toolCallId,\n              );\n              if (!toolCallController) {\n                throw new Error(\n                  `Encountered tool result with unknown id: ${chunk.toolCallId}`,\n                );\n              }\n              toolCallController.setResponse({\n                result: chunk.result,\n                isError: chunk.isError ?? false,\n              });\n              break;\n            }\n\n            case \"start-step\":\n              controller.enqueue({\n                type: \"step-start\",\n                path: [],\n                messageId: chunk.messageId ?? currentMessageId ?? generateId(),\n              });\n              break;\n\n            case \"finish-step\":\n              controller.enqueue({\n                type: \"step-finish\",\n                path: [],\n                finishReason: chunk.finishReason,\n                usage: chunk.usage,\n                isContinued: chunk.isContinued,\n              });\n              break;\n\n            case \"finish\":\n              controller.enqueue({\n                type: \"message-finish\",\n                path: [],\n                finishReason: chunk.finishReason,\n                usage: chunk.usage,\n              });\n              break;\n\n            case \"error\":\n              controller.enqueue({\n                type: \"error\",\n                path: [],\n                error: chunk.errorText,\n              });\n              break;\n\n            default:\n              // ignore unknown types for forward compatibility\n              break;\n          }\n        },\n        flush() {\n          activeToolCallArgsText?.close();\n          toolCallControllers.forEach((ctrl) => ctrl.close());\n          toolCallControllers.clear();\n        },\n      });\n\n      return readable\n        .pipeThrough(new TextDecoderStream())\n        .pipeThrough(new LineDecoderStream())\n        .pipeThrough(new SSEEventStream())\n        .pipeThrough(\n          new TransformStream<SSEEvent, UIMessageStreamChunk>({\n            transform(event, controller) {\n              if (event.event !== \"message\") {\n                throw new Error(`Unknown SSE event type: ${event.event}`);\n              }\n\n              if (event.data === \"[DONE]\") {\n                receivedDone = true;\n                controller.terminate();\n                return;\n              }\n\n              controller.enqueue(JSON.parse(event.data));\n            },\n            flush() {\n              if (!receivedDone) {\n                throw new Error(\n                  \"Stream ended abruptly without receiving [DONE] marker\",\n                );\n              }\n            },\n          }),\n        )\n        .pipeThrough(transform);\n    });\n  }\n}\n", "import { AssistantStream } from \"../AssistantStream\";\nimport { AssistantMessage } from \"../utils/types\";\nimport { AssistantMessageAccumulator } from \"./assistant-message-accumulator\";\n\nexport class AssistantMessageStream {\n  constructor(public readonly readable: ReadableStream<AssistantMessage>) {\n    this.readable = readable;\n  }\n\n  static fromAssistantStream(stream: AssistantStream) {\n    return new AssistantMessageStream(\n      stream.pipeThrough(new AssistantMessageAccumulator()),\n    );\n  }\n\n  async unstable_result(): Promise<AssistantMessage> {\n    let last: AssistantMessage | undefined;\n    for await (const chunk of this) {\n      last = chunk;\n    }\n\n    if (!last) {\n      return {\n        role: \"assistant\",\n        status: { type: \"complete\", reason: \"unknown\" },\n        parts: [],\n        content: [],\n        metadata: {\n          unstable_state: null,\n          unstable_data: [],\n          unstable_annotations: [],\n          steps: [],\n          custom: {},\n        },\n      };\n    }\n    return last;\n  }\n\n  [Symbol.asyncIterator]() {\n    const reader = this.readable.getReader();\n    return {\n      async next(): Promise<IteratorResult<AssistantMessage, undefined>> {\n        const { done, value } = await reader.read();\n        return done ? { done: true, value: undefined } : { done: false, value };\n      },\n    };\n  }\n\n  tee(): [AssistantMessageStream, AssistantMessageStream] {\n    const [readable1, readable2] = this.readable.tee();\n    return [\n      new AssistantMessageStream(readable1),\n      new AssistantMessageStream(readable2),\n    ];\n  }\n}\n", "import { ReadonlyJSONValue } from \"../../utils/json/json-value\";\n\nconst TOOL_RESPONSE_SYMBOL = Symbol.for(\"aui.tool-response\");\n\nexport type ToolResponseLike<TResult> = {\n  result: TResult;\n  artifact?: ReadonlyJSONValue | undefined;\n  isError?: boolean | undefined;\n};\n\nexport class ToolResponse<TResult> {\n  get [TOOL_RESPONSE_SYMBOL]() {\n    return true;\n  }\n\n  readonly artifact?: ReadonlyJSONValue;\n  readonly result: TResult;\n  readonly isError: boolean;\n\n  constructor(options: ToolResponseLike<TResult>) {\n    if (options.artifact !== undefined) {\n      this.artifact = options.artifact;\n    }\n    this.result = options.result;\n    this.isError = options.isError ?? false;\n  }\n\n  static [Symbol.hasInstance](\n    obj: unknown,\n  ): obj is ToolResponse<ReadonlyJSONValue> {\n    return (\n      typeof obj === \"object\" && obj !== null && TOOL_RESPONSE_SYMBOL in obj\n    );\n  }\n\n  static toResponse(result: any | ToolResponse<any>): ToolResponse<any> {\n    if (result instanceof ToolResponse) {\n      return result;\n    }\n    return new ToolResponse({\n      result: result === undefined ? \"<no result>\" : result,\n    });\n  }\n}\n", "import sjson from \"secure-json-parse\";\nimport { AssistantStreamChunk } from \"../AssistantStreamChunk\";\nimport {\n  AssistantMetaStreamChunk,\n  AssistantMetaTransformStream,\n} from \"../utils/stream/AssistantMetaTransformStream\";\nimport { PipeableTransformStream } from \"../utils/stream/PipeableTransformStream\";\nimport {\n  ReadonlyJSONObject,\n  ReadonlyJSONValue,\n} from \"../../utils/json/json-value\";\nimport { ToolResponse } from \"./ToolResponse\";\nimport { withPromiseOrValue } from \"../utils/withPromiseOrValue\";\nimport { ToolCallReaderImpl } from \"./ToolCallReader\";\nimport { ToolCallReader } from \"./tool-types\";\n\ntype ToolCallback = (toolCall: {\n  toolCallId: string;\n  toolName: string;\n  args: ReadonlyJSONObject;\n}) =>\n  | Promise<ToolResponse<ReadonlyJSONValue>>\n  | ToolResponse<ReadonlyJSONValue>\n  | undefined;\n\ntype ToolStreamCallback = <\n  TArgs extends ReadonlyJSONObject = ReadonlyJSONObject,\n  TResult extends ReadonlyJSONValue = ReadonlyJSONValue,\n>(toolCall: {\n  reader: ToolCallReader<TArgs, TResult>;\n  toolCallId: string;\n  toolName: string;\n}) => void;\n\ntype ToolExecutionOptions = {\n  execute: ToolCallback;\n  streamCall: ToolStreamCallback;\n  onExecutionStart?:\n    | ((toolCallId: string, toolName: string) => void)\n    | undefined;\n  onExecutionEnd?: ((toolCallId: string, toolName: string) => void) | undefined;\n};\n\nexport class ToolExecutionStream extends PipeableTransformStream<\n  AssistantStreamChunk,\n  AssistantStreamChunk\n> {\n  constructor(options: ToolExecutionOptions) {\n    const toolCallPromises = new Map<string, PromiseLike<void>>();\n    const toolCallControllers = new Map<\n      string,\n      ToolCallReaderImpl<ReadonlyJSONObject, ReadonlyJSONValue>\n    >();\n\n    super((readable) => {\n      const transform = new TransformStream<\n        AssistantMetaStreamChunk,\n        AssistantStreamChunk\n      >({\n        transform(chunk, controller) {\n          // forward everything\n          if (chunk.type !== \"part-finish\" || chunk.meta.type !== \"tool-call\") {\n            controller.enqueue(chunk);\n          }\n\n          const type = chunk.type;\n\n          switch (type) {\n            case \"part-start\":\n              if (chunk.part.type === \"tool-call\") {\n                const reader = new ToolCallReaderImpl<\n                  ReadonlyJSONObject,\n                  ReadonlyJSONValue\n                >();\n                toolCallControllers.set(chunk.part.toolCallId, reader);\n\n                options.streamCall({\n                  reader,\n                  toolCallId: chunk.part.toolCallId,\n                  toolName: chunk.part.toolName,\n                });\n              }\n              break;\n            case \"text-delta\": {\n              if (chunk.meta.type === \"tool-call\") {\n                const toolCallId = chunk.meta.toolCallId;\n\n                const controller = toolCallControllers.get(toolCallId);\n                if (!controller)\n                  throw new Error(\"No controller found for tool call\");\n                controller.appendArgsTextDelta(chunk.textDelta);\n              }\n              break;\n            }\n            case \"result\": {\n              if (chunk.meta.type !== \"tool-call\") break;\n\n              const { toolCallId } = chunk.meta;\n              const controller = toolCallControllers.get(toolCallId);\n              if (!controller)\n                throw new Error(\"No controller found for tool call\");\n              controller.setResponse(\n                new ToolResponse({\n                  result: chunk.result,\n                  artifact: chunk.artifact,\n                  isError: chunk.isError,\n                }),\n              );\n              break;\n            }\n            case \"tool-call-args-text-finish\": {\n              if (chunk.meta.type !== \"tool-call\") break;\n\n              const { toolCallId, toolName } = chunk.meta;\n              const streamController = toolCallControllers.get(toolCallId)!;\n              if (!streamController)\n                throw new Error(\"No controller found for tool call\");\n\n              let isExecuting = false;\n              const promise = withPromiseOrValue(\n                () => {\n                  let args;\n                  try {\n                    args = sjson.parse(streamController.argsText);\n                  } catch (e) {\n                    throw new Error(\n                      `Function parameter parsing failed. ${JSON.stringify((e as Error).message)}`,\n                    );\n                  }\n\n                  const executeResult = options.execute({\n                    toolCallId,\n                    toolName,\n                    args,\n                  });\n\n                  // Only mark as executing if the tool has frontend execution\n                  if (executeResult !== undefined) {\n                    isExecuting = true;\n                    options.onExecutionStart?.(toolCallId, toolName);\n                  }\n\n                  return executeResult;\n                },\n                (c) => {\n                  if (isExecuting) {\n                    options.onExecutionEnd?.(toolCallId, toolName);\n                  }\n\n                  if (c === undefined) return;\n\n                  // TODO how to handle new ToolResult({ result: undefined })?\n                  const result = new ToolResponse({\n                    artifact: c.artifact,\n                    result: c.result,\n                    isError: c.isError,\n                  });\n                  streamController.setResponse(result);\n                  controller.enqueue({\n                    type: \"result\",\n                    path: chunk.path,\n                    ...result,\n                  });\n                },\n                (e) => {\n                  if (isExecuting) {\n                    options.onExecutionEnd?.(toolCallId, toolName);\n                  }\n\n                  const result = new ToolResponse({\n                    result: String(e),\n                    isError: true,\n                  });\n\n                  streamController.setResponse(result);\n                  controller.enqueue({\n                    type: \"result\",\n                    path: chunk.path,\n                    ...result,\n                  });\n                },\n              );\n              if (promise) {\n                toolCallPromises.set(toolCallId, promise);\n              }\n              break;\n            }\n\n            case \"part-finish\": {\n              if (chunk.meta.type !== \"tool-call\") break;\n\n              const { toolCallId } = chunk.meta;\n              const toolCallPromise = toolCallPromises.get(toolCallId);\n              if (toolCallPromise) {\n                toolCallPromise.then(() => {\n                  toolCallPromises.delete(toolCallId);\n                  toolCallControllers.delete(toolCallId);\n\n                  controller.enqueue(chunk);\n                });\n              } else {\n                controller.enqueue(chunk);\n              }\n            }\n          }\n        },\n        async flush() {\n          await Promise.all(toolCallPromises.values());\n        },\n      });\n\n      return readable\n        .pipeThrough(new AssistantMetaTransformStream())\n        .pipeThrough(transform);\n    });\n  }\n}\n", "export function withPromiseOrValue<T>(\n  callback: () => T | PromiseLike<T>,\n  thenHandler: (value: T) => PromiseLike<void> | void,\n  catchHandler: (error: unknown) => PromiseLike<void> | void,\n): PromiseLike<void> | void {\n  try {\n    const promiseOrValue = callback();\n    if (\n      typeof promiseOrValue === \"object\" &&\n      promiseOrValue !== null &&\n      \"then\" in promiseOrValue\n    ) {\n      return promiseOrValue.then(thenHandler, catchHandler);\n    } else {\n      thenHandler(promiseOrValue);\n    }\n  } catch (e) {\n    catchHandler(e);\n  }\n}\n", "import { promiseWithResolvers } from \"../../utils/promiseWithResolvers\";\nimport {\n  parsePartialJsonObject,\n  getPartialJsonObjectFieldState,\n} from \"../../utils/json/parse-partial-json-object\";\nimport {\n  ToolCallArgsReader,\n  ToolCallReader,\n  ToolCallResponseReader,\n} from \"./tool-types\";\nimport { DeepPartial, TypeAtPath, TypePath } from \"./type-path-utils\";\nimport { ToolResponse } from \"./ToolResponse\";\nimport {\n  asAsyncIterableStream,\n  AsyncIterableStream,\n  ReadonlyJSONObject,\n  ReadonlyJSONValue,\n} from \"../../utils\";\n\n// TODO: remove dispose\n\nfunction getField<T>(obj: T, fieldPath: (string | number)[]): unknown {\n  let current: unknown = obj;\n  for (const key of fieldPath) {\n    if (current === undefined || current === null) {\n      return undefined;\n    }\n    current = current[key as keyof typeof current];\n  }\n  return current;\n}\n\ninterface Handle {\n  update(args: unknown): void;\n  dispose(): void;\n}\n\nclass GetHandle<T, TValue> implements Handle {\n  private resolve: (value: TValue) => void;\n  private reject: (reason: unknown) => void;\n  private disposed = false;\n  private fieldPath: (string | number)[];\n\n  constructor(\n    resolve: (value: TValue) => void,\n    reject: (reason: unknown) => void,\n    fieldPath: (string | number)[],\n  ) {\n    this.resolve = resolve;\n    this.reject = reject;\n    this.fieldPath = fieldPath;\n  }\n\n  update(args: unknown): void {\n    if (this.disposed) return;\n\n    try {\n      // Check if the field is complete\n      if (\n        getPartialJsonObjectFieldState(\n          args as Record<string, unknown>,\n          this.fieldPath,\n        ) === \"complete\"\n      ) {\n        const value = getField(args as T, this.fieldPath);\n        if (value !== undefined) {\n          this.resolve(value as TValue);\n          this.dispose();\n        }\n      }\n    } catch (e) {\n      this.reject(e);\n      this.dispose();\n    }\n  }\n\n  dispose(): void {\n    this.disposed = true;\n  }\n}\n\nclass StreamValuesHandle<T> implements Handle {\n  private controller: ReadableStreamDefaultController<unknown>;\n  private disposed = false;\n  private fieldPath: (string | number)[];\n\n  constructor(\n    controller: ReadableStreamDefaultController<unknown>,\n    fieldPath: (string | number)[],\n  ) {\n    this.controller = controller;\n    this.fieldPath = fieldPath;\n  }\n\n  update(args: unknown): void {\n    if (this.disposed) return;\n\n    try {\n      const value = getField(args as T, this.fieldPath);\n\n      if (value !== undefined) {\n        this.controller.enqueue(value);\n      }\n\n      // Check if the field is complete, if so close the stream\n      if (\n        getPartialJsonObjectFieldState(\n          args as Record<string, unknown>,\n          this.fieldPath,\n        ) === \"complete\"\n      ) {\n        this.controller.close();\n        this.dispose();\n      }\n    } catch (e) {\n      this.controller.error(e);\n      this.dispose();\n    }\n  }\n\n  dispose(): void {\n    this.disposed = true;\n  }\n}\n\nclass StreamTextHandle<T> implements Handle {\n  private controller: ReadableStreamDefaultController<unknown>;\n  private disposed = false;\n  private fieldPath: (string | number)[];\n  private lastValue: string | undefined = undefined;\n\n  constructor(\n    controller: ReadableStreamDefaultController<unknown>,\n    fieldPath: (string | number)[],\n  ) {\n    this.controller = controller;\n    this.fieldPath = fieldPath;\n  }\n\n  update(args: unknown): void {\n    if (this.disposed) return;\n\n    try {\n      const value = getField(args as T, this.fieldPath);\n\n      if (value !== undefined && typeof value === \"string\") {\n        const delta = value.substring(this.lastValue?.length || 0);\n        this.lastValue = value;\n        this.controller.enqueue(delta);\n      }\n\n      // Check if the field is complete, if so close the stream\n      if (\n        getPartialJsonObjectFieldState(\n          args as Record<string, unknown>,\n          this.fieldPath,\n        ) === \"complete\"\n      ) {\n        this.controller.close();\n        this.dispose();\n      }\n    } catch (e) {\n      this.controller.error(e);\n      this.dispose();\n    }\n  }\n\n  dispose(): void {\n    this.disposed = true;\n  }\n}\n\nclass ForEachHandle<T> implements Handle {\n  private controller: ReadableStreamDefaultController<unknown>;\n  private disposed = false;\n  private fieldPath: (string | number)[];\n  private processedIndexes = new Set<number>();\n\n  constructor(\n    controller: ReadableStreamDefaultController<unknown>,\n    fieldPath: (string | number)[],\n  ) {\n    this.controller = controller;\n    this.fieldPath = fieldPath;\n  }\n\n  update(args: unknown): void {\n    if (this.disposed) return;\n\n    try {\n      const array = getField(args as T, this.fieldPath);\n\n      if (!Array.isArray(array)) {\n        return;\n      }\n\n      // Check each array element and emit completed ones that haven't been processed\n      for (let i = 0; i < array.length; i++) {\n        if (!this.processedIndexes.has(i)) {\n          const elementPath = [...this.fieldPath, i];\n          if (\n            getPartialJsonObjectFieldState(\n              args as Record<string, unknown>,\n              elementPath,\n            ) === \"complete\"\n          ) {\n            this.controller.enqueue(array[i]);\n            this.processedIndexes.add(i);\n          }\n        }\n      }\n\n      // Check if the entire array is complete\n      if (\n        getPartialJsonObjectFieldState(\n          args as Record<string, unknown>,\n          this.fieldPath,\n        ) === \"complete\"\n      ) {\n        this.controller.close();\n        this.dispose();\n      }\n    } catch (e) {\n      this.controller.error(e);\n      this.dispose();\n    }\n  }\n\n  dispose(): void {\n    this.disposed = true;\n  }\n}\n\n// Implementation of ToolCallReader that uses stream of partial JSON\nexport class ToolCallArgsReaderImpl<T extends ReadonlyJSONObject>\n  implements ToolCallArgsReader<T>\n{\n  private argTextDeltas: ReadableStream<string>;\n  private handles: Set<Handle> = new Set();\n  private args: unknown = parsePartialJsonObject(\"\");\n\n  constructor(argTextDeltas: ReadableStream<string>) {\n    this.argTextDeltas = argTextDeltas;\n    this.processStream();\n  }\n\n  private async processStream(): Promise<void> {\n    try {\n      let accumulatedText = \"\";\n      const reader = this.argTextDeltas.getReader();\n\n      while (true) {\n        const { value, done } = await reader.read();\n        if (done) break;\n\n        accumulatedText += value;\n        const parsedArgs = parsePartialJsonObject(accumulatedText);\n\n        if (parsedArgs !== undefined) {\n          this.args = parsedArgs;\n          // Notify all handles of the updated args\n          for (const handle of this.handles) {\n            handle.update(parsedArgs);\n          }\n        }\n      }\n    } catch (error) {\n      console.error(\"Error processing argument stream:\", error);\n      // Notify handles of the error\n      for (const handle of this.handles) {\n        handle.dispose();\n      }\n    }\n  }\n\n  get<PathT extends TypePath<T>>(\n    ...fieldPath: PathT\n  ): Promise<TypeAtPath<T, PathT>> {\n    return new Promise<TypeAtPath<T, PathT>>((resolve, reject) => {\n      const handle = new GetHandle<T, TypeAtPath<T, PathT>>(\n        resolve,\n        reject,\n        fieldPath,\n      );\n\n      // Check if the field is already complete in current args\n      if (\n        this.args &&\n        getPartialJsonObjectFieldState(\n          this.args as Record<string, unknown>,\n          fieldPath,\n        ) === \"complete\"\n      ) {\n        const value = getField(this.args as T, fieldPath);\n        if (value !== undefined) {\n          resolve(value as TypeAtPath<T, PathT>);\n          return;\n        }\n      }\n\n      this.handles.add(handle);\n      handle.update(this.args);\n    });\n  }\n\n  streamValues<PathT extends TypePath<T>>(\n    ...fieldPath: PathT\n  ): AsyncIterableStream<DeepPartial<TypeAtPath<T, PathT>>> {\n    // Use a type assertion to convert the complex TypePath to a simple array\n    const simplePath = fieldPath as unknown as (string | number)[];\n\n    const stream = new ReadableStream<DeepPartial<TypeAtPath<T, PathT>>>({\n      start: (controller) => {\n        const handle = new StreamValuesHandle<T>(controller, simplePath);\n        this.handles.add(handle);\n\n        // Check current args immediately\n        handle.update(this.args);\n      },\n      cancel: () => {\n        // Find and dispose the corresponding handle\n        for (const handle of this.handles) {\n          if (handle instanceof StreamValuesHandle) {\n            handle.dispose();\n            this.handles.delete(handle);\n            break;\n          }\n        }\n      },\n    });\n\n    return asAsyncIterableStream(stream) as any;\n  }\n\n  streamText<PathT extends TypePath<T>>(\n    ...fieldPath: PathT\n  ): TypeAtPath<T, PathT> extends string & infer U\n    ? AsyncIterableStream<U>\n    : never {\n    // Use a type assertion to convert the complex TypePath to a simple array\n    const simplePath = fieldPath as unknown as (string | number)[];\n\n    const stream = new ReadableStream<unknown>({\n      start: (controller) => {\n        const handle = new StreamTextHandle<T>(controller, simplePath);\n        this.handles.add(handle);\n\n        // Check current args immediately\n        handle.update(this.args);\n      },\n      cancel: () => {\n        // Find and dispose the corresponding handle\n        for (const handle of this.handles) {\n          if (handle instanceof StreamTextHandle) {\n            handle.dispose();\n            this.handles.delete(handle);\n            break;\n          }\n        }\n      },\n    });\n\n    return asAsyncIterableStream(stream) as any;\n  }\n\n  forEach<PathT extends TypePath<T>>(\n    ...fieldPath: PathT\n  ): TypeAtPath<T, PathT> extends Array<infer U>\n    ? AsyncIterableStream<U>\n    : never {\n    // Use a type assertion to convert the complex TypePath to a simple array\n    const simplePath = fieldPath as unknown as (string | number)[];\n\n    const stream = new ReadableStream<unknown>({\n      start: (controller) => {\n        const handle = new ForEachHandle<T>(controller, simplePath);\n        this.handles.add(handle);\n\n        // Check current args immediately\n        handle.update(this.args);\n      },\n      cancel: () => {\n        // Find and dispose the corresponding handle\n        for (const handle of this.handles) {\n          if (handle instanceof ForEachHandle) {\n            handle.dispose();\n            this.handles.delete(handle);\n            break;\n          }\n        }\n      },\n    });\n\n    return asAsyncIterableStream(stream) as any;\n  }\n}\n\nexport class ToolCallResponseReaderImpl<TResult extends ReadonlyJSONValue>\n  implements ToolCallResponseReader<TResult>\n{\n  constructor(private readonly promise: Promise<ToolResponse<TResult>>) {}\n\n  public get() {\n    return this.promise;\n  }\n}\n\nexport class ToolCallReaderImpl<\n  TArgs extends ReadonlyJSONObject,\n  TResult extends ReadonlyJSONValue,\n> implements ToolCallReader<TArgs, TResult>\n{\n  public readonly args: ToolCallArgsReaderImpl<TArgs>;\n  public readonly response: ToolCallResponseReaderImpl<TResult>;\n  private readonly writable: WritableStream<string>;\n  private readonly resolve: (value: ToolResponse<TResult>) => void;\n\n  public argsText: string = \"\";\n\n  constructor() {\n    const stream = new TransformStream<string, string>();\n    this.writable = stream.writable;\n    this.args = new ToolCallArgsReaderImpl<TArgs>(stream.readable);\n\n    const { promise, resolve } = promiseWithResolvers<ToolResponse<TResult>>();\n    this.resolve = resolve;\n    this.response = new ToolCallResponseReaderImpl<TResult>(promise);\n  }\n\n  async appendArgsTextDelta(text: string): Promise<void> {\n    const writer = this.writable.getWriter();\n    try {\n      await writer.write(text);\n    } catch (err) {\n      console.warn(err);\n    } finally {\n      writer.releaseLock();\n    }\n\n    this.argsText += text;\n  }\n\n  setResponse(value: ToolResponse<TResult>): void {\n    this.resolve(value);\n  }\n\n  result = {\n    get: async () => {\n      const response = await this.response.get();\n      return response.result;\n    },\n  };\n}\n", "import { Tool, ToolCallReader, ToolExecuteFunction } from \"./tool-types\";\nimport { StandardSchemaV1 } from \"@standard-schema/spec\";\nimport { ToolResponse } from \"./ToolResponse\";\nimport { ToolExecutionStream } from \"./ToolExecutionStream\";\nimport { AssistantMessage } from \"../utils/types\";\nimport { ReadonlyJSONObject, ReadonlyJSONValue } from \"../../utils\";\n\nconst isStandardSchemaV1 = (\n  schema: unknown,\n): schema is StandardSchemaV1<unknown> => {\n  return (\n    typeof schema === \"object\" &&\n    schema !== null &&\n    \"~standard\" in schema &&\n    (schema as StandardSchemaV1<unknown>)[\"~standard\"].version === 1\n  );\n};\n\nfunction getToolResponse(\n  tools: Record<string, Tool> | undefined,\n  abortSignal: AbortSignal,\n  toolCall: {\n    toolCallId: string;\n    toolName: string;\n    args: ReadonlyJSONObject;\n  },\n  human: (toolCallId: string, payload: unknown) => Promise<unknown>,\n) {\n  const tool = tools?.[toolCall.toolName];\n  if (!tool || !tool.execute) return undefined;\n\n  const getResult = async (\n    toolExecute: ToolExecuteFunction<ReadonlyJSONObject, unknown>,\n  ): Promise<ToolResponse<ReadonlyJSONValue>> => {\n    // Check if already aborted before starting\n    if (abortSignal.aborted) {\n      return new ToolResponse({\n        result: \"Tool execution was cancelled.\",\n        isError: true,\n      });\n    }\n\n    let executeFn = toolExecute;\n\n    if (isStandardSchemaV1(tool.parameters)) {\n      let result = tool.parameters[\"~standard\"].validate(toolCall.args);\n      if (result instanceof Promise) result = await result;\n\n      if (result.issues) {\n        executeFn =\n          tool.experimental_onSchemaValidationError ??\n          (() => {\n            throw new Error(\n              `Function parameter validation failed. ${JSON.stringify(result.issues)}`,\n            );\n          });\n      }\n    }\n\n    // Create abort promise that resolves after 2 microtasks\n    // This gives tools that handle abort a chance to win the race\n    const abortPromise = new Promise<ToolResponse<ReadonlyJSONValue>>(\n      (resolve) => {\n        const onAbort = () => {\n          queueMicrotask(() => {\n            queueMicrotask(() => {\n              resolve(\n                new ToolResponse({\n                  result: \"Tool execution was cancelled.\",\n                  isError: true,\n                }),\n              );\n            });\n          });\n        };\n        if (abortSignal.aborted) {\n          onAbort();\n        } else {\n          abortSignal.addEventListener(\"abort\", onAbort, { once: true });\n        }\n      },\n    );\n\n    const executePromise = (async () => {\n      const result = (await executeFn(toolCall.args, {\n        toolCallId: toolCall.toolCallId,\n        abortSignal,\n        human: (payload: unknown) => human(toolCall.toolCallId, payload),\n      })) as unknown as ReadonlyJSONValue;\n      return ToolResponse.toResponse(result);\n    })();\n\n    return Promise.race([executePromise, abortPromise]);\n  };\n\n  return getResult(tool.execute);\n}\n\nfunction getToolStreamResponse(\n  tools: Record<string, Tool> | undefined,\n  abortSignal: AbortSignal,\n  reader: ToolCallReader<any, ReadonlyJSONValue>,\n  context: {\n    toolCallId: string;\n    toolName: string;\n  },\n  human: (toolCallId: string, payload: unknown) => Promise<unknown>,\n) {\n  tools?.[context.toolName]?.streamCall?.(reader, {\n    toolCallId: context.toolCallId,\n    abortSignal,\n    human: (payload: unknown) => human(context.toolCallId, payload),\n  });\n}\n\nexport async function unstable_runPendingTools(\n  message: AssistantMessage,\n  tools: Record<string, Tool> | undefined,\n  abortSignal: AbortSignal,\n  human: (toolCallId: string, payload: unknown) => Promise<unknown>,\n) {\n  const toolCallPromises = message.parts\n    .filter((part) => part.type === \"tool-call\")\n    .map(async (part) => {\n      const promiseOrUndefined = getToolResponse(\n        tools,\n        abortSignal,\n        part,\n        human ??\n          (async () => {\n            throw new Error(\n              \"Tool human input is not supported in this context\",\n            );\n          }),\n      );\n      if (promiseOrUndefined) {\n        const result = await promiseOrUndefined;\n        return {\n          toolCallId: part.toolCallId,\n          result,\n        };\n      }\n      return null;\n    });\n\n  const toolCallResults = (await Promise.all(toolCallPromises)).filter(\n    (result) => result !== null,\n  ) as { toolCallId: string; result: ToolResponse<ReadonlyJSONValue> }[];\n\n  if (toolCallResults.length === 0) {\n    return message;\n  }\n\n  const toolCallResultsById = toolCallResults.reduce(\n    (acc, { toolCallId, result }) => {\n      acc[toolCallId] = result;\n      return acc;\n    },\n    {} as Record<string, ToolResponse<ReadonlyJSONValue>>,\n  );\n\n  const updatedParts = message.parts.map((p) => {\n    if (p.type === \"tool-call\") {\n      const toolResponse = toolCallResultsById[p.toolCallId];\n      if (toolResponse) {\n        return {\n          ...p,\n          state: \"result\" as const,\n          ...(toolResponse.artifact !== undefined\n            ? { artifact: toolResponse.artifact }\n            : {}),\n          result: toolResponse.result as ReadonlyJSONValue,\n          isError: toolResponse.isError,\n        };\n      }\n    }\n    return p;\n  });\n\n  return {\n    ...message,\n    parts: updatedParts,\n    content: updatedParts,\n  };\n}\n\nexport type ToolResultStreamOptions = {\n  onExecutionStart?: (toolCallId: string, toolName: string) => void;\n  onExecutionEnd?: (toolCallId: string, toolName: string) => void;\n};\n\nexport function toolResultStream(\n  tools:\n    | Record<string, Tool>\n    | (() => Record<string, Tool> | undefined)\n    | undefined,\n  abortSignal: AbortSignal | (() => AbortSignal),\n  human: (toolCallId: string, payload: unknown) => Promise<unknown>,\n  options?: ToolResultStreamOptions,\n) {\n  const toolsFn = typeof tools === \"function\" ? tools : () => tools;\n  const abortSignalFn =\n    typeof abortSignal === \"function\" ? abortSignal : () => abortSignal;\n  return new ToolExecutionStream({\n    execute: (toolCall) =>\n      getToolResponse(toolsFn(), abortSignalFn(), toolCall, human),\n    streamCall: ({ reader, ...context }) =>\n      getToolStreamResponse(toolsFn(), abortSignalFn(), reader, context, human),\n    onExecutionStart: options?.onExecutionStart,\n    onExecutionEnd: options?.onExecutionEnd,\n  });\n}\n", "import type { JSONSchema7 } from \"json-schema\";\nimport type { StandardSchemaV1 } from \"@standard-schema/spec\";\nimport type { Tool } from \"./tool-types\";\n\n/**\n * Type for a tool definition with JSON Schema parameters.\n */\nexport type ToolJSONSchema = {\n  description?: string;\n  parameters: JSONSchema7;\n};\n\nexport type ToToolsJSONSchemaOptions = {\n  /**\n   * Filter to determine which tools to include.\n   * Defaults to excluding disabled tools and backend tools.\n   */\n  filter?: (name: string, tool: Tool) => boolean;\n};\n\nfunction isStandardSchema(schema: unknown): schema is StandardSchemaV1 & {\n  \"~standard\": StandardSchemaV1[\"~standard\"] & { toJSONSchema?: () => unknown };\n} {\n  return (\n    typeof schema === \"object\" &&\n    schema !== null &&\n    \"~standard\" in schema &&\n    typeof (schema as StandardSchemaV1)[\"~standard\"] === \"object\"\n  );\n}\n\nfunction hasToJSONSchemaMethod(\n  schema: unknown,\n): schema is { toJSONSchema: () => unknown } {\n  return (\n    typeof schema === \"object\" &&\n    schema !== null &&\n    \"toJSONSchema\" in schema &&\n    typeof (schema as { toJSONSchema: unknown }).toJSONSchema === \"function\"\n  );\n}\n\nfunction hasToJSONMethod(schema: unknown): schema is { toJSON: () => unknown } {\n  return (\n    typeof schema === \"object\" &&\n    schema !== null &&\n    \"toJSON\" in schema &&\n    typeof (schema as { toJSON: unknown }).toJSON === \"function\"\n  );\n}\n\n/**\n * Converts a schema to JSONSchema7.\n * Supports:\n * - StandardSchemaV1 with ~standard.toJSONSchema (e.g., Zod v4)\n * - Objects with toJSONSchema() method\n * - Objects with toJSON() method\n * - Plain JSONSchema7 objects\n */\nexport function toJSONSchema(\n  schema: StandardSchemaV1 | JSONSchema7,\n): JSONSchema7 {\n  // StandardSchemaV1 with ~standard.toJSONSchema (e.g., Zod v4)\n  if (isStandardSchema(schema)) {\n    const toJSONSchemaMethod = schema[\"~standard\"].toJSONSchema;\n    if (typeof toJSONSchemaMethod === \"function\") {\n      return toJSONSchemaMethod() as JSONSchema7;\n    }\n  }\n\n  // toJSONSchema method on the schema itself\n  if (hasToJSONSchemaMethod(schema)) {\n    return schema.toJSONSchema() as JSONSchema7;\n  }\n\n  // toJSON method on the schema\n  if (hasToJSONMethod(schema)) {\n    return schema.toJSON() as JSONSchema7;\n  }\n\n  // Already a plain JSONSchema7\n  return schema as JSONSchema7;\n}\n\nfunction defaultToolFilter(_name: string, tool: Tool): boolean {\n  return !tool.disabled && tool.type !== \"backend\";\n}\n\n/**\n * Converts a record of tools to a record of tool definitions with JSON Schema parameters.\n * By default, filters out disabled tools and backend tools.\n */\nexport function toToolsJSONSchema(\n  tools: Record<string, Tool> | undefined,\n  options: ToToolsJSONSchemaOptions = {},\n): Record<string, ToolJSONSchema> {\n  if (!tools) return {};\n\n  const filter = options.filter ?? defaultToolFilter;\n\n  return Object.fromEntries(\n    Object.entries(tools)\n      .filter(([name, tool]) => filter(name, tool) && tool.parameters)\n      .map(([name, tool]) => [\n        name,\n        {\n          ...(tool.description && { description: tool.description }),\n          parameters: toJSONSchema(tool.parameters!),\n        },\n      ]),\n  );\n}\n", "import { PipeableTransformStream } from \"./PipeableTransformStream\";\nimport { LineDecoderStream } from \"./LineDecoderStream\";\n\nexport class SSEEncoder<T> extends PipeableTransformStream<\n  T,\n  Uint8Array<ArrayBuffer>\n> {\n  static readonly headers = new Headers({\n    \"Content-Type\": \"text/event-stream\",\n    \"Cache-Control\": \"no-cache\",\n    Connection: \"keep-alive\",\n  });\n\n  headers = SSEEncoder.headers;\n\n  constructor() {\n    super((readable) =>\n      readable\n        .pipeThrough(\n          new TransformStream<T, string>({\n            transform(chunk, controller) {\n              controller.enqueue(`data: ${JSON.stringify(chunk)}\\n\\n`);\n            },\n          }),\n        )\n        .pipeThrough(new TextEncoderStream()),\n    );\n  }\n}\n\ntype SSEEvent = {\n  event: string;\n  data: string;\n  id?: string | undefined;\n  retry?: number | undefined;\n};\n\nclass SSEEventStream extends TransformStream<string, SSEEvent> {\n  constructor() {\n    let eventBuffer: Partial<SSEEvent> = {};\n    let dataLines: string[] = [];\n\n    super({\n      start() {\n        eventBuffer = {};\n        dataLines = [];\n      },\n      transform(line, controller) {\n        if (line.startsWith(\":\")) return; // Ignore comments\n\n        if (line === \"\") {\n          if (dataLines.length > 0) {\n            controller.enqueue({\n              event: eventBuffer.event || \"message\",\n              data: dataLines.join(\"\\n\"),\n              id: eventBuffer.id,\n              retry: eventBuffer.retry,\n            });\n          }\n          eventBuffer = {};\n          dataLines = [];\n          return;\n        }\n\n        const [field, ...rest] = line.split(\":\");\n        const value = rest.join(\":\").trimStart();\n\n        switch (field) {\n          case \"event\":\n            eventBuffer.event = value;\n            break;\n          case \"data\":\n            dataLines.push(value);\n            break;\n          case \"id\":\n            eventBuffer.id = value;\n            break;\n          case \"retry\":\n            eventBuffer.retry = Number(value);\n            break;\n        }\n      },\n      flush(controller) {\n        if (dataLines.length > 0) {\n          controller.enqueue({\n            event: eventBuffer.event || \"message\",\n            data: dataLines.join(\"\\n\"),\n            id: eventBuffer.id,\n            retry: eventBuffer.retry,\n          });\n        }\n      },\n    });\n  }\n}\n\nexport class SSEDecoder<T> extends PipeableTransformStream<\n  Uint8Array<ArrayBuffer>,\n  T\n> {\n  constructor() {\n    super((readable) =>\n      readable\n        .pipeThrough(new TextDecoderStream())\n        .pipeThrough(new LineDecoderStream())\n        .pipeThrough(new SSEEventStream())\n        .pipeThrough(\n          new TransformStream<SSEEvent, T>({\n            transform(event, controller) {\n              switch (event.event) {\n                case \"message\":\n                  controller.enqueue(JSON.parse(event.data));\n                  break;\n                default:\n                  throw new Error(`Unknown SSE event type: ${event.event}`);\n              }\n            },\n          }),\n        ),\n    );\n  }\n}\n", "import {\n  ThreadAssistantMessagePart,\n  ThreadUserMessagePart,\n  MessagePartStatus,\n  ToolCallMessagePartStatus,\n} from \"../../types/AssistantTypes\";\nimport { ThreadRuntimeCoreBinding } from \"./ThreadRuntime\";\nimport type { MessageStateBinding } from \"./RuntimeBindings\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { Unsubscribe } from \"../../types\";\nimport { MessagePartRuntimePath } from \"./RuntimePathTypes\";\nimport { ToolResponse } from \"assistant-stream\";\n\nexport type MessagePartState = (\n  | ThreadUserMessagePart\n  | ThreadAssistantMessagePart\n) & {\n  readonly status: MessagePartStatus | ToolCallMessagePartStatus;\n};\n\ntype MessagePartSnapshotBinding = SubscribableWithState<\n  MessagePartState,\n  MessagePartRuntimePath\n>;\n\nexport type MessagePartRuntime = {\n  /**\n   * Add tool result to a tool call message part that has no tool result yet.\n   * This is useful when you are collecting a tool result via user input (\"human tool calls\").\n   */\n  addToolResult(result: any | ToolResponse<any>): void;\n\n  /**\n   * Resume a tool call that is waiting for human input with a payload.\n   * This is useful when a tool has requested human input and is waiting for a response.\n   */\n  resumeToolCall(payload: unknown): void;\n\n  readonly path: MessagePartRuntimePath;\n  getState(): MessagePartState;\n  subscribe(callback: () => void): Unsubscribe;\n};\n\nexport class MessagePartRuntimeImpl implements MessagePartRuntime {\n  public get path() {\n    return this.contentBinding.path;\n  }\n\n  constructor(\n    private contentBinding: MessagePartSnapshotBinding,\n    private messageApi?: MessageStateBinding,\n    private threadApi?: ThreadRuntimeCoreBinding,\n  ) {\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.addToolResult = this.addToolResult.bind(this);\n    this.resumeToolCall = this.resumeToolCall.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n  }\n\n  public getState() {\n    return this.contentBinding.getState();\n  }\n\n  public addToolResult(result: any | ToolResponse<any>) {\n    const state = this.contentBinding.getState();\n    if (!state) throw new Error(\"Message part is not available\");\n\n    if (state.type !== \"tool-call\")\n      throw new Error(\"Tried to add tool result to non-tool message part\");\n\n    if (!this.messageApi)\n      throw new Error(\n        \"Message API is not available. This is likely a bug in assistant-ui.\",\n      );\n    if (!this.threadApi) throw new Error(\"Thread API is not available\");\n\n    const message = this.messageApi.getState();\n    if (!message) throw new Error(\"Message is not available\");\n\n    const toolName = state.toolName;\n    const toolCallId = state.toolCallId;\n\n    const response = ToolResponse.toResponse(result);\n    this.threadApi.getState().addToolResult({\n      messageId: message.id,\n      toolName,\n      toolCallId,\n      result: response.result,\n      artifact: response.artifact,\n      isError: response.isError,\n    });\n  }\n\n  public resumeToolCall(payload: unknown) {\n    const state = this.contentBinding.getState();\n    if (!state) throw new Error(\"Message part is not available\");\n\n    if (state.type !== \"tool-call\")\n      throw new Error(\"Tried to resume tool call on non-tool message part\");\n\n    if (!this.threadApi) throw new Error(\"Thread API is not available\");\n\n    const toolCallId = state.toolCallId;\n    this.threadApi.getState().resumeToolCall({\n      toolCallId,\n      payload,\n    });\n  }\n\n  public subscribe(callback: () => void) {\n    return this.contentBinding.subscribe(callback);\n  }\n}\n", "import { Unsubscribe } from \"../../../types\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport {\n  NestedSubscribable,\n  Subscribable,\n  SubscribableWithState,\n} from \"./Subscribable\";\n\nexport class NestedSubscriptionSubject<\n    TState extends Subscribable | undefined,\n    TPath,\n  >\n  extends BaseSubject\n  implements\n    SubscribableWithState<TState, TPath>,\n    NestedSubscribable<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(private binding: NestedSubscribable<TState, TPath>) {\n    super();\n  }\n\n  public getState() {\n    return this.binding.getState();\n  }\n\n  public outerSubscribe(callback: () => void) {\n    return this.binding.subscribe(callback);\n  }\n\n  protected _connect(): Unsubscribe {\n    const callback = () => {\n      this.notifySubscribers();\n    };\n\n    let lastState = this.binding.getState();\n    let innerUnsubscribe = lastState?.subscribe(callback);\n    const onRuntimeUpdate = () => {\n      const newState = this.binding.getState();\n      if (newState === lastState) return;\n      lastState = newState;\n\n      innerUnsubscribe?.();\n      innerUnsubscribe = this.binding.getState()?.subscribe(callback);\n\n      callback();\n    };\n\n    const outerUnsubscribe = this.outerSubscribe(onRuntimeUpdate);\n    return () => {\n      outerUnsubscribe?.();\n      innerUnsubscribe?.();\n    };\n  }\n}\n", "import {\n  SpeechState,\n  SubmittedFeedback,\n} from \"../runtime-cores/core/ThreadRuntimeCore\";\nimport { symbolInnerMessage } from \"../runtime-cores/external-store/getExternalStoreMessage\";\nimport {\n  ThreadMessage,\n  ThreadAssistantMessagePart,\n  ThreadUserMessagePart,\n  Unsubscribe,\n} from \"../../types\";\nimport {\n  MessagePartStatus,\n  RunConfig,\n  ToolCallMessagePartStatus,\n} from \"../../types/AssistantTypes\";\nimport { getThreadMessageText } from \"../../utils/getThreadMessageText\";\nimport {\n  AttachmentRuntime,\n  AttachmentState,\n  MessageAttachmentRuntimeImpl,\n} from \"./AttachmentRuntime\";\nimport {\n  EditComposerRuntime,\n  EditComposerRuntimeImpl,\n} from \"./ComposerRuntime\";\nimport {\n  MessagePartRuntime,\n  MessagePartRuntimeImpl,\n  MessagePartState,\n} from \"./MessagePartRuntime\";\nimport { MessageRuntimePath } from \"./RuntimePathTypes\";\nimport { ThreadRuntimeCoreBinding } from \"./ThreadRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport type { MessageStateBinding } from \"./RuntimeBindings\";\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nexport const toMessagePartStatus = (\n  message: ThreadMessage,\n  partIndex: number,\n  part: ThreadUserMessagePart | ThreadAssistantMessagePart,\n): ToolCallMessagePartStatus => {\n  if (message.role !== \"assistant\") return COMPLETE_STATUS;\n\n  if (part.type === \"tool-call\") {\n    if (!part.result) {\n      return message.status as ToolCallMessagePartStatus;\n    } else {\n      return COMPLETE_STATUS;\n    }\n  }\n\n  const isLastPart = partIndex === Math.max(0, message.content.length - 1);\n  if (message.status.type === \"requires-action\") return COMPLETE_STATUS;\n  return isLastPart ? (message.status as MessagePartStatus) : COMPLETE_STATUS;\n};\n\nconst getMessagePartState = (\n  message: MessageState,\n  partIndex: number,\n): MessagePartState | SKIP_UPDATE => {\n  const part = message.content[partIndex];\n  if (!part) {\n    return SKIP_UPDATE;\n  }\n\n  // if the message part is the same, don't update\n  const status = toMessagePartStatus(message, partIndex, part);\n  return Object.freeze({\n    ...part,\n    ...{ [symbolInnerMessage]: (part as any)[symbolInnerMessage] },\n    status,\n  });\n};\n\nexport type MessageState = ThreadMessage & {\n  readonly parentId: string | null;\n  /** The position of this message in the thread (0 for first message) */\n  readonly index: number;\n  readonly isLast: boolean;\n\n  readonly branchNumber: number;\n  readonly branchCount: number;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  readonly speech: SpeechState | undefined;\n  /**\n   * @deprecated Use `message.metadata.submittedFeedback` instead. This will be removed in 0.12.0.\n   */\n  readonly submittedFeedback: SubmittedFeedback | undefined;\n};\n\nexport type { MessageStateBinding } from \"./RuntimeBindings\";\n\ntype ReloadConfig = {\n  runConfig?: RunConfig;\n};\n\nexport type MessageRuntime = {\n  readonly path: MessageRuntimePath;\n\n  readonly composer: EditComposerRuntime;\n\n  getState(): MessageState;\n  reload(config?: ReloadConfig): void;\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  speak(): void;\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  stopSpeaking(): void;\n  submitFeedback({ type }: { type: \"positive\" | \"negative\" }): void;\n  switchToBranch({\n    position,\n    branchId,\n  }: {\n    position?: \"previous\" | \"next\" | undefined;\n    branchId?: string | undefined;\n  }): void;\n  unstable_getCopyText(): string;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  getMessagePartByIndex(idx: number): MessagePartRuntime;\n  getMessagePartByToolCallId(toolCallId: string): MessagePartRuntime;\n\n  getAttachmentByIndex(idx: number): AttachmentRuntime & { source: \"message\" };\n};\n\nexport class MessageRuntimeImpl implements MessageRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  constructor(\n    private _core: MessageStateBinding,\n    private _threadBinding: ThreadRuntimeCoreBinding,\n  ) {\n    this.composer = new EditComposerRuntimeImpl(\n      new NestedSubscriptionSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.composer`,\n          composerSource: \"edit\",\n        },\n        getState: this._getEditComposerRuntimeCore,\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n      () => this._threadBinding.getState().beginEdit(this._core.getState().id),\n    );\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.reload = this.reload.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.getMessagePartByIndex = this.getMessagePartByIndex.bind(this);\n    this.getMessagePartByToolCallId =\n      this.getMessagePartByToolCallId.bind(this);\n    this.getAttachmentByIndex = this.getAttachmentByIndex.bind(this);\n    this.unstable_getCopyText = this.unstable_getCopyText.bind(this);\n    this.speak = this.speak.bind(this);\n    this.stopSpeaking = this.stopSpeaking.bind(this);\n    this.submitFeedback = this.submitFeedback.bind(this);\n    this.switchToBranch = this.switchToBranch.bind(this);\n  }\n\n  public readonly composer;\n\n  private _getEditComposerRuntimeCore = () => {\n    return this._threadBinding\n      .getState()\n      .getEditComposer(this._core.getState().id);\n  };\n\n  public getState() {\n    return this._core.getState();\n  }\n\n  public reload(reloadConfig: ReloadConfig = {}) {\n    const editComposerRuntimeCore = this._getEditComposerRuntimeCore();\n    const composerRuntimeCore =\n      editComposerRuntimeCore ?? this._threadBinding.getState().composer;\n    const composer = editComposerRuntimeCore ?? composerRuntimeCore;\n\n    const { runConfig = composer.runConfig } = reloadConfig;\n    const state = this._core.getState();\n    if (state.role !== \"assistant\")\n      throw new Error(\"Can only reload assistant messages\");\n\n    this._threadBinding.getState().startRun({\n      parentId: state.parentId,\n      sourceId: state.id,\n      runConfig,\n    });\n  }\n\n  public speak() {\n    const state = this._core.getState();\n    return this._threadBinding.getState().speak(state.id);\n  }\n\n  public stopSpeaking() {\n    const state = this._core.getState();\n    const thread = this._threadBinding.getState();\n    if (thread.speech?.messageId === state.id) {\n      this._threadBinding.getState().stopSpeaking();\n    } else {\n      throw new Error(\"Message is not being spoken\");\n    }\n  }\n\n  public submitFeedback({ type }: { type: \"positive\" | \"negative\" }) {\n    const state = this._core.getState();\n    this._threadBinding.getState().submitFeedback({\n      messageId: state.id,\n      type,\n    });\n  }\n\n  public switchToBranch({\n    position,\n    branchId,\n  }: {\n    position?: \"previous\" | \"next\" | undefined;\n    branchId?: string | undefined;\n  }) {\n    const state = this._core.getState();\n    if (branchId && position) {\n      throw new Error(\"May not specify both branchId and position\");\n    } else if (!branchId && !position) {\n      throw new Error(\"Must specify either branchId or position\");\n    }\n\n    const thread = this._threadBinding.getState();\n    const branches = thread.getBranches(state.id);\n    let targetBranch = branchId;\n    if (position === \"previous\") {\n      targetBranch = branches[state.branchNumber - 2];\n    } else if (position === \"next\") {\n      targetBranch = branches[state.branchNumber];\n    }\n    if (!targetBranch) throw new Error(\"Branch not found\");\n\n    this._threadBinding.getState().switchToBranch(targetBranch);\n  }\n\n  public unstable_getCopyText() {\n    return getThreadMessageText(this.getState());\n  }\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n\n  public getMessagePartByIndex(idx: number) {\n    if (idx < 0) throw new Error(\"Message part index must be >= 0\");\n    return new MessagePartRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.content[${idx}]`,\n          messagePartSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          return getMessagePartState(this.getState(), idx);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n      this._threadBinding,\n    );\n  }\n\n  public getMessagePartByToolCallId(toolCallId: string) {\n    return new MessagePartRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref:\n            this.path.ref +\n            `${this.path.ref}.content[toolCallId=${JSON.stringify(toolCallId)}]`,\n          messagePartSelector: { type: \"toolCallId\", toolCallId },\n        },\n        getState: () => {\n          const state = this._core.getState();\n          const idx = state.content.findIndex(\n            (part) =>\n              part.type === \"tool-call\" && part.toolCallId === toolCallId,\n          );\n          if (idx === -1) return SKIP_UPDATE;\n          return getMessagePartState(state, idx);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n      this._threadBinding,\n    );\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new MessageAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.attachments[${idx}]`,\n          attachmentSource: \"message\",\n          attachmentSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments?.[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"message\",\n          } satisfies AttachmentState & { source: \"message\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n    );\n  }\n}\n", "import {\n  ThreadSuggestion,\n  RuntimeCapabilities,\n  ThreadRuntimeCore,\n  SpeechState,\n  ThreadRuntimeEventType,\n  StartRunConfig,\n  ResumeRunConfig,\n} from \"../runtime-cores/core/ThreadRuntimeCore\";\nimport { ExportedMessageRepository } from \"../runtime-cores/utils/MessageRepository\";\nimport { AppendMessage, ThreadMessage, Unsubscribe } from \"../../types\";\nimport { ThreadMessageLike } from \"../runtime-cores/external-store\";\nimport {\n  MessageRuntime,\n  MessageRuntimeImpl,\n  MessageState,\n} from \"./MessageRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport {\n  ThreadComposerRuntime,\n  ThreadComposerRuntimeImpl,\n} from \"./ComposerRuntime\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport {\n  MessageRuntimePath,\n  ThreadListItemRuntimePath,\n  ThreadRuntimePath,\n} from \"./RuntimePathTypes\";\nimport type { ThreadListItemState } from \"./RuntimeBindings\";\nimport { RunConfig } from \"../../types/AssistantTypes\";\nimport { EventSubscriptionSubject } from \"./subscribable/EventSubscriptionSubject\";\nimport { symbolInnerMessage } from \"../runtime-cores/external-store/getExternalStoreMessage\";\nimport { ModelContext } from \"../../model-context\";\nimport { ChatModelRunOptions, ChatModelRunResult } from \"../runtime-cores\";\nimport { ReadonlyJSONValue } from \"assistant-stream/utils\";\n\nexport type CreateStartRunConfig = {\n  parentId: string | null;\n  sourceId?: string | null | undefined;\n  runConfig?: RunConfig | undefined;\n};\n\nexport type CreateResumeRunConfig = CreateStartRunConfig & {\n  stream?: (\n    options: ChatModelRunOptions,\n  ) => AsyncGenerator<ChatModelRunResult, void, unknown>;\n};\n\nconst toResumeRunConfig = (message: CreateResumeRunConfig): ResumeRunConfig => {\n  return {\n    parentId: message.parentId ?? null,\n    sourceId: message.sourceId ?? null,\n    runConfig: message.runConfig ?? {},\n    ...(message.stream ? { stream: message.stream } : {}),\n  };\n};\n\nconst toStartRunConfig = (message: CreateStartRunConfig): StartRunConfig => {\n  return {\n    parentId: message.parentId ?? null,\n    sourceId: message.sourceId ?? null,\n    runConfig: message.runConfig ?? {},\n  };\n};\n\nexport type CreateAppendMessage =\n  | string\n  | {\n      parentId?: string | null | undefined;\n      sourceId?: string | null | undefined;\n      role?: AppendMessage[\"role\"] | undefined;\n      content: AppendMessage[\"content\"];\n      attachments?: AppendMessage[\"attachments\"] | undefined;\n      metadata?: AppendMessage[\"metadata\"] | undefined;\n      createdAt?: Date | undefined;\n      runConfig?: AppendMessage[\"runConfig\"] | undefined;\n      startRun?: boolean | undefined;\n    };\n\nconst toAppendMessage = (\n  messages: readonly ThreadMessage[],\n  message: CreateAppendMessage,\n): AppendMessage => {\n  if (typeof message === \"string\") {\n    return {\n      createdAt: new Date(),\n      parentId: messages.at(-1)?.id ?? null,\n      sourceId: null,\n      runConfig: {},\n      role: \"user\",\n      content: [{ type: \"text\", text: message }],\n      attachments: [],\n      metadata: { custom: {} },\n    };\n  }\n\n  return {\n    createdAt: message.createdAt ?? new Date(),\n    parentId: message.parentId ?? messages.at(-1)?.id ?? null,\n    sourceId: message.sourceId ?? null,\n    role: message.role ?? \"user\",\n    content: message.content,\n    attachments: message.attachments ?? [],\n    metadata: message.metadata ?? { custom: {} },\n    runConfig: message.runConfig ?? {},\n    startRun: message.startRun,\n  } as AppendMessage;\n};\n\nexport type ThreadRuntimeCoreBinding = SubscribableWithState<\n  ThreadRuntimeCore,\n  ThreadRuntimePath\n> & {\n  outerSubscribe(callback: () => void): Unsubscribe;\n};\n\nexport type ThreadListItemRuntimeBinding = SubscribableWithState<\n  ThreadListItemState,\n  ThreadListItemRuntimePath\n>;\n\nexport type ThreadState = {\n  /**\n   * The thread ID.\n   * @deprecated This field is deprecated and will be removed in 0.12.0. Use `useThreadListItem().id` instead.\n   */\n  readonly threadId: string;\n\n  /**\n   * The thread metadata.\n   *\n   * @deprecated Use `useThreadListItem()` instead. This field is deprecated and will be removed in 0.12.0.\n   */\n  readonly metadata: ThreadListItemState;\n\n  /**\n   * Whether the thread is disabled. Disabled threads cannot receive new messages.\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * Whether the thread is loading its history.\n   */\n  readonly isLoading: boolean;\n\n  /**\n   * Whether the thread is running. A thread is considered running when there is an active stream connection to the backend.\n   */\n  readonly isRunning: boolean;\n\n  /**\n   * The capabilities of the thread, such as whether the thread supports editing, branch switching, etc.\n   */\n  readonly capabilities: RuntimeCapabilities;\n\n  /**\n   * The messages in the currently selected branch of the thread.\n   */\n  readonly messages: readonly ThreadMessage[];\n\n  /**\n   * The thread state.\n   *\n   * @deprecated This feature is experimental\n   */\n  readonly state: ReadonlyJSONValue;\n\n  /**\n   * Follow up message suggestions to show the user.\n   */\n  readonly suggestions: readonly ThreadSuggestion[];\n\n  /**\n   * Custom extra information provided by the runtime.\n   */\n  readonly extras: unknown;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  readonly speech: SpeechState | undefined;\n};\n\nexport const getThreadState = (\n  runtime: ThreadRuntimeCore,\n  threadListItemState: ThreadListItemState,\n): ThreadState => {\n  const lastMessage = runtime.messages.at(-1);\n  return Object.freeze({\n    threadId: threadListItemState.id,\n    metadata: threadListItemState,\n    capabilities: runtime.capabilities,\n    isDisabled: runtime.isDisabled,\n    isLoading: runtime.isLoading,\n    isRunning:\n      lastMessage?.role !== \"assistant\"\n        ? false\n        : lastMessage.status.type === \"running\",\n    messages: runtime.messages,\n    state: runtime.state,\n    suggestions: runtime.suggestions,\n    extras: runtime.extras,\n    speech: runtime.speech,\n  });\n};\n\nexport type ThreadRuntime = {\n  /**\n   * The selector for the thread runtime.\n   */\n  readonly path: ThreadRuntimePath;\n\n  /**\n   * The thread composer runtime.\n   */\n  readonly composer: ThreadComposerRuntime;\n\n  /**\n   * Gets a snapshot of the thread state.\n   */\n  getState(): ThreadState;\n\n  /**\n   * Append a new message to the thread.\n   *\n   * @example ```ts\n   * // append a new user message with the text \"Hello, world!\"\n   * threadRuntime.append(\"Hello, world!\");\n   * ```\n   *\n   * @example ```ts\n   * // append a new assistant message with the text \"Hello, world!\"\n   * threadRuntime.append({\n   *   role: \"assistant\",\n   *   content: [{ type: \"text\", text: \"Hello, world!\" }],\n   * });\n   * ```\n   */\n  append(message: CreateAppendMessage): void;\n\n  /**\n   * @deprecated pass an object with `parentId` instead. This will be removed in 0.12.0.\n   */\n  startRun(parentId: string | null): void;\n  /**\n   * Start a new run with the given configuration.\n   * @param config The configuration for starting the run\n   */\n  startRun(config: CreateStartRunConfig): void;\n\n  /**\n   * Resume a run with the given configuration.\n   * @param config The configuration for resuming the run\n   **/\n  unstable_resumeRun(config: CreateResumeRunConfig): void;\n\n  /**\n   * Export the thread state in the external store format.\n   * For AI SDK runtimes, this returns the AI SDK message format.\n   * For other runtimes, this may return different formats or throw an error.\n   * @returns The thread state in the external format (typed as any)\n   */\n  exportExternalState(): any;\n\n  /**\n   * Import thread state from the external store format.\n   * For AI SDK runtimes, this accepts AI SDK messages.\n   * For other runtimes, this may accept different formats or throw an error.\n   * @param state The thread state in the external format (typed as any)\n   */\n  importExternalState(state: any): void;\n\n  /**\n   * Load external state into the thread.\n   * @deprecated Use importExternalState instead. This method will be removed in 0.12.0.\n   * @param state The state to load into the thread\n   */\n  unstable_loadExternalState(state: any): void;\n\n  subscribe(callback: () => void): Unsubscribe;\n  cancelRun(): void;\n  getModelContext(): ModelContext;\n\n  /**\n   * @deprecated This method was renamed to `getModelContext`.\n   */\n  getModelConfig(): ModelContext;\n\n  export(): ExportedMessageRepository;\n  import(repository: ExportedMessageRepository): void;\n\n  /**\n   * Reset the thread with optional initial messages.\n   *\n   * @param initialMessages - Optional array of initial messages to populate the thread\n   */\n  reset(initialMessages?: readonly ThreadMessageLike[]): void;\n\n  getMessageByIndex(idx: number): MessageRuntime;\n  getMessageById(messageId: string): MessageRuntime;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  stopSpeaking(): void;\n\n  unstable_on(event: ThreadRuntimeEventType, callback: () => void): Unsubscribe;\n};\n\nexport class ThreadRuntimeImpl implements ThreadRuntime {\n  public get path() {\n    return this._threadBinding.path;\n  }\n\n  public get __internal_threadBinding() {\n    return this._threadBinding;\n  }\n\n  private readonly _threadBinding: ThreadRuntimeCoreBinding & {\n    getStateState(): ThreadState;\n  };\n\n  constructor(\n    threadBinding: ThreadRuntimeCoreBinding,\n    threadListItemBinding: ThreadListItemRuntimeBinding,\n  ) {\n    const stateBinding = new ShallowMemoizeSubject({\n      path: threadBinding.path,\n      getState: () =>\n        getThreadState(\n          threadBinding.getState(),\n          threadListItemBinding.getState(),\n        ),\n      subscribe: (callback) => {\n        const sub1 = threadBinding.subscribe(callback);\n        const sub2 = threadListItemBinding.subscribe(callback);\n        return () => {\n          sub1();\n          sub2();\n        };\n      },\n    });\n\n    this._threadBinding = {\n      path: threadBinding.path,\n      getState: () => threadBinding.getState(),\n      getStateState: () => stateBinding.getState(),\n      outerSubscribe: (callback) => threadBinding.outerSubscribe(callback),\n      subscribe: (callback) => threadBinding.subscribe(callback),\n    };\n\n    this.composer = new ThreadComposerRuntimeImpl(\n      new NestedSubscriptionSubject({\n        path: {\n          ...this.path,\n          ref: `${this.path.ref}${this.path.ref}.composer`,\n          composerSource: \"thread\",\n        },\n        getState: () => this._threadBinding.getState().composer,\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n    );\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.append = this.append.bind(this);\n    this.unstable_resumeRun = this.unstable_resumeRun.bind(this);\n    this.unstable_loadExternalState =\n      this.unstable_loadExternalState.bind(this);\n    this.importExternalState = this.importExternalState.bind(this);\n    this.exportExternalState = this.exportExternalState.bind(this);\n    this.startRun = this.startRun.bind(this);\n    this.cancelRun = this.cancelRun.bind(this);\n    this.stopSpeaking = this.stopSpeaking.bind(this);\n    this.export = this.export.bind(this);\n    this.import = this.import.bind(this);\n    this.reset = this.reset.bind(this);\n    this.getMessageByIndex = this.getMessageByIndex.bind(this);\n    this.getMessageById = this.getMessageById.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.unstable_on = this.unstable_on.bind(this);\n    this.getModelContext = this.getModelContext.bind(this);\n    this.getModelConfig = this.getModelConfig.bind(this);\n    this.getState = this.getState.bind(this);\n  }\n\n  public readonly composer;\n\n  public getState() {\n    return this._threadBinding.getStateState();\n  }\n\n  public append(message: CreateAppendMessage) {\n    this._threadBinding\n      .getState()\n      .append(\n        toAppendMessage(this._threadBinding.getState().messages, message),\n      );\n  }\n\n  public subscribe(callback: () => void) {\n    return this._threadBinding.subscribe(callback);\n  }\n\n  public getModelContext() {\n    return this._threadBinding.getState().getModelContext();\n  }\n\n  public getModelConfig() {\n    return this.getModelContext();\n  }\n\n  public startRun(configOrParentId: string | null | CreateStartRunConfig) {\n    const config =\n      configOrParentId === null || typeof configOrParentId === \"string\"\n        ? { parentId: configOrParentId }\n        : configOrParentId;\n    return this._threadBinding.getState().startRun(toStartRunConfig(config));\n  }\n\n  public unstable_resumeRun(config: CreateResumeRunConfig) {\n    return this._threadBinding.getState().resumeRun(toResumeRunConfig(config));\n  }\n\n  public exportExternalState() {\n    return this._threadBinding.getState().exportExternalState();\n  }\n\n  public importExternalState(state: any) {\n    this._threadBinding.getState().importExternalState(state);\n  }\n\n  public unstable_loadExternalState(state: any) {\n    this._threadBinding.getState().unstable_loadExternalState(state);\n  }\n\n  public cancelRun() {\n    this._threadBinding.getState().cancelRun();\n  }\n\n  public stopSpeaking() {\n    return this._threadBinding.getState().stopSpeaking();\n  }\n\n  public export() {\n    return this._threadBinding.getState().export();\n  }\n\n  public import(data: ExportedMessageRepository) {\n    this._threadBinding.getState().import(data);\n  }\n\n  public reset(initialMessages?: readonly ThreadMessageLike[]) {\n    this._threadBinding.getState().reset(initialMessages);\n  }\n\n  public getMessageByIndex(idx: number) {\n    if (idx < 0) throw new Error(\"Message index must be >= 0\");\n\n    return this._getMessageRuntime(\n      {\n        ...this.path,\n        ref: `${this.path.ref}${this.path.ref}.messages[${idx}]`,\n        messageSelector: { type: \"index\", index: idx },\n      },\n      () => {\n        const messages = this._threadBinding.getState().messages;\n        const message = messages[idx];\n        if (!message) return undefined;\n        return {\n          message,\n          parentId: messages[idx - 1]?.id ?? null,\n          index: idx,\n        };\n      },\n    );\n  }\n\n  public getMessageById(messageId: string) {\n    return this._getMessageRuntime(\n      {\n        ...this.path,\n        ref:\n          this.path.ref +\n          `${this.path.ref}.messages[messageId=${JSON.stringify(messageId)}]`,\n        messageSelector: { type: \"messageId\", messageId: messageId },\n      },\n      () => this._threadBinding.getState().getMessageById(messageId),\n    );\n  }\n\n  private _getMessageRuntime(\n    path: MessageRuntimePath,\n    callback: () =>\n      | { parentId: string | null; message: ThreadMessage; index: number }\n      | undefined,\n  ) {\n    return new MessageRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path,\n        getState: () => {\n          const { message, parentId, index } = callback() ?? {};\n\n          const { messages, speech: speechState } =\n            this._threadBinding.getState();\n\n          if (!message || parentId === undefined || index === undefined)\n            return SKIP_UPDATE;\n\n          const thread = this._threadBinding.getState();\n\n          const branches = thread.getBranches(message.id);\n          const submittedFeedback = message.metadata.submittedFeedback;\n\n          return {\n            ...message,\n            ...{ [symbolInnerMessage]: (message as any)[symbolInnerMessage] },\n\n            index,\n            isLast: messages.at(-1)?.id === message.id,\n            parentId,\n\n            branchNumber: branches.indexOf(message.id) + 1,\n            branchCount: branches.length,\n\n            speech:\n              speechState?.messageId === message.id ? speechState : undefined,\n\n            submittedFeedback,\n          } satisfies MessageState;\n        },\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n      this._threadBinding,\n    );\n  }\n\n  private _eventSubscriptionSubjects = new Map<\n    string,\n    EventSubscriptionSubject<ThreadRuntimeEventType>\n  >();\n\n  public unstable_on(\n    event: ThreadRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe {\n    let subject = this._eventSubscriptionSubjects.get(event);\n    if (!subject) {\n      subject = new EventSubscriptionSubject({\n        event: event,\n        binding: this._threadBinding,\n      });\n      this._eventSubscriptionSubjects.set(event, subject);\n    }\n    return subject.subscribe(callback);\n  }\n}\n", "import { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport { ThreadListRuntimeCore } from \"../runtime-cores/core/ThreadListRuntimeCore\";\nimport { Unsubscribe } from \"../../types\";\nimport {\n  ThreadListItemRuntime,\n  ThreadListItemRuntimeImpl,\n  ThreadListItemState,\n} from \"./ThreadListItemRuntime\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport {\n  ThreadListItemRuntimeBinding,\n  ThreadRuntime,\n  ThreadRuntimeCoreBinding,\n  ThreadRuntimeImpl,\n} from \"./ThreadRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\n\nexport type ThreadListState = {\n  readonly mainThreadId: string;\n  readonly newThreadId: string | undefined;\n  readonly threadIds: readonly string[];\n  readonly archivedThreadIds: readonly string[];\n  readonly isLoading: boolean;\n  readonly threadItems: Readonly<\n    Record<string, Omit<ThreadListItemState, \"isMain\" | \"threadId\">>\n  >;\n};\n\nexport type ThreadListRuntime = {\n  getState(): ThreadListState;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  readonly main: ThreadRuntime;\n  getById(threadId: string): ThreadRuntime;\n\n  readonly mainItem: ThreadListItemRuntime;\n  getItemById(threadId: string): ThreadListItemRuntime;\n  getItemByIndex(idx: number): ThreadListItemRuntime;\n  getArchivedItemByIndex(idx: number): ThreadListItemRuntime;\n\n  switchToThread(threadId: string): Promise<void>;\n  switchToNewThread(): Promise<void>;\n};\n\nconst getThreadListState = (\n  threadList: ThreadListRuntimeCore,\n): ThreadListState => {\n  return {\n    mainThreadId: threadList.mainThreadId,\n    newThreadId: threadList.newThreadId,\n    threadIds: threadList.threadIds,\n    archivedThreadIds: threadList.archivedThreadIds,\n    isLoading: threadList.isLoading,\n    threadItems: threadList.threadItems,\n  };\n};\n\nconst getThreadListItemState = (\n  threadList: ThreadListRuntimeCore,\n  threadId: string | undefined,\n): ThreadListItemState | SKIP_UPDATE => {\n  if (threadId === undefined) return SKIP_UPDATE;\n\n  const threadData = threadList.getItemById(threadId);\n  if (!threadData) return SKIP_UPDATE;\n  return {\n    id: threadData.id,\n    remoteId: threadData.remoteId,\n    externalId: threadData.externalId,\n    title: threadData.title,\n    status: threadData.status,\n    isMain: threadData.id === threadList.mainThreadId,\n  };\n};\n\nexport type ThreadListRuntimeCoreBinding = ThreadListRuntimeCore;\n\nexport class ThreadListRuntimeImpl implements ThreadListRuntime {\n  private _getState;\n  constructor(\n    private _core: ThreadListRuntimeCoreBinding,\n    private _runtimeFactory: new (\n      binding: ThreadRuntimeCoreBinding,\n      threadListItemBinding: ThreadListItemRuntimeBinding,\n    ) => ThreadRuntime = ThreadRuntimeImpl,\n  ) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: {},\n      getState: () => getThreadListState(_core),\n      subscribe: (callback) => _core.subscribe(callback),\n    });\n\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this._mainThreadListItemRuntime = new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[main]`,\n          threadSelector: { type: \"main\" },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, this._core.mainThreadId);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n\n    this.main = new _runtimeFactory(\n      new NestedSubscriptionSubject({\n        path: {\n          ref: \"threads.main\",\n          threadSelector: { type: \"main\" },\n        },\n        getState: () => _core.getMainThreadRuntimeCore(),\n        subscribe: (callback) => _core.subscribe(callback),\n      }),\n      this._mainThreadListItemRuntime, // TODO capture \"main\" threadListItem from context around useLocalRuntime / useExternalStoreRuntime\n    );\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.switchToThread = this.switchToThread.bind(this);\n    this.switchToNewThread = this.switchToNewThread.bind(this);\n    this.getState = this.getState.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.getById = this.getById.bind(this);\n    this.getItemById = this.getItemById.bind(this);\n    this.getItemByIndex = this.getItemByIndex.bind(this);\n    this.getArchivedItemByIndex = this.getArchivedItemByIndex.bind(this);\n  }\n\n  public switchToThread(threadId: string): Promise<void> {\n    return this._core.switchToThread(threadId);\n  }\n\n  public switchToNewThread(): Promise<void> {\n    return this._core.switchToNewThread();\n  }\n\n  public getState(): ThreadListState {\n    return this._getState();\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    return this._core.subscribe(callback);\n  }\n\n  private _mainThreadListItemRuntime;\n\n  public readonly main: ThreadRuntime;\n\n  public get mainItem() {\n    return this._mainThreadListItemRuntime;\n  }\n\n  public getById(threadId: string) {\n    return new this._runtimeFactory(\n      new NestedSubscriptionSubject({\n        path: {\n          ref: `threads[threadId=${JSON.stringify(threadId)}]`,\n          threadSelector: { type: \"threadId\", threadId },\n        },\n        getState: () => this._core.getThreadRuntimeCore(threadId),\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this.mainItem, // TODO capture \"main\" threadListItem from context around useLocalRuntime / useExternalStoreRuntime\n    );\n  }\n\n  public getItemByIndex(idx: number) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[${idx}]`,\n          threadSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, this._core.threadIds[idx]);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getArchivedItemByIndex(idx: number) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `archivedThreadItems[${idx}]`,\n          threadSelector: { type: \"archiveIndex\", index: idx },\n        },\n        getState: () => {\n          return getThreadListItemState(\n            this._core,\n            this._core.archivedThreadIds[idx],\n          );\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getItemById(threadId: string) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[threadId=${threadId}]`,\n          threadSelector: { type: \"threadId\", threadId },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, threadId);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n", "import {\n  PendingAttachment,\n  CompleteAttachment,\n} from \"../../../../types/AttachmentTypes\";\nimport { AttachmentAdapter } from \"./AttachmentAdapter\";\n\nexport class SimpleImageAttachmentAdapter implements AttachmentAdapter {\n  public accept = \"image/*\";\n\n  public async add(state: { file: File }): Promise<PendingAttachment> {\n    return {\n      id: state.file.name,\n      type: \"image\",\n      name: state.file.name,\n      contentType: state.file.type,\n      file: state.file,\n      status: { type: \"requires-action\", reason: \"composer-send\" },\n    };\n  }\n\n  public async send(\n    attachment: PendingAttachment,\n  ): Promise<CompleteAttachment> {\n    return {\n      ...attachment,\n      status: { type: \"complete\" },\n      content: [\n        {\n          type: \"image\",\n          image: await getFileDataURL(attachment.file),\n        },\n      ],\n    };\n  }\n\n  public async remove() {\n    // noop\n  }\n}\n\nconst getFileDataURL = (file: File) =>\n  new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n\n    reader.readAsDataURL(file);\n  });\n", "import {\n  CompleteAttachment,\n  PendingAttachment,\n} from \"../../../../types/AttachmentTypes\";\nimport { AttachmentAdapter } from \"./AttachmentAdapter\";\n\nexport class SimpleTextAttachmentAdapter implements AttachmentAdapter {\n  public accept =\n    \"text/plain,text/html,text/markdown,text/csv,text/xml,text/json,text/css\";\n\n  public async add(state: { file: File }): Promise<PendingAttachment> {\n    return {\n      id: state.file.name,\n      type: \"document\",\n      name: state.file.name,\n      contentType: state.file.type,\n      file: state.file,\n      status: { type: \"requires-action\", reason: \"composer-send\" },\n    };\n  }\n\n  public async send(\n    attachment: PendingAttachment,\n  ): Promise<CompleteAttachment> {\n    return {\n      ...attachment,\n      status: { type: \"complete\" },\n      content: [\n        {\n          type: \"text\",\n          text: `<attachment name=${attachment.name}>\\n${await getFileText(attachment.file)}\\n</attachment>`,\n        },\n      ],\n    };\n  }\n\n  public async remove() {\n    // noop\n  }\n}\n\nconst getFileText = (file: File) =>\n  new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n\n    reader.readAsText(file);\n  });\n", "import {\n  Attachment,\n  PendingAttachment,\n} from \"../../../../types/AttachmentTypes\";\nimport { AttachmentAdapter } from \"./AttachmentAdapter\";\n\nfunction fileMatchesAccept(\n  file: { name: string; type: string },\n  acceptString: string,\n) {\n  // Check if the accept string is \"*\", which allows any file\n  if (acceptString === \"*\") {\n    return true;\n  }\n\n  // Split the accept string into an array of allowed types\n  const allowedTypes = acceptString\n    .split(\",\")\n    .map((type) => type.trim().toLowerCase());\n\n  // Get the file's extension and MIME type\n  const fileExtension = `.${file.name.split(\".\").pop()!.toLowerCase()}`;\n  const fileMimeType = file.type.toLowerCase();\n\n  for (const type of allowedTypes) {\n    // Check for file extension match\n    if (type.startsWith(\".\") && type === fileExtension) {\n      return true;\n    }\n\n    // Check for exact MIME type match\n    if (type.includes(\"/\") && type === fileMimeType) {\n      return true;\n    }\n\n    if (type === \"image/*\" || type === \"video/*\" || type === \"audio/*\") {\n      // Check for wildcard MIME type match\n      if (type.endsWith(\"/*\")) {\n        const generalType = type.split(\"/\")[0]!;\n        if (fileMimeType.startsWith(`${generalType}/`)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\nexport class CompositeAttachmentAdapter implements AttachmentAdapter {\n  private _adapters: AttachmentAdapter[];\n\n  public accept: string;\n\n  constructor(adapters: AttachmentAdapter[]) {\n    this._adapters = adapters;\n\n    const wildcardIdx = adapters.findIndex((a) => a.accept === \"*\");\n    if (wildcardIdx !== -1) {\n      if (wildcardIdx !== adapters.length - 1)\n        throw new Error(\n          \"A wildcard adapter (handling all files) can only be specified as the last adapter.\",\n        );\n\n      this.accept = \"*\";\n    } else {\n      this.accept = adapters.map((a) => a.accept).join(\",\");\n    }\n  }\n\n  public add(state: { file: File }) {\n    for (const adapter of this._adapters) {\n      if (fileMatchesAccept(state.file, adapter.accept)) {\n        return adapter.add(state);\n      }\n    }\n    throw new Error(\"No matching adapter found for file\");\n  }\n\n  public async send(attachment: PendingAttachment) {\n    const adapters = this._adapters.slice();\n    for (const adapter of adapters) {\n      if (fileMatchesAccept(attachment.file, adapter.accept)) {\n        return adapter.send(attachment);\n      }\n    }\n    throw new Error(\"No matching adapter found for attachment\");\n  }\n\n  public async remove(attachment: Attachment) {\n    const adapters = this._adapters.slice();\n    for (const adapter of adapters) {\n      if (\n        fileMatchesAccept(\n          {\n            name: attachment.name,\n            type: attachment.contentType,\n          },\n          adapter.accept,\n        )\n      ) {\n        return adapter.remove(attachment);\n      }\n    }\n    throw new Error(\"No matching adapter found for attachment\");\n  }\n}\n", "import type { AssistantCloud } from \"assistant-cloud\";\nimport {\n  Attachment,\n  PendingAttachment,\n  CompleteAttachment,\n} from \"../../../../types/AttachmentTypes\";\nimport { ThreadUserMessagePart } from \"../../../../types/MessagePartTypes\";\nimport { AttachmentAdapter } from \"./AttachmentAdapter\";\n\nconst guessAttachmentType = (\n  contentType: string,\n): \"image\" | \"document\" | \"file\" => {\n  if (contentType.startsWith(\"image/\")) return \"image\";\n  if (contentType.startsWith(\"text/\")) return \"document\";\n  return \"file\";\n};\n\nexport class CloudFileAttachmentAdapter implements AttachmentAdapter {\n  public accept = \"*\";\n\n  constructor(private cloud: AssistantCloud) {}\n\n  private uploadedUrls = new Map<string, string>();\n\n  public async *add({\n    file,\n  }: {\n    file: File;\n  }): AsyncGenerator<PendingAttachment, void> {\n    const id = crypto.randomUUID();\n    const type = guessAttachmentType(file.type);\n    let attachment: PendingAttachment = {\n      id,\n      type,\n      name: file.name,\n      contentType: file.type,\n      file,\n      status: { type: \"running\", reason: \"uploading\", progress: 0 },\n    };\n    yield attachment;\n\n    try {\n      const { signedUrl, publicUrl } =\n        await this.cloud.files.generatePresignedUploadUrl({\n          filename: file.name,\n        });\n      await fetch(signedUrl, {\n        method: \"PUT\",\n        body: file,\n        headers: {\n          \"Content-Type\": file.type,\n        },\n        mode: \"cors\",\n      });\n      this.uploadedUrls.set(id, publicUrl);\n      attachment = {\n        ...attachment,\n        status: { type: \"requires-action\", reason: \"composer-send\" },\n      };\n      yield attachment;\n    } catch {\n      attachment = {\n        ...attachment,\n        status: { type: \"incomplete\", reason: \"error\" },\n      };\n      yield attachment;\n    }\n  }\n\n  public async remove(attachment: Attachment): Promise<void> {\n    this.uploadedUrls.delete(attachment.id);\n  }\n\n  public async send(\n    attachment: PendingAttachment,\n  ): Promise<CompleteAttachment> {\n    const url = this.uploadedUrls.get(attachment.id);\n    if (!url) throw new Error(\"Attachment not uploaded\");\n    this.uploadedUrls.delete(attachment.id);\n\n    let content: ThreadUserMessagePart[];\n    if (attachment.type === \"image\") {\n      content = [{ type: \"image\", image: url, filename: attachment.name }];\n    } else {\n      content = [\n        {\n          type: \"file\",\n          data: url,\n          mimeType: attachment.contentType,\n          filename: attachment.name,\n        },\n      ];\n    }\n\n    return {\n      ...attachment,\n      status: { type: \"complete\" },\n      content,\n    };\n  }\n}\n", "import { SpeechSynthesisAdapter } from \"./SpeechAdapterTypes\";\n\nexport class WebSpeechSynthesisAdapter implements SpeechSynthesisAdapter {\n  speak(text: string): SpeechSynthesisAdapter.Utterance {\n    const utterance = new SpeechSynthesisUtterance(text);\n\n    const subscribers = new Set<() => void>();\n    const handleEnd = (\n      reason: \"finished\" | \"error\" | \"cancelled\",\n      error?: unknown,\n    ) => {\n      if (res.status.type === \"ended\") return;\n\n      res.status = { type: \"ended\", reason, error };\n      subscribers.forEach((handler) => handler());\n    };\n\n    utterance.addEventListener(\"end\", () => handleEnd(\"finished\"));\n    utterance.addEventListener(\"error\", (e) => handleEnd(\"error\", e.error));\n\n    window.speechSynthesis.speak(utterance);\n\n    const res: SpeechSynthesisAdapter.Utterance = {\n      status: { type: \"running\" },\n      cancel: () => {\n        window.speechSynthesis.cancel();\n        handleEnd(\"cancelled\");\n      },\n      subscribe: (callback) => {\n        if (res.status.type === \"ended\") {\n          let cancelled = false;\n          queueMicrotask(() => {\n            if (!cancelled) callback();\n          });\n          return () => {\n            cancelled = true;\n          };\n        } else {\n          subscribers.add(callback);\n          return () => {\n            subscribers.delete(callback);\n          };\n        }\n      },\n    };\n    return res;\n  }\n}\n", "import type { Unsubscribe } from \"../../../../types\";\nimport type { DictationAdapter } from \"./SpeechAdapterTypes\";\n\n// Type definitions for Web Speech API\n// Users can install @types/dom-speech-recognition for full type support\ninterface SpeechRecognitionResultItem {\n  transcript: string;\n  confidence: number;\n}\n\ninterface SpeechRecognitionResult {\n  readonly length: number;\n  item(index: number): SpeechRecognitionResultItem;\n  readonly isFinal: boolean;\n  [index: number]: SpeechRecognitionResultItem;\n}\n\ninterface SpeechRecognitionResultList {\n  readonly length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognitionEvent extends Event {\n  readonly resultIndex: number;\n  readonly results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  readonly error: string;\n  readonly message: string;\n}\n\ninterface SpeechRecognitionInstance extends EventTarget {\n  lang: string;\n  continuous: boolean;\n  interimResults: boolean;\n  start(): void;\n  stop(): void;\n  abort(): void;\n}\n\ninterface SpeechRecognitionConstructor {\n  new (): SpeechRecognitionInstance;\n}\n\ndeclare global {\n  interface Window {\n    SpeechRecognition?: SpeechRecognitionConstructor;\n    webkitSpeechRecognition?: SpeechRecognitionConstructor;\n  }\n}\n\nconst getSpeechRecognitionAPI = ():\n  | SpeechRecognitionConstructor\n  | undefined => {\n  if (typeof window === \"undefined\") return undefined;\n  return window.SpeechRecognition ?? window.webkitSpeechRecognition;\n};\n\n/**\n * WebSpeechDictationAdapter provides speech-to-text (dictation) functionality using\n * the browser's Web Speech API (SpeechRecognition).\n *\n * @example\n * ```tsx\n * const runtime = useChatRuntime({\n *   api: \"/api/chat\",\n *   adapters: {\n *     dictation: new WebSpeechDictationAdapter(),\n *   },\n * });\n * ```\n */\nexport class WebSpeechDictationAdapter implements DictationAdapter {\n  private _language: string;\n  private _continuous: boolean;\n  private _interimResults: boolean;\n\n  constructor(\n    options: {\n      /**\n       * The language for dictation (e.g., \"en-US\", \"zh-CN\").\n       * Defaults to the browser's language.\n       */\n      language?: string;\n      /**\n       * Whether to keep recording after the user stops speaking.\n       * Defaults to true.\n       */\n      continuous?: boolean;\n      /**\n       * Whether to return interim (partial) results.\n       * Defaults to true for real-time feedback.\n       */\n      interimResults?: boolean;\n    } = {},\n  ) {\n    const defaultLanguage =\n      typeof navigator !== \"undefined\" && navigator.language\n        ? navigator.language\n        : \"en-US\";\n    this._language = options.language ?? defaultLanguage;\n    this._continuous = options.continuous ?? true;\n    this._interimResults = options.interimResults ?? true;\n  }\n\n  /**\n   * Check if the browser supports the Web Speech Recognition API.\n   */\n  static isSupported(): boolean {\n    return getSpeechRecognitionAPI() !== undefined;\n  }\n\n  listen(): DictationAdapter.Session {\n    const SpeechRecognitionAPI = getSpeechRecognitionAPI();\n    if (!SpeechRecognitionAPI) {\n      throw new Error(\n        \"SpeechRecognition is not supported in this browser. \" +\n          \"Try using Chrome, Edge, or Safari.\",\n      );\n    }\n\n    const recognition = new SpeechRecognitionAPI();\n    recognition.lang = this._language;\n    recognition.continuous = this._continuous;\n    recognition.interimResults = this._interimResults;\n\n    const speechStartCallbacks = new Set<() => void>();\n    const speechEndCallbacks = new Set<\n      (result: DictationAdapter.Result) => void\n    >();\n    const speechCallbacks = new Set<\n      (result: DictationAdapter.Result) => void\n    >();\n\n    let finalTranscript = \"\";\n\n    const session: DictationAdapter.Session = {\n      status: { type: \"starting\" },\n\n      stop: async () => {\n        recognition.stop();\n        return new Promise<void>((resolve) => {\n          const checkEnded = () => {\n            if (session.status.type === \"ended\") {\n              resolve();\n            } else {\n              setTimeout(checkEnded, 50);\n            }\n          };\n          checkEnded();\n        });\n      },\n\n      cancel: () => {\n        recognition.abort();\n      },\n\n      onSpeechStart: (callback: () => void): Unsubscribe => {\n        speechStartCallbacks.add(callback);\n        return () => {\n          speechStartCallbacks.delete(callback);\n        };\n      },\n\n      onSpeechEnd: (\n        callback: (result: DictationAdapter.Result) => void,\n      ): Unsubscribe => {\n        speechEndCallbacks.add(callback);\n        return () => {\n          speechEndCallbacks.delete(callback);\n        };\n      },\n\n      onSpeech: (\n        callback: (result: DictationAdapter.Result) => void,\n      ): Unsubscribe => {\n        speechCallbacks.add(callback);\n        return () => {\n          speechCallbacks.delete(callback);\n        };\n      },\n    };\n\n    const updateStatus = (newStatus: DictationAdapter.Status) => {\n      session.status = newStatus;\n    };\n\n    recognition.addEventListener(\"speechstart\", () => {\n      for (const cb of speechStartCallbacks) cb();\n    });\n\n    recognition.addEventListener(\"start\", () => {\n      updateStatus({ type: \"running\" });\n    });\n\n    recognition.addEventListener(\"result\", (event) => {\n      const speechEvent = event as unknown as SpeechRecognitionEvent;\n\n      for (\n        let i = speechEvent.resultIndex;\n        i < speechEvent.results.length;\n        i++\n      ) {\n        const result = speechEvent.results[i];\n        if (!result) continue;\n\n        const transcript = result[0]?.transcript ?? \"\";\n\n        if (result.isFinal) {\n          finalTranscript += transcript;\n          for (const cb of speechCallbacks) cb({ transcript, isFinal: true });\n        } else {\n          for (const cb of speechCallbacks) cb({ transcript, isFinal: false });\n        }\n      }\n    });\n\n    recognition.addEventListener(\"speechend\", () => {\n      // speechend fires when user stops speaking, but 'end' handles final cleanup\n    });\n\n    recognition.addEventListener(\"end\", () => {\n      const currentStatus = session.status;\n      if (currentStatus.type !== \"ended\") {\n        updateStatus({ type: \"ended\", reason: \"stopped\" });\n      }\n      if (finalTranscript) {\n        for (const cb of speechEndCallbacks)\n          cb({ transcript: finalTranscript });\n        finalTranscript = \"\";\n      }\n    });\n\n    recognition.addEventListener(\"error\", (event) => {\n      const errorEvent = event as unknown as SpeechRecognitionErrorEvent;\n      if (errorEvent.error === \"aborted\") {\n        updateStatus({ type: \"ended\", reason: \"cancelled\" });\n      } else {\n        updateStatus({ type: \"ended\", reason: \"error\" });\n        console.error(\"Dictation error:\", errorEvent.error, errorEvent.message);\n      }\n    });\n\n    try {\n      recognition.start();\n    } catch (error) {\n      updateStatus({ type: \"ended\", reason: \"error\" });\n      throw error;\n    }\n\n    return session;\n  }\n}\n", "\"use client\";\n\nimport { createContext, FC, ReactNode, useContext } from \"react\";\nimport { ThreadHistoryAdapter } from \"./thread-history/ThreadHistoryAdapter\";\nimport { AttachmentAdapter } from \"./attachment/AttachmentAdapter\";\nimport { ModelContextProvider } from \"../../../model-context\";\n\nexport type RuntimeAdapters = {\n  modelContext?: ModelContextProvider;\n  history?: ThreadHistoryAdapter;\n  attachments?: AttachmentAdapter;\n};\n\nconst RuntimeAdaptersContext = createContext<RuntimeAdapters | null>(null);\n\nexport namespace RuntimeAdapterProvider {\n  export type Props = {\n    adapters: RuntimeAdapters;\n    children: ReactNode;\n  };\n}\n\nexport const RuntimeAdapterProvider: FC<RuntimeAdapterProvider.Props> = ({\n  adapters,\n  children,\n}) => {\n  const context = useContext(RuntimeAdaptersContext);\n  return (\n    <RuntimeAdaptersContext.Provider\n      value={{\n        ...context,\n        ...adapters,\n      }}\n    >\n      {children}\n    </RuntimeAdaptersContext.Provider>\n  );\n};\n\nexport const useRuntimeAdapters = () => {\n  const adapters = useContext(RuntimeAdaptersContext);\n  return adapters;\n};\n", "\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { ExternalStoreRuntimeCore } from \"./ExternalStoreRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport {\n  AssistantRuntime,\n  AssistantRuntimeImpl,\n} from \"../../runtime/AssistantRuntime\";\nimport { useRuntimeAdapters } from \"../adapters/RuntimeAdapterProvider\";\n\nexport const useExternalStoreRuntime = <T,>(\n  store: ExternalStoreAdapter<T>,\n): AssistantRuntime => {\n  const [runtime] = useState(() => new ExternalStoreRuntimeCore(store));\n\n  useEffect(() => {\n    runtime.setAdapter(store);\n  });\n\n  const { modelContext } = useRuntimeAdapters() ?? {};\n\n  useEffect(() => {\n    if (!modelContext) return undefined;\n    return runtime.registerModelContextProvider(modelContext);\n  }, [modelContext, runtime]);\n\n  return useMemo(() => new AssistantRuntimeImpl(runtime), [runtime]);\n};\n", "import type { Unsubscribe } from \"../../../types\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\nimport {\n  ThreadListItemCoreState,\n  ThreadListRuntimeCore,\n} from \"../core/ThreadListRuntimeCore\";\nimport { ExternalStoreThreadListAdapter } from \"./ExternalStoreAdapter\";\n\nexport type ExternalStoreThreadFactory = () => ExternalStoreThreadRuntimeCore;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst DEFAULT_THREAD_ID = \"DEFAULT_THREAD_ID\";\nconst DEFAULT_THREADS = Object.freeze([DEFAULT_THREAD_ID]);\nconst DEFAULT_THREAD = Object.freeze({\n  id: DEFAULT_THREAD_ID,\n  remoteId: undefined,\n  externalId: undefined,\n  status: \"regular\",\n});\nconst RESOLVED_PROMISE = Promise.resolve();\nconst DEFAULT_THREAD_DATA = Object.freeze({\n  [DEFAULT_THREAD_ID]: DEFAULT_THREAD,\n});\n\nexport class ExternalStoreThreadListRuntimeCore\n  implements ThreadListRuntimeCore\n{\n  private _mainThreadId: string = DEFAULT_THREAD_ID;\n  private _threads: readonly string[] = DEFAULT_THREADS;\n  private _archivedThreads: readonly string[] = EMPTY_ARRAY;\n  private _threadData: Readonly<Record<string, ThreadListItemCoreState>> =\n    DEFAULT_THREAD_DATA;\n\n  public get isLoading() {\n    return this.adapter.isLoading ?? false;\n  }\n\n  public get newThreadId() {\n    return undefined;\n  }\n\n  public get threadIds() {\n    return this._threads;\n  }\n\n  public get archivedThreadIds() {\n    return this._archivedThreads;\n  }\n\n  public get threadItems() {\n    return this._threadData;\n  }\n\n  public getLoadThreadsPromise() {\n    return RESOLVED_PROMISE;\n  }\n\n  private _mainThread: ExternalStoreThreadRuntimeCore;\n\n  public get mainThreadId() {\n    return this._mainThreadId;\n  }\n\n  constructor(\n    private adapter: ExternalStoreThreadListAdapter = {},\n    private threadFactory: ExternalStoreThreadFactory,\n  ) {\n    this._mainThread = this.threadFactory();\n    this.__internal_setAdapter(adapter, true);\n  }\n\n  public getMainThreadRuntimeCore() {\n    return this._mainThread;\n  }\n\n  public getThreadRuntimeCore(): never {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public getItemById(threadId: string) {\n    for (const thread of this.adapter.threads ?? []) {\n      if (thread.id === threadId) return thread as any;\n    }\n    for (const thread of this.adapter.archivedThreads ?? []) {\n      if (thread.id === threadId) return thread as any;\n    }\n    if (threadId === DEFAULT_THREAD_ID) return DEFAULT_THREAD;\n    return undefined;\n  }\n\n  public __internal_setAdapter(\n    adapter: ExternalStoreThreadListAdapter,\n    initialLoad = false,\n  ) {\n    const previousAdapter = this.adapter;\n    this.adapter = adapter;\n\n    const newThreadId = adapter.threadId ?? DEFAULT_THREAD_ID;\n    const newThreads = adapter.threads ?? EMPTY_ARRAY;\n    const newArchivedThreads = adapter.archivedThreads ?? EMPTY_ARRAY;\n\n    const previousThreadId = previousAdapter.threadId ?? DEFAULT_THREAD_ID;\n    const previousThreads = previousAdapter.threads ?? EMPTY_ARRAY;\n    const previousArchivedThreads =\n      previousAdapter.archivedThreads ?? EMPTY_ARRAY;\n\n    if (\n      !initialLoad &&\n      previousThreadId === newThreadId &&\n      previousThreads === newThreads &&\n      previousArchivedThreads === newArchivedThreads\n    ) {\n      return;\n    }\n\n    this._threadData = {\n      ...DEFAULT_THREAD_DATA,\n      ...Object.fromEntries(\n        adapter.threads?.map((t) => [\n          t.id,\n          {\n            ...t,\n            remoteId: t.remoteId,\n            externalId: t.externalId,\n            status: \"regular\",\n          },\n        ]) ?? [],\n      ),\n      ...Object.fromEntries(\n        adapter.archivedThreads?.map((t) => [\n          t.id,\n          {\n            ...t,\n            remoteId: t.remoteId,\n            externalId: t.externalId,\n            status: \"archived\",\n          },\n        ]) ?? [],\n      ),\n    };\n\n    if (previousThreads !== newThreads) {\n      this._threads = this.adapter.threads?.map((t) => t.id) ?? EMPTY_ARRAY;\n    }\n\n    if (previousArchivedThreads !== newArchivedThreads) {\n      this._archivedThreads =\n        this.adapter.archivedThreads?.map((t) => t.id) ?? EMPTY_ARRAY;\n    }\n\n    if (previousThreadId !== newThreadId) {\n      this._mainThreadId = newThreadId;\n      this._mainThread = this.threadFactory();\n    }\n\n    this._notifySubscribers();\n  }\n\n  public async switchToThread(threadId: string): Promise<void> {\n    if (this._mainThreadId === threadId) return;\n    const onSwitchToThread = this.adapter.onSwitchToThread;\n    if (!onSwitchToThread)\n      throw new Error(\n        \"External store adapter does not support switching to thread\",\n      );\n    onSwitchToThread(threadId);\n  }\n\n  public async switchToNewThread(): Promise<void> {\n    const onSwitchToNewThread = this.adapter.onSwitchToNewThread;\n    if (!onSwitchToNewThread)\n      throw new Error(\n        \"External store adapter does not support switching to new thread\",\n      );\n\n    onSwitchToNewThread();\n  }\n\n  public async rename(threadId: string, newTitle: string): Promise<void> {\n    const onRename = this.adapter.onRename;\n    if (!onRename)\n      throw new Error(\"External store adapter does not support renaming\");\n\n    onRename(threadId, newTitle);\n  }\n\n  public async detach(): Promise<void> {\n    // no-op\n  }\n\n  public async archive(threadId: string): Promise<void> {\n    const onArchive = this.adapter.onArchive;\n    if (!onArchive)\n      throw new Error(\"External store adapter does not support archiving\");\n\n    onArchive(threadId);\n  }\n\n  public async unarchive(threadId: string): Promise<void> {\n    const onUnarchive = this.adapter.onUnarchive;\n    if (!onUnarchive)\n      throw new Error(\"External store adapter does not support unarchiving\");\n\n    onUnarchive(threadId);\n  }\n\n  public async delete(threadId: string): Promise<void> {\n    const onDelete = this.adapter.onDelete;\n    if (!onDelete)\n      throw new Error(\"External store adapter does not support deleting\");\n\n    onDelete(threadId);\n  }\n\n  public initialize(\n    threadId: string,\n  ): Promise<{ remoteId: string; externalId: string | undefined }> {\n    return Promise.resolve({ remoteId: threadId, externalId: undefined });\n  }\n\n  public generateTitle(): never {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  private _subscriptions = new Set<() => void>();\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscriptions.add(callback);\n    return () => this._subscriptions.delete(callback);\n  }\n\n  private _notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n}\n", "import { ThreadMessage } from \"../../../types\";\n\nexport type ConverterCallback<TIn> = (\n  cache: ThreadMessage | undefined,\n  message: TIn,\n  idx: number,\n) => ThreadMessage;\n\nexport class ThreadMessageConverter {\n  private readonly cache = new WeakMap<WeakKey, ThreadMessage>();\n\n  convertMessages<TIn extends WeakKey>(\n    messages: readonly TIn[],\n    converter: ConverterCallback<TIn>,\n  ): ThreadMessage[] {\n    return messages.map((m, idx) => {\n      const cached = this.cache.get(m);\n      const newMessage = converter(cached, m, idx);\n      this.cache.set(m, newMessage);\n      return newMessage;\n    });\n  }\n}\n", "import type { AppendMessage, ThreadMessage } from \"../../../types\";\nimport { getThreadMessageText } from \"../../../utils/getThreadMessageText\";\nimport type { AttachmentAdapter } from \"../adapters/attachment\";\nimport type { DictationAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\nimport type { ThreadRuntimeCore } from \"../core/ThreadRuntimeCore\";\nimport { BaseComposerRuntimeCore } from \"./BaseComposerRuntimeCore\";\n\nexport class DefaultEditComposerRuntimeCore extends BaseComposerRuntimeCore {\n  public get canCancel() {\n    return true;\n  }\n\n  protected getAttachmentAdapter() {\n    return this.runtime.adapters?.attachments;\n  }\n\n  protected getDictationAdapter() {\n    return this.runtime.adapters?.dictation;\n  }\n\n  private _nonTextParts;\n  private _previousText;\n  private _parentId;\n  private _sourceId;\n  constructor(\n    private runtime: ThreadRuntimeCore & {\n      adapters?:\n        | {\n            attachments?: AttachmentAdapter | undefined;\n            dictation?: DictationAdapter | undefined;\n          }\n        | undefined;\n    },\n    private endEditCallback: () => void,\n    { parentId, message }: { parentId: string | null; message: ThreadMessage },\n  ) {\n    super();\n    this._parentId = parentId;\n    this._sourceId = message.id;\n    this._previousText = getThreadMessageText(message);\n    this.setText(this._previousText);\n\n    this.setRole(message.role);\n    this.setAttachments(message.attachments ?? []);\n\n    this._nonTextParts = message.content.filter((part) => part.type !== \"text\");\n\n    // Use the runConfig from the regular (non-edit) composer as the initial runConfig for the edit composer\n    this.setRunConfig({ ...runtime.composer.runConfig });\n  }\n\n  public async handleSend(\n    message: Omit<AppendMessage, \"parentId\" | \"sourceId\">,\n  ) {\n    const text = getThreadMessageText(message as AppendMessage);\n    if (text !== this._previousText) {\n      this.runtime.append({\n        ...message,\n        content: [...message.content, ...this._nonTextParts] as any,\n        parentId: this._parentId,\n        sourceId: this._sourceId,\n      });\n    }\n\n    this.handleCancel();\n  }\n\n  public handleCancel() {\n    this.endEditCallback();\n    this._notifySubscribers();\n  }\n}\n", "import type { AppendMessage, ThreadMessage, Unsubscribe } from \"../../../types\";\nimport {\n  ExportedMessageRepository,\n  MessageRepository,\n} from \"../utils/MessageRepository\";\nimport { DefaultThreadComposerRuntimeCore } from \"../composer/DefaultThreadComposerRuntimeCore\";\nimport {\n  AddToolResultOptions,\n  ResumeToolCallOptions,\n  ThreadSuggestion,\n  SubmitFeedbackOptions,\n  ThreadRuntimeCore,\n  SpeechState,\n  RuntimeCapabilities,\n  ThreadRuntimeEventType,\n  StartRunConfig,\n  ResumeRunConfig,\n} from \"./ThreadRuntimeCore\";\nimport { DefaultEditComposerRuntimeCore } from \"../composer/DefaultEditComposerRuntimeCore\";\nimport { SpeechSynthesisAdapter } from \"../adapters/speech/SpeechAdapterTypes\";\nimport { FeedbackAdapter } from \"../adapters/feedback/FeedbackAdapter\";\nimport { AttachmentAdapter } from \"../adapters/attachment\";\nimport { getThreadMessageText } from \"../../../utils/getThreadMessageText\";\nimport { ModelContextProvider } from \"../../../model-context\";\nimport { ThreadMessageLike } from \"../external-store\";\n\ntype BaseThreadAdapters = {\n  speech?: SpeechSynthesisAdapter | undefined;\n  feedback?: FeedbackAdapter | undefined;\n  attachments?: AttachmentAdapter | undefined;\n};\n\nexport abstract class BaseThreadRuntimeCore implements ThreadRuntimeCore {\n  private _subscriptions = new Set<() => void>();\n  private _isInitialized = false;\n\n  protected readonly repository = new MessageRepository();\n  public abstract get adapters(): BaseThreadAdapters | undefined;\n  public abstract get isDisabled(): boolean;\n  public abstract get isLoading(): boolean;\n  public abstract get suggestions(): readonly ThreadSuggestion[];\n  public abstract get extras(): unknown;\n\n  public abstract get capabilities(): RuntimeCapabilities;\n  public abstract append(message: AppendMessage): void;\n  public abstract startRun(config: StartRunConfig): void;\n  public abstract resumeRun(config: ResumeRunConfig): void;\n  public abstract addToolResult(options: AddToolResultOptions): void;\n  public abstract resumeToolCall(options: ResumeToolCallOptions): void;\n  public abstract cancelRun(): void;\n  public abstract exportExternalState(): any;\n  public abstract importExternalState(state: any): void;\n  public abstract unstable_loadExternalState(state: any): void;\n\n  public get messages() {\n    return this.repository.getMessages();\n  }\n\n  public get state() {\n    let mostRecentAssistantMessage;\n    for (const message of this.messages) {\n      if (message.role === \"assistant\") {\n        mostRecentAssistantMessage = message;\n        break;\n      }\n    }\n\n    return mostRecentAssistantMessage?.metadata.unstable_state ?? null;\n  }\n\n  public readonly composer = new DefaultThreadComposerRuntimeCore(this);\n\n  constructor(private readonly _contextProvider: ModelContextProvider) {}\n\n  public getModelContext() {\n    return this._contextProvider.getModelContext();\n  }\n\n  private _editComposers = new Map<string, DefaultEditComposerRuntimeCore>();\n  public getEditComposer(messageId: string) {\n    return this._editComposers.get(messageId);\n  }\n  public beginEdit(messageId: string) {\n    if (this._editComposers.has(messageId))\n      throw new Error(\"Edit already in progress\");\n\n    this._editComposers.set(\n      messageId,\n      new DefaultEditComposerRuntimeCore(\n        this,\n        () => this._editComposers.delete(messageId),\n        this.repository.getMessage(messageId),\n      ),\n    );\n    this._notifySubscribers();\n  }\n\n  public getMessageById(messageId: string) {\n    try {\n      return this.repository.getMessage(messageId);\n    } catch {\n      return undefined;\n    }\n  }\n\n  public getBranches(messageId: string): string[] {\n    return this.repository.getBranches(messageId);\n  }\n\n  public switchToBranch(branchId: string): void {\n    this.repository.switchToBranch(branchId);\n    this._notifySubscribers();\n  }\n\n  protected _notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n\n  public _notifyEventSubscribers(event: ThreadRuntimeEventType) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) return;\n\n    for (const callback of subscribers) callback();\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscriptions.add(callback);\n    return () => this._subscriptions.delete(callback);\n  }\n\n  public submitFeedback({ messageId, type }: SubmitFeedbackOptions) {\n    const adapter = this.adapters?.feedback;\n    if (!adapter) throw new Error(\"Feedback adapter not configured\");\n\n    const { message, parentId } = this.repository.getMessage(messageId);\n    adapter.submit({ message, type });\n\n    // Update the message metadata with the feedback\n    if (message.role === \"assistant\") {\n      const updatedMessage: ThreadMessage = {\n        ...message,\n        metadata: {\n          ...message.metadata,\n          submittedFeedback: { type },\n        },\n      };\n      this.repository.addOrUpdateMessage(parentId, updatedMessage);\n    }\n\n    this._notifySubscribers();\n  }\n\n  private _stopSpeaking: Unsubscribe | undefined;\n  public speech: SpeechState | undefined;\n\n  public speak(messageId: string) {\n    const adapter = this.adapters?.speech;\n    if (!adapter) throw new Error(\"Speech adapter not configured\");\n\n    const { message } = this.repository.getMessage(messageId);\n\n    this._stopSpeaking?.();\n\n    const utterance = adapter.speak(getThreadMessageText(message));\n    const unsub = utterance.subscribe(() => {\n      if (utterance.status.type === \"ended\") {\n        this._stopSpeaking = undefined;\n        this.speech = undefined;\n      } else {\n        this.speech = { messageId, status: utterance.status };\n      }\n      this._notifySubscribers();\n    });\n\n    this.speech = { messageId, status: utterance.status };\n    this._notifySubscribers();\n\n    this._stopSpeaking = () => {\n      utterance.cancel();\n      unsub();\n      this.speech = undefined;\n      this._stopSpeaking = undefined;\n    };\n  }\n\n  public stopSpeaking() {\n    if (!this._stopSpeaking) throw new Error(\"No message is being spoken\");\n    this._stopSpeaking();\n    this._notifySubscribers();\n  }\n\n  protected ensureInitialized() {\n    if (!this._isInitialized) {\n      this._isInitialized = true;\n      this._notifyEventSubscribers(\"initialize\");\n    }\n  }\n\n  // TODO import()/export() on external store doesn't make much sense\n  public export() {\n    return this.repository.export();\n  }\n\n  public import(data: ExportedMessageRepository) {\n    this.ensureInitialized();\n    this.repository.clear();\n    this.repository.import(data);\n    this._notifySubscribers();\n  }\n\n  public reset(initialMessages?: readonly ThreadMessageLike[]) {\n    this.import(ExportedMessageRepository.fromArray(initialMessages ?? []));\n  }\n\n  private _eventSubscribers = new Map<\n    ThreadRuntimeEventType,\n    Set<() => void>\n  >();\n\n  public unstable_on(event: ThreadRuntimeEventType, callback: () => void) {\n    if (event === \"modelContextUpdate\") {\n      return this._contextProvider.subscribe?.(callback) ?? (() => {});\n    }\n\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) {\n      this._eventSubscribers.set(event, new Set([callback]));\n    } else {\n      subscribers.add(callback);\n    }\n\n    return () => {\n      const subscribers = this._eventSubscribers.get(event)!;\n      subscribers.delete(callback);\n    };\n  }\n}\n", "import type {\n  AddToolResultOptions,\n  ResumeRunConfig,\n  ResumeToolCallOptions,\n  StartRunConfig,\n  ThreadSuggestion,\n} from \"../core/ThreadRuntimeCore\";\n\nimport type { AppendMessage, ThreadMessage } from \"../../../types\";\nimport type { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport {\n  getExternalStoreMessage,\n  symbolInnerMessage,\n} from \"./getExternalStoreMessage\";\nimport { ThreadMessageConverter } from \"./ThreadMessageConverter\";\nimport { getAutoStatus, isAutoStatus } from \"./auto-status\";\nimport {\n  fromThreadMessageLike,\n  type ThreadMessageLike,\n} from \"./ThreadMessageLike\";\nimport { getThreadMessageText } from \"../../../utils/getThreadMessageText\";\nimport type {\n  RuntimeCapabilities,\n  ThreadRuntimeCore,\n} from \"../core/ThreadRuntimeCore\";\nimport { BaseThreadRuntimeCore } from \"../core/BaseThreadRuntimeCore\";\nimport type { ModelContextProvider } from \"../../../model-context\";\nimport {\n  ExportedMessageRepository,\n  MessageRepository,\n} from \"../utils/MessageRepository\";\n\nconst EMPTY_ARRAY = Object.freeze([]);\n\nexport const hasUpcomingMessage = (\n  isRunning: boolean,\n  messages: readonly ThreadMessage[],\n) => {\n  return isRunning && messages[messages.length - 1]?.role !== \"assistant\";\n};\n\nexport class ExternalStoreThreadRuntimeCore\n  extends BaseThreadRuntimeCore\n  implements ThreadRuntimeCore\n{\n  private _assistantOptimisticId: string | null = null;\n\n  private _capabilities: RuntimeCapabilities = {\n    switchToBranch: false,\n    switchBranchDuringRun: false,\n    edit: false,\n    reload: false,\n    cancel: false,\n    unstable_copy: false,\n    speech: false,\n    dictation: false,\n    attachments: false,\n    feedback: false,\n  };\n\n  public get capabilities() {\n    return this._capabilities;\n  }\n\n  private _messages!: readonly ThreadMessage[];\n  public isDisabled!: boolean;\n  public get isLoading() {\n    return this._store.isLoading ?? false;\n  }\n\n  public override get messages() {\n    return this._messages;\n  }\n\n  public override get state() {\n    return this._store.state ?? super.state;\n  }\n\n  public get adapters() {\n    return this._store.adapters;\n  }\n\n  public suggestions: readonly ThreadSuggestion[] = [];\n  public extras: unknown = undefined;\n\n  private _converter = new ThreadMessageConverter();\n\n  private _store!: ExternalStoreAdapter<any>;\n\n  public override beginEdit(messageId: string) {\n    if (!this._store.onEdit)\n      throw new Error(\"Runtime does not support editing.\");\n\n    super.beginEdit(messageId);\n  }\n\n  constructor(\n    contextProvider: ModelContextProvider,\n    store: ExternalStoreAdapter<any>,\n  ) {\n    super(contextProvider);\n    this.__internal_setAdapter(store);\n  }\n\n  public __internal_setAdapter(store: ExternalStoreAdapter<any>) {\n    if (this._store === store) return;\n\n    const isRunning = store.isRunning ?? false;\n    this.isDisabled = store.isDisabled ?? false;\n\n    const oldStore = this._store as ExternalStoreAdapter<any> | undefined;\n    this._store = store;\n    this.extras = store.extras;\n    this.suggestions = store.suggestions ?? EMPTY_ARRAY;\n    this._capabilities = {\n      switchToBranch: this._store.setMessages !== undefined,\n      switchBranchDuringRun: false, // External store never supports branch switching during run\n      edit: this._store.onEdit !== undefined,\n      reload: this._store.onReload !== undefined,\n      cancel: this._store.onCancel !== undefined,\n      speech: this._store.adapters?.speech !== undefined,\n      dictation: this._store.adapters?.dictation !== undefined,\n      unstable_copy: this._store.unstable_capabilities?.copy !== false, // default true\n      attachments: !!this._store.adapters?.attachments,\n      feedback: !!this._store.adapters?.feedback,\n    };\n\n    let messages: readonly ThreadMessage[];\n\n    if (store.messageRepository) {\n      // Handle messageRepository\n      if (\n        oldStore &&\n        oldStore.isRunning === store.isRunning &&\n        oldStore.messageRepository === store.messageRepository\n      ) {\n        this._notifySubscribers();\n        return;\n      }\n\n      // Clear and import the message repository\n      this.repository.clear();\n      this._assistantOptimisticId = null;\n      this.repository.import(store.messageRepository);\n\n      messages = this.repository.getMessages();\n    } else if (store.messages) {\n      // Handle messages array\n\n      if (oldStore) {\n        // flush the converter cache when the convertMessage prop changes\n        if (oldStore.convertMessage !== store.convertMessage) {\n          this._converter = new ThreadMessageConverter();\n        } else if (\n          oldStore.isRunning === store.isRunning &&\n          oldStore.messages === store.messages\n        ) {\n          this._notifySubscribers();\n          // no conversion update\n          return;\n        }\n      }\n\n      messages = !store.convertMessage\n        ? store.messages\n        : this._converter.convertMessages(store.messages, (cache, m, idx) => {\n            if (!store.convertMessage) return m;\n\n            const isLast = idx === (store.messages?.length ?? 0) - 1;\n            const autoStatus = getAutoStatus(\n              isLast,\n              isRunning,\n              false,\n              false,\n              undefined,\n            );\n\n            if (\n              cache &&\n              (cache.role !== \"assistant\" ||\n                !isAutoStatus(cache.status) ||\n                cache.status === autoStatus)\n            )\n              return cache;\n\n            const messageLike = store.convertMessage(m, idx);\n            const newMessage = fromThreadMessageLike(\n              messageLike,\n              idx.toString(),\n              autoStatus,\n            );\n            (newMessage as any)[symbolInnerMessage] = m;\n            return newMessage;\n          });\n\n      for (let i = 0; i < messages.length; i++) {\n        const message = messages[i]!;\n        const parent = messages[i - 1];\n        this.repository.addOrUpdateMessage(parent?.id ?? null, message);\n      }\n    } else {\n      throw new Error(\n        \"ExternalStoreAdapter must provide either 'messages' or 'messageRepository'\",\n      );\n    }\n\n    // Common logic for both paths\n    if (messages.length > 0) this.ensureInitialized();\n\n    if ((oldStore?.isRunning ?? false) !== (store.isRunning ?? false)) {\n      if (store.isRunning) {\n        this._notifyEventSubscribers(\"runStart\");\n      } else {\n        this._notifyEventSubscribers(\"runEnd\");\n      }\n    }\n\n    if (this._assistantOptimisticId) {\n      this.repository.deleteMessage(this._assistantOptimisticId);\n      this._assistantOptimisticId = null;\n    }\n\n    if (hasUpcomingMessage(isRunning, messages)) {\n      this._assistantOptimisticId = this.repository.appendOptimisticMessage(\n        messages.at(-1)?.id ?? null,\n        {\n          role: \"assistant\",\n          content: [],\n        },\n      );\n    }\n\n    this.repository.resetHead(\n      this._assistantOptimisticId ?? messages.at(-1)?.id ?? null,\n    );\n\n    this._messages = this.repository.getMessages();\n    this._notifySubscribers();\n  }\n\n  public override switchToBranch(branchId: string): void {\n    if (!this._store.setMessages)\n      throw new Error(\"Runtime does not support switching branches.\");\n\n    // Silently ignore branch switches while running\n    if (this._store.isRunning) {\n      return;\n    }\n\n    this.repository.switchToBranch(branchId);\n    this.updateMessages(this.repository.getMessages());\n  }\n\n  public async append(message: AppendMessage): Promise<void> {\n    if (message.parentId !== (this.messages.at(-1)?.id ?? null)) {\n      if (!this._store.onEdit)\n        throw new Error(\"Runtime does not support editing messages.\");\n      await this._store.onEdit(message);\n    } else {\n      await this._store.onNew(message);\n    }\n  }\n\n  public async startRun(config: StartRunConfig): Promise<void> {\n    if (!this._store.onReload)\n      throw new Error(\"Runtime does not support reloading messages.\");\n\n    await this._store.onReload(config.parentId, config);\n  }\n\n  public async resumeRun(config: ResumeRunConfig): Promise<void> {\n    if (!this._store.onResume)\n      throw new Error(\"Runtime does not support resuming runs.\");\n\n    await this._store.onResume(config);\n  }\n\n  public exportExternalState(): any {\n    if (!this._store.onExportExternalState)\n      throw new Error(\"Runtime does not support exporting external states.\");\n\n    return this._store.onExportExternalState();\n  }\n\n  public importExternalState(state: any): void {\n    if (!this._store.onLoadExternalState)\n      throw new Error(\"Runtime does not support importing external states.\");\n\n    this._store.onLoadExternalState(state);\n  }\n\n  public unstable_loadExternalState(state: any): void {\n    this.importExternalState(state);\n  }\n\n  public cancelRun(): void {\n    if (!this._store.onCancel)\n      throw new Error(\"Runtime does not support cancelling runs.\");\n\n    this._store.onCancel();\n\n    if (this._assistantOptimisticId) {\n      this.repository.deleteMessage(this._assistantOptimisticId);\n      this._assistantOptimisticId = null;\n    }\n\n    let messages = this.repository.getMessages();\n    const previousMessage = messages[messages.length - 1];\n    if (\n      previousMessage?.role === \"user\" &&\n      previousMessage.id === messages.at(-1)?.id // ensure the previous message is a leaf node\n    ) {\n      this.repository.deleteMessage(previousMessage.id);\n      if (!this.composer.text.trim()) {\n        this.composer.setText(getThreadMessageText(previousMessage));\n      }\n\n      messages = this.repository.getMessages();\n    } else {\n      this._notifySubscribers();\n    }\n\n    // resync messages (for reloading, to restore the previous branch)\n    setTimeout(() => {\n      this.updateMessages(messages);\n    }, 0);\n  }\n\n  public addToolResult(options: AddToolResultOptions) {\n    if (!this._store.onAddToolResult && !this._store.onAddToolResult)\n      throw new Error(\"Runtime does not support tool results.\");\n    this._store.onAddToolResult?.(options);\n  }\n\n  public resumeToolCall(options: ResumeToolCallOptions) {\n    if (!this._store.onResumeToolCall)\n      throw new Error(\"Runtime does not support resuming tool calls.\");\n    this._store.onResumeToolCall(options);\n  }\n\n  public override reset(initialMessages?: readonly ThreadMessageLike[]) {\n    const repo = new MessageRepository();\n    repo.import(ExportedMessageRepository.fromArray(initialMessages ?? []));\n    this.updateMessages(repo.getMessages());\n  }\n\n  public override import(data: ExportedMessageRepository) {\n    this._assistantOptimisticId = null;\n\n    super.import(data);\n\n    if (this._store.onImport) {\n      this._store.onImport(this.repository.getMessages());\n    }\n  }\n\n  private updateMessages = (messages: readonly ThreadMessage[]) => {\n    const hasConverter = this._store.convertMessage !== undefined;\n    if (hasConverter) {\n      this._store.setMessages?.(\n        messages.flatMap(getExternalStoreMessage).filter((m) => m != null),\n      );\n    } else {\n      // TODO mark this as readonly in v0.12.0\n      this._store.setMessages?.(messages as ThreadMessage[]);\n    }\n  };\n}\n", "import { BaseAssistantRuntimeCore } from \"../core/BaseAssistantRuntimeCore\";\nimport { ExternalStoreThreadListRuntimeCore } from \"./ExternalStoreThreadListRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\n\nconst getThreadListAdapter = (store: ExternalStoreAdapter<any>) => {\n  return store.adapters?.threadList ?? {};\n};\n\nexport class ExternalStoreRuntimeCore extends BaseAssistantRuntimeCore {\n  public readonly threads;\n\n  constructor(adapter: ExternalStoreAdapter<any>) {\n    super();\n    this.threads = new ExternalStoreThreadListRuntimeCore(\n      getThreadListAdapter(adapter),\n      () => new ExternalStoreThreadRuntimeCore(this._contextProvider, adapter),\n    );\n  }\n\n  public setAdapter(adapter: ExternalStoreAdapter<any>) {\n    // Update the thread list adapter and propagate store changes to the main thread\n    this.threads.__internal_setAdapter(getThreadListAdapter(adapter));\n    this.threads.getMainThreadRuntimeCore().__internal_setAdapter(adapter);\n  }\n}\n", "\"use client\";\n\nimport {\n  type ReadonlyJSONObject,\n  type ReadonlyJSONValue,\n  asAsyncIterableStream,\n} from \"assistant-stream/utils\";\nimport { AppendMessage } from \"../../../types\";\nimport { useExternalStoreRuntime } from \"../external-store/useExternalStoreRuntime\";\nimport { AssistantRuntime } from \"../../runtime/AssistantRuntime\";\nimport { AddToolResultOptions } from \"../core\";\nimport { useState, useRef, useMemo } from \"react\";\nimport {\n  AssistantMessageAccumulator,\n  DataStreamDecoder,\n  AssistantTransportDecoder,\n  unstable_createInitialMessage as createInitialMessage,\n  toToolsJSONSchema,\n} from \"assistant-stream\";\nimport {\n  AssistantTransportOptions,\n  AddMessageCommand,\n  AddToolResultCommand,\n  UserMessagePart,\n  QueuedCommand,\n  AssistantTransportCommand,\n} from \"./types\";\nimport { useCommandQueue } from \"./commandQueue\";\nimport { useRunManager } from \"./runManager\";\nimport { useConvertedState } from \"./useConvertedState\";\nimport { ToolExecutionStatus, useToolInvocations } from \"./useToolInvocations\";\nimport { createRequestHeaders } from \"./utils\";\nimport { useRemoteThreadListRuntime } from \"../remote-thread-list/useRemoteThreadListRuntime\";\nimport { InMemoryThreadListAdapter } from \"../remote-thread-list/adapter/in-memory\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport { UserExternalState } from \"../../../augmentations\";\n\nconst symbolAssistantTransportExtras = Symbol(\"assistant-transport-extras\");\ntype AssistantTransportExtras = {\n  [symbolAssistantTransportExtras]: true;\n  sendCommand: (command: AssistantTransportCommand) => void;\n  state: UserExternalState;\n};\n\nconst asAssistantTransportExtras = (\n  extras: unknown,\n): AssistantTransportExtras => {\n  if (\n    typeof extras !== \"object\" ||\n    extras == null ||\n    !(symbolAssistantTransportExtras in extras)\n  )\n    throw new Error(\n      \"This method can only be called when you are using useAssistantTransportRuntime\",\n    );\n\n  return extras as AssistantTransportExtras;\n};\n\nexport const useAssistantTransportSendCommand = () => {\n  const aui = useAui();\n\n  return (command: AssistantTransportCommand) => {\n    const extras = aui.thread().getState().extras;\n    const transportExtras = asAssistantTransportExtras(extras);\n    transportExtras.sendCommand(command);\n  };\n};\n\nexport function useAssistantTransportState(): UserExternalState;\nexport function useAssistantTransportState<T>(\n  selector: (state: UserExternalState) => T,\n): T;\nexport function useAssistantTransportState<T>(\n  selector: (state: UserExternalState) => T = (t) => t as T,\n): T | UserExternalState {\n  return useAuiState(({ thread }) =>\n    selector(asAssistantTransportExtras(thread.extras).state),\n  );\n}\n\nconst useAssistantTransportThreadRuntime = <T,>(\n  options: AssistantTransportOptions<T>,\n): AssistantRuntime => {\n  const agentStateRef = useRef(options.initialState);\n  const [, rerender] = useState(0);\n  const resumeFlagRef = useRef(false);\n  const parentIdRef = useRef<string | null | undefined>(undefined);\n  const commandQueue = useCommandQueue({\n    onQueue: () => runManager.schedule(),\n  });\n\n  const threadId = useAuiState(({ threadListItem }) => threadListItem.remoteId);\n\n  const runManager = useRunManager({\n    onRun: async (signal: AbortSignal) => {\n      const isResume = resumeFlagRef.current;\n      resumeFlagRef.current = false;\n      const commands: QueuedCommand[] = isResume ? [] : commandQueue.flush();\n      if (commands.length === 0 && !isResume)\n        throw new Error(\"No commands to send\");\n\n      const headers = await createRequestHeaders(options.headers);\n      const bodyValue =\n        typeof options.body === \"function\"\n          ? await options.body()\n          : options.body;\n      const context = runtime.thread.getModelContext();\n\n      const response = await fetch(\n        isResume ? options.resumeApi! : options.api,\n        {\n          method: \"POST\",\n          headers,\n          body: JSON.stringify({\n            commands,\n            state: agentStateRef.current,\n            system: context.system,\n            tools: context.tools ? toToolsJSONSchema(context.tools) : undefined,\n            threadId,\n            ...(parentIdRef.current !== undefined && {\n              parentId: parentIdRef.current,\n            }),\n            ...context.callSettings,\n            ...context.config,\n            ...(bodyValue ?? {}),\n          }),\n          signal,\n        },\n      );\n\n      options.onResponse?.(response);\n\n      if (!response.ok) {\n        throw new Error(`Status ${response.status}: ${await response.text()}`);\n      }\n\n      if (!response.body) {\n        throw new Error(\"Response body is null\");\n      }\n\n      // Select decoder based on protocol option\n      const protocol = options.protocol ?? \"data-stream\";\n      const decoder =\n        protocol === \"assistant-transport\"\n          ? new AssistantTransportDecoder()\n          : new DataStreamDecoder();\n\n      let err: string | undefined;\n      const stream = response.body.pipeThrough(decoder).pipeThrough(\n        new AssistantMessageAccumulator({\n          initialMessage: createInitialMessage({\n            unstable_state:\n              (agentStateRef.current as ReadonlyJSONValue) ?? null,\n          }),\n          throttle: isResume,\n          onError: (error) => {\n            err = error;\n          },\n        }),\n      );\n\n      let markedDelivered = false;\n\n      for await (const chunk of asAsyncIterableStream(stream)) {\n        if (chunk.metadata.unstable_state === agentStateRef.current) continue;\n\n        if (!markedDelivered) {\n          commandQueue.markDelivered();\n          markedDelivered = true;\n        }\n\n        agentStateRef.current = chunk.metadata.unstable_state as T;\n        rerender((prev) => prev + 1);\n      }\n\n      if (err) {\n        throw new Error(err);\n      }\n    },\n    onFinish: options.onFinish,\n    onCancel: () => {\n      const cmds = [\n        ...commandQueue.state.inTransit,\n        ...commandQueue.state.queued,\n      ];\n\n      commandQueue.reset();\n\n      options.onCancel?.({\n        commands: cmds,\n        updateState: (updater) => {\n          agentStateRef.current = updater(agentStateRef.current);\n          rerender((prev) => prev + 1);\n        },\n      });\n    },\n    onError: async (error) => {\n      const inTransitCmds = [...commandQueue.state.inTransit];\n      const queuedCmds = [...commandQueue.state.queued];\n\n      commandQueue.reset();\n\n      try {\n        await options.onError?.(error as Error, {\n          commands: inTransitCmds,\n          updateState: (updater) => {\n            agentStateRef.current = updater(agentStateRef.current);\n            rerender((prev) => prev + 1);\n          },\n        });\n      } finally {\n        options.onCancel?.({\n          commands: queuedCmds,\n          updateState: (updater) => {\n            agentStateRef.current = updater(agentStateRef.current);\n            rerender((prev) => prev + 1);\n          },\n          error: error as Error,\n        });\n      }\n    },\n  });\n\n  // Tool execution status state\n  const [toolStatuses, setToolStatuses] = useState<\n    Record<string, ToolExecutionStatus>\n  >({});\n\n  // Reactive conversion of agent state + connection metadata  UI state\n  const pendingCommands = useMemo(\n    () => [...commandQueue.state.inTransit, ...commandQueue.state.queued],\n    [commandQueue.state],\n  );\n  const converted = useConvertedState(\n    options.converter,\n    agentStateRef.current,\n    pendingCommands,\n    runManager.isRunning,\n    toolStatuses,\n  );\n\n  // Create runtime\n  const runtime = useExternalStoreRuntime({\n    messages: converted.messages,\n    state: converted.state,\n    isRunning: converted.isRunning,\n    adapters: options.adapters,\n    extras: {\n      [symbolAssistantTransportExtras]: true,\n      sendCommand: (command: AssistantTransportCommand) => {\n        commandQueue.enqueue(command);\n      },\n      state: agentStateRef.current as UserExternalState,\n    } satisfies AssistantTransportExtras,\n    onNew: async (message: AppendMessage): Promise<void> => {\n      if (message.role !== \"user\")\n        throw new Error(\"Only user messages are supported\");\n\n      // Store parentId for the request\n      parentIdRef.current = message.parentId;\n\n      // Convert AppendMessage to AddMessageCommand\n      const parts: UserMessagePart[] = [];\n\n      const content = [\n        ...message.content,\n        ...(message.attachments?.flatMap((a) => a.content) ?? []),\n      ];\n      for (const contentPart of content) {\n        if (contentPart.type === \"text\") {\n          parts.push({ type: \"text\", text: contentPart.text });\n        } else if (contentPart.type === \"image\") {\n          parts.push({ type: \"image\", image: contentPart.image });\n        }\n      }\n\n      const command: AddMessageCommand = {\n        type: \"add-message\",\n        message: {\n          role: \"user\",\n          parts,\n        },\n      };\n\n      commandQueue.enqueue(command);\n    },\n    onCancel: async () => {\n      runManager.cancel();\n      await toolInvocations.abort();\n    },\n    onResume: async () => {\n      if (!options.resumeApi)\n        throw new Error(\"Must pass resumeApi to options to resume runs\");\n\n      resumeFlagRef.current = true;\n      runManager.schedule();\n    },\n    onAddToolResult: async (\n      toolOptions: AddToolResultOptions,\n    ): Promise<void> => {\n      const command: AddToolResultCommand = {\n        type: \"add-tool-result\",\n        toolCallId: toolOptions.toolCallId,\n        result: toolOptions.result as ReadonlyJSONObject,\n        toolName: toolOptions.toolName,\n        isError: toolOptions.isError,\n        ...(toolOptions.artifact && { artifact: toolOptions.artifact }),\n      };\n\n      commandQueue.enqueue(command);\n    },\n    onLoadExternalState: async (state) => {\n      agentStateRef.current = state as T;\n      toolInvocations.reset();\n      rerender((prev) => prev + 1);\n    },\n  });\n\n  const toolInvocations = useToolInvocations({\n    state: converted,\n    getTools: () => runtime.thread.getModelContext().tools,\n    onResult: commandQueue.enqueue,\n    setToolStatuses,\n  });\n\n  return runtime;\n};\n\n/**\n * @alpha This is an experimental API that is subject to change.\n */\nexport const useAssistantTransportRuntime = <T,>(\n  options: AssistantTransportOptions<T>,\n): AssistantRuntime => {\n  const runtime = useRemoteThreadListRuntime({\n    runtimeHook: function RuntimeHook() {\n      return useAssistantTransportThreadRuntime(options);\n    },\n    adapter: new InMemoryThreadListAdapter(),\n    allowNesting: true,\n  });\n  return runtime;\n};\n", "import { useState, useCallback, useRef, useEffect } from \"react\";\nimport {\n  AssistantTransportCommand,\n  CommandQueueState,\n  QueuedCommand,\n} from \"./types\";\n\nexport const createInitialQueueState = (): CommandQueueState => ({\n  queued: [],\n  inTransit: [],\n});\n\nexport const useCommandQueue = (opts: { onQueue: () => void }) => {\n  const onQueueRef = useRef(opts.onQueue);\n  useEffect(() => {\n    onQueueRef.current = opts.onQueue;\n  });\n\n  const [, rerender] = useState(0);\n  const queueStateRef = useRef<CommandQueueState>(createInitialQueueState());\n\n  const enqueue = (command: AssistantTransportCommand) => {\n    queueStateRef.current = {\n      queued: [...queueStateRef.current.queued, command],\n      inTransit: queueStateRef.current.inTransit,\n    };\n    rerender((prev) => prev + 1);\n\n    onQueueRef.current();\n  };\n\n  const flush = (): QueuedCommand[] => {\n    if (queueStateRef.current.queued.length === 0) return [];\n\n    const queued = queueStateRef.current.queued;\n    queueStateRef.current = {\n      queued: [],\n      inTransit: [...queueStateRef.current.inTransit, ...queued],\n    };\n    rerender((prev) => prev + 1);\n\n    return queued;\n  };\n\n  const markDelivered = () => {\n    queueStateRef.current = { ...queueStateRef.current, inTransit: [] };\n    rerender((prev) => prev + 1);\n  };\n\n  const reset = useCallback(() => {\n    queueStateRef.current = createInitialQueueState();\n    rerender((prev) => prev + 1);\n  }, []);\n\n  return {\n    state: queueStateRef.current,\n    enqueue,\n    flush,\n    markDelivered,\n    reset,\n  };\n};\n", "import { useCallback, useRef, useState } from \"react\";\nimport { useLatestRef } from \"./useLatestRef\";\n\nexport type RunManager = Readonly<{\n  isRunning: boolean;\n  schedule: () => void;\n  cancel: () => void;\n}>;\n\nexport function useRunManager(config: {\n  onRun: (signal: AbortSignal) => Promise<void>;\n  onFinish?: (() => void) | undefined;\n  onCancel?: (() => void) | undefined;\n  onError?: ((error: Error) => void | Promise<void>) | undefined;\n}): RunManager {\n  const [isRunning, setIsRunning] = useState(false);\n  const stateRef = useRef({\n    pending: false,\n    abortController: null as AbortController | null,\n  });\n  const onRunRef = useLatestRef(config.onRun);\n  const onFinishRef = useLatestRef(config.onFinish);\n  const onCancelRef = useLatestRef(config.onCancel);\n  const onErrorRef = useLatestRef(config.onError);\n\n  const startRun = useCallback(() => {\n    setIsRunning(true);\n    stateRef.current.pending = false;\n    const ac = new AbortController();\n    stateRef.current.abortController = ac;\n\n    queueMicrotask(async () => {\n      try {\n        await onRunRef.current(ac.signal);\n      } catch (error) {\n        stateRef.current.pending = false;\n        if (ac.signal.aborted) {\n          onCancelRef.current?.();\n        } else {\n          await onErrorRef.current?.(error as Error);\n        }\n      } finally {\n        onFinishRef.current?.();\n        if (stateRef.current.pending) {\n          startRun();\n        } else {\n          setIsRunning(false);\n          stateRef.current.abortController = null;\n        }\n      }\n    });\n  }, [onRunRef, onFinishRef, onErrorRef, onCancelRef]);\n\n  const schedule = useCallback(() => {\n    if (stateRef.current.abortController) {\n      // Coalesce multiple schedules while running into a single follow-up run.\n      stateRef.current.pending = true;\n      return;\n    }\n    startRun();\n  }, [startRun]);\n\n  const cancel = useCallback(() => {\n    stateRef.current.pending = false;\n    stateRef.current.abortController?.abort();\n  }, []);\n\n  return {\n    isRunning,\n    schedule,\n    cancel,\n  };\n}\n", "import { useEffect, useRef } from \"react\";\n\nexport function useLatestRef<T>(value: T) {\n  const ref = useRef(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref as { current: T };\n}\n", "import { useMemo } from \"react\";\nimport type {\n  AssistantTransportCommand,\n  AssistantTransportState,\n  AssistantTransportStateConverter,\n} from \"./types\";\nimport type { ToolExecutionStatus } from \"./useToolInvocations\";\n\nexport function useConvertedState<T>(\n  converter: AssistantTransportStateConverter<T>,\n  agentState: T,\n  pendingCommands: AssistantTransportCommand[],\n  isSending: boolean,\n  toolStatuses: Record<string, ToolExecutionStatus>,\n): AssistantTransportState {\n  return useMemo(\n    () => converter(agentState, { pendingCommands, isSending, toolStatuses }),\n    [converter, agentState, pendingCommands, isSending, toolStatuses],\n  );\n}\n", "import { useEffect, useRef, useState } from \"react\";\nimport {\n  createAssistantStreamController,\n  type ToolCallStreamController,\n  ToolResponse,\n  unstable_toolResultStream,\n  type Tool,\n} from \"assistant-stream\";\nimport type {\n  AssistantTransportCommand,\n  AssistantTransportState,\n} from \"./types\";\nimport {\n  AssistantMetaTransformStream,\n  type ReadonlyJSONValue,\n} from \"assistant-stream/utils\";\n\nconst isArgsTextComplete = (argsText: string) => {\n  try {\n    JSON.parse(argsText);\n    return true;\n  } catch {\n    return false;\n  }\n};\n\ntype UseToolInvocationsParams = {\n  state: AssistantTransportState;\n  getTools: () => Record<string, Tool> | undefined;\n  onResult: (command: AssistantTransportCommand) => void;\n  setToolStatuses: (\n    updater:\n      | Record<string, ToolExecutionStatus>\n      | ((\n          prev: Record<string, ToolExecutionStatus>,\n        ) => Record<string, ToolExecutionStatus>),\n  ) => void;\n};\n\nexport type ToolExecutionStatus =\n  | { type: \"executing\" }\n  | { type: \"interrupt\"; payload: { type: \"human\"; payload: unknown } };\n\nexport function useToolInvocations({\n  state,\n  getTools,\n  onResult,\n  setToolStatuses,\n}: UseToolInvocationsParams) {\n  const lastToolStates = useRef<\n    Record<\n      string,\n      {\n        argsText: string;\n        hasResult: boolean;\n        argsComplete: boolean;\n        controller: ToolCallStreamController;\n      }\n    >\n  >({});\n\n  const humanInputRef = useRef<\n    Map<\n      string,\n      {\n        resolve: (payload: unknown) => void;\n        reject: (reason: unknown) => void;\n      }\n    >\n  >(new Map());\n\n  const acRef = useRef<AbortController>(new AbortController());\n  const executingCountRef = useRef(0);\n  const settledResolversRef = useRef<Array<() => void>>([]);\n\n  const [controller] = useState(() => {\n    const [stream, controller] = createAssistantStreamController();\n    const transform = unstable_toolResultStream(\n      getTools,\n      () => acRef.current?.signal ?? new AbortController().signal,\n      (toolCallId: string, payload: unknown) => {\n        return new Promise<unknown>((resolve, reject) => {\n          // Reject previous human input request if it exists\n          const previous = humanInputRef.current.get(toolCallId);\n          if (previous) {\n            previous.reject(\n              new Error(\"Human input request was superseded by a new request\"),\n            );\n          }\n\n          humanInputRef.current.set(toolCallId, { resolve, reject });\n          setToolStatuses((prev) => ({\n            ...prev,\n            [toolCallId]: {\n              type: \"interrupt\",\n              payload: { type: \"human\", payload },\n            },\n          }));\n        });\n      },\n      {\n        onExecutionStart: (toolCallId: string) => {\n          executingCountRef.current++;\n          setToolStatuses((prev) => ({\n            ...prev,\n            [toolCallId]: { type: \"executing\" },\n          }));\n        },\n        onExecutionEnd: (toolCallId: string) => {\n          executingCountRef.current--;\n          setToolStatuses((prev) => {\n            const next = { ...prev };\n            delete next[toolCallId];\n            return next;\n          });\n          // Resolve any waiting abort promises when all tools have settled\n          if (executingCountRef.current === 0) {\n            settledResolversRef.current.forEach((resolve) => resolve());\n            settledResolversRef.current = [];\n          }\n        },\n      },\n    );\n    stream\n      .pipeThrough(transform)\n      .pipeThrough(new AssistantMetaTransformStream())\n      .pipeTo(\n        new WritableStream({\n          write(chunk) {\n            if (chunk.type === \"result\") {\n              // the tool call result was already set by the backend\n              if (lastToolStates.current[chunk.meta.toolCallId]?.hasResult)\n                return;\n\n              onResult({\n                type: \"add-tool-result\",\n                toolCallId: chunk.meta.toolCallId,\n                toolName: chunk.meta.toolName,\n                result: chunk.result,\n                isError: chunk.isError,\n                ...(chunk.artifact && { artifact: chunk.artifact }),\n              });\n            }\n          },\n        }),\n      );\n\n    return controller;\n  });\n\n  const ignoredToolIds = useRef<Set<string>>(new Set());\n  const isInitialState = useRef(true);\n\n  useEffect(() => {\n    const processMessages = (\n      messages: readonly (typeof state.messages)[number][],\n    ) => {\n      messages.forEach((message) => {\n        message.content.forEach((content) => {\n          if (content.type === \"tool-call\") {\n            if (isInitialState.current) {\n              ignoredToolIds.current.add(content.toolCallId);\n            } else {\n              if (ignoredToolIds.current.has(content.toolCallId)) {\n                return;\n              }\n              let lastState = lastToolStates.current[content.toolCallId];\n              if (!lastState) {\n                const toolCallController = controller.addToolCallPart({\n                  toolName: content.toolName,\n                  toolCallId: content.toolCallId,\n                });\n                lastState = {\n                  argsText: \"\",\n                  hasResult: false,\n                  argsComplete: false,\n                  controller: toolCallController,\n                };\n                lastToolStates.current[content.toolCallId] = lastState;\n              }\n\n              if (content.argsText !== lastState.argsText) {\n                if (lastState.argsComplete) {\n                  if (process.env[\"NODE_ENV\"] !== \"production\") {\n                    console.warn(\n                      \"argsText updated after controller was closed:\",\n                      {\n                        previous: lastState.argsText,\n                        next: content.argsText,\n                      },\n                    );\n                  }\n                } else {\n                  if (!content.argsText.startsWith(lastState.argsText)) {\n                    // Check if this is key reordering (both are complete JSON)\n                    // This happens when transitioning from streaming to complete state\n                    // and the provider returns keys in a different order\n                    if (\n                      isArgsTextComplete(lastState.argsText) &&\n                      isArgsTextComplete(content.argsText)\n                    ) {\n                      lastState.controller.argsText.close();\n                      lastToolStates.current[content.toolCallId] = {\n                        argsText: content.argsText,\n                        hasResult: lastState.hasResult,\n                        argsComplete: true,\n                        controller: lastState.controller,\n                      };\n                      return; // Continue to next content part\n                    }\n                    throw new Error(\n                      `Tool call argsText can only be appended, not updated: ${content.argsText} does not start with ${lastState.argsText}`,\n                    );\n                  }\n\n                  const argsTextDelta = content.argsText.slice(\n                    lastState.argsText.length,\n                  );\n                  lastState.controller.argsText.append(argsTextDelta);\n\n                  const shouldClose = isArgsTextComplete(content.argsText);\n                  if (shouldClose) {\n                    lastState.controller.argsText.close();\n                  }\n\n                  lastToolStates.current[content.toolCallId] = {\n                    argsText: content.argsText,\n                    hasResult: lastState.hasResult,\n                    argsComplete: shouldClose,\n                    controller: lastState.controller,\n                  };\n                }\n              }\n\n              if (content.result !== undefined && !lastState.hasResult) {\n                lastState.controller.setResponse(\n                  new ToolResponse({\n                    result: content.result as ReadonlyJSONValue,\n                    artifact: content.artifact as ReadonlyJSONValue | undefined,\n                    isError: content.isError,\n                  }),\n                );\n                lastState.controller.close();\n\n                lastToolStates.current[content.toolCallId] = {\n                  hasResult: true,\n                  argsComplete: true,\n                  argsText: lastState.argsText,\n                  controller: lastState.controller,\n                };\n              }\n            }\n\n            // Recursively process nested messages\n            if (content.messages) {\n              processMessages(content.messages);\n            }\n          }\n        });\n      });\n    };\n\n    processMessages(state.messages);\n\n    if (isInitialState.current) {\n      isInitialState.current = false;\n    }\n  }, [state, controller]);\n\n  const abort = (): Promise<void> => {\n    humanInputRef.current.forEach(({ reject }) => {\n      reject(new Error(\"Tool execution aborted\"));\n    });\n    humanInputRef.current.clear();\n\n    acRef.current.abort();\n    acRef.current = new AbortController();\n\n    // Return a promise that resolves when all executing tools have settled\n    if (executingCountRef.current === 0) {\n      return Promise.resolve();\n    }\n    return new Promise<void>((resolve) => {\n      settledResolversRef.current.push(resolve);\n    });\n  };\n\n  return {\n    reset: () => {\n      void abort();\n      isInitialState.current = true;\n    },\n    abort,\n    resume: (toolCallId: string, payload: unknown) => {\n      const handlers = humanInputRef.current.get(toolCallId);\n      if (handlers) {\n        humanInputRef.current.delete(toolCallId);\n        setToolStatuses((prev) => ({\n          ...prev,\n          [toolCallId]: { type: \"executing\" },\n        }));\n        handlers.resolve(payload);\n      } else {\n        throw new Error(\n          `Tool call ${toolCallId} is not waiting for human input`,\n        );\n      }\n    },\n  };\n}\n", "import { Tool, toToolsJSONSchema, type ToolJSONSchema } from \"assistant-stream\";\n\n/**\n * @deprecated Use `toToolsJSONSchema` from `assistant-stream` instead.\n */\nexport function toAISDKTools(\n  tools: Record<string, Tool>,\n): Record<string, ToolJSONSchema> {\n  return toToolsJSONSchema(tools, { filter: () => true });\n}\n\n/**\n * @deprecated Use `toToolsJSONSchema` from `assistant-stream` instead, which includes filtering by default.\n */\nexport function getEnabledTools(\n  tools: Record<string, Tool>,\n): Record<string, Tool> {\n  return Object.fromEntries(\n    Object.entries(tools).filter(\n      ([, tool]) => !tool.disabled && tool.type !== \"backend\",\n    ),\n  );\n}\n\nexport async function createRequestHeaders(\n  headersValue:\n    | Record<string, string>\n    | Headers\n    | (() => Promise<Record<string, string> | Headers>),\n): Promise<Headers> {\n  const resolvedHeaders =\n    typeof headersValue === \"function\" ? await headersValue() : headersValue;\n\n  const headers = new Headers(resolvedHeaders);\n  headers.set(\"Content-Type\", \"application/json\");\n  return headers;\n}\n", "import { AssistantStream, AssistantStreamChunk } from \"assistant-stream\";\nimport {\n  RemoteThreadInitializeResponse,\n  RemoteThreadListAdapter,\n  RemoteThreadListResponse,\n  RemoteThreadMetadata,\n} from \"../types\";\n\nexport class InMemoryThreadListAdapter implements RemoteThreadListAdapter {\n  list(): Promise<RemoteThreadListResponse> {\n    return Promise.resolve({\n      threads: [],\n    });\n  }\n\n  rename(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  archive(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  unarchive(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  delete(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  initialize(threadId: string): Promise<RemoteThreadInitializeResponse> {\n    return Promise.resolve({ remoteId: threadId, externalId: undefined });\n  }\n\n  generateTitle(): Promise<AssistantStream> {\n    return Promise.resolve(new ReadableStream<AssistantStreamChunk>());\n  }\n\n  fetch(_threadId: string): Promise<RemoteThreadMetadata> {\n    return Promise.reject(new Error(\"Thread not found\"));\n  }\n}\n", "\"use client\";\n\nimport { useMemo } from \"react\";\nimport { ThreadMessageConverter } from \"./ThreadMessageConverter\";\nimport {\n  getExternalStoreMessages,\n  symbolInnerMessage,\n} from \"./getExternalStoreMessage\";\nimport { fromThreadMessageLike, ThreadMessageLike } from \"./ThreadMessageLike\";\nimport { getAutoStatus, isAutoStatus } from \"./auto-status\";\nimport { ThreadMessage, ToolCallMessagePart } from \"../../../types\";\nimport { ToolExecutionStatus } from \"../assistant-transport/useToolInvocations\";\nimport { ReadonlyJSONValue } from \"assistant-stream/utils\";\nimport { generateErrorMessageId } from \"../../../utils/idUtils\";\nimport { ThreadAssistantMessage } from \"../../../types/AssistantTypes\";\n\nexport namespace useExternalMessageConverter {\n  export type Message =\n    | (ThreadMessageLike & {\n        readonly convertConfig?: {\n          readonly joinStrategy?: \"concat-content\" | \"none\";\n        };\n      })\n    | {\n        role: \"tool\";\n        toolCallId: string;\n        toolName?: string | undefined;\n        result: any;\n        artifact?: any;\n        isError?: boolean;\n        messages?: readonly ThreadMessage[];\n      };\n\n  export type Metadata = {\n    readonly toolStatuses?: Record<string, ToolExecutionStatus>;\n    readonly error?: ReadonlyJSONValue;\n  };\n\n  export type Callback<T> = (\n    message: T,\n    metadata: Metadata,\n  ) => Message | Message[];\n}\n\ntype CallbackResult<T> = {\n  input: T;\n  outputs: useExternalMessageConverter.Message[];\n};\n\ntype ChunkResult<T> = {\n  inputs: T[];\n  outputs: useExternalMessageConverter.Message[];\n};\n\ntype Mutable<T> = {\n  -readonly [P in keyof T]: T[P];\n};\n\nconst joinExternalMessages = (\n  messages: readonly useExternalMessageConverter.Message[],\n): ThreadMessageLike => {\n  const assistantMessage: Mutable<Omit<ThreadMessageLike, \"metadata\">> & {\n    content: Exclude<ThreadMessageLike[\"content\"][0], string>[];\n    metadata?: Mutable<ThreadMessageLike[\"metadata\"]>;\n  } = {\n    role: \"assistant\",\n    content: [],\n  };\n  for (const output of messages) {\n    if (output.role === \"tool\") {\n      const toolCallIdx = assistantMessage.content.findIndex(\n        (c) => c.type === \"tool-call\" && c.toolCallId === output.toolCallId,\n      );\n      if (toolCallIdx !== -1) {\n        const toolCall = assistantMessage.content[\n          toolCallIdx\n        ]! as ToolCallMessagePart;\n        if (output.toolName !== undefined) {\n          if (toolCall.toolName !== output.toolName)\n            throw new Error(\n              `Tool call name ${output.toolCallId} ${output.toolName} does not match existing tool call ${toolCall.toolName}`,\n            );\n        }\n        assistantMessage.content[toolCallIdx] = {\n          ...toolCall,\n          ...{\n            [symbolInnerMessage]: [\n              ...((toolCall as any)[symbolInnerMessage] ?? []),\n              output,\n            ],\n          },\n          result: output.result,\n          artifact: output.artifact,\n          isError: output.isError,\n          messages: output.messages,\n        };\n      } else {\n        throw new Error(\n          `Tool call ${output.toolCallId} ${output.toolName} not found in assistant message`,\n        );\n      }\n    } else {\n      const role = output.role;\n      const content = (\n        typeof output.content === \"string\"\n          ? [{ type: \"text\" as const, text: output.content }]\n          : output.content\n      ).map((c) => ({\n        ...c,\n        ...{ [symbolInnerMessage]: [output] },\n      }));\n      switch (role) {\n        case \"system\":\n        case \"user\":\n          return {\n            ...output,\n            content,\n          };\n        case \"assistant\":\n          if (assistantMessage.content.length === 0) {\n            assistantMessage.id = output.id;\n            assistantMessage.createdAt ??= output.createdAt;\n            assistantMessage.status ??= output.status;\n\n            if (output.attachments) {\n              assistantMessage.attachments = [\n                ...(assistantMessage.attachments ?? []),\n                ...output.attachments,\n              ];\n            }\n\n            if (output.metadata) {\n              assistantMessage.metadata ??= {};\n              if (output.metadata.unstable_state) {\n                assistantMessage.metadata.unstable_state =\n                  output.metadata.unstable_state;\n              }\n              if (output.metadata.unstable_annotations) {\n                assistantMessage.metadata.unstable_annotations = [\n                  ...(assistantMessage.metadata.unstable_annotations ?? []),\n                  ...output.metadata.unstable_annotations,\n                ];\n              }\n              if (output.metadata.unstable_data) {\n                assistantMessage.metadata.unstable_data = [\n                  ...(assistantMessage.metadata.unstable_data ?? []),\n                  ...output.metadata.unstable_data,\n                ];\n              }\n              if (output.metadata.steps) {\n                assistantMessage.metadata.steps = [\n                  ...(assistantMessage.metadata.steps ?? []),\n                  ...output.metadata.steps,\n                ];\n              }\n              if (output.metadata.custom) {\n                assistantMessage.metadata.custom = {\n                  ...(assistantMessage.metadata.custom ?? {}),\n                  ...output.metadata.custom,\n                };\n              }\n\n              if (output.metadata.submittedFeedback) {\n                assistantMessage.metadata.submittedFeedback =\n                  output.metadata.submittedFeedback;\n              }\n            }\n            // TODO keep this in sync\n          }\n\n          // Add content parts, merging reasoning parts with same parentId\n          for (const part of content) {\n            if (\n              part.type === \"reasoning\" &&\n              \"parentId\" in part &&\n              part.parentId\n            ) {\n              const existingIdx = assistantMessage.content.findIndex(\n                (c) =>\n                  c.type === \"reasoning\" &&\n                  \"parentId\" in c &&\n                  c.parentId === part.parentId,\n              );\n              if (existingIdx !== -1) {\n                const existing = assistantMessage.content[\n                  existingIdx\n                ] as typeof part;\n                assistantMessage.content[existingIdx] = {\n                  ...existing,\n                  text: `${existing.text}\\n\\n${part.text}`,\n                  ...{\n                    [symbolInnerMessage]: [\n                      ...((existing as any)[symbolInnerMessage] ?? []),\n                      ...((part as any)[symbolInnerMessage] ?? []),\n                    ],\n                  },\n                };\n                continue;\n              }\n            }\n            assistantMessage.content.push(part);\n          }\n          break;\n        default: {\n          const unsupportedRole: never = role;\n          throw new Error(`Unknown message role: ${unsupportedRole}`);\n        }\n      }\n    }\n  }\n  return assistantMessage;\n};\n\nconst chunkExternalMessages = <T,>(\n  callbackResults: CallbackResult<T>[],\n  joinStrategy?: \"concat-content\" | \"none\",\n) => {\n  const results: ChunkResult<T>[] = [];\n  let isAssistant = false;\n  let pendingNone = false; // true if the previous assistant message had joinStrategy \"none\"\n  let inputs: T[] = [];\n  let outputs: useExternalMessageConverter.Message[] = [];\n\n  const flush = () => {\n    if (outputs.length) {\n      results.push({\n        inputs,\n        outputs,\n      });\n    }\n    inputs = [];\n    outputs = [];\n    isAssistant = false;\n    pendingNone = false;\n  };\n\n  for (const callbackResult of callbackResults) {\n    for (const output of callbackResult.outputs) {\n      if (\n        (pendingNone && output.role !== \"tool\") ||\n        !isAssistant ||\n        output.role === \"user\" ||\n        output.role === \"system\"\n      ) {\n        flush();\n      }\n      isAssistant = output.role === \"assistant\" || output.role === \"tool\";\n\n      if (inputs.at(-1) !== callbackResult.input) {\n        inputs.push(callbackResult.input);\n      }\n      outputs.push(output);\n\n      if (\n        output.role === \"assistant\" &&\n        (output.convertConfig?.joinStrategy === \"none\" ||\n          joinStrategy === \"none\")\n      ) {\n        pendingNone = true;\n      }\n    }\n  }\n  flush();\n  return results;\n};\n\nfunction createErrorAssistantMessage(\n  error: ReadonlyJSONValue,\n): ThreadAssistantMessage {\n  return Object.assign<ThreadAssistantMessage, { [symbolInnerMessage]: [] }>(\n    {\n      id: generateErrorMessageId(),\n      role: \"assistant\",\n      content: [],\n      status: { type: \"incomplete\", reason: \"error\", error },\n      createdAt: new Date(),\n      metadata: {\n        unstable_state: null,\n        unstable_annotations: [],\n        unstable_data: [],\n        custom: {},\n        steps: [],\n      },\n    },\n    { [symbolInnerMessage]: [] },\n  );\n}\n\nexport const convertExternalMessages = <T extends WeakKey>(\n  messages: T[],\n  callback: useExternalMessageConverter.Callback<T>,\n  isRunning: boolean,\n  metadata: useExternalMessageConverter.Metadata,\n) => {\n  const callbackResults: CallbackResult<T>[] = [];\n  for (const message of messages) {\n    const output = callback(message, metadata);\n    const outputs = Array.isArray(output) ? output : [output];\n    const result = { input: message, outputs };\n    callbackResults.push(result);\n  }\n\n  const chunks = chunkExternalMessages(callbackResults);\n\n  const result = chunks.map((message, idx) => {\n    const isLast = idx === chunks.length - 1;\n    const joined = joinExternalMessages(message.outputs);\n    const hasPendingToolCalls =\n      typeof joined.content === \"object\" &&\n      joined.content.some(\n        (c) => c.type === \"tool-call\" && c.result === undefined,\n      );\n    const autoStatus = getAutoStatus(\n      isLast,\n      isRunning,\n      hasPendingToolCalls,\n      hasPendingToolCalls,\n      isLast ? metadata.error : undefined,\n    );\n    const newMessage = fromThreadMessageLike(\n      joined,\n      idx.toString(),\n      autoStatus,\n    );\n    (newMessage as any)[symbolInnerMessage] = message.inputs;\n    return newMessage;\n  });\n\n  if (metadata.error) {\n    const lastMessage = result.at(-1);\n    if (!lastMessage || lastMessage.role !== \"assistant\") {\n      result.push(createErrorAssistantMessage(metadata.error));\n    }\n  }\n\n  return result;\n};\n\nexport const useExternalMessageConverter = <T extends WeakKey>({\n  callback,\n  messages,\n  isRunning,\n  joinStrategy,\n  metadata,\n}: {\n  callback: useExternalMessageConverter.Callback<T>;\n  messages: T[];\n  isRunning: boolean;\n  joinStrategy?: \"concat-content\" | \"none\" | undefined;\n  metadata?: useExternalMessageConverter.Metadata | undefined;\n}) => {\n  const state = useMemo(\n    () => ({\n      metadata: metadata ?? {},\n      callback,\n      callbackCache: new WeakMap<T, CallbackResult<T>>(),\n      chunkCache: new WeakMap<\n        useExternalMessageConverter.Message,\n        ChunkResult<T>\n      >(),\n      converterCache: new ThreadMessageConverter(),\n    }),\n    [callback, metadata],\n  );\n\n  return useMemo(() => {\n    const callbackResults: CallbackResult<T>[] = [];\n    for (const message of messages) {\n      let result = state.callbackCache.get(message);\n      if (!result) {\n        const output = state.callback(message, state.metadata);\n        const outputs = Array.isArray(output) ? output : [output];\n        result = { input: message, outputs };\n        state.callbackCache.set(message, result);\n      }\n      callbackResults.push(result);\n    }\n\n    const chunks = chunkExternalMessages(callbackResults, joinStrategy).map(\n      (m) => {\n        const key = m.outputs[0];\n        if (!key) return m;\n\n        const cached = state.chunkCache.get(key);\n        if (cached && shallowArrayEqual(cached.outputs, m.outputs))\n          return cached;\n        state.chunkCache.set(key, m);\n        return m;\n      },\n    );\n\n    const threadMessages = state.converterCache.convertMessages(\n      chunks,\n      (cache, message, idx) => {\n        const isLast = idx === chunks.length - 1;\n\n        const joined = joinExternalMessages(message.outputs);\n        const hasSuspendedToolCalls =\n          typeof joined.content === \"object\" &&\n          joined.content.some(\n            (c) => c.type === \"tool-call\" && c.result === undefined,\n          );\n        const hasPendingToolCalls =\n          typeof joined.content === \"object\" &&\n          joined.content.some(\n            (c) => c.type === \"tool-call\" && c.result === undefined,\n          );\n        const autoStatus = getAutoStatus(\n          isLast,\n          isRunning,\n          hasSuspendedToolCalls,\n          hasPendingToolCalls,\n          isLast ? state.metadata.error : undefined,\n        );\n\n        if (\n          cache &&\n          (cache.role !== \"assistant\" ||\n            !isAutoStatus(cache.status) ||\n            cache.status === autoStatus)\n        ) {\n          const inputs = getExternalStoreMessages<T>(cache);\n          if (shallowArrayEqual(inputs, message.inputs)) {\n            return cache;\n          }\n        }\n\n        const newMessage = fromThreadMessageLike(\n          joined,\n          idx.toString(),\n          autoStatus,\n        );\n        (newMessage as any)[symbolInnerMessage] = message.inputs;\n        return newMessage;\n      },\n    );\n\n    (threadMessages as unknown as { [symbolInnerMessage]: T[] })[\n      symbolInnerMessage\n    ] = messages;\n\n    if (state.metadata.error) {\n      const lastMessage = threadMessages.at(-1);\n      if (!lastMessage || lastMessage.role !== \"assistant\") {\n        threadMessages.push(createErrorAssistantMessage(state.metadata.error));\n      }\n    }\n\n    return threadMessages;\n  }, [state, messages, isRunning, joinStrategy]);\n};\n\nconst shallowArrayEqual = (a: unknown[], b: unknown[]) => {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n};\n", "\"use client\";\nimport { ThreadState } from \"../../runtime\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport { ThreadMessage } from \"../../../types\";\nimport {\n  useExternalMessageConverter,\n  convertExternalMessages,\n} from \"./external-message-converter\";\nimport { getExternalStoreMessages } from \"./getExternalStoreMessage\";\n\nexport const createMessageConverter = <T extends object>(\n  callback: useExternalMessageConverter.Callback<T>,\n) => {\n  const result = {\n    useThreadMessages: ({\n      messages,\n      isRunning,\n      joinStrategy,\n      metadata,\n    }: {\n      messages: T[];\n      isRunning: boolean;\n      joinStrategy?: \"concat-content\" | \"none\" | undefined;\n      metadata?: useExternalMessageConverter.Metadata;\n    }) => {\n      return useExternalMessageConverter<T>({\n        callback,\n        messages,\n        isRunning,\n        joinStrategy,\n        metadata,\n      });\n    },\n    toThreadMessages: (\n      messages: T[],\n      isRunning = false,\n      metadata: useExternalMessageConverter.Metadata = {},\n    ) => {\n      return convertExternalMessages(messages, callback, isRunning, metadata);\n    },\n    toOriginalMessages: (\n      input: ThreadState | ThreadMessage | ThreadMessage[\"content\"][number],\n    ) => {\n      const messages = getExternalStoreMessages(input);\n      if (messages.length === 0) throw new Error(\"No original messages found\");\n      return messages;\n    },\n    toOriginalMessage: (\n      input: ThreadState | ThreadMessage | ThreadMessage[\"content\"][number],\n    ) => {\n      const messages = result.toOriginalMessages(input);\n      return messages[0]!;\n    },\n    useOriginalMessage: () => {\n      const messageMessages = result.useOriginalMessages();\n      const first = messageMessages[0]!;\n      return first;\n    },\n    useOriginalMessages: () => {\n      const aui = useAui();\n      const partMessages = useAuiState((s) => {\n        if (aui.part.source) return getExternalStoreMessages(s.part);\n        return undefined;\n      });\n\n      const messageMessages = useAuiState<T[]>(({ message }) =>\n        getExternalStoreMessages(message),\n      );\n\n      const messages = partMessages ?? messageMessages;\n      if (messages.length === 0) throw new Error(\"No original messages found\");\n      return messages;\n    },\n  };\n\n  return result;\n};\n", "\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport type { ChatModelAdapter } from \"./ChatModelAdapter\";\nimport { LocalRuntimeCore } from \"./LocalRuntimeCore\";\nimport type { LocalRuntimeOptions } from \"./LocalRuntimeOptions\";\nimport { useRuntimeAdapters } from \"../adapters/RuntimeAdapterProvider\";\nimport { useRemoteThreadListRuntime } from \"../remote-thread-list/useRemoteThreadListRuntime\";\nimport { useCloudThreadListAdapter } from \"../remote-thread-list/adapter/cloud\";\nimport { AssistantRuntimeImpl } from \"../../../internal\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nconst useLocalThreadRuntime = (\n  adapter: ChatModelAdapter,\n  { initialMessages, ...options }: LocalRuntimeOptions,\n) => {\n  const { modelContext, ...threadListAdapters } = useRuntimeAdapters() ?? {};\n  const opt = {\n    ...options,\n    adapters: {\n      ...threadListAdapters,\n      ...options.adapters,\n      chatModel: adapter,\n    },\n  };\n\n  const [runtime] = useState(() => new LocalRuntimeCore(opt, initialMessages));\n\n  const threadIdRef = useRef<string | undefined>(undefined);\n  threadIdRef.current = useAuiState(\n    ({ threadListItem }) => threadListItem.remoteId,\n  );\n\n  useEffect(() => {\n    runtime.threads\n      .getMainThreadRuntimeCore()\n      .__internal_setGetThreadId(() => threadIdRef.current);\n  }, [runtime]);\n\n  useEffect(() => {\n    return () => {\n      runtime.threads.getMainThreadRuntimeCore().detach();\n    };\n  }, [runtime]);\n\n  useEffect(() => {\n    runtime.threads.getMainThreadRuntimeCore().__internal_setOptions(opt);\n    runtime.threads.getMainThreadRuntimeCore().__internal_load();\n  });\n\n  useEffect(() => {\n    if (!modelContext) return undefined;\n    return runtime.registerModelContextProvider(modelContext);\n  }, [modelContext, runtime]);\n\n  return useMemo(() => new AssistantRuntimeImpl(runtime), [runtime]);\n};\n\nexport const useLocalRuntime = (\n  adapter: ChatModelAdapter,\n  { cloud, ...options }: LocalRuntimeOptions = {},\n) => {\n  const cloudAdapter = useCloudThreadListAdapter({ cloud });\n  return useRemoteThreadListRuntime({\n    runtimeHook: function RuntimeHook() {\n      return useLocalThreadRuntime(adapter, options);\n    },\n    adapter: cloudAdapter,\n    allowNesting: true,\n  });\n};\n", "import type { ThreadAssistantMessage } from \"../../../types\";\n\nexport const shouldContinue = (\n  result: ThreadAssistantMessage,\n  humanToolNames: string[] | undefined,\n) => {\n  // TODO legacy behavior -- make specifying human tool names required\n  if (humanToolNames === undefined) {\n    return (\n      result.status?.type === \"requires-action\" &&\n      result.status.reason === \"tool-calls\" &&\n      result.content.every((c) => c.type !== \"tool-call\" || !!c.result)\n    );\n  }\n\n  return (\n    result.status?.type === \"requires-action\" &&\n    result.status.reason === \"tool-calls\" &&\n    result.content.every(\n      (c) =>\n        c.type !== \"tool-call\" ||\n        !!c.result ||\n        !humanToolNames.includes(c.toolName),\n    )\n  );\n};\n", "import { fromThreadMessageLike, generateId } from \"../../../internal\";\nimport type { AppendMessage, ThreadAssistantMessage } from \"../../../types\";\nimport type { ChatModelAdapter, ChatModelRunResult } from \"./ChatModelAdapter\";\nimport { shouldContinue } from \"./shouldContinue\";\nimport type { LocalRuntimeOptionsBase } from \"./LocalRuntimeOptions\";\nimport type {\n  AddToolResultOptions,\n  ResumeToolCallOptions,\n  ThreadSuggestion,\n  ThreadRuntimeCore,\n  StartRunConfig,\n  ResumeRunConfig,\n} from \"../core/ThreadRuntimeCore\";\nimport { BaseThreadRuntimeCore } from \"../core/BaseThreadRuntimeCore\";\nimport type { RunConfig } from \"../../../types/AssistantTypes\";\nimport type { ModelContextProvider } from \"../../../model-context\";\n\nclass AbortError extends Error {\n  override name = \"AbortError\";\n  detach: boolean;\n\n  constructor(detach: boolean, message?: string) {\n    super(message);\n    this.detach = detach;\n  }\n}\n\nexport class LocalThreadRuntimeCore\n  extends BaseThreadRuntimeCore\n  implements ThreadRuntimeCore\n{\n  public readonly capabilities = {\n    switchToBranch: true,\n    switchBranchDuringRun: true,\n    edit: true,\n    reload: true,\n    cancel: true,\n    unstable_copy: true,\n    speech: false,\n    dictation: false,\n    attachments: false,\n    feedback: false,\n  };\n\n  private abortController: AbortController | null = null;\n\n  public readonly isDisabled = false;\n\n  private _isLoading = false;\n  public get isLoading() {\n    return this._isLoading;\n  }\n\n  private _suggestions: readonly ThreadSuggestion[] = [];\n  private _suggestionsController: AbortController | null = null;\n  public get suggestions(): readonly ThreadSuggestion[] {\n    return this._suggestions;\n  }\n\n  public get adapters() {\n    return this._options.adapters;\n  }\n\n  constructor(\n    contextProvider: ModelContextProvider,\n    options: LocalRuntimeOptionsBase,\n  ) {\n    super(contextProvider);\n    this.__internal_setOptions(options);\n  }\n\n  private _options!: LocalRuntimeOptionsBase;\n\n  private _lastRunConfig: RunConfig = {};\n\n  private _getThreadId?: () => string | undefined;\n\n  public __internal_setGetThreadId(getThreadId: () => string | undefined) {\n    this._getThreadId = getThreadId;\n  }\n\n  private _getInitializePromise?: () => Promise<unknown> | undefined;\n\n  public __internal_setGetInitializePromise(\n    getPromise: () => Promise<unknown> | undefined,\n  ) {\n    this._getInitializePromise = getPromise;\n  }\n\n  public get extras() {\n    return undefined;\n  }\n\n  public __internal_setOptions(options: LocalRuntimeOptionsBase) {\n    if (this._options === options) return;\n\n    this._options = options;\n\n    let hasUpdates = false;\n\n    const canSpeak = options.adapters?.speech !== undefined;\n    if (this.capabilities.speech !== canSpeak) {\n      this.capabilities.speech = canSpeak;\n      hasUpdates = true;\n    }\n\n    const canDictate = options.adapters?.dictation !== undefined;\n    if (this.capabilities.dictation !== canDictate) {\n      this.capabilities.dictation = canDictate;\n      hasUpdates = true;\n    }\n\n    const canAttach = options.adapters?.attachments !== undefined;\n    if (this.capabilities.attachments !== canAttach) {\n      this.capabilities.attachments = canAttach;\n      hasUpdates = true;\n    }\n\n    const canFeedback = options.adapters?.feedback !== undefined;\n    if (this.capabilities.feedback !== canFeedback) {\n      this.capabilities.feedback = canFeedback;\n      hasUpdates = true;\n    }\n\n    if (hasUpdates) this._notifySubscribers();\n  }\n\n  private _loadPromise: Promise<void> | undefined;\n  public __internal_load() {\n    if (this._loadPromise) return this._loadPromise;\n\n    const promise = this.adapters.history?.load() ?? Promise.resolve(null);\n\n    this._isLoading = true;\n    this._notifySubscribers();\n\n    this._loadPromise = promise\n      .then((repo) => {\n        if (!repo) return;\n        this.repository.import(repo);\n        if (repo.messages.length > 0) {\n          this.ensureInitialized();\n        }\n        this._notifySubscribers();\n\n        const resume = this.adapters.history?.resume?.bind(\n          this.adapters.history,\n        );\n        if (repo.unstable_resume && resume) {\n          this.startRun(\n            {\n              parentId: this.repository.headId,\n              sourceId: this.repository.headId,\n              runConfig: this._lastRunConfig,\n            },\n            resume,\n          );\n        }\n      })\n      .finally(() => {\n        this._isLoading = false;\n        this._notifySubscribers();\n      });\n\n    return this._loadPromise;\n  }\n\n  public async append(message: AppendMessage): Promise<void> {\n    this.ensureInitialized();\n\n    const initPromise = this._getInitializePromise?.();\n    if (initPromise) {\n      await initPromise;\n    }\n\n    const newMessage = fromThreadMessageLike(message, generateId(), {\n      type: \"complete\",\n      reason: \"unknown\",\n    });\n    this.repository.addOrUpdateMessage(message.parentId, newMessage);\n    this._options.adapters.history?.append({\n      parentId: message.parentId,\n      message: newMessage,\n      ...(message.runConfig !== undefined && { runConfig: message.runConfig }),\n    });\n\n    const startRun = message.startRun ?? message.role === \"user\";\n    if (startRun) {\n      await this.startRun({\n        parentId: newMessage.id,\n        sourceId: message.sourceId,\n        runConfig: message.runConfig ?? {},\n      });\n    } else {\n      this.repository.resetHead(newMessage.id);\n      this._notifySubscribers();\n    }\n  }\n\n  public resumeRun({ stream, ...startConfig }: ResumeRunConfig): Promise<void> {\n    if (!stream)\n      throw new Error(\"You must pass a stream parameter to resume runs.\");\n    return this.startRun(startConfig, stream);\n  }\n\n  public exportExternalState(): any {\n    throw new Error(\"Runtime does not support exporting external states.\");\n  }\n\n  public importExternalState(): void {\n    throw new Error(\"Runtime does not support importing external states.\");\n  }\n\n  public unstable_loadExternalState(): void {\n    throw new Error(\"Runtime does not support importing external states.\");\n  }\n\n  public async startRun(\n    { parentId, runConfig }: StartRunConfig,\n    runCallback?: ChatModelAdapter[\"run\"],\n  ): Promise<void> {\n    this.ensureInitialized();\n\n    // add assistant message\n    const id = generateId();\n    let message: ThreadAssistantMessage = {\n      id,\n      role: \"assistant\",\n      status: { type: \"running\" },\n      content: [],\n      metadata: {\n        unstable_state: this.state,\n        unstable_annotations: [],\n        unstable_data: [],\n        steps: [],\n        custom: {},\n      },\n      createdAt: new Date(),\n    };\n\n    this._notifyEventSubscribers(\"runStart\");\n\n    try {\n      this._suggestions = [];\n      this._suggestionsController?.abort();\n      this._suggestionsController = null;\n      this._notifySubscribers();\n\n      do {\n        message = await this.performRoundtrip(\n          parentId,\n          message,\n          runConfig,\n          runCallback,\n        );\n        runCallback = undefined;\n      } while (shouldContinue(message, this._options.unstable_humanToolNames));\n    } finally {\n      this._notifyEventSubscribers(\"runEnd\");\n    }\n\n    this._suggestionsController = new AbortController();\n    const signal = this._suggestionsController.signal;\n    if (\n      this.adapters.suggestion &&\n      message.status?.type !== \"requires-action\"\n    ) {\n      const promiseOrGenerator = this.adapters.suggestion?.generate({\n        messages: this.messages,\n      });\n\n      if (Symbol.asyncIterator in promiseOrGenerator) {\n        for await (const r of promiseOrGenerator) {\n          if (signal.aborted) break;\n          this._suggestions = r;\n          this._notifySubscribers();\n        }\n      } else {\n        const result = await promiseOrGenerator;\n        if (signal.aborted) return;\n        this._suggestions = result;\n        this._notifySubscribers();\n      }\n    }\n  }\n\n  private async performRoundtrip(\n    parentId: string | null,\n    message: ThreadAssistantMessage,\n    runConfig: RunConfig | undefined,\n    runCallback?: ChatModelAdapter[\"run\"],\n  ) {\n    const messages = parentId ? this.repository.getMessages(parentId) : [];\n\n    // abort existing run\n    this.abortController?.abort();\n    this.abortController = new AbortController();\n\n    const initialContent = message.content;\n    const initialAnnotations = message.metadata?.unstable_annotations;\n    const initialData = message.metadata?.unstable_data;\n    const initialSteps = message.metadata?.steps;\n    const initalCustom = message.metadata?.custom;\n    const updateMessage = (m: Partial<ChatModelRunResult>) => {\n      const newSteps = m.metadata?.steps;\n      const steps = newSteps\n        ? [...(initialSteps ?? []), ...newSteps]\n        : undefined;\n\n      const newAnnotations = m.metadata?.unstable_annotations;\n      const newData = m.metadata?.unstable_data;\n      const annotations = newAnnotations\n        ? [...(initialAnnotations ?? []), ...newAnnotations]\n        : undefined;\n      const data = newData ? [...(initialData ?? []), ...newData] : undefined;\n\n      message = {\n        ...message,\n        ...(m.content\n          ? { content: [...initialContent, ...(m.content ?? [])] }\n          : undefined),\n        status: m.status ?? message.status,\n        ...(m.metadata\n          ? {\n              metadata: {\n                ...message.metadata,\n                ...(m.metadata.unstable_state\n                  ? { unstable_state: m.metadata.unstable_state }\n                  : undefined),\n                ...(annotations\n                  ? { unstable_annotations: annotations }\n                  : undefined),\n                ...(data ? { unstable_data: data } : undefined),\n                ...(steps ? { steps } : undefined),\n                ...(m.metadata?.custom\n                  ? {\n                      custom: { ...(initalCustom ?? {}), ...m.metadata.custom },\n                    }\n                  : undefined),\n              },\n            }\n          : undefined),\n      };\n      this.repository.addOrUpdateMessage(parentId, message);\n      this._notifySubscribers();\n    };\n\n    const maxSteps = this._options.maxSteps ?? 2;\n\n    const steps = message.metadata?.steps?.length ?? 0;\n    if (steps >= maxSteps) {\n      // reached max tool steps\n      updateMessage({\n        status: {\n          type: \"incomplete\",\n          reason: \"tool-calls\",\n        },\n      });\n      return message;\n    } else {\n      updateMessage({\n        status: {\n          type: \"running\",\n        },\n      });\n\n      // Switch to the new message branch right after adding it for the first time\n      this.repository.resetHead(message.id);\n      this._notifySubscribers();\n    }\n\n    try {\n      this._lastRunConfig = runConfig ?? {};\n      const context = this.getModelContext();\n\n      runCallback =\n        runCallback ??\n        this.adapters.chatModel.run.bind(this.adapters.chatModel);\n\n      const abortSignal = this.abortController.signal;\n      const threadId = this._getThreadId?.();\n      const promiseOrGenerator = runCallback({\n        messages,\n        runConfig: this._lastRunConfig,\n        abortSignal,\n        context,\n        config: context,\n        unstable_assistantMessageId: message.id,\n        unstable_threadId: threadId,\n        unstable_parentId: parentId,\n        unstable_getMessage() {\n          return message;\n        },\n      });\n\n      // handle async iterator for streaming results\n      if (Symbol.asyncIterator in promiseOrGenerator) {\n        for await (const r of promiseOrGenerator) {\n          if (abortSignal.aborted) {\n            updateMessage({\n              status: { type: \"incomplete\", reason: \"cancelled\" },\n            });\n            break;\n          }\n\n          updateMessage(r);\n        }\n      } else {\n        updateMessage(await promiseOrGenerator);\n      }\n\n      if (message.status.type === \"running\") {\n        updateMessage({\n          status: { type: \"complete\", reason: \"unknown\" },\n        });\n      }\n    } catch (e) {\n      // TODO this should be handled by the run result stream\n      if (e instanceof AbortError) {\n        updateMessage({\n          status: { type: \"incomplete\", reason: \"cancelled\" },\n        });\n      } else if (e instanceof Error && e.name === \"AbortError\") {\n        updateMessage({\n          status: { type: \"incomplete\", reason: \"cancelled\" },\n        });\n      } else {\n        updateMessage({\n          status: {\n            type: \"incomplete\",\n            reason: \"error\",\n            error:\n              e instanceof Error\n                ? e.message\n                : `[${typeof e}] ${new String(e).toString()}`,\n          },\n        });\n\n        throw e;\n      }\n    } finally {\n      this.abortController = null;\n\n      if (\n        message.status.type === \"complete\" ||\n        message.status.type === \"incomplete\"\n      ) {\n        await this._options.adapters.history?.append({\n          parentId,\n          message: message,\n          runConfig: this._lastRunConfig,\n        });\n      }\n    }\n    return message;\n  }\n\n  public detach() {\n    const error = new AbortError(true);\n    this.abortController?.abort(error);\n    this.abortController = null;\n  }\n\n  public cancelRun() {\n    const error = new AbortError(false);\n    this.abortController?.abort(error);\n    this.abortController = null;\n  }\n\n  public addToolResult({\n    messageId,\n    toolCallId,\n    result,\n    isError,\n    artifact,\n  }: AddToolResultOptions) {\n    const messageData = this.repository.getMessage(messageId);\n    const { parentId } = messageData;\n    let { message } = messageData;\n\n    if (message.role !== \"assistant\")\n      throw new Error(\"Tried to add tool result to non-assistant message\");\n\n    let added = false;\n    let found = false;\n    const newContent = message.content.map((c) => {\n      if (c.type !== \"tool-call\") return c;\n      if (c.toolCallId !== toolCallId) return c;\n      found = true;\n      if (!c.result) added = true;\n      return {\n        ...c,\n        result,\n        artifact,\n        isError,\n      };\n    });\n\n    if (!found)\n      throw new Error(\"Tried to add tool result to non-existing tool call\");\n\n    message = {\n      ...message,\n      content: newContent,\n    };\n    this.repository.addOrUpdateMessage(parentId, message);\n\n    if (\n      added &&\n      shouldContinue(message, this._options.unstable_humanToolNames)\n    ) {\n      this.performRoundtrip(parentId, message, this._lastRunConfig);\n    }\n  }\n\n  public resumeToolCall(_options: ResumeToolCallOptions) {\n    throw new Error(\"Local runtime does not support resuming tool calls.\");\n  }\n}\n", "import { ThreadListRuntimeCore } from \"../core/ThreadListRuntimeCore\";\nimport { BaseSubscribable } from \"../remote-thread-list/BaseSubscribable\";\nimport { LocalThreadRuntimeCore } from \"./LocalThreadRuntimeCore\";\n\nexport type LocalThreadFactory = () => LocalThreadRuntimeCore;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst DEFAULT_THREAD_ID = \"__DEFAULT_ID__\";\nconst DEFAULT_THREAD_DATA = Object.freeze({\n  [DEFAULT_THREAD_ID]: {\n    id: DEFAULT_THREAD_ID,\n    remoteId: undefined,\n    externalId: undefined,\n    status: \"regular\" as const,\n    title: undefined,\n  },\n});\nexport class LocalThreadListRuntimeCore\n  extends BaseSubscribable\n  implements ThreadListRuntimeCore\n{\n  private _mainThread: LocalThreadRuntimeCore;\n  constructor(_threadFactory: LocalThreadFactory) {\n    super();\n\n    this._mainThread = _threadFactory();\n  }\n\n  public get isLoading() {\n    return false;\n  }\n\n  public getMainThreadRuntimeCore() {\n    return this._mainThread;\n  }\n\n  public get newThreadId(): string {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public get threadIds(): readonly string[] {\n    throw EMPTY_ARRAY;\n  }\n\n  public get archivedThreadIds(): readonly string[] {\n    throw EMPTY_ARRAY;\n  }\n\n  public get mainThreadId(): string {\n    return DEFAULT_THREAD_ID;\n  }\n\n  public get threadItems() {\n    return DEFAULT_THREAD_DATA;\n  }\n\n  public getThreadRuntimeCore(): never {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public getLoadThreadsPromise(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public getItemById(threadId: string) {\n    if (threadId === this.mainThreadId) {\n      return {\n        status: \"regular\" as const,\n        id: this.mainThreadId,\n        remoteId: this.mainThreadId,\n        externalId: undefined,\n        title: undefined,\n        isMain: true,\n      };\n    }\n    throw new Error(\"Method not implemented\");\n  }\n\n  public async switchToThread(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public switchToNewThread(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public rename(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public archive(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public detach(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public unarchive(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public delete(): Promise<void> {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public initialize(\n    threadId: string,\n  ): Promise<{ remoteId: string; externalId: string | undefined }> {\n    return Promise.resolve({ remoteId: threadId, externalId: undefined });\n  }\n\n  public generateTitle(): never {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n", "import { BaseAssistantRuntimeCore } from \"../core/BaseAssistantRuntimeCore\";\nimport { LocalThreadRuntimeCore } from \"./LocalThreadRuntimeCore\";\nimport { LocalRuntimeOptionsBase } from \"./LocalRuntimeOptions\";\nimport { LocalThreadListRuntimeCore } from \"./LocalThreadListRuntimeCore\";\nimport { ExportedMessageRepository } from \"../utils/MessageRepository\";\nimport { ThreadMessageLike } from \"../external-store\";\n\nexport class LocalRuntimeCore extends BaseAssistantRuntimeCore {\n  public readonly threads;\n  public readonly Provider = undefined;\n\n  private _options: LocalRuntimeOptionsBase;\n\n  constructor(\n    options: LocalRuntimeOptionsBase,\n    initialMessages: readonly ThreadMessageLike[] | undefined,\n  ) {\n    super();\n\n    this._options = options;\n\n    this.threads = new LocalThreadListRuntimeCore(() => {\n      return new LocalThreadRuntimeCore(this._contextProvider, this._options);\n    });\n\n    if (initialMessages) {\n      this.threads\n        .getMainThreadRuntimeCore()\n        .import(ExportedMessageRepository.fromArray(initialMessages));\n    }\n  }\n}\n", "\"use client\";\n\nimport {\n  FC,\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { AssistantCloud } from \"assistant-cloud\";\nimport { RemoteThreadListAdapter } from \"../types\";\nimport { useAssistantCloudThreadHistoryAdapter } from \"../../../cloud/AssistantCloudThreadHistoryAdapter\";\nimport { RuntimeAdapterProvider } from \"../../adapters/RuntimeAdapterProvider\";\nimport { InMemoryThreadListAdapter } from \"./in-memory\";\nimport { CloudFileAttachmentAdapter } from \"../../adapters\";\n\ntype ThreadData = {\n  externalId: string | undefined;\n};\n\ntype CloudThreadListAdapterOptions = {\n  cloud?: AssistantCloud | undefined;\n\n  create?: (() => Promise<ThreadData>) | undefined;\n  delete?: ((threadId: string) => Promise<void>) | undefined;\n};\n\nconst baseUrl =\n  typeof process !== \"undefined\" &&\n  process?.env?.[\"NEXT_PUBLIC_ASSISTANT_BASE_URL\"];\nconst autoCloud = baseUrl\n  ? new AssistantCloud({ baseUrl, anonymous: true })\n  : undefined;\n\nexport const useCloudThreadListAdapter = (\n  adapter: CloudThreadListAdapterOptions,\n): RemoteThreadListAdapter => {\n  const adapterRef = useRef(adapter);\n  useEffect(() => {\n    adapterRef.current = adapter;\n  }, [adapter]);\n\n  const unstable_Provider = useCallback<FC<PropsWithChildren>>(\n    function Provider({ children }) {\n      const history = useAssistantCloudThreadHistoryAdapter({\n        get current() {\n          return adapterRef.current.cloud ?? autoCloud!;\n        },\n      });\n      const cloudInstance = adapterRef.current.cloud ?? autoCloud!;\n      const attachments = useMemo(\n        () => new CloudFileAttachmentAdapter(cloudInstance),\n        [cloudInstance],\n      );\n\n      const adapters = useMemo(\n        () => ({\n          history,\n          attachments,\n        }),\n        [history, attachments],\n      );\n\n      return (\n        <RuntimeAdapterProvider adapters={adapters}>\n          {children}\n        </RuntimeAdapterProvider>\n      );\n    },\n    [],\n  );\n\n  const cloud = adapter.cloud ?? autoCloud;\n  if (!cloud) return new InMemoryThreadListAdapter();\n\n  return {\n    list: async () => {\n      const { threads } = await cloud.threads.list();\n      return {\n        threads: threads.map((t) => ({\n          status: t.is_archived ? \"archived\" : \"regular\",\n          remoteId: t.id,\n          title: t.title,\n          externalId: t.external_id ?? undefined,\n        })),\n      };\n    },\n\n    initialize: async () => {\n      const createTask = adapter.create?.() ?? Promise.resolve();\n      const t = await createTask;\n      const external_id = t ? t.externalId : undefined;\n      const { thread_id: remoteId } = await cloud.threads.create({\n        last_message_at: new Date(),\n        external_id,\n      });\n\n      return { externalId: external_id, remoteId: remoteId };\n    },\n\n    rename: async (threadId, newTitle) => {\n      return cloud.threads.update(threadId, { title: newTitle });\n    },\n    archive: async (threadId) => {\n      return cloud.threads.update(threadId, { is_archived: true });\n    },\n    unarchive: async (threadId) => {\n      return cloud.threads.update(threadId, { is_archived: false });\n    },\n    delete: async (threadId) => {\n      await adapter.delete?.(threadId);\n      return cloud.threads.delete(threadId);\n    },\n\n    generateTitle: async (threadId, messages) => {\n      // Filter messages to only include content types the title generator understands\n      // (reasoning, source, etc. are not needed for title generation)\n      // TODO serialize these to a more efficient format\n      const filteredMessages = messages.map((msg) => ({\n        ...msg,\n        content: msg.content.filter(\n          (part) => part.type === \"text\" || part.type === \"tool-call\",\n        ),\n      }));\n\n      return cloud.runs.stream({\n        thread_id: threadId,\n        assistant_id: \"system/thread_title\",\n        messages: filteredMessages,\n      });\n    },\n\n    fetch: async (threadId: string) => {\n      const thread = await cloud.threads.get(threadId);\n      return {\n        status: thread.is_archived ? \"archived\" : \"regular\",\n        remoteId: thread.id,\n        title: thread.title,\n        externalId: thread.external_id ?? undefined,\n      };\n    },\n\n    unstable_Provider,\n  };\n};\n", "export type AssistantCloudAuthStrategy = {\n  readonly strategy: \"anon\" | \"jwt\" | \"api-key\";\n  getAuthHeaders(): Promise<Record<string, string> | false>;\n  readAuthHeaders(headers: Headers): void;\n};\n\nconst getJwtExpiry = (jwt: string): number => {\n  try {\n    const parts = jwt.split(\".\");\n    const bodyPart = parts[1];\n    if (!bodyPart) {\n      throw new Error(\"Invalid JWT format\");\n    }\n\n    // Convert from Base64Url to Base64 and add padding if necessary\n    let base64 = bodyPart.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    while (base64.length % 4 !== 0) {\n      base64 += \"=\";\n    }\n\n    // Decode the Base64 string and parse the payload\n    const payload = atob(base64);\n    const payloadObj = JSON.parse(payload);\n    const exp = payloadObj.exp;\n\n    if (!exp || typeof exp !== \"number\") {\n      throw new Error('JWT does not contain a valid \"exp\" field');\n    }\n\n    // Convert expiration time to milliseconds\n    return exp * 1000;\n  } catch (error) {\n    throw new Error(`Unable to determine the token expiry: ${error}`);\n  }\n};\n\nexport class AssistantCloudJWTAuthStrategy\n  implements AssistantCloudAuthStrategy\n{\n  public readonly strategy = \"jwt\";\n\n  private cachedToken: string | null = null;\n  private tokenExpiry: number | null = null;\n  #authTokenCallback: () => Promise<string | null>;\n\n  constructor(authTokenCallback: () => Promise<string | null>) {\n    this.#authTokenCallback = authTokenCallback;\n  }\n\n  public async getAuthHeaders(): Promise<Record<string, string> | false> {\n    const currentTime = Date.now();\n\n    // Use cached token if it's valid for at least 30 more seconds\n    if (\n      this.cachedToken &&\n      this.tokenExpiry &&\n      this.tokenExpiry - currentTime > 30 * 1000\n    ) {\n      return { Authorization: `Bearer ${this.cachedToken}` };\n    }\n\n    // Fetch a new token via the callback\n    const newToken = await this.#authTokenCallback();\n    if (!newToken) return false;\n\n    this.cachedToken = newToken;\n    this.tokenExpiry = getJwtExpiry(newToken);\n\n    return { Authorization: `Bearer ${newToken}` };\n  }\n\n  public readAuthHeaders(headers: Headers) {\n    const authHeader = headers.get(\"Authorization\");\n    if (!authHeader) return;\n\n    const [scheme, token] = authHeader.split(\" \");\n    if (scheme !== \"Bearer\" || !token) {\n      throw new Error(\"Invalid auth header received\");\n    }\n\n    this.cachedToken = token;\n    this.tokenExpiry = getJwtExpiry(token);\n  }\n}\n\nexport class AssistantCloudAPIKeyAuthStrategy\n  implements AssistantCloudAuthStrategy\n{\n  public readonly strategy = \"api-key\";\n\n  #apiKey: string;\n  #userId: string;\n  #workspaceId: string;\n\n  constructor(apiKey: string, userId: string, workspaceId: string) {\n    this.#apiKey = apiKey;\n    this.#userId = userId;\n    this.#workspaceId = workspaceId;\n  }\n\n  public async getAuthHeaders(): Promise<Record<string, string>> {\n    return {\n      Authorization: `Bearer ${this.#apiKey}`,\n      \"Aui-User-Id\": this.#userId,\n      \"Aui-Workspace-Id\": this.#workspaceId,\n    };\n  }\n\n  public readAuthHeaders() {\n    // No operation needed for API key auth\n  }\n}\n\nconst AUI_REFRESH_TOKEN_NAME = \"aui:refresh_token\";\n\nexport class AssistantCloudAnonymousAuthStrategy\n  implements AssistantCloudAuthStrategy\n{\n  public readonly strategy = \"anon\";\n\n  private baseUrl: string;\n  private jwtStrategy: AssistantCloudJWTAuthStrategy;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n    this.jwtStrategy = new AssistantCloudJWTAuthStrategy(async () => {\n      const currentTime = Date.now();\n      const storedRefreshTokenJson = localStorage.getItem(\n        AUI_REFRESH_TOKEN_NAME,\n      );\n      const storedRefreshToken = storedRefreshTokenJson\n        ? (JSON.parse(storedRefreshTokenJson) as {\n            token: string;\n            expires_at: string;\n          })\n        : undefined;\n\n      if (storedRefreshToken) {\n        const refreshExpiry = new Date(storedRefreshToken.expires_at).getTime();\n        if (refreshExpiry - currentTime > 30 * 1000) {\n          const response = await fetch(\n            `${this.baseUrl}/v1/auth/tokens/refresh`,\n            {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({ refresh_token: storedRefreshToken.token }),\n            },\n          );\n\n          if (response.ok) {\n            const data = await response.json();\n            const { access_token, refresh_token } = data;\n            if (refresh_token) {\n              localStorage.setItem(\n                AUI_REFRESH_TOKEN_NAME,\n                JSON.stringify(refresh_token),\n              );\n            }\n            return access_token;\n          }\n        } else {\n          localStorage.removeItem(AUI_REFRESH_TOKEN_NAME);\n        }\n      }\n\n      // No valid refresh token; request a new anonymous token\n      const response = await fetch(`${this.baseUrl}/v1/auth/tokens/anonymous`, {\n        method: \"POST\",\n      });\n\n      if (!response.ok) return null;\n\n      const data = await response.json();\n      const { access_token, refresh_token } = data;\n\n      if (!access_token || !refresh_token) return null;\n\n      localStorage.setItem(\n        AUI_REFRESH_TOKEN_NAME,\n        JSON.stringify(refresh_token),\n      );\n      return access_token;\n    });\n  }\n\n  public async getAuthHeaders(): Promise<Record<string, string> | false> {\n    return this.jwtStrategy.getAuthHeaders();\n  }\n\n  public readAuthHeaders(headers: Headers): void {\n    this.jwtStrategy.readAuthHeaders(headers);\n  }\n}\n", "import {\n  AssistantCloudAuthStrategy,\n  AssistantCloudJWTAuthStrategy,\n  AssistantCloudAPIKeyAuthStrategy,\n  AssistantCloudAnonymousAuthStrategy,\n} from \"./AssistantCloudAuthStrategy\";\n\nexport type AssistantCloudConfig =\n  | {\n      baseUrl: string;\n      authToken: () => Promise<string | null>;\n    }\n  | {\n      apiKey: string;\n      userId: string;\n      workspaceId: string;\n    }\n  | {\n      baseUrl: string;\n      anonymous: true;\n    };\n\nclass CloudAPIError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"APIError\";\n  }\n}\n\ntype MakeRequestOptions = {\n  method?: \"POST\" | \"PUT\" | \"DELETE\" | undefined;\n  headers?: Record<string, string> | undefined;\n  query?: Record<string, string | number | boolean> | undefined;\n  body?: object | undefined;\n};\n\nexport class AssistantCloudAPI {\n  public _auth: AssistantCloudAuthStrategy;\n  public _baseUrl;\n\n  constructor(config: AssistantCloudConfig) {\n    if (\"authToken\" in config) {\n      this._baseUrl = config.baseUrl;\n      this._auth = new AssistantCloudJWTAuthStrategy(config.authToken);\n    } else if (\"apiKey\" in config) {\n      this._baseUrl = \"https://backend.assistant-api.com\";\n      this._auth = new AssistantCloudAPIKeyAuthStrategy(\n        config.apiKey,\n        config.userId,\n        config.workspaceId,\n      );\n    } else if (\"anonymous\" in config) {\n      this._baseUrl = config.baseUrl;\n      this._auth = new AssistantCloudAnonymousAuthStrategy(config.baseUrl);\n    } else {\n      throw new Error(\n        \"Invalid configuration: Must provide authToken, apiKey, or anonymous configuration\",\n      );\n    }\n  }\n\n  public async initializeAuth() {\n    return !!this._auth.getAuthHeaders();\n  }\n\n  public async makeRawRequest(\n    endpoint: string,\n    options: MakeRequestOptions = {},\n  ) {\n    const authHeaders = await this._auth.getAuthHeaders();\n    if (!authHeaders) throw new Error(\"Authorization failed\");\n\n    const headers = {\n      ...authHeaders,\n      ...options.headers,\n      \"Content-Type\": \"application/json\",\n    };\n\n    const queryParams = new URLSearchParams();\n    if (options.query) {\n      for (const [key, value] of Object.entries(options.query)) {\n        if (value === false) continue;\n        if (value === true) {\n          queryParams.set(key, \"true\");\n        } else {\n          queryParams.set(key, value.toString());\n        }\n      }\n    }\n\n    const url = new URL(`${this._baseUrl}/v1${endpoint}`);\n    url.search = queryParams.toString();\n\n    const response = await fetch(url, {\n      method: options.method ?? \"GET\",\n      headers,\n      body: options.body ? JSON.stringify(options.body) : null,\n    });\n\n    this._auth.readAuthHeaders(response.headers);\n\n    if (!response.ok) {\n      const text = await response.text();\n      try {\n        const body = JSON.parse(text);\n        throw new CloudAPIError(body.message);\n      } catch {\n        throw new Error(\n          `Request failed with status ${response.status}, ${text}`,\n        );\n      }\n    }\n\n    return response;\n  }\n\n  public async makeRequest(endpoint: string, options: MakeRequestOptions = {}) {\n    const response = await this.makeRawRequest(endpoint, options);\n    return response.json();\n  }\n}\n", "import { AssistantCloudAPI } from \"./AssistantCloudAPI\";\n\ntype AssistantCloudAuthTokensCreateResponse = {\n  token: string;\n};\n\nexport class AssistantCloudAuthTokens {\n  constructor(private cloud: AssistantCloudAPI) {}\n\n  public async create(): Promise<AssistantCloudAuthTokensCreateResponse> {\n    return this.cloud.makeRequest(\"/auth/tokens\", { method: \"POST\" });\n  }\n}\n", "import { AssistantCloudAPI } from \"./AssistantCloudAPI\";\nimport { AssistantStream, PlainTextDecoder } from \"assistant-stream\";\n\ntype AssistantCloudRunsStreamBody = {\n  thread_id: string;\n  assistant_id: \"system/thread_title\";\n  messages: readonly unknown[]; // TODO type\n};\n\nexport class AssistantCloudRuns {\n  constructor(private cloud: AssistantCloudAPI) {}\n\n  public __internal_getAssistantOptions(assistantId: string) {\n    return {\n      api: `${this.cloud._baseUrl}/v1/runs/stream`,\n      headers: async () => {\n        const headers = await this.cloud._auth.getAuthHeaders();\n        if (!headers) throw new Error(\"Authorization failed\");\n        return {\n          ...headers,\n          Accept: \"text/plain\",\n        };\n      },\n      body: {\n        assistant_id: assistantId,\n        response_format: \"vercel-ai-data-stream/v1\",\n        thread_id: \"unstable_todo\",\n      },\n    };\n  }\n\n  public async stream(\n    body: AssistantCloudRunsStreamBody,\n  ): Promise<AssistantStream> {\n    const response = await this.cloud.makeRawRequest(\"/runs/stream\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"text/plain\",\n      },\n      body,\n    });\n    return AssistantStream.fromResponse(response, new PlainTextDecoder());\n  }\n}\n", "import { ReadonlyJSONObject } from \"assistant-stream/utils\";\nimport { AssistantCloudAPI } from \"./AssistantCloudAPI\";\n\nexport type CloudMessage = {\n  id: string;\n  parent_id: string | null;\n  height: number;\n  created_at: Date;\n  updated_at: Date;\n  format: \"aui/v0\" | string;\n  content: ReadonlyJSONObject;\n};\n\ntype AssistantCloudThreadMessageListQuery = {\n  format?: string;\n};\n\ntype AssistantCloudThreadMessageListResponse = {\n  messages: CloudMessage[];\n};\n\ntype AssistantCloudThreadMessageCreateBody = {\n  parent_id: string | null;\n  format: \"aui/v0\" | string;\n  content: ReadonlyJSONObject;\n};\n\ntype AssistantCloudMessageCreateResponse = {\n  message_id: string;\n};\n\nexport class AssistantCloudThreadMessages {\n  constructor(private cloud: AssistantCloudAPI) {}\n\n  public async list(\n    threadId: string,\n    query?: AssistantCloudThreadMessageListQuery,\n  ): Promise<AssistantCloudThreadMessageListResponse> {\n    return this.cloud.makeRequest(\n      `/threads/${encodeURIComponent(threadId)}/messages`,\n      { query },\n    );\n  }\n\n  public async create(\n    threadId: string,\n    body: AssistantCloudThreadMessageCreateBody,\n  ): Promise<AssistantCloudMessageCreateResponse> {\n    return this.cloud.makeRequest(\n      `/threads/${encodeURIComponent(threadId)}/messages`,\n      { method: \"POST\", body },\n    );\n  }\n}\n", "import { AssistantCloudAPI } from \"./AssistantCloudAPI\";\nimport { AssistantCloudThreadMessages } from \"./AssistantCloudThreadMessages\";\n\ntype AssistantCloudThreadsListQuery = {\n  is_archived?: boolean;\n  limit?: number;\n  after?: string;\n};\n\ntype CloudThread = {\n  title: string;\n  last_message_at: Date;\n  metadata: unknown;\n  external_id: string | null;\n  id: string;\n  project_id: string;\n  created_at: Date;\n  updated_at: Date;\n  workspace_id: string;\n  is_archived: boolean;\n};\n\ntype AssistantCloudThreadsListResponse = {\n  threads: CloudThread[];\n};\n\ntype AssistantCloudThreadsCreateBody = {\n  title?: string | undefined;\n  last_message_at: Date;\n  metadata?: unknown | undefined;\n  external_id?: string | undefined;\n};\n\ntype AssistantCloudThreadsCreateResponse = {\n  thread_id: string;\n};\n\ntype AssistantCloudThreadsUpdateBody = {\n  title?: string | undefined;\n  last_message_at?: Date | undefined;\n  metadata?: unknown | undefined;\n  is_archived?: boolean | undefined;\n};\n\nexport class AssistantCloudThreads {\n  public readonly messages: AssistantCloudThreadMessages;\n\n  constructor(private cloud: AssistantCloudAPI) {\n    this.messages = new AssistantCloudThreadMessages(cloud);\n  }\n\n  public async list(\n    query?: AssistantCloudThreadsListQuery,\n  ): Promise<AssistantCloudThreadsListResponse> {\n    return this.cloud.makeRequest(\"/threads\", { query });\n  }\n\n  public async get(threadId: string): Promise<CloudThread> {\n    return this.cloud.makeRequest(`/threads/${encodeURIComponent(threadId)}`);\n  }\n\n  public async create(\n    body: AssistantCloudThreadsCreateBody,\n  ): Promise<AssistantCloudThreadsCreateResponse> {\n    return this.cloud.makeRequest(\"/threads\", { method: \"POST\", body });\n  }\n\n  public async update(\n    threadId: string,\n    body: AssistantCloudThreadsUpdateBody,\n  ): Promise<void> {\n    return this.cloud.makeRequest(`/threads/${encodeURIComponent(threadId)}`, {\n      method: \"PUT\",\n      body,\n    });\n  }\n\n  public async delete(threadId: string): Promise<void> {\n    return this.cloud.makeRequest(`/threads/${encodeURIComponent(threadId)}`, {\n      method: \"DELETE\",\n    });\n  }\n}\n", "import { AssistantCloudAPI } from \"./AssistantCloudAPI\";\n\ntype PdfToImagesRequestBody = {\n  file_blob?: string | undefined;\n  file_url?: string | undefined;\n};\n\ntype PdfToImagesResponse = {\n  success: boolean;\n  urls: string[];\n  message: string;\n};\n\ntype GeneratePresignedUploadUrlRequestBody = {\n  filename: string;\n};\n\ntype GeneratePresignedUploadUrlResponse = {\n  success: boolean;\n  signedUrl: string;\n  expiresAt: string;\n  publicUrl: string;\n};\n\nexport class AssistantCloudFiles {\n  constructor(private cloud: AssistantCloudAPI) {}\n\n  public async pdfToImages(\n    body: PdfToImagesRequestBody,\n  ): Promise<PdfToImagesResponse> {\n    return this.cloud.makeRequest(\"/files/pdf-to-images\", {\n      method: \"POST\",\n      body,\n    });\n  }\n\n  public async generatePresignedUploadUrl(\n    body: GeneratePresignedUploadUrlRequestBody,\n  ): Promise<GeneratePresignedUploadUrlResponse> {\n    return this.cloud.makeRequest(\n      \"/files/attachments/generate-presigned-upload-url\",\n      {\n        method: \"POST\",\n        body,\n      },\n    );\n  }\n}\n", "import { AssistantCloudAPI, AssistantCloudConfig } from \"./AssistantCloudAPI\";\nimport { AssistantCloudAuthTokens } from \"./AssistantCloudAuthTokens\";\nimport { AssistantCloudRuns } from \"./AssistantCloudRuns\";\nimport { AssistantCloudThreads } from \"./AssistantCloudThreads\";\nimport { AssistantCloudFiles } from \"./AssistantCloudFiles\";\n\nexport class AssistantCloud {\n  public readonly threads;\n  public readonly auth;\n  public readonly runs;\n  public readonly files;\n\n  constructor(config: AssistantCloudConfig) {\n    const api = new AssistantCloudAPI(config);\n    this.threads = new AssistantCloudThreads(api);\n    this.auth = {\n      tokens: new AssistantCloudAuthTokens(api),\n    };\n    this.runs = new AssistantCloudRuns(api);\n    this.files = new AssistantCloudFiles(api);\n  }\n}\n", "import { RefObject, useState } from \"react\";\nimport { ThreadHistoryAdapter } from \"../runtime-cores/adapters/thread-history/ThreadHistoryAdapter\";\nimport { ExportedMessageRepositoryItem } from \"../runtime-cores/utils/MessageRepository\";\nimport { AssistantCloud } from \"assistant-cloud\";\nimport { auiV0Decode, auiV0Encode } from \"./auiV0\";\nimport {\n  MessageFormatAdapter,\n  MessageFormatItem,\n  MessageFormatRepository,\n  MessageStorageEntry,\n} from \"../runtime-cores/adapters/thread-history/MessageFormatAdapter\";\nimport { GenericThreadHistoryAdapter } from \"../runtime-cores/adapters/thread-history/ThreadHistoryAdapter\";\nimport { ReadonlyJSONObject } from \"assistant-stream/utils\";\nimport { AssistantClient, useAui } from \"@assistant-ui/store\";\nimport { ThreadListItemMethods } from \"../../types/scopes\";\n\n// Global WeakMap to store message ID mappings across adapter instances\nconst globalMessageIdMapping = new WeakMap<\n  ThreadListItemMethods,\n  Record<string, string | Promise<string>>\n>();\n\nclass FormattedThreadHistoryAdapter<TMessage, TStorageFormat>\n  implements GenericThreadHistoryAdapter<TMessage>\n{\n  constructor(\n    private parent: AssistantCloudThreadHistoryAdapter,\n    private formatAdapter: MessageFormatAdapter<TMessage, TStorageFormat>,\n  ) {}\n\n  async append(item: MessageFormatItem<TMessage>) {\n    // Encode the message using the format adapter\n    const encoded = this.formatAdapter.encode(item);\n    const messageId = this.formatAdapter.getId(item.message);\n\n    // Delegate to parent's internal append method with the encoded format\n    return this.parent._appendWithFormat(\n      item.parentId,\n      messageId,\n      this.formatAdapter.format,\n      encoded,\n    );\n  }\n\n  async load(): Promise<MessageFormatRepository<TMessage>> {\n    // Delegate to parent's internal load method with format filter\n    return this.parent._loadWithFormat(\n      this.formatAdapter.format,\n      (message: MessageStorageEntry<TStorageFormat>) =>\n        this.formatAdapter.decode(message),\n    );\n  }\n}\n\nclass AssistantCloudThreadHistoryAdapter implements ThreadHistoryAdapter {\n  constructor(\n    private cloudRef: RefObject<AssistantCloud>,\n    private aui: AssistantClient,\n  ) {}\n\n  private get _getIdForLocalId(): Record<string, string | Promise<string>> {\n    if (!globalMessageIdMapping.has(this.aui.threadListItem())) {\n      globalMessageIdMapping.set(this.aui.threadListItem(), {});\n    }\n    return globalMessageIdMapping.get(this.aui.threadListItem())!;\n  }\n\n  withFormat<TMessage, TStorageFormat>(\n    formatAdapter: MessageFormatAdapter<TMessage, TStorageFormat>,\n  ): GenericThreadHistoryAdapter<TMessage> {\n    return new FormattedThreadHistoryAdapter(this, formatAdapter);\n  }\n\n  async append({ parentId, message }: ExportedMessageRepositoryItem) {\n    const { remoteId } = await this.aui.threadListItem().initialize();\n    const task = this.cloudRef.current.threads.messages\n      .create(remoteId, {\n        parent_id: parentId\n          ? ((await this._getIdForLocalId[parentId]) ?? parentId)\n          : null,\n        format: \"aui/v0\",\n        content: auiV0Encode(message),\n      })\n      .then(({ message_id }) => {\n        this._getIdForLocalId[message.id] = message_id;\n        return message_id;\n      });\n\n    this._getIdForLocalId[message.id] = task;\n\n    return task.then(() => {});\n  }\n\n  async load() {\n    const remoteId = this.aui.threadListItem().getState().remoteId;\n    if (!remoteId) return { messages: [] };\n    const { messages } = await this.cloudRef.current.threads.messages.list(\n      remoteId,\n      {\n        format: \"aui/v0\",\n      },\n    );\n    const payload = {\n      messages: messages\n        .filter(\n          (m): m is typeof m & { format: \"aui/v0\" } => m.format === \"aui/v0\",\n        )\n        .map(auiV0Decode)\n        .reverse(),\n    };\n    return payload;\n  }\n\n  // Internal methods for FormattedThreadHistoryAdapter\n  async _appendWithFormat<T>(\n    parentId: string | null,\n    messageId: string,\n    format: string,\n    content: T,\n  ) {\n    const { remoteId } = await this.aui.threadListItem().initialize();\n\n    const task = this.cloudRef.current.threads.messages\n      .create(remoteId, {\n        parent_id: parentId\n          ? ((await this._getIdForLocalId[parentId]) ?? parentId)\n          : null,\n        format,\n        content: content as ReadonlyJSONObject,\n      })\n      .then(({ message_id }) => {\n        this._getIdForLocalId[messageId] = message_id;\n        return message_id;\n      });\n\n    this._getIdForLocalId[messageId] = task;\n\n    return task.then(() => {});\n  }\n\n  async _loadWithFormat<TMessage, TStorageFormat>(\n    format: string,\n    decoder: (\n      message: MessageStorageEntry<TStorageFormat>,\n    ) => MessageFormatItem<TMessage>,\n  ): Promise<MessageFormatRepository<TMessage>> {\n    const remoteId = this.aui.threadListItem().getState().remoteId;\n    if (!remoteId) return { messages: [] };\n\n    const { messages } = await this.cloudRef.current.threads.messages.list(\n      remoteId,\n      {\n        format,\n      },\n    );\n\n    return {\n      messages: messages\n        .filter((m) => m.format === format)\n        .map((m) =>\n          decoder({\n            id: m.id,\n            parent_id: m.parent_id,\n            format: m.format,\n            content: m.content as TStorageFormat,\n          }),\n        )\n        .reverse(),\n    };\n  }\n}\n\nexport const useAssistantCloudThreadHistoryAdapter = (\n  cloudRef: RefObject<AssistantCloud>,\n): ThreadHistoryAdapter => {\n  const aui = useAui();\n  const [adapter] = useState(\n    () => new AssistantCloudThreadHistoryAdapter(cloudRef, aui),\n  );\n\n  return adapter;\n};\n", "import {\n  ReadonlyJSONArray,\n  ReadonlyJSONObject,\n  ReadonlyJSONValue,\n} from \"assistant-stream/utils\";\n\nexport function isJSONValue(\n  value: unknown,\n  currentDepth: number = 0,\n): value is ReadonlyJSONValue {\n  // Protect against too deep recursion\n  if (currentDepth > 100) {\n    return false;\n  }\n\n  if (\n    value === null ||\n    typeof value === \"string\" ||\n    typeof value === \"boolean\"\n  ) {\n    return true;\n  }\n\n  // Handle special number cases\n  if (typeof value === \"number\") {\n    return !Number.isNaN(value) && Number.isFinite(value);\n  }\n\n  if (Array.isArray(value)) {\n    return value.every((item) => isJSONValue(item, currentDepth + 1));\n  }\n\n  if (typeof value === \"object\") {\n    return Object.entries(value).every(\n      ([key, val]) =>\n        typeof key === \"string\" && isJSONValue(val, currentDepth + 1),\n    );\n  }\n\n  return false;\n}\n\nexport function isJSONArray(value: unknown): value is ReadonlyJSONArray {\n  return Array.isArray(value) && value.every(isJSONValue);\n}\n\nexport function isJSONObject(value: unknown): value is ReadonlyJSONObject {\n  return (\n    value != null &&\n    typeof value === \"object\" &&\n    Object.entries(value).every(\n      ([key, val]) => typeof key === \"string\" && isJSONValue(val),\n    )\n  );\n}\n", "import { ThreadMessage } from \"../../types\";\nimport { MessageStatus } from \"../../types/AssistantTypes\";\nimport { fromThreadMessageLike } from \"../runtime-cores/external-store/ThreadMessageLike\";\nimport { CloudMessage } from \"assistant-cloud\";\nimport { isJSONValue } from \"../../utils/json/is-json\";\nimport { ReadonlyJSONObject, ReadonlyJSONValue } from \"assistant-stream/utils\";\nimport { ExportedMessageRepositoryItem } from \"../runtime-cores/utils/MessageRepository\";\n\ntype AuiV0MessageMessagePart =\n  | {\n      readonly type: \"text\";\n      readonly text: string;\n    }\n  | {\n      readonly type: \"reasoning\";\n      readonly text: string;\n    }\n  | {\n      readonly type: \"source\";\n      readonly sourceType: \"url\";\n      readonly id: string;\n      readonly url: string;\n      readonly title?: string;\n    }\n  | {\n      readonly type: \"tool-call\";\n      readonly toolCallId: string;\n      readonly toolName: string;\n      readonly args: ReadonlyJSONObject;\n      readonly result?: ReadonlyJSONValue;\n      readonly isError?: true;\n    }\n  | {\n      readonly type: \"tool-call\";\n      readonly toolCallId: string;\n      readonly toolName: string;\n      readonly argsText: string;\n      readonly result?: ReadonlyJSONValue;\n      readonly isError?: true;\n    }\n  | {\n      readonly type: \"image\";\n      readonly image: string;\n    }\n  | {\n      readonly type: \"file\";\n      readonly data: string;\n      readonly mimeType: string;\n      readonly filename?: string;\n    };\n\ntype AuiV0Message = {\n  readonly role: \"assistant\" | \"user\" | \"system\";\n  readonly status?: MessageStatus;\n  readonly content: readonly AuiV0MessageMessagePart[];\n  readonly metadata: {\n    readonly unstable_state?: ReadonlyJSONValue;\n    readonly unstable_annotations: readonly ReadonlyJSONValue[];\n    readonly unstable_data: readonly ReadonlyJSONValue[];\n    readonly steps: readonly {\n      readonly usage?: {\n        readonly promptTokens: number;\n        readonly completionTokens: number;\n      };\n    }[];\n    readonly custom: ReadonlyJSONObject;\n  };\n};\n\nexport const auiV0Encode = (message: ThreadMessage): AuiV0Message => {\n  // TODO attachments are currently intentionally ignored\n  // info: ID and createdAt are ignored (we use the server value instead)\n  return {\n    role: message.role,\n    content: message.content.map((part) => {\n      const type = part.type;\n      switch (type) {\n        case \"text\": {\n          return {\n            type: \"text\",\n            text: part.text,\n          };\n        }\n\n        case \"reasoning\": {\n          return {\n            type: \"reasoning\",\n            text: part.text,\n          };\n        }\n\n        case \"source\": {\n          return {\n            type: \"source\",\n            sourceType: part.sourceType,\n            id: part.id,\n            url: part.url,\n            ...(part.title ? { title: part.title } : undefined),\n          };\n        }\n\n        case \"tool-call\": {\n          if (!isJSONValue(part.result)) {\n            console.warn(\n              `tool-call result is not JSON! ${JSON.stringify(part)}`,\n            );\n          }\n          return {\n            type: \"tool-call\",\n            toolCallId: part.toolCallId,\n            toolName: part.toolName,\n            ...(JSON.stringify(part.args) === part.argsText\n              ? {\n                  args: part.args,\n                }\n              : { argsText: part.argsText }),\n            ...(part.result\n              ? { result: part.result as ReadonlyJSONValue }\n              : {}),\n            ...(part.isError ? { isError: true } : {}),\n          };\n        }\n\n        case \"image\": {\n          return {\n            type: \"image\",\n            image: part.image,\n          };\n        }\n\n        case \"file\": {\n          return {\n            type: \"file\",\n            data: part.data,\n            mimeType: part.mimeType,\n            ...(part.filename ? { filename: part.filename } : undefined),\n          };\n        }\n\n        default: {\n          const unhandledType: \"audio\" | \"data\" = type;\n          throw new Error(\n            `Message part type not supported by aui/v0: ${unhandledType}`,\n          );\n        }\n      }\n    }),\n    metadata: message.metadata as AuiV0Message[\"metadata\"],\n    ...(message.status\n      ? {\n          status:\n            message.status?.type === \"running\"\n              ? {\n                  type: \"incomplete\",\n                  reason: \"cancelled\",\n                }\n              : message.status,\n        }\n      : undefined),\n  };\n};\n\nexport const auiV0Decode = (\n  cloudMessage: CloudMessage & { format: \"aui/v0\" },\n): ExportedMessageRepositoryItem => {\n  const payload = cloudMessage.content as unknown as AuiV0Message;\n  const message = fromThreadMessageLike(\n    {\n      id: cloudMessage.id,\n      createdAt: cloudMessage.created_at,\n      ...payload,\n    },\n    cloudMessage.id,\n    {\n      type: \"complete\",\n      reason: \"unknown\",\n    },\n  );\n\n  return {\n    parentId: cloudMessage.parent_id,\n    message,\n  };\n};\n", "import { AssistantRuntimeCore } from \"../runtime-cores/core/AssistantRuntimeCore\";\nimport { ModelContextProvider } from \"../../model-context/ModelContextTypes\";\nimport { ThreadRuntime } from \"./ThreadRuntime\";\nimport { Unsubscribe } from \"../../types\";\nimport { ThreadListRuntime, ThreadListRuntimeImpl } from \"./ThreadListRuntime\";\nimport { ExportedMessageRepository, ThreadMessageLike } from \"../runtime-cores\";\n\nexport type AssistantRuntime = {\n  /**\n   * The threads in this assistant.\n   */\n  readonly threads: ThreadListRuntime;\n\n  /**\n   * The currently selected main thread. Equivalent to `threads.main`.\n   */\n  readonly thread: ThreadRuntime;\n\n  /**\n   * @deprecated This field was renamed to `threads`.\n   */\n  readonly threadList: ThreadListRuntime;\n\n  /**\n   * Switch to a new thread.\n   *\n   * @deprecated This method was moved to `threads.switchToNewThread`.\n   */\n  switchToNewThread(): void;\n\n  /**\n   * Switch to a thread.\n   *\n   * @param threadId The thread ID to switch to.\n   * @deprecated This method was moved to `threads.switchToThread`.\n   */\n  switchToThread(threadId: string): void;\n\n  /**\n   * Register a model context provider. Model context providers are configuration such as system message, temperature, etc. that are set in the frontend.\n   *\n   * @param provider The model context provider to register.\n   */\n  registerModelContextProvider(provider: ModelContextProvider): Unsubscribe;\n\n  /**\n   * @deprecated This method was renamed to `registerModelContextProvider`.\n   */\n  registerModelConfigProvider(provider: ModelContextProvider): Unsubscribe;\n\n  /**\n   * @deprecated Use `runtime.thread.reset(initialMessages)`.\n   */\n  reset: unknown; // make it a type error\n};\n\nexport class AssistantRuntimeImpl implements AssistantRuntime {\n  public readonly threads;\n  public get threadList() {\n    return this.threads;\n  }\n\n  public readonly _thread: ThreadRuntime;\n\n  public constructor(private readonly _core: AssistantRuntimeCore) {\n    this.threads = new ThreadListRuntimeImpl(_core.threads);\n    this._thread = this.threads.main;\n\n    this.__internal_bindMethods();\n  }\n\n  protected __internal_bindMethods() {\n    this.switchToNewThread = this.switchToNewThread.bind(this);\n    this.switchToThread = this.switchToThread.bind(this);\n    this.registerModelContextProvider =\n      this.registerModelContextProvider.bind(this);\n    this.registerModelConfigProvider =\n      this.registerModelConfigProvider.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n\n  public get thread() {\n    return this._thread;\n  }\n\n  public switchToNewThread() {\n    return this._core.threads.switchToNewThread();\n  }\n\n  public switchToThread(threadId: string) {\n    return this._core.threads.switchToThread(threadId);\n  }\n\n  public registerModelContextProvider(provider: ModelContextProvider) {\n    return this._core.registerModelContextProvider(provider);\n  }\n\n  public registerModelConfigProvider(provider: ModelContextProvider) {\n    return this.registerModelContextProvider(provider);\n  }\n\n  public reset({\n    initialMessages,\n  }: {\n    initialMessages?: ThreadMessageLike[];\n  } = {}) {\n    return this._core.threads\n      .getMainThreadRuntimeCore()\n      .import(ExportedMessageRepository.fromArray(initialMessages ?? []));\n  }\n}\n", "import type { ThreadHistoryAdapter } from \"../adapters/thread-history/ThreadHistoryAdapter\";\nimport type { AttachmentAdapter } from \"../adapters/attachment/AttachmentAdapter\";\nimport type { ThreadMessageLike } from \"../external-store\";\nimport type { FeedbackAdapter } from \"../adapters/feedback/FeedbackAdapter\";\nimport type {\n  SpeechSynthesisAdapter,\n  DictationAdapter,\n} from \"../adapters/speech/SpeechAdapterTypes\";\nimport type { ChatModelAdapter } from \"./ChatModelAdapter\";\nimport type { AssistantCloud } from \"assistant-cloud\";\nimport type { SuggestionAdapter } from \"../adapters\";\n\nexport type LocalRuntimeOptionsBase = {\n  maxSteps?: number | undefined;\n  adapters: {\n    chatModel: ChatModelAdapter;\n    history?: ThreadHistoryAdapter | undefined;\n    attachments?: AttachmentAdapter | undefined;\n    speech?: SpeechSynthesisAdapter | undefined;\n    dictation?: DictationAdapter | undefined;\n    feedback?: FeedbackAdapter | undefined;\n    suggestion?: SuggestionAdapter | undefined;\n  };\n\n  /**\n   * Names of tools that are allowed to interrupt the run in order to wait for human/external approval.\n   */\n  unstable_humanToolNames?: string[] | undefined;\n};\n\n// TODO align LocalRuntimeOptions with LocalRuntimeOptionsBase\nexport type LocalRuntimeOptions = Omit<LocalRuntimeOptionsBase, \"adapters\"> & {\n  cloud?: AssistantCloud | undefined;\n  initialMessages?: readonly ThreadMessageLike[] | undefined;\n  adapters?: Omit<LocalRuntimeOptionsBase[\"adapters\"], \"chatModel\"> | undefined;\n};\n\nexport const splitLocalRuntimeOptions = <T extends LocalRuntimeOptions>(\n  options: T,\n) => {\n  const {\n    cloud,\n    initialMessages,\n    maxSteps,\n    adapters,\n    unstable_humanToolNames,\n    ...rest\n  } = options;\n\n  return {\n    localRuntimeOptions: {\n      cloud,\n      initialMessages,\n      maxSteps,\n      adapters,\n      unstable_humanToolNames,\n    },\n    otherOptions: rest,\n  };\n};\n", "\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport {\n  MessagePartStatus,\n  ReasoningMessagePart,\n  TextMessagePart,\n} from \"../../types/AssistantTypes\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useSmoothStatusStore } from \"./SmoothContext\";\nimport { writableStore } from \"../../context/ReadonlyStore\";\nimport { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\n\nclass TextStreamAnimator {\n  private animationFrameId: number | null = null;\n  private lastUpdateTime: number = Date.now();\n\n  public targetText: string = \"\";\n\n  constructor(\n    public currentText: string,\n    private setText: (newText: string) => void,\n  ) {}\n\n  start() {\n    if (this.animationFrameId !== null) return;\n    this.lastUpdateTime = Date.now();\n    this.animate();\n  }\n\n  stop() {\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  private animate = () => {\n    const currentTime = Date.now();\n    const deltaTime = currentTime - this.lastUpdateTime;\n    let timeToConsume = deltaTime;\n\n    const remainingChars = this.targetText.length - this.currentText.length;\n    const baseTimePerChar = Math.min(5, 250 / remainingChars);\n\n    let charsToAdd = 0;\n    while (timeToConsume >= baseTimePerChar && charsToAdd < remainingChars) {\n      charsToAdd++;\n      timeToConsume -= baseTimePerChar;\n    }\n\n    if (charsToAdd !== remainingChars) {\n      this.animationFrameId = requestAnimationFrame(this.animate);\n    } else {\n      this.animationFrameId = null;\n    }\n    if (charsToAdd === 0) return;\n\n    this.currentText = this.targetText.slice(\n      0,\n      this.currentText.length + charsToAdd,\n    );\n    this.lastUpdateTime = currentTime - timeToConsume;\n    this.setText(this.currentText);\n  };\n}\n\nconst SMOOTH_STATUS: MessagePartStatus = Object.freeze({\n  type: \"running\",\n});\n\nexport const useSmooth = (\n  state: MessagePartState & (TextMessagePart | ReasoningMessagePart),\n  smooth: boolean = false,\n): MessagePartState & (TextMessagePart | ReasoningMessagePart) => {\n  const { text } = state;\n  const id = useAuiState(({ message }) => message.id);\n\n  const idRef = useRef(id);\n  const [displayedText, setDisplayedText] = useState(text);\n\n  const smoothStatusStore = useSmoothStatusStore({ optional: true });\n  const setText = useCallbackRef((text: string) => {\n    setDisplayedText(text);\n    if (smoothStatusStore) {\n      const target =\n        displayedText !== text || state.status.type === \"running\"\n          ? SMOOTH_STATUS\n          : state.status;\n      writableStore(smoothStatusStore).setState(target, true);\n    }\n  });\n\n  // TODO this is hacky\n  useEffect(() => {\n    if (smoothStatusStore) {\n      const target =\n        smooth && (displayedText !== text || state.status.type === \"running\")\n          ? SMOOTH_STATUS\n          : state.status;\n      writableStore(smoothStatusStore).setState(target, true);\n    }\n  }, [smoothStatusStore, smooth, text, displayedText, state.status]);\n\n  const [animatorRef] = useState<TextStreamAnimator>(\n    new TextStreamAnimator(text, setText),\n  );\n\n  useEffect(() => {\n    if (!smooth) {\n      animatorRef.stop();\n      return;\n    }\n\n    if (idRef.current !== id || !text.startsWith(animatorRef.targetText)) {\n      idRef.current = id;\n      setText(text);\n\n      animatorRef.currentText = text;\n      animatorRef.targetText = text;\n      animatorRef.stop();\n\n      return;\n    }\n\n    animatorRef.targetText = text;\n    animatorRef.start();\n  }, [setText, animatorRef, id, smooth, text]);\n\n  useEffect(() => {\n    return () => {\n      animatorRef.stop();\n    };\n  }, [animatorRef]);\n\n  return useMemo(\n    () =>\n      smooth\n        ? {\n            type: \"text\",\n            text: displayedText,\n            status: text === displayedText ? state.status : SMOOTH_STATUS,\n          }\n        : state,\n    [smooth, displayedText, state, text],\n  );\n};\n", "\"use client\";\n\nimport {\n  ComponentType,\n  createContext,\n  FC,\n  forwardRef,\n  PropsWithChildren,\n  useContext,\n  useState,\n} from \"react\";\nimport { ReadonlyStore } from \"../../context/ReadonlyStore\";\nimport { create, UseBoundStore } from \"zustand\";\nimport {\n  MessagePartStatus,\n  ToolCallMessagePartStatus,\n} from \"../../types/AssistantTypes\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { createContextStoreHook } from \"../../context/react/utils/createContextStoreHook\";\n\ntype SmoothContextValue = {\n  useSmoothStatus: UseBoundStore<\n    ReadonlyStore<MessagePartStatus | ToolCallMessagePartStatus>\n  >;\n};\n\nconst SmoothContext = createContext<SmoothContextValue | null>(null);\n\nconst makeSmoothContext = (\n  initialState: MessagePartStatus | ToolCallMessagePartStatus,\n) => {\n  const useSmoothStatus = create(() => initialState);\n  return { useSmoothStatus };\n};\n\nexport const SmoothContextProvider: FC<PropsWithChildren> = ({ children }) => {\n  const outer = useSmoothContext({ optional: true });\n  const aui = useAui();\n\n  const [context] = useState(() =>\n    makeSmoothContext(aui.part().getState().status),\n  );\n\n  // do not wrap if there is an outer SmoothContextProvider\n  if (outer) return children;\n\n  return (\n    <SmoothContext.Provider value={context}>{children}</SmoothContext.Provider>\n  );\n};\n\nexport const withSmoothContextProvider = <C extends ComponentType<any>>(\n  Component: C,\n): C => {\n  const Wrapped = forwardRef((props, ref) => {\n    return (\n      <SmoothContextProvider>\n        <Component {...(props as any)} ref={ref} />\n      </SmoothContextProvider>\n    );\n  });\n  Wrapped.displayName = Component.displayName;\n  return Wrapped as any;\n};\n\nfunction useSmoothContext(options?: {\n  optional?: false | undefined;\n}): SmoothContextValue;\nfunction useSmoothContext(options?: {\n  optional?: boolean | undefined;\n}): SmoothContextValue | null;\nfunction useSmoothContext(options?: { optional?: boolean | undefined }) {\n  const context = useContext(SmoothContext);\n  if (!options?.optional && !context)\n    throw new Error(\n      \"This component must be used within a SmoothContextProvider.\",\n    );\n  return context;\n}\n\nexport const { useSmoothStatus, useSmoothStatusStore } = createContextStoreHook(\n  useSmoothContext,\n  \"useSmoothStatus\",\n);\n", "const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n", "import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n", "import { UseBoundStore } from \"zustand\";\nimport { ReadonlyStore } from \"../../ReadonlyStore\";\n\n/**\n * Creates hooks for accessing a store within a context.\n * @param contextHook - The hook to access the context.\n * @param contextKey - The key of the store in the context.\n * @returns An object containing the hooks: `use...` and `use...Store`.\n */\nexport function createContextStoreHook<T, K extends keyof T & string>(\n  contextHook: (options?: { optional?: boolean }) => T | null,\n  contextKey: K,\n) {\n  type StoreType = T[K];\n  type StateType = StoreType extends ReadonlyStore<infer S> ? S : never;\n\n  // Define useStoreStoreHook with overloads\n  function useStoreStoreHook(): ReadonlyStore<StateType>;\n  function useStoreStoreHook(options: {\n    optional: true;\n  }): ReadonlyStore<StateType> | null;\n  function useStoreStoreHook(options?: {\n    optional?: boolean;\n  }): ReadonlyStore<StateType> | null {\n    const context = contextHook(options);\n    if (!context) return null;\n    return context[contextKey] as ReadonlyStore<StateType>;\n  }\n\n  // Define useStoreHook with overloads\n  function useStoreHook(): StateType;\n  function useStoreHook<TSelected>(\n    selector: (state: StateType) => TSelected,\n  ): TSelected;\n  function useStoreHook(options: { optional: true }): StateType | null;\n  function useStoreHook<TSelected>(options: {\n    optional: true;\n    selector?: (state: StateType) => TSelected;\n  }): TSelected | null;\n  function useStoreHook<TSelected>(\n    param?:\n      | ((state: StateType) => TSelected)\n      | {\n          optional?: boolean;\n          selector?: (state: StateType) => TSelected;\n        },\n  ): TSelected | StateType | null {\n    let optional = false;\n    let selector: ((state: StateType) => TSelected) | undefined;\n\n    if (typeof param === \"function\") {\n      selector = param;\n    } else if (param && typeof param === \"object\") {\n      optional = !!param.optional;\n      selector = param.selector;\n    }\n\n    const store = useStoreStoreHook({\n      optional,\n    } as any) as UseBoundStore<ReadonlyStore<StateType>>;\n    if (!store) return null;\n    return selector ? store(selector) : store();\n  }\n\n  // Return an object with keys based on contextKey\n  return {\n    [contextKey]: useStoreHook,\n    [`${contextKey}Store`]: useStoreStoreHook,\n  } as {\n    [P in K]: typeof useStoreHook;\n  } & {\n    [P in `${K}Store`]: typeof useStoreStoreHook;\n  };\n}\n", "import type { StoreApi } from \"zustand\";\n\nexport type ReadonlyStore<T> = Omit<StoreApi<T>, \"setState\" | \"destroy\">;\n\nexport const writableStore = <T>(store: ReadonlyStore<T> | undefined) => {\n  return store as unknown as StoreApi<T>;\n};\n", "\"use client\";\n\nimport {\n  FC,\n  useCallback,\n  useRef,\n  useEffect,\n  memo,\n  PropsWithChildren,\n  ComponentType,\n  useMemo,\n} from \"react\";\nimport { UseBoundStore, StoreApi, create } from \"zustand\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { ThreadListItemRuntimeProvider } from \"../../../context/providers\";\nimport {\n  ThreadListRuntimeCore,\n  ThreadRuntimeCore,\n  ThreadRuntimeImpl,\n} from \"../../../internal\";\nimport { BaseSubscribable } from \"./BaseSubscribable\";\nimport { AssistantRuntime } from \"../../runtime\";\nimport { ThreadListRuntimeImpl } from \"../../runtime/ThreadListRuntime\";\n\ntype RemoteThreadListHook = () => AssistantRuntime;\n\ntype RemoteThreadListHookInstance = {\n  runtime?: ThreadRuntimeCore;\n};\nexport class RemoteThreadListHookInstanceManager extends BaseSubscribable {\n  private useRuntimeHook: UseBoundStore<\n    StoreApi<{ useRuntime: RemoteThreadListHook }>\n  >;\n  private instances = new Map<string, RemoteThreadListHookInstance>();\n  private useAliveThreadsKeysChanged = create(() => ({}));\n  private parent: ThreadListRuntimeCore;\n\n  constructor(\n    runtimeHook: RemoteThreadListHook,\n    parent: ThreadListRuntimeCore,\n  ) {\n    super();\n    this.parent = parent;\n    this.useRuntimeHook = create(() => ({ useRuntime: runtimeHook }));\n  }\n\n  public startThreadRuntime(threadId: string) {\n    if (!this.instances.has(threadId)) {\n      this.instances.set(threadId, {});\n      this.useAliveThreadsKeysChanged.setState({}, true);\n    }\n\n    return new Promise<ThreadRuntimeCore>((resolve, reject) => {\n      const callback = () => {\n        const instance = this.instances.get(threadId);\n        if (!instance) {\n          dispose();\n          reject(new Error(\"Thread was deleted before runtime was started\"));\n        } else if (!instance.runtime) {\n          return; // misc update\n        } else {\n          dispose();\n          resolve(instance.runtime);\n        }\n      };\n      const dispose = this.subscribe(callback);\n      callback();\n    });\n  }\n\n  public getThreadRuntimeCore(threadId: string) {\n    const instance = this.instances.get(threadId);\n    if (!instance) return undefined;\n    return instance.runtime;\n  }\n\n  public stopThreadRuntime(threadId: string) {\n    this.instances.delete(threadId);\n    this.useAliveThreadsKeysChanged.setState({}, true);\n  }\n\n  public setRuntimeHook(newRuntimeHook: RemoteThreadListHook) {\n    const prevRuntimeHook = this.useRuntimeHook.getState().useRuntime;\n    if (prevRuntimeHook !== newRuntimeHook) {\n      this.useRuntimeHook.setState({ useRuntime: newRuntimeHook }, true);\n    }\n  }\n\n  private _InnerActiveThreadProvider: FC<{\n    threadId: string;\n  }> = ({ threadId }) => {\n    const { useRuntime } = this.useRuntimeHook();\n    const runtime = useRuntime();\n\n    const threadBinding = (runtime.thread as ThreadRuntimeImpl)\n      .__internal_threadBinding;\n\n    const updateRuntime = useCallback(() => {\n      const aliveThread = this.instances.get(threadId);\n      if (!aliveThread)\n        throw new Error(\"Thread not found. This is a bug in assistant-ui.\");\n\n      aliveThread.runtime = threadBinding.getState();\n      this._notifySubscribers();\n    }, [threadId, threadBinding]);\n\n    const isMounted = useRef(false);\n    if (!isMounted.current) {\n      updateRuntime();\n    }\n\n    useEffect(() => {\n      isMounted.current = true;\n      updateRuntime();\n      return threadBinding.outerSubscribe(updateRuntime);\n    }, [threadBinding, updateRuntime]);\n\n    const aui = useAui();\n    const initPromiseRef = useRef<Promise<unknown> | undefined>(undefined);\n\n    useEffect(() => {\n      const runtimeCore = threadBinding.getState();\n      const setGetInitializePromise = (runtimeCore as Record<string, unknown>)[\n        \"__internal_setGetInitializePromise\"\n      ];\n      if (typeof setGetInitializePromise === \"function\") {\n        setGetInitializePromise.call(runtimeCore, () => initPromiseRef.current);\n      }\n    }, [threadBinding]);\n\n    useEffect(() => {\n      return runtime.threads.main.unstable_on(\"initialize\", () => {\n        const state = aui.threadListItem().getState();\n        if (state.status === \"new\") {\n          initPromiseRef.current = aui.threadListItem().initialize();\n\n          const dispose = runtime.thread.unstable_on(\"runEnd\", () => {\n            dispose();\n\n            aui.threadListItem().generateTitle();\n          });\n        }\n      });\n    }, [runtime, aui]);\n\n    return null;\n  };\n\n  private _OuterActiveThreadProvider: FC<{\n    threadId: string;\n    provider: ComponentType<PropsWithChildren>;\n  }> = memo(({ threadId, provider: Provider }) => {\n    const runtime = useMemo(\n      () => new ThreadListRuntimeImpl(this.parent).getItemById(threadId),\n      [threadId],\n    );\n\n    return (\n      <ThreadListItemRuntimeProvider runtime={runtime}>\n        <Provider>\n          <this._InnerActiveThreadProvider threadId={threadId} />\n        </Provider>\n      </ThreadListItemRuntimeProvider>\n    );\n  });\n\n  public __internal_RenderThreadRuntimes: FC<{\n    provider: ComponentType<PropsWithChildren>;\n  }> = ({ provider }) => {\n    this.useAliveThreadsKeysChanged(); // trigger re-render on alive threads change\n\n    return Array.from(this.instances.keys()).map((threadId) => (\n      <this._OuterActiveThreadProvider\n        key={threadId}\n        threadId={threadId}\n        provider={provider}\n      />\n    ));\n  };\n}\n", "\"use client\";\n\nimport { FC, memo, PropsWithChildren, useEffect } from \"react\";\nimport { useAui, AuiProvider, AssistantClient } from \"@assistant-ui/store\";\nimport { AssistantRuntime } from \"./runtime/AssistantRuntime\";\nimport { AssistantRuntimeCore } from \"./runtime-cores/core/AssistantRuntimeCore\";\nimport { RuntimeAdapter } from \"./RuntimeAdapter\";\nimport { ThreadPrimitiveViewportProvider } from \"../context/providers/ThreadViewportProvider\";\nimport { DevToolsProviderApi } from \"../devtools\";\n\nexport namespace AssistantRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    /**\n     * The runtime to provide to the rest of your app.\n     */\n    runtime: AssistantRuntime;\n\n    /**\n     * The aui instance to extend. If not provided, a new aui instance will be created.\n     */\n    aui?: AssistantClient;\n  }>;\n}\n\nconst getRenderComponent = (runtime: AssistantRuntime) => {\n  return (runtime as { _core?: AssistantRuntimeCore })._core?.RenderComponent;\n};\n\nexport const AssistantRuntimeProviderImpl: FC<\n  AssistantRuntimeProvider.Props\n> = ({ children, aui: parent = null, runtime }) => {\n  const aui = useAui({ threads: RuntimeAdapter(runtime) }, { parent: parent });\n\n  useEffect(() => {\n    if (\n      typeof process === \"undefined\" ||\n      process.env[\"NODE_ENV\"] === \"production\"\n    )\n      return;\n    return DevToolsProviderApi.register(aui);\n  }, [aui]);\n\n  const RenderComponent = getRenderComponent(runtime);\n\n  return (\n    <AuiProvider value={aui}>\n      {RenderComponent && <RenderComponent />}\n\n      {/* TODO temporarily allow accessing viewport state from outside the viewport */}\n      {/* TODO figure out if this behavior should be deprecated, since it is quite hacky */}\n      <ThreadPrimitiveViewportProvider>\n        {children}\n      </ThreadPrimitiveViewportProvider>\n    </AuiProvider>\n  );\n};\n\nexport const AssistantRuntimeProvider = memo(AssistantRuntimeProviderImpl);\n", "import { tapState, tapEffect } from \"@assistant-ui/tap\";\nimport { SubscribableWithState } from \"../runtime/subscribable/Subscribable\";\n\nexport const tapSubscribable = <T>(\n  subscribable: Omit<SubscribableWithState<T, any>, \"path\">,\n) => {\n  const [, setState] = tapState(subscribable.getState);\n  tapEffect(() => {\n    setState(subscribable.getState());\n    return subscribable.subscribe(() => {\n      setState(subscribable.getState());\n    });\n  }, [subscribable]);\n\n  return subscribable.getState();\n};\n", "import { resource, tapEffect } from \"@assistant-ui/tap\";\nimport { type ClientOutput, tapAssistantEmit } from \"@assistant-ui/store\";\nimport {\n  ThreadListItemEventType,\n  ThreadListItemRuntime,\n} from \"../runtime/ThreadListItemRuntime\";\nimport { Unsubscribe } from \"../../types\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nexport const ThreadListItemClient = resource(\n  ({\n    runtime,\n  }: {\n    runtime: ThreadListItemRuntime;\n  }): ClientOutput<\"threadListItem\"> => {\n    const state = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind thread list item events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to thread list item events\n      const threadListItemEvents: ThreadListItemEventType[] = [\n        \"switchedTo\",\n        \"switchedAway\",\n      ];\n\n      for (const event of threadListItemEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          emit(`threadListItem.${event}`, {\n            threadId: runtime.getState()!.id,\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        switchTo: runtime.switchTo,\n        rename: runtime.rename,\n        archive: runtime.archive,\n        unarchive: runtime.unarchive,\n        delete: runtime.delete,\n        generateTitle: runtime.generateTitle,\n        initialize: runtime.initialize,\n        detach: runtime.detach,\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n", "import { resource } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport { AttachmentRuntime } from \"../runtime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nexport const AttachmentRuntimeClient = resource(\n  ({ runtime }: { runtime: AttachmentRuntime }): ClientOutput<\"attachment\"> => {\n    const state = tapSubscribable(runtime);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        remove: runtime.remove,\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n", "import {\n  resource,\n  tapMemo,\n  tapEffect,\n  tapInlineResource,\n  type tapRef,\n  withKey,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapAssistantEmit,\n  tapClientLookup,\n} from \"@assistant-ui/store\";\nimport {\n  ComposerRuntime,\n  EditComposerRuntime,\n} from \"../runtime/ComposerRuntime\";\nimport { Unsubscribe } from \"../../types\";\nimport { ComposerRuntimeEventType } from \"../runtime-cores/core/ComposerRuntimeCore\";\nimport { ComposerState } from \"../../types/scopes\";\nimport { AttachmentRuntimeClient } from \"./AttachmentRuntimeClient\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nconst ComposerAttachmentClientByIndex = resource(\n  ({ runtime, index }: { runtime: ComposerRuntime; index: number }) => {\n    const attachmentRuntime = tapMemo(\n      () => runtime.getAttachmentByIndex(index),\n      [runtime, index],\n    );\n\n    return tapInlineResource(\n      AttachmentRuntimeClient({\n        runtime: attachmentRuntime,\n      }),\n    );\n  },\n);\n\nexport const ComposerClient = resource(\n  ({\n    threadIdRef,\n    messageIdRef,\n    runtime,\n  }: {\n    threadIdRef: tapRef.RefObject<string>;\n    messageIdRef?: tapRef.RefObject<string>;\n    runtime: ComposerRuntime;\n  }): ClientOutput<\"composer\"> => {\n    const runtimeState = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind composer events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to composer events\n      const composerEvents: ComposerRuntimeEventType[] = [\n        \"send\",\n        \"attachmentAdd\",\n      ];\n\n      for (const event of composerEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          emit(`composer.${event}`, {\n            threadId: threadIdRef.current,\n            ...(messageIdRef && { messageId: messageIdRef.current }),\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit, threadIdRef, messageIdRef]);\n\n    const attachments = tapClientLookup(\n      () =>\n        runtimeState.attachments.map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            ComposerAttachmentClientByIndex({\n              runtime,\n              index: idx,\n            }),\n          ),\n        ),\n      [runtimeState.attachments, runtime],\n    );\n\n    const state = tapMemo<ComposerState>(() => {\n      return {\n        text: runtimeState.text,\n        role: runtimeState.role,\n        attachments: attachments.state,\n        runConfig: runtimeState.runConfig,\n        isEditing: runtimeState.isEditing,\n        canCancel: runtimeState.canCancel,\n        attachmentAccept: runtimeState.attachmentAccept,\n        isEmpty: runtimeState.isEmpty,\n        type: runtimeState.type ?? \"thread\",\n        dictation: runtimeState.dictation,\n      };\n    }, [runtimeState, attachments.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setText: runtime.setText,\n        setRole: runtime.setRole,\n        setRunConfig: runtime.setRunConfig,\n        addAttachment: runtime.addAttachment,\n        reset: runtime.reset,\n        clearAttachments: runtime.clearAttachments,\n        send: runtime.send,\n        cancel: runtime.cancel,\n        beginEdit:\n          (runtime as EditComposerRuntime).beginEdit ??\n          (() => {\n            throw new Error(\"beginEdit is not supported in this runtime\");\n          }),\n        startDictation: runtime.startDictation,\n        stopDictation: runtime.stopDictation,\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n", "import { resource } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport { MessagePartRuntime } from \"../runtime/MessagePartRuntime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\n\nexport const MessagePartClient = resource(\n  ({ runtime }: { runtime: MessagePartRuntime }): ClientOutput<\"part\"> => {\n    const state = tapSubscribable(runtime);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: (result) => runtime.addToolResult(result),\n        resumeToolCall: (payload) => runtime.resumeToolCall(payload),\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n", "import {\n  withKey,\n  resource,\n  tapInlineResource,\n  tapMemo,\n  tapState,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { MessageRuntime } from \"../runtime/MessageRuntime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\nimport { ComposerClient } from \"./ComposerRuntimeClient\";\nimport { MessagePartClient } from \"./MessagePartRuntimeClient\";\nimport { RefObject } from \"react\";\nimport { MessageState } from \"../../types/scopes\";\nimport { AttachmentRuntimeClient } from \"./AttachmentRuntimeClient\";\n\nconst MessageAttachmentClientByIndex = resource(\n  ({ runtime, index }: { runtime: MessageRuntime; index: number }) => {\n    const attachmentRuntime = tapMemo(\n      () => runtime.getAttachmentByIndex(index),\n      [runtime, index],\n    );\n    return tapInlineResource(\n      AttachmentRuntimeClient({ runtime: attachmentRuntime }),\n    );\n  },\n);\n\nconst MessagePartByIndex = resource(\n  ({ runtime, index }: { runtime: MessageRuntime; index: number }) => {\n    const partRuntime = tapMemo(\n      () => runtime.getMessagePartByIndex(index),\n      [runtime, index],\n    );\n    return tapInlineResource(MessagePartClient({ runtime: partRuntime }));\n  },\n);\n\nexport const MessageClient = resource(\n  ({\n    runtime,\n    threadIdRef,\n  }: {\n    runtime: MessageRuntime;\n    threadIdRef: RefObject<string>;\n  }): ClientOutput<\"message\"> => {\n    const runtimeState = tapSubscribable(runtime);\n\n    const [isCopiedState, setIsCopied] = tapState(false);\n    const [isHoveringState, setIsHovering] = tapState(false);\n\n    const messageIdRef = tapMemo(\n      () => ({\n        get current() {\n          return runtime.getState().id;\n        },\n      }),\n      [runtime],\n    );\n\n    const composer = tapClientResource(\n      ComposerClient({\n        runtime: runtime.composer,\n        threadIdRef,\n        messageIdRef,\n      }),\n    );\n\n    const parts = tapClientLookup(\n      () =>\n        runtimeState.content.map((part, idx) =>\n          withKey(\n            \"toolCallId\" in part && part.toolCallId != null\n              ? `toolCallId-${part.toolCallId}`\n              : `index-${idx}`,\n            MessagePartByIndex({ runtime, index: idx }),\n          ),\n        ),\n      [runtimeState.content, runtime],\n    );\n\n    const attachments = tapClientLookup(\n      () =>\n        (runtimeState.attachments ?? []).map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            MessageAttachmentClientByIndex({ runtime, index: idx }),\n          ),\n        ),\n      [runtimeState.attachments, runtime],\n    );\n\n    const state = tapMemo<MessageState>(() => {\n      return {\n        ...(runtimeState as MessageState),\n\n        parts: parts.state,\n        composer: composer.state,\n\n        isCopied: isCopiedState,\n        isHovering: isHoveringState,\n      };\n    }, [\n      runtimeState,\n      parts.state,\n      composer.state,\n      isCopiedState,\n      isHoveringState,\n    ]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n\n        composer: composer.methods,\n\n        reload: (config) => runtime.reload(config),\n        speak: () => runtime.speak(),\n        stopSpeaking: () => runtime.stopSpeaking(),\n        submitFeedback: (feedback) => runtime.submitFeedback(feedback),\n        switchToBranch: (options) => runtime.switchToBranch(options),\n        getCopyText: () => runtime.unstable_getCopyText(),\n        part: (selector) => {\n          if (\"index\" in selector) {\n            return parts.get({ index: selector.index });\n          } else {\n            return parts.get({ key: `toolCallId-${selector.toolCallId}` });\n          }\n        },\n\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n\n        setIsCopied,\n        setIsHovering,\n\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n", "import { ThreadRuntimeEventType } from \"../runtime-cores/core/ThreadRuntimeCore\";\nimport { ThreadRuntime } from \"../runtime/ThreadRuntime\";\nimport {\n  resource,\n  tapInlineResource,\n  tapMemo,\n  tapEffect,\n  type tapRef,\n  withKey,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapAssistantEmit,\n  tapClientLookup,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { ComposerClient } from \"./ComposerRuntimeClient\";\nimport { MessageClient } from \"./MessageRuntimeClient\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\nimport { Unsubscribe } from \"../../types\";\nimport { ThreadState } from \"../../types/scopes\";\n\nconst MessageClientById = resource(\n  ({\n    runtime,\n    id,\n    threadIdRef,\n  }: {\n    runtime: ThreadRuntime;\n    id: string;\n    threadIdRef: tapRef.RefObject<string>;\n  }) => {\n    const messageRuntime = tapMemo(\n      () => runtime.getMessageById(id),\n      [runtime, id],\n    );\n\n    return tapInlineResource(\n      MessageClient({ runtime: messageRuntime, threadIdRef }),\n    );\n  },\n);\n\nexport const ThreadClient = resource(\n  ({ runtime }: { runtime: ThreadRuntime }): ClientOutput<\"thread\"> => {\n    const runtimeState = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind thread events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to thread events\n      const threadEvents: ThreadRuntimeEventType[] = [\n        \"runStart\",\n        \"runEnd\",\n        \"initialize\",\n        \"modelContextUpdate\",\n      ];\n\n      for (const event of threadEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          const threadId = runtime.getState()?.threadId || \"unknown\";\n          emit(`thread.${event}`, {\n            threadId,\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit]);\n\n    const threadIdRef = tapMemo(\n      () => ({\n        get current() {\n          return runtime.getState()!.threadId;\n        },\n      }),\n      [runtime],\n    );\n\n    const composer = tapClientResource(\n      ComposerClient({\n        runtime: runtime.composer,\n        threadIdRef,\n      }),\n    );\n\n    const messages = tapClientLookup(\n      () =>\n        runtimeState.messages.map((m) =>\n          withKey(m.id, MessageClientById({ runtime, id: m.id, threadIdRef })),\n        ),\n      [runtimeState.messages, runtime, threadIdRef],\n    );\n\n    const state = tapMemo<ThreadState>(() => {\n      return {\n        isEmpty: messages.state.length === 0 && !runtimeState.isLoading,\n        isDisabled: runtimeState.isDisabled,\n        isLoading: runtimeState.isLoading,\n        isRunning: runtimeState.isRunning,\n        capabilities: runtimeState.capabilities,\n        state: runtimeState.state,\n        suggestions: runtimeState.suggestions,\n        extras: runtimeState.extras,\n        speech: runtimeState.speech,\n\n        composer: composer.state,\n        messages: messages.state,\n      };\n    }, [runtimeState, messages, composer.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        composer: composer.methods,\n        append: runtime.append,\n        startRun: runtime.startRun,\n        unstable_resumeRun: runtime.unstable_resumeRun,\n        cancelRun: runtime.cancelRun,\n        getModelContext: runtime.getModelContext,\n        export: runtime.export,\n        import: runtime.import,\n        reset: runtime.reset,\n        stopSpeaking: runtime.stopSpeaking,\n        startVoice: async () => {\n          throw new Error(\"startVoice is not supported in this runtime\");\n        },\n        stopVoice: async () => {\n          throw new Error(\"stopVoice is not supported in this runtime\");\n        },\n        message: (selector) => {\n          if (\"id\" in selector) {\n            return messages.get({ key: selector.id });\n          } else {\n            return messages.get(selector);\n          }\n        },\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n", "import {\n  withKey,\n  resource,\n  tapInlineResource,\n  tapMemo,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { ThreadListRuntime } from \"../runtime/ThreadListRuntime\";\nimport { tapSubscribable } from \"../util-hooks/tapSubscribable\";\nimport { ThreadListItemClient } from \"./ThreadListItemRuntimeClient\";\nimport { ThreadClient } from \"./ThreadRuntimeClient\";\nimport { ThreadsState } from \"../../types/scopes\";\nimport type { AssistantRuntime } from \"../runtime/AssistantRuntime\";\n\nconst ThreadListItemClientById = resource(\n  ({ runtime, id }: { runtime: ThreadListRuntime; id: string }) => {\n    const threadListItemRuntime = tapMemo(\n      () => runtime.getItemById(id),\n      [runtime, id],\n    );\n    return tapInlineResource(\n      ThreadListItemClient({\n        runtime: threadListItemRuntime,\n      }),\n    );\n  },\n);\n\nexport const ThreadListClient = resource(\n  ({\n    runtime,\n    __internal_assistantRuntime,\n  }: {\n    runtime: ThreadListRuntime;\n    __internal_assistantRuntime: AssistantRuntime;\n  }): ClientOutput<\"threads\"> => {\n    const runtimeState = tapSubscribable(runtime);\n\n    const main = tapClientResource(\n      ThreadClient({\n        runtime: runtime.main,\n      }),\n    );\n\n    const threadItems = tapClientLookup(\n      () =>\n        Object.keys(runtimeState.threadItems).map((id) =>\n          withKey(id, ThreadListItemClientById({ runtime, id })),\n        ),\n      [runtimeState.threadItems, runtime],\n    );\n\n    const state = tapMemo<ThreadsState>(() => {\n      return {\n        mainThreadId: runtimeState.mainThreadId,\n        newThreadId: runtimeState.newThreadId ?? null,\n        isLoading: runtimeState.isLoading,\n        threadIds: runtimeState.threadIds,\n        archivedThreadIds: runtimeState.archivedThreadIds,\n        threadItems: threadItems.state,\n\n        main: main.state,\n      };\n    }, [runtimeState, threadItems.state, main.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        thread: () => main.methods,\n        item: (threadIdOrOptions) => {\n          if (threadIdOrOptions === \"main\") {\n            return threadItems.get({ key: state.mainThreadId });\n          }\n\n          if (\"id\" in threadIdOrOptions) {\n            return threadItems.get({ key: threadIdOrOptions.id });\n          }\n\n          const { index, archived = false } = threadIdOrOptions;\n          const id = archived\n            ? state.archivedThreadIds[index]!\n            : state.threadIds[index]!;\n          return threadItems.get({ key: id });\n        },\n        switchToThread: async (threadId) => {\n          await runtime.switchToThread(threadId);\n        },\n        switchToNewThread: async () => {\n          await runtime.switchToNewThread();\n        },\n        __internal_getAssistantRuntime: () => __internal_assistantRuntime,\n      },\n    };\n  },\n);\n", "import { resource, tapMemo, tapState } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport { CompositeContextProvider } from \"../utils/CompositeContextProvider\";\nimport type { ModelContextState } from \"../types/scopes\";\n\nconst version = 1;\n\nexport const ModelContext = resource((): ClientOutput<\"modelContext\"> => {\n  const [state] = tapState<ModelContextState>(\n    () => ({ version: version + 1 }) as unknown as ModelContextState,\n  );\n  const composite = tapMemo(() => new CompositeContextProvider(), []);\n\n  return {\n    state,\n    methods: {\n      getState: () => state,\n      getModelContext: () => composite.getModelContext(),\n      subscribe: (callback) => composite.subscribe(callback),\n      register: (provider) => composite.registerModelContextProvider(provider),\n    },\n  };\n});\n", "\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\nimport type { ToolCallMessagePartComponent } from \"../types/MessagePartComponentTypes\";\nimport type { Tool } from \"assistant-stream\";\n\nexport type AssistantToolProps<\n  TArgs extends Record<string, unknown>,\n  TResult,\n> = Tool<TArgs, TResult> & {\n  toolName: string;\n  render?: ToolCallMessagePartComponent<TArgs, TResult> | undefined;\n};\n\nexport const useAssistantTool = <\n  TArgs extends Record<string, unknown>,\n  TResult,\n>(\n  tool: AssistantToolProps<TArgs, TResult>,\n) => {\n  const aui = useAui();\n\n  useEffect(() => {\n    if (!tool.render) return undefined;\n    return aui.tools().setToolUI(tool.toolName, tool.render);\n  }, [aui, tool.toolName, tool.render]);\n\n  useEffect(() => {\n    const { toolName, render, ...rest } = tool;\n    const context = {\n      tools: {\n        [toolName]: rest,\n      },\n    };\n    return aui.modelContext().register({\n      getModelContext: () => context,\n    });\n  }, [aui, tool]);\n};\n", "\"use client\";\n\nimport { FC } from \"react\";\nimport { type AssistantToolProps, useAssistantTool } from \"./useAssistantTool\";\n\nexport type AssistantTool = FC & {\n  unstable_tool: AssistantToolProps<any, any>;\n};\n\nexport const makeAssistantTool = <\n  TArgs extends Record<string, unknown>,\n  TResult,\n>(\n  tool: AssistantToolProps<TArgs, TResult>,\n) => {\n  const Tool: AssistantTool = () => {\n    useAssistantTool(tool);\n    return null;\n  };\n  Tool.unstable_tool = tool;\n  return Tool;\n};\n", "\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\nimport type { ToolCallMessagePartComponent } from \"../types/MessagePartComponentTypes\";\n\nexport type AssistantToolUIProps<TArgs, TResult> = {\n  toolName: string;\n  render: ToolCallMessagePartComponent<TArgs, TResult>;\n};\n\nexport const useAssistantToolUI = (\n  tool: AssistantToolUIProps<any, any> | null,\n) => {\n  const aui = useAui();\n  useEffect(() => {\n    if (!tool?.toolName || !tool?.render) return undefined;\n    return aui.tools().setToolUI(tool.toolName, tool.render);\n  }, [aui, tool?.toolName, tool?.render]);\n};\n", "\"use client\";\n\nimport { FC } from \"react\";\nimport {\n  type AssistantToolUIProps,\n  useAssistantToolUI,\n} from \"./useAssistantToolUI\";\n\nexport type AssistantToolUI = FC & {\n  unstable_tool: AssistantToolUIProps<any, any>;\n};\n\nexport const makeAssistantToolUI = <TArgs, TResult>(\n  tool: AssistantToolUIProps<TArgs, TResult>,\n) => {\n  const ToolUI: AssistantToolUI = () => {\n    useAssistantToolUI(tool);\n    return null;\n  };\n  ToolUI.unstable_tool = tool;\n  return ToolUI;\n};\n", "\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\n\nexport type AssistantInstructionsConfig = {\n  disabled?: boolean | undefined;\n  instruction: string;\n};\n\nconst getInstructions = (\n  instruction: string | AssistantInstructionsConfig,\n): AssistantInstructionsConfig => {\n  if (typeof instruction === \"string\") return { instruction };\n  return instruction;\n};\n\nexport const useAssistantInstructions = (\n  config: string | AssistantInstructionsConfig,\n) => {\n  const { instruction, disabled = false } = getInstructions(config);\n  const aui = useAui();\n\n  useEffect(() => {\n    if (disabled) return;\n\n    const config = {\n      system: instruction,\n    };\n    return aui.modelContext().register({\n      getModelContext: () => config,\n    });\n  }, [aui, instruction, disabled]);\n};\n", "\"use client\";\n\nimport { FC, useCallback, useEffect, useState } from \"react\";\nimport { ToolCallMessagePartProps } from \"../types\";\nimport { create } from \"zustand\";\n\nexport const useInlineRender = <TArgs, TResult>(\n  toolUI: FC<ToolCallMessagePartProps<TArgs, TResult>>,\n): FC<ToolCallMessagePartProps<TArgs, TResult>> => {\n  const [useToolUIStore] = useState(() =>\n    create(() => ({\n      toolUI,\n    })),\n  );\n\n  useEffect(() => {\n    useToolUIStore.setState({ toolUI });\n  }, [toolUI, useToolUIStore]);\n\n  return useCallback(\n    function ToolUI(args) {\n      const store = useToolUIStore();\n      return store.toolUI(args);\n    },\n    [useToolUIStore],\n  );\n};\n", "import { Tool } from \"assistant-stream\";\n\n// TODO re-add the inferrence of the parameters\n\nexport function tool<TArgs extends Record<string, unknown>, TResult = any>(\n  tool: Tool<TArgs, TResult>,\n): Tool<TArgs, TResult> {\n  return tool;\n}\n", "\"use client\";\n\nimport {\n  useEffect,\n  useRef,\n  forwardRef,\n  ComponentType,\n  ForwardedRef,\n  PropsWithoutRef,\n  useId,\n  createContext,\n  useContext,\n} from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { tool } from \"./tool\";\n\nconst click = tool({\n  parameters: {\n    type: \"object\",\n    properties: {\n      clickId: {\n        type: \"string\",\n      },\n    },\n    required: [\"clickId\"],\n  },\n  execute: async ({ clickId }: { clickId: string }) => {\n    const escapedClickId = CSS.escape(clickId);\n    const el = document.querySelector(`[data-click-id='${escapedClickId}']`);\n    if (el instanceof HTMLElement) {\n      el.click();\n\n      // todo make adjustable\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n      return {};\n    } else {\n      return \"Element not found\";\n    }\n  },\n});\n\nconst edit = tool({\n  parameters: {\n    type: \"object\",\n    properties: {\n      editId: {\n        type: \"string\",\n      },\n      value: {\n        type: \"string\",\n      },\n    },\n    required: [\"editId\", \"value\"],\n  },\n  execute: async ({ editId, value }: { editId: string; value: string }) => {\n    const escapedEditId = CSS.escape(editId);\n    const el = document.querySelector(`[data-edit-id='${escapedEditId}']`);\n    if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement) {\n      el.value = value;\n      el.dispatchEvent(new Event(\"input\", { bubbles: true }));\n      el.dispatchEvent(new Event(\"change\", { bubbles: true }));\n\n      // todo make adjustable\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n      return {};\n    } else {\n      return \"Element not found\";\n    }\n  },\n});\n\nconst ReadableContext = createContext<boolean>(false);\n\nexport const makeAssistantVisible = <T extends ComponentType<any>>(\n  Component: T,\n  config?: { clickable?: boolean | undefined; editable?: boolean | undefined },\n) => {\n  const ReadableComponent = forwardRef(\n    (props: PropsWithoutRef<T>, outerRef: ForwardedRef<any>) => {\n      const isNestedReadable = useContext(ReadableContext);\n\n      const clickId = useId();\n      const componentRef = useRef<HTMLElement>(null);\n\n      const aui = useAui();\n\n      const { clickable, editable } = config ?? {};\n      useEffect(() => {\n        return aui.modelContext().register({\n          getModelContext: () => {\n            return {\n              tools: {\n                ...(clickable ? { click } : {}),\n                ...(editable ? { edit } : {}),\n              },\n              system: !isNestedReadable // only pass content if this readable isn't nested in another readable\n                ? componentRef.current?.outerHTML\n                : undefined,\n            };\n          },\n        });\n      }, [isNestedReadable, aui, clickable, editable]);\n\n      const ref = useComposedRefs(componentRef, outerRef);\n\n      return (\n        <ReadableContext.Provider value={true}>\n          <Component\n            {...(props as any)}\n            {...(config?.clickable ? { \"data-click-id\": clickId } : {})}\n            {...(config?.editable ? { \"data-edit-id\": clickId } : {})}\n            ref={ref}\n          />\n        </ReadableContext.Provider>\n      );\n    },\n  );\n\n  ReadableComponent.displayName = Component.displayName;\n\n  return ReadableComponent as unknown as T;\n};\n\nexport default makeAssistantVisible;\n", "import { resource, tapState, tapEffect, tapCallback } from \"@assistant-ui/tap\";\nimport {\n  tapAssistantClientRef,\n  type ClientOutput,\n  attachDefaultPeers,\n} from \"@assistant-ui/store\";\nimport { ToolsState } from \"../types/scopes\";\nimport type { Tool } from \"assistant-stream\";\nimport { type Toolkit } from \"../model-context/toolbox\";\nimport { ToolCallMessagePartComponent } from \"../types\";\nimport { ModelContext } from \"./ModelContextClient\";\n\nexport const Tools = resource(\n  ({ toolkit }: { toolkit?: Toolkit }): ClientOutput<\"tools\"> => {\n    const [state, setState] = tapState<ToolsState>(() => ({\n      tools: {},\n    }));\n\n    const clientRef = tapAssistantClientRef();\n\n    const setToolUI = tapCallback(\n      (toolName: string, render: ToolCallMessagePartComponent) => {\n        setState((prev) => {\n          return {\n            ...prev,\n            tools: {\n              ...prev.tools,\n              [toolName]: [...(prev.tools[toolName] ?? []), render],\n            },\n          };\n        });\n\n        return () => {\n          setState((prev) => {\n            return {\n              ...prev,\n              tools: {\n                ...prev.tools,\n                [toolName]:\n                  prev.tools[toolName]?.filter((r) => r !== render) ?? [],\n              },\n            };\n          });\n        };\n      },\n      [],\n    );\n\n    tapEffect(() => {\n      if (!toolkit) return;\n      const unsubscribes: (() => void)[] = [];\n\n      // Register tool UIs (exclude symbols)\n      for (const [toolName, tool] of Object.entries(toolkit)) {\n        if (tool.render) {\n          unsubscribes.push(setToolUI(toolName, tool.render));\n        }\n      }\n\n      // Register tools with model context (exclude symbols)\n      const toolsWithoutRender = Object.entries(toolkit).reduce(\n        (acc, [name, tool]) => {\n          const { render, ...rest } = tool;\n          acc[name] = rest;\n          return acc;\n        },\n        {} as Record<string, Tool<any, any>>,\n      );\n\n      const modelContextProvider = {\n        getModelContext: () => ({\n          tools: toolsWithoutRender,\n        }),\n      };\n\n      unsubscribes.push(\n        clientRef.current!.modelContext().register(modelContextProvider),\n      );\n\n      return () => {\n        unsubscribes.forEach((fn) => fn());\n      };\n    }, [toolkit, setToolUI, clientRef]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setToolUI,\n      },\n    };\n  },\n);\n\nattachDefaultPeers(Tools, {\n  modelContext: ModelContext(),\n});\n", "import { resource, tapState, withKey } from \"@assistant-ui/tap\";\nimport { type ClientOutput, tapClientLookup } from \"@assistant-ui/store\";\nimport type { SuggestionsState, SuggestionState } from \"../types/scopes\";\n\nexport type SuggestionConfig =\n  | string\n  | { title: string; label: string; prompt: string };\n\nconst SuggestionClient = resource(\n  (state: SuggestionState): ClientOutput<\"suggestion\"> => {\n    return {\n      state,\n      methods: {\n        getState: () => state,\n      },\n    };\n  },\n);\n\nconst SuggestionsResource = resource(\n  (suggestions?: SuggestionConfig[]): ClientOutput<\"suggestions\"> => {\n    const [state] = tapState<SuggestionsState>(() => {\n      const normalizedSuggestions = (suggestions ?? []).map((s) => {\n        if (typeof s === \"string\") {\n          return {\n            title: s,\n            label: \"\",\n            prompt: s,\n          };\n        }\n        return {\n          title: s.title,\n          label: s.label,\n          prompt: s.prompt,\n        };\n      });\n\n      return {\n        suggestions: normalizedSuggestions,\n      };\n    });\n\n    const suggestionClients = tapClientLookup(\n      () =>\n        state.suggestions.map((suggestion, index) =>\n          withKey(index, SuggestionClient(suggestion)),\n        ),\n      [state.suggestions],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        suggestion: ({ index }: { index: number }) => {\n          return suggestionClients.get({ index });\n        },\n      },\n    };\n  },\n);\n\nexport const Suggestions: {\n  (): import(\"@assistant-ui/tap\").ResourceElement<\n    ClientOutput<\"suggestions\">,\n    undefined\n  >;\n  (\n    suggestions: SuggestionConfig[],\n  ): import(\"@assistant-ui/tap\").ResourceElement<\n    ClientOutput<\"suggestions\">,\n    SuggestionConfig[]\n  >;\n} = SuggestionsResource as any;\n", "import { Tool } from \"assistant-stream\";\nimport {\n  ModelContext,\n  ModelContextProvider,\n  mergeModelContexts,\n} from \"../../model-context/ModelContextTypes\";\nimport { Unsubscribe } from \"../../types/Unsubscribe\";\nimport {\n  ModelContextRegistryToolHandle,\n  ModelContextRegistryInstructionHandle,\n  ModelContextRegistryProviderHandle,\n} from \"./ModelContextRegistryHandles\";\nimport type { AssistantToolProps } from \"../../model-context/useAssistantTool\";\nimport type { AssistantInstructionsConfig } from \"../../model-context/useAssistantInstructions\";\n\nexport class ModelContextRegistry implements ModelContextProvider {\n  private _tools = new Map<symbol, AssistantToolProps<any, any>>();\n  private _instructions = new Map<symbol, string>();\n  private _providers = new Map<symbol, ModelContextProvider>();\n  private _subscribers = new Set<() => void>();\n  private _providerUnsubscribes = new Map<symbol, Unsubscribe | undefined>();\n\n  getModelContext(): ModelContext {\n    // Merge instructions\n    const instructions = Array.from(this._instructions.values()).filter(\n      Boolean,\n    );\n\n    const system =\n      instructions.length > 0 ? instructions.join(\"\\n\\n\") : undefined;\n\n    // Collect tools\n    const tools: Record<string, Tool<any, any>> = {};\n    for (const toolProps of this._tools.values()) {\n      const { toolName, render, ...tool } = toolProps;\n      tools[toolName] = tool;\n    }\n\n    // Merge provider contexts\n    const providerContexts = mergeModelContexts(\n      new Set(this._providers.values()),\n    );\n\n    // Combine everything\n    const context: ModelContext = {\n      system,\n      tools: Object.keys(tools).length > 0 ? tools : undefined,\n    };\n\n    // Merge with provider contexts\n    if (providerContexts.system) {\n      context.system = context.system\n        ? `${context.system}\\n\\n${providerContexts.system}`\n        : providerContexts.system;\n    }\n\n    if (providerContexts.tools) {\n      context.tools = { ...(context.tools || {}), ...providerContexts.tools };\n    }\n\n    if (providerContexts.callSettings) {\n      context.callSettings = providerContexts.callSettings;\n    }\n\n    if (providerContexts.config) {\n      context.config = providerContexts.config;\n    }\n\n    return context;\n  }\n\n  subscribe(callback: () => void): Unsubscribe {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n\n  private notifySubscribers(): void {\n    for (const callback of this._subscribers) {\n      callback();\n    }\n  }\n\n  addTool<TArgs extends Record<string, unknown>, TResult>(\n    tool: AssistantToolProps<TArgs, TResult>,\n  ): ModelContextRegistryToolHandle<TArgs, TResult> {\n    const id = Symbol();\n\n    this._tools.set(id, tool);\n    this.notifySubscribers();\n\n    return {\n      update: (newTool: AssistantToolProps<TArgs, TResult>) => {\n        if (this._tools.has(id)) {\n          this._tools.set(id, newTool);\n          this.notifySubscribers();\n        }\n      },\n      remove: () => {\n        this._tools.delete(id);\n        this.notifySubscribers();\n      },\n    };\n  }\n\n  addInstruction(\n    config: string | AssistantInstructionsConfig,\n  ): ModelContextRegistryInstructionHandle {\n    const id = Symbol();\n\n    const instruction =\n      typeof config === \"string\" ? config : config.instruction;\n    const disabled = typeof config === \"object\" ? config.disabled : false;\n\n    if (!disabled) {\n      this._instructions.set(id, instruction);\n      this.notifySubscribers();\n    }\n\n    return {\n      update: (newConfig: string | AssistantInstructionsConfig) => {\n        const newInstruction =\n          typeof newConfig === \"string\" ? newConfig : newConfig.instruction;\n        const newDisabled =\n          typeof newConfig === \"object\" ? newConfig.disabled : false;\n\n        if (newDisabled) {\n          this._instructions.delete(id);\n        } else {\n          this._instructions.set(id, newInstruction);\n        }\n        this.notifySubscribers();\n      },\n      remove: () => {\n        this._instructions.delete(id);\n        this.notifySubscribers();\n      },\n    };\n  }\n\n  addProvider(\n    provider: ModelContextProvider,\n  ): ModelContextRegistryProviderHandle {\n    const id = Symbol();\n\n    this._providers.set(id, provider);\n\n    // Subscribe to provider changes\n    const unsubscribe = provider.subscribe?.(() => {\n      this.notifySubscribers();\n    });\n    this._providerUnsubscribes.set(id, unsubscribe);\n\n    this.notifySubscribers();\n\n    return {\n      remove: () => {\n        this._providers.delete(id);\n        const unsubscribe = this._providerUnsubscribes.get(id);\n        unsubscribe?.();\n        this._providerUnsubscribes.delete(id);\n        this.notifySubscribers();\n      },\n    };\n  }\n}\n", "export type SerializedTool = {\n  description?: string;\n  parameters: any; // JSON Schema\n  disabled?: boolean;\n  type?: string;\n};\n\nexport type SerializedModelContext = {\n  system?: string;\n  tools?: Record<string, SerializedTool>;\n};\n\nexport type FrameMessageType =\n  | \"model-context-request\"\n  | \"model-context-update\"\n  | \"tool-call\"\n  | \"tool-result\";\n\nexport type FrameMessage =\n  | {\n      type: \"model-context-request\";\n    }\n  | {\n      type: \"model-context-update\";\n      context: SerializedModelContext;\n    }\n  | {\n      type: \"tool-call\";\n      id: string;\n      toolName: string;\n      args: unknown;\n    }\n  | {\n      type: \"tool-result\";\n      id: string;\n      result?: unknown;\n      error?: string;\n    };\n\nexport const FRAME_MESSAGE_CHANNEL = \"assistant-ui-frame\";\n", "import {\n  ModelContextProvider,\n  ModelContext,\n} from \"../../model-context/ModelContextTypes\";\nimport { Unsubscribe } from \"../../types/Unsubscribe\";\nimport { Tool } from \"assistant-stream\";\nimport {\n  FrameMessage,\n  FRAME_MESSAGE_CHANNEL,\n  SerializedModelContext,\n  SerializedTool,\n} from \"./AssistantFrameTypes\";\n\n/**\n * Deserializes tools from JSON Schema format back to Tool objects\n */\nconst deserializeTool = (serializedTool: SerializedTool): Tool<any, any> =>\n  ({\n    parameters: serializedTool.parameters,\n    ...(serializedTool.description && {\n      description: serializedTool.description,\n    }),\n    ...(serializedTool.disabled !== undefined && {\n      disabled: serializedTool.disabled,\n    }),\n    ...(serializedTool.type && { type: serializedTool.type }),\n  }) as Tool<any, any>;\n\n/**\n * Deserializes a ModelContext from transmission format\n */\nconst deserializeModelContext = (\n  serialized: SerializedModelContext,\n): ModelContext => ({\n  ...(serialized.system !== undefined && { system: serialized.system }),\n  ...(serialized.tools && {\n    tools: Object.fromEntries(\n      Object.entries(serialized.tools).map(([name, tool]) => [\n        name,\n        deserializeTool(tool),\n      ]),\n    ),\n  }),\n});\n\n/**\n * AssistantFrameHost - Runs in the parent window and acts as a ModelContextProvider\n * that receives context from an iframe's AssistantFrameProvider.\n *\n * Usage example:\n * ```typescript\n * // In parent window\n * const frameHost = new AssistantFrameHost(iframeWindow);\n *\n * // Register with assistant runtime\n * const runtime = useAssistantRuntime();\n * runtime.registerModelContextProvider(frameHost);\n *\n * // The assistant now has access to tools from the iframe\n * ```\n */\nexport class AssistantFrameHost implements ModelContextProvider {\n  private _context: ModelContext = {};\n  private _subscribers = new Set<() => void>();\n  private _pendingRequests = new Map<\n    string,\n    {\n      resolve: (value: any) => void;\n      reject: (error: any) => void;\n    }\n  >();\n  private _requestCounter = 0;\n  private _iframeWindow: Window;\n  private _targetOrigin: string;\n\n  constructor(iframeWindow: Window, targetOrigin: string = \"*\") {\n    this._iframeWindow = iframeWindow;\n    this._targetOrigin = targetOrigin;\n\n    this.handleMessage = this.handleMessage.bind(this);\n    window.addEventListener(\"message\", this.handleMessage);\n\n    // Request initial context\n    this.requestContext();\n  }\n\n  private handleMessage(event: MessageEvent) {\n    // Security: Validate origin and source\n    if (this._targetOrigin !== \"*\" && event.origin !== this._targetOrigin)\n      return;\n    if (event.source !== this._iframeWindow) return;\n    if (event.data?.channel !== FRAME_MESSAGE_CHANNEL) return;\n\n    const message = event.data.message as FrameMessage;\n\n    switch (message.type) {\n      case \"model-context-update\": {\n        this.updateContext(message.context);\n        break;\n      }\n\n      case \"tool-result\": {\n        const pending = this._pendingRequests.get(message.id);\n        if (pending) {\n          if (message.error) {\n            pending.reject(new Error(message.error));\n          } else {\n            pending.resolve(message.result);\n          }\n          this._pendingRequests.delete(message.id);\n        }\n        break;\n      }\n    }\n  }\n\n  private updateContext(serializedContext: SerializedModelContext) {\n    const context = deserializeModelContext(serializedContext);\n    this._context = {\n      ...context,\n      tools:\n        context.tools &&\n        Object.fromEntries(\n          Object.entries(context.tools).map(([name, tool]) => [\n            name,\n            {\n              ...tool,\n              execute: (args: any) => this.callTool(name, args),\n            } as Tool<any, any>,\n          ]),\n        ),\n    };\n    this.notifySubscribers();\n  }\n\n  private callTool(toolName: string, args: any): Promise<any> {\n    return this.sendRequest(\n      {\n        type: \"tool-call\",\n        id: `tool-${this._requestCounter++}`,\n        toolName,\n        args,\n      },\n      30000,\n      `Tool call \"${toolName}\" timed out`,\n    );\n  }\n\n  private sendRequest<T extends FrameMessage & { id: string }>(\n    message: T,\n    timeout = 30000,\n    timeoutMessage = \"Request timed out\",\n  ): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this._pendingRequests.set(message.id, { resolve, reject });\n\n      this._iframeWindow.postMessage(\n        { channel: FRAME_MESSAGE_CHANNEL, message },\n        this._targetOrigin,\n      );\n\n      const timeoutId = setTimeout(() => {\n        const pending = this._pendingRequests.get(message.id);\n        if (pending) {\n          pending.reject(new Error(timeoutMessage));\n          this._pendingRequests.delete(message.id);\n        }\n      }, timeout);\n\n      // Store original resolve/reject with timeout cleanup\n      const originalResolve = this._pendingRequests.get(message.id)!.resolve;\n      const originalReject = this._pendingRequests.get(message.id)!.reject;\n\n      this._pendingRequests.set(message.id, {\n        resolve: (value: any) => {\n          clearTimeout(timeoutId);\n          originalResolve(value);\n        },\n        reject: (error: any) => {\n          clearTimeout(timeoutId);\n          originalReject(error);\n        },\n      });\n    });\n  }\n\n  private requestContext() {\n    // Request current context from iframe\n    this._iframeWindow.postMessage(\n      {\n        channel: FRAME_MESSAGE_CHANNEL,\n        message: {\n          type: \"model-context-request\",\n        } as FrameMessage,\n      },\n      this._targetOrigin,\n    );\n  }\n\n  private notifySubscribers() {\n    this._subscribers.forEach((callback) => callback());\n  }\n\n  getModelContext(): ModelContext {\n    return this._context;\n  }\n\n  subscribe(callback: () => void): Unsubscribe {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n\n  dispose() {\n    window.removeEventListener(\"message\", this.handleMessage);\n    this._subscribers.clear();\n    this._pendingRequests.clear();\n  }\n}\n", "export * as core from \"../core/index.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./errors.js\";\nexport * from \"./parse.js\";\nexport * from \"./compat.js\";\n// zod-specified\nimport { config } from \"../core/index.js\";\nimport en from \"../locales/en.js\";\nconfig(en());\nexport { globalRegistry, registry, config, $output, $input, $brand, clone, regexes, treeifyError, prettifyError, formatError, flattenError, TimePrecision, util, NEVER, } from \"../core/index.js\";\nexport { toJSONSchema } from \"../core/json-schema-processors.js\";\nexport { fromJSONSchema } from \"./from-json-schema.js\";\nexport * as locales from \"../locales/index.js\";\n// iso\n// must be exported from top-level\n// https://github.com/colinhacks/zod/issues/4491\nexport { ZodISODateTime, ZodISODate, ZodISOTime, ZodISODuration } from \"./iso.js\";\nexport * as iso from \"./iso.js\";\nexport * as coerce from \"./coerce.js\";\n", "export * from \"./core.js\";\nexport * from \"./parse.js\";\nexport * from \"./errors.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./versions.js\";\nexport * as util from \"./util.js\";\nexport * as regexes from \"./regexes.js\";\nexport * as locales from \"../locales/index.js\";\nexport * from \"./registries.js\";\nexport * from \"./doc.js\";\nexport * from \"./api.js\";\nexport * from \"./to-json-schema.js\";\nexport { toJSONSchema } from \"./json-schema-processors.js\";\nexport { JSONSchemaGenerator } from \"./json-schema-generator.js\";\nexport * as JSONSchema from \"./json-schema.js\";\n", "/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        if (!inst._zod) {\n            Object.defineProperty(inst, \"_zod\", {\n                value: {\n                    def,\n                    constr: _,\n                    traits: new Set(),\n                },\n                enumerable: false,\n            });\n        }\n        if (inst._zod.traits.has(name)) {\n            return;\n        }\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        const proto = _.prototype;\n        const keys = Object.keys(proto);\n        for (let i = 0; i < keys.length; i++) {\n            const k = keys[i];\n            if (!(k in inst)) {\n                inst[k] = proto[k].bind(inst);\n            }\n        }\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport class $ZodEncodeError extends Error {\n    constructor(name) {\n        super(`Encountered unidirectional transform during encode: ${name}`);\n        this.name = \"ZodEncodeError\";\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n", "// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error(\"Unexpected value in exhaustive check\");\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nexport function defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function objectClone(obj) {\n    return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nexport function cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport function slugify(input) {\n    return input\n        .toLowerCase()\n        .trim()\n        .replace(/[^\\w\\s-]/g, \"\")\n        .replace(/[\\s_-]+/g, \"-\")\n        .replace(/^-+|-+$/g, \"\");\n}\nexport const captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    if (typeof ctor !== \"function\")\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function shallowClone(o) {\n    if (isPlainObject(o))\n        return { ...o };\n    if (Array.isArray(o))\n        return [...o];\n    return o;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const checks = currDef.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\".pick() cannot be used on object schemas containing refinements\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const checks = currDef.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\".omit() cannot be used on object schemas containing refinements\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const checks = schema._zod.def.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        // Only throw if new shape overlaps with existing shape\n        // Use getOwnPropertyDescriptor to check key existence without accessing values\n        const existingShape = schema._zod.def.shape;\n        for (const key in shape) {\n            if (Object.getOwnPropertyDescriptor(existingShape, key) !== undefined) {\n                throw new Error(\"Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.\");\n            }\n        }\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n    });\n    return clone(schema, def);\n}\nexport function safeExtend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to safeExtend: expected a plain object\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n    });\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nexport function partial(Class, schema, mask) {\n    const currDef = schema._zod.def;\n    const checks = currDef.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\".partial() cannot be used on object schemas containing refinements\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nexport function aborted(x, startIndex = 0) {\n    if (x.aborted === true)\n        return true;\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function parsedType(data) {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        }\n        case \"object\": {\n            if (data === null) {\n                return \"null\";\n            }\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            const obj = data;\n            if (obj && Object.getPrototypeOf(obj) !== Object.prototype && \"constructor\" in obj && obj.constructor) {\n                return obj.constructor.name;\n            }\n        }\n    }\n    return t;\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// Codec utility functions\nexport function base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\nexport function uint8ArrayToBase64(bytes) {\n    let binaryString = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        binaryString += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binaryString);\n}\nexport function base64urlToUint8Array(base64url) {\n    const base64 = base64url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const padding = \"=\".repeat((4 - (base64.length % 4)) % 4);\n    return base64ToUint8Array(base64 + padding);\n}\nexport function uint8ArrayToBase64url(bytes) {\n    return uint8ArrayToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nexport function hexToUint8Array(hex) {\n    const cleanHex = hex.replace(/^0x/, \"\");\n    if (cleanHex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string length\");\n    }\n    const bytes = new Uint8Array(cleanHex.length / 2);\n    for (let i = 0; i < cleanHex.length; i += 2) {\n        bytes[i / 2] = Number.parseInt(cleanHex.slice(i, i + 2), 16);\n    }\n    return bytes;\n}\nexport function uint8ArrayToHex(bytes) {\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n", "import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, util.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, mapper = (issue) => issue.message) {\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nexport function toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n", "import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\nexport const _encode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parse(_Err)(schema, value, ctx);\n};\nexport const encode = /* @__PURE__*/ _encode(errors.$ZodRealError);\nexport const _decode = (_Err) => (schema, value, _ctx) => {\n    return _parse(_Err)(schema, value, _ctx);\n};\nexport const decode = /* @__PURE__*/ _decode(errors.$ZodRealError);\nexport const _encodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parseAsync(_Err)(schema, value, ctx);\n};\nexport const encodeAsync = /* @__PURE__*/ _encodeAsync(errors.$ZodRealError);\nexport const _decodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _parseAsync(_Err)(schema, value, _ctx);\n};\nexport const decodeAsync = /* @__PURE__*/ _decodeAsync(errors.$ZodRealError);\nexport const _safeEncode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParse(_Err)(schema, value, ctx);\n};\nexport const safeEncode = /* @__PURE__*/ _safeEncode(errors.$ZodRealError);\nexport const _safeDecode = (_Err) => (schema, value, _ctx) => {\n    return _safeParse(_Err)(schema, value, _ctx);\n};\nexport const safeDecode = /* @__PURE__*/ _safeDecode(errors.$ZodRealError);\nexport const _safeEncodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParseAsync(_Err)(schema, value, ctx);\n};\nexport const safeEncodeAsync = /* @__PURE__*/ _safeEncodeAsync(errors.$ZodRealError);\nexport const _safeDecodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _safeParseAsync(_Err)(schema, value, _ctx);\n};\nexport const safeDecodeAsync = /* @__PURE__*/ _safeDecodeAsync(errors.$ZodRealError);\n", "import * as util from \"./util.js\";\nexport const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const idnEmail = unicodeEmail;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;\nexport const mac = (delimiter) => {\n    const escapedDelim = util.escapeRegex(delimiter ?? \":\");\n    return new RegExp(`^(?:[0-9A-F]{2}${escapedDelim}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${escapedDelim}){5}[0-9a-f]{2}$`);\n};\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\n// E.164: leading digit must be 1-9; total digits (excluding '+') between 7-15\nexport const e164 = /^\\+[1-9]\\d{6,14}$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^-?\\d+n?$/;\nexport const integer = /^-?\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?$/;\nexport const boolean = /^(?:true|false)$/i;\nconst _null = /^null$/i;\nexport { _null as null };\nconst _undefined = /^undefined$/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n// regex for hexadecimal strings (any length)\nexport const hex = /^[0-9a-fA-F]*$/;\n// Hash regexes for different algorithms and encodings\n// Helper function to create base64 regex with exact length and padding\nfunction fixedBase64(bodyLength, padding) {\n    return new RegExp(`^[A-Za-z0-9+/]{${bodyLength}}${padding}$`);\n}\n// Helper function to create base64url regex with exact length (no padding)\nfunction fixedBase64url(length) {\n    return new RegExp(`^[A-Za-z0-9_-]{${length}}$`);\n}\n// MD5 (16 bytes): base64 = 24 chars total (22 + \"==\")\nexport const md5_hex = /^[0-9a-fA-F]{32}$/;\nexport const md5_base64 = /*@__PURE__*/ fixedBase64(22, \"==\");\nexport const md5_base64url = /*@__PURE__*/ fixedBase64url(22);\n// SHA1 (20 bytes): base64 = 28 chars total (27 + \"=\")\nexport const sha1_hex = /^[0-9a-fA-F]{40}$/;\nexport const sha1_base64 = /*@__PURE__*/ fixedBase64(27, \"=\");\nexport const sha1_base64url = /*@__PURE__*/ fixedBase64url(27);\n// SHA256 (32 bytes): base64 = 44 chars total (43 + \"=\")\nexport const sha256_hex = /^[0-9a-fA-F]{64}$/;\nexport const sha256_base64 = /*@__PURE__*/ fixedBase64(43, \"=\");\nexport const sha256_base64url = /*@__PURE__*/ fixedBase64url(43);\n// SHA384 (48 bytes): base64 = 64 chars total (no padding)\nexport const sha384_hex = /^[0-9a-fA-F]{96}$/;\nexport const sha384_base64 = /*@__PURE__*/ fixedBase64(64, \"\");\nexport const sha384_base64url = /*@__PURE__*/ fixedBase64url(64);\n// SHA512 (64 bytes): base64 = 88 chars total (86 + \"==\")\nexport const sha512_hex = /^[0-9a-fA-F]{128}$/;\nexport const sha512_base64 = /*@__PURE__*/ fixedBase64(86, \"==\");\nexport const sha512_base64url = /*@__PURE__*/ fixedBase64url(86);\n", "// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: typeof def.value === \"object\" ? def.value.getTime() : def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: typeof def.value === \"object\" ? def.value.getTime() : def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        inclusive: true,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        inclusive: true,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n", "export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n", "export const version = {\n    major: 4,\n    minor: 3,\n    patch: 6,\n};\n", "import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { parse, parseAsync, safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        const handleCanaryResult = (canary, payload, ctx) => {\n            // abort if the canary is aborted\n            if (util.aborted(canary)) {\n                canary.aborted = true;\n                return canary;\n            }\n            // run checks first, then\n            const checkResult = runChecks(payload, checks, ctx);\n            if (checkResult instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return checkResult.then((checkResult) => inst._zod.parse(checkResult, ctx));\n            }\n            return inst._zod.parse(checkResult, ctx);\n        };\n        inst._zod.run = (payload, ctx) => {\n            if (ctx.skipChecks) {\n                return inst._zod.parse(payload, ctx);\n            }\n            if (ctx.direction === \"backward\") {\n                // run canary\n                // initial pass (no checks)\n                const canary = inst._zod.parse({ value: payload.value, issues: [] }, { ...ctx, skipChecks: true });\n                if (canary instanceof Promise) {\n                    return canary.then((canary) => {\n                        return handleCanaryResult(canary, payload, ctx);\n                    });\n                }\n                return handleCanaryResult(canary, payload, ctx);\n            }\n            // forward\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    // Lazy initialize ~standard to avoid creating objects for every schema\n    util.defineLazy(inst, \"~standard\", () => ({\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    }));\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: def.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.format = `ipv4`;\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.format = `ipv6`;\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodMAC = /*@__PURE__*/ core.$constructor(\"$ZodMAC\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.mac(def.delimiter));\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.format = `mac`;\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const parts = payload.value.split(\"/\");\n        try {\n            if (parts.length !== 2)\n                throw new Error();\n            const [address, prefix] = parts;\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.contentEncoding = \"base64\";\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.bag.contentEncoding = \"base64url\";\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumberFormat\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checks\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigIntFormat\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input, isOptionalOut) {\n    if (result.issues.length) {\n        // For optional-out schemas, ignore errors on absent keys\n        if (isOptionalOut && !(key in input)) {\n            return;\n        }\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nfunction normalizeDef(def) {\n    const keys = Object.keys(def.shape);\n    for (const k of keys) {\n        if (!def.shape?.[k]?._zod?.traits?.has(\"$ZodType\")) {\n            throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n        }\n    }\n    const okeys = util.optionalKeys(def.shape);\n    return {\n        ...def,\n        keys,\n        keySet: new Set(keys),\n        numKeys: keys.length,\n        optionalKeys: new Set(okeys),\n    };\n}\nfunction handleCatchall(proms, input, payload, ctx, def, inst) {\n    const unrecognized = [];\n    // iterate over input keys\n    const keySet = def.keySet;\n    const _catchall = def.catchall._zod;\n    const t = _catchall.def.type;\n    const isOptionalOut = _catchall.optout === \"optional\";\n    for (const key in input) {\n        if (keySet.has(key))\n            continue;\n        if (t === \"never\") {\n            unrecognized.push(key);\n            continue;\n        }\n        const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n        if (r instanceof Promise) {\n            proms.push(r.then((r) => handlePropertyResult(r, payload, key, input, isOptionalOut)));\n        }\n        else {\n            handlePropertyResult(r, payload, key, input, isOptionalOut);\n        }\n    }\n    if (unrecognized.length) {\n        payload.issues.push({\n            code: \"unrecognized_keys\",\n            keys: unrecognized,\n            input,\n            inst,\n        });\n    }\n    if (!proms.length)\n        return payload;\n    return Promise.all(proms).then(() => {\n        return payload;\n    });\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    // const sh = def.shape;\n    const desc = Object.getOwnPropertyDescriptor(def, \"shape\");\n    if (!desc?.get) {\n        const sh = def.shape;\n        Object.defineProperty(def, \"shape\", {\n            get: () => {\n                const newSh = { ...sh };\n                Object.defineProperty(def, \"shape\", {\n                    value: newSh,\n                });\n                return newSh;\n            },\n        });\n    }\n    const _normalized = util.cached(() => normalizeDef(def));\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const isObject = util.isObject;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = {};\n        const proms = [];\n        const shape = value.shape;\n        for (const key of value.keys) {\n            const el = shape[key];\n            const isOptionalOut = el._zod.optout === \"optional\";\n            const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input, isOptionalOut)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input, isOptionalOut);\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        return handleCatchall(proms, input, payload, ctx, _normalized.value, inst);\n    };\n});\nexport const $ZodObjectJIT = /*@__PURE__*/ core.$constructor(\"$ZodObjectJIT\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodObject.init(inst, def);\n    const superParse = inst._zod.parse;\n    const _normalized = util.cached(() => normalizeDef(def));\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {};`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = util.esc(key);\n            const schema = shape[key];\n            const isOptionalOut = schema?._zod?.optout === \"optional\";\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            if (isOptionalOut) {\n                // For optional-out schemas, ignore errors on absent keys\n                doc.write(`\n        if (${id}.issues.length) {\n          if (${k} in input) {\n            payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n              ...iss,\n              path: iss.path ? [${k}, ...iss.path] : [${k}]\n            })));\n          }\n        }\n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        \n      `);\n            }\n            else {\n                doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        \n      `);\n            }\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n            if (!catchall)\n                return payload;\n            return handleCatchall([], input, payload, ctx, value, inst);\n        }\n        return superParse(payload, ctx);\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !util.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nfunction handleExclusiveUnionResults(results, final, inst, ctx) {\n    const successes = results.filter((r) => r.issues.length === 0);\n    if (successes.length === 1) {\n        final.value = successes[0].value;\n        return final;\n    }\n    if (successes.length === 0) {\n        // No matches - same as regular union\n        final.issues.push({\n            code: \"invalid_union\",\n            input: final.value,\n            inst,\n            errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        });\n    }\n    else {\n        // Multiple matches - exclusive union failure\n        final.issues.push({\n            code: \"invalid_union\",\n            input: final.value,\n            inst,\n            errors: [],\n            inclusive: false,\n        });\n    }\n    return final;\n}\nexport const $ZodXor = /*@__PURE__*/ core.$constructor(\"$ZodXor\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    def.inclusive = false;\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleExclusiveUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleExclusiveUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    def.inclusive = false;\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    // Track which side(s) report each key as unrecognized\n    const unrecKeys = new Map();\n    let unrecIssue;\n    for (const iss of left.issues) {\n        if (iss.code === \"unrecognized_keys\") {\n            unrecIssue ?? (unrecIssue = iss);\n            for (const k of iss.keys) {\n                if (!unrecKeys.has(k))\n                    unrecKeys.set(k, {});\n                unrecKeys.get(k).l = true;\n            }\n        }\n        else {\n            result.issues.push(iss);\n        }\n    }\n    for (const iss of right.issues) {\n        if (iss.code === \"unrecognized_keys\") {\n            for (const k of iss.keys) {\n                if (!unrecKeys.has(k))\n                    unrecKeys.set(k, {});\n                unrecKeys.get(k).r = true;\n            }\n        }\n        else {\n            result.issues.push(iss);\n        }\n    }\n    // Report only keys unrecognized by BOTH sides\n    const bothKeys = [...unrecKeys].filter(([, f]) => f.l && f.r).map(([k]) => k);\n    if (bothKeys.length && unrecIssue) {\n        result.issues.push({ ...unrecIssue, keys: bothKeys });\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        const reversedIndex = [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n        const optStart = reversedIndex === -1 ? 0 : items.length - reversedIndex;\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig\n                        ? { code: \"too_big\", maximum: items.length, inclusive: true }\n                        : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        const values = def.keyType._zod.values;\n        if (values) {\n            payload.value = {};\n            const recordKeys = new Set();\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    recordKeys.add(typeof key === \"number\" ? key.toString() : key);\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!recordKeys.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                let keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                // Numeric string fallback: if key is a numeric string and failed, retry with Number(key)\n                // This handles z.number(), z.literal([1, 2, 3]), and unions containing numeric literals\n                const checkNumericKey = typeof key === \"string\" && regexes.number.test(key) && keyResult.issues.length;\n                if (checkNumericKey) {\n                    const retryResult = def.keyType._zod.run({ value: Number(key), issues: [] }, ctx);\n                    if (retryResult instanceof Promise) {\n                        throw new Error(\"Async schemas not supported in object keys currently\");\n                    }\n                    if (retryResult.issues.length === 0) {\n                        keyResult = retryResult;\n                    }\n                }\n                if (keyResult.issues.length) {\n                    if (def.mode === \"loose\") {\n                        // Pass through unchanged\n                        payload.value[key] = input[key];\n                    }\n                    else {\n                        // Default \"strict\" behavior: error on invalid key\n                        payload.issues.push({\n                            code: \"invalid_key\",\n                            origin: \"record\",\n                            issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                            input: key,\n                            path: [key],\n                            inst,\n                        });\n                    }\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    const values = new Set(def.values);\n    inst._zod.values = values;\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? util.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        const _out = def.transform(payload.value, payload);\n        if (ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodExactOptional = /*@__PURE__*/ core.$constructor(\"$ZodExactOptional\", (inst, def) => {\n    // Call parent init - inherits optin/optout = \"optional\"\n    $ZodOptional.init(inst, def);\n    // Override values/pattern to NOT add undefined\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"pattern\", () => def.innerType._zod.pattern);\n    // Override parse to just delegate (no undefined handling)\n    inst._zod.parse = (payload, ctx) => {\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        // Forward direction (decode): allow null to pass through\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply defaults for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault returns the default value immediately in forward direction.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        // Forward direction: continue with default handling\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply prefault for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(\"ZodSuccess\");\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply catch logic\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handlePipeResult(right, def.in, ctx));\n            }\n            return handlePipeResult(right, def.in, ctx);\n        }\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def.out, ctx));\n        }\n        return handlePipeResult(left, def.out, ctx);\n    };\n});\nfunction handlePipeResult(left, next, ctx) {\n    if (left.issues.length) {\n        // prevent further checks\n        left.aborted = true;\n        return left;\n    }\n    return next._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodCodec = /*@__PURE__*/ core.$constructor(\"$ZodCodec\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const direction = ctx.direction || \"forward\";\n        if (direction === \"forward\") {\n            const left = def.in._zod.run(payload, ctx);\n            if (left instanceof Promise) {\n                return left.then((left) => handleCodecAResult(left, def, ctx));\n            }\n            return handleCodecAResult(left, def, ctx);\n        }\n        else {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handleCodecAResult(right, def, ctx));\n            }\n            return handleCodecAResult(right, def, ctx);\n        }\n    };\n});\nfunction handleCodecAResult(result, def, ctx) {\n    if (result.issues.length) {\n        // prevent further checks\n        result.aborted = true;\n        return result;\n    }\n    const direction = ctx.direction || \"forward\";\n    if (direction === \"forward\") {\n        const transformed = def.transform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.out, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.out, ctx);\n    }\n    else {\n        const transformed = def.reverseTransform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.in, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.in, ctx);\n    }\n}\nfunction handleCodecTxResult(left, value, nextSchema, ctx) {\n    // Check if transform added any issues\n    if (left.issues.length) {\n        left.aborted = true;\n        return left;\n    }\n    return nextSchema._zod.run({ value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType?._zod?.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType?._zod?.optout);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (typeof part === \"object\" && part !== null) {\n            // is Zod schema\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"string\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodFunction = /*@__PURE__*/ core.$constructor(\"$ZodFunction\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._def = def;\n    inst._zod.def = def;\n    inst.implement = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        return function (...args) {\n            const parsedArgs = inst._def.input ? parse(inst._def.input, args) : args;\n            const result = Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return parse(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst.implementAsync = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implementAsync() must be called with a function\");\n        }\n        return async function (...args) {\n            const parsedArgs = inst._def.input ? await parseAsync(inst._def.input, args) : args;\n            const result = await Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return await parseAsync(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"function\") {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"function\",\n                input: payload.value,\n                inst,\n            });\n            return payload;\n        }\n        // Check if output is a promise type to determine if we should use async implementation\n        const hasPromiseOutput = inst._def.output && inst._def.output._zod.def.type === \"promise\";\n        if (hasPromiseOutput) {\n            payload.value = inst.implementAsync(payload.value);\n        }\n        else {\n            payload.value = inst.implement(payload.value);\n        }\n        return payload;\n    };\n    inst.input = (...args) => {\n        const F = inst.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: inst._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: inst._def.output,\n        });\n    };\n    inst.output = (output) => {\n        const F = inst.constructor;\n        return new F({\n            type: \"function\",\n            input: inst._def.input,\n            output,\n        });\n    };\n    return inst;\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType?._zod?.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType?._zod?.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType?._zod?.optin ?? undefined);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType?._zod?.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n", "export { default as ar } from \"./ar.js\";\nexport { default as az } from \"./az.js\";\nexport { default as be } from \"./be.js\";\nexport { default as bg } from \"./bg.js\";\nexport { default as ca } from \"./ca.js\";\nexport { default as cs } from \"./cs.js\";\nexport { default as da } from \"./da.js\";\nexport { default as de } from \"./de.js\";\nexport { default as en } from \"./en.js\";\nexport { default as eo } from \"./eo.js\";\nexport { default as es } from \"./es.js\";\nexport { default as fa } from \"./fa.js\";\nexport { default as fi } from \"./fi.js\";\nexport { default as fr } from \"./fr.js\";\nexport { default as frCA } from \"./fr-CA.js\";\nexport { default as he } from \"./he.js\";\nexport { default as hu } from \"./hu.js\";\nexport { default as hy } from \"./hy.js\";\nexport { default as id } from \"./id.js\";\nexport { default as is } from \"./is.js\";\nexport { default as it } from \"./it.js\";\nexport { default as ja } from \"./ja.js\";\nexport { default as ka } from \"./ka.js\";\nexport { default as kh } from \"./kh.js\";\nexport { default as km } from \"./km.js\";\nexport { default as ko } from \"./ko.js\";\nexport { default as lt } from \"./lt.js\";\nexport { default as mk } from \"./mk.js\";\nexport { default as ms } from \"./ms.js\";\nexport { default as nl } from \"./nl.js\";\nexport { default as no } from \"./no.js\";\nexport { default as ota } from \"./ota.js\";\nexport { default as ps } from \"./ps.js\";\nexport { default as pl } from \"./pl.js\";\nexport { default as pt } from \"./pt.js\";\nexport { default as ru } from \"./ru.js\";\nexport { default as sl } from \"./sl.js\";\nexport { default as sv } from \"./sv.js\";\nexport { default as ta } from \"./ta.js\";\nexport { default as th } from \"./th.js\";\nexport { default as tr } from \"./tr.js\";\nexport { default as ua } from \"./ua.js\";\nexport { default as uk } from \"./uk.js\";\nexport { default as ur } from \"./ur.js\";\nexport { default as uz } from \"./uz.js\";\nexport { default as vi } from \"./vi.js\";\nexport { default as zhCN } from \"./zh-CN.js\";\nexport { default as zhTW } from \"./zh-TW.js\";\nexport { default as yo } from \"./yo.js\";\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \" \",\n        url: \"\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"   ISO\",\n        date: \"  ISO\",\n        time: \"  ISO\",\n        duration: \"  ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \"   IPv4\",\n        cidrv6: \"   IPv6\",\n        base64: \"  base64-encoded\",\n        base64url: \"  base64url-encoded\",\n        json_string: \"   JSON\",\n        e164: \"   E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `  :   instanceof ${issue.expected}    ${received}`;\n                }\n                return `  :   ${expected}    ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  :   ${util.stringifyPrimitive(issue.values[0])}`;\n                return `  :     : ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `   :    ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return `  :    ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `  :   ${issue.origin}   ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `  :   ${issue.origin}   ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `  :     \"${issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `  :     \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `  :    \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `  :     ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format}  `;\n            }\n            case \"not_multiple_of\":\n                return `  :      ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \" \")}`;\n            case \"invalid_key\":\n                return `    ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `    ${issue.origin}`;\n            default:\n                return \"  \";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"simvol\", verb: \"olmaldr\" },\n        file: { unit: \"bayt\", verb: \"olmaldr\" },\n        array: { unit: \"element\", verb: \"olmaldr\" },\n        set: { unit: \"element\", verb: \"olmaldr\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"email address\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datetime\",\n        date: \"ISO date\",\n        time: \"ISO time\",\n        duration: \"ISO duration\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded string\",\n        base64url: \"base64url-encoded string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 number\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Yanl dyr: gzlniln instanceof ${issue.expected}, daxil olan ${received}`;\n                }\n                return `Yanl dyr: gzlniln ${expected}, daxil olan ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Yanl dyr: gzlniln ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Yanl seim: aadaklardan biri olmaldr: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ox byk: gzlniln ${issue.origin ?? \"dyr\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                return `ox byk: gzlniln ${issue.origin ?? \"dyr\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ox kiik: gzlniln ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                return `ox kiik: gzlniln ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Yanl mtn: \"${_issue.prefix}\" il balamaldr`;\n                if (_issue.format === \"ends_with\")\n                    return `Yanl mtn: \"${_issue.suffix}\" il bitmlidir`;\n                if (_issue.format === \"includes\")\n                    return `Yanl mtn: \"${_issue.includes}\" daxil olmaldr`;\n                if (_issue.format === \"regex\")\n                    return `Yanl mtn: ${_issue.pattern} ablonuna uyun olmaldr`;\n                return `Yanl ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Yanl dd: ${issue.divisor} il bln biln olmaldr`;\n            case \"unrecognized_keys\":\n                return `Tannmayan aar${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} daxilind yanl aar`;\n            case \"invalid_union\":\n                return \"Yanl dyr\";\n            case \"invalid_element\":\n                return `${issue.origin} daxilind yanl dyr`;\n            default:\n                return `Yanl dyr`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nfunction getBelarusianPlural(count, one, few, many) {\n    const absCount = Math.abs(count);\n    const lastDigit = absCount % 10;\n    const lastTwoDigits = absCount % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n        return many;\n    }\n    if (lastDigit === 1) {\n        return one;\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n        return few;\n    }\n    return many;\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        array: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        set: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        file: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"email \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"   base64\",\n        base64url: \"   base64url\",\n        json_string: \"JSON \",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected},  ${received}`;\n                }\n                return ` :  ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getBelarusianPlural(maxValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return ` : ,  ${issue.origin ?? \"\"}  ${sizing.verb} ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return ` : ,  ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getBelarusianPlural(minValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return ` : ,  ${issue.origin}  ${sizing.verb} ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return ` : ,  ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` :    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return ` :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :    ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64- \",\n        base64url: \"base64url- \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected},  ${received}`;\n                }\n                return ` :  ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :     \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` :     \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :    \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :     ${_issue.pattern}`;\n                let invalid_adj = \"\";\n                if (_issue.format === \"emoji\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"datetime\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"date\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"time\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"duration\")\n                    invalid_adj = \"\";\n                return `${invalid_adj} ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :      ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"carcters\", verb: \"contenir\" },\n        file: { unit: \"bytes\", verb: \"contenir\" },\n        array: { unit: \"elements\", verb: \"contenir\" },\n        set: { unit: \"elements\", verb: \"contenir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"entrada\",\n        email: \"adrea electrnica\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data i hora ISO\",\n        date: \"data ISO\",\n        time: \"hora ISO\",\n        duration: \"durada ISO\",\n        ipv4: \"adrea IPv4\",\n        ipv6: \"adrea IPv6\",\n        cidrv4: \"rang IPv4\",\n        cidrv6: \"rang IPv6\",\n        base64: \"cadena codificada en base64\",\n        base64url: \"cadena codificada en base64url\",\n        json_string: \"cadena JSON\",\n        e164: \"nmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Tipus invlid: s'esperava instanceof ${issue.expected}, s'ha rebut ${received}`;\n                }\n                return `Tipus invlid: s'esperava ${expected}, s'ha rebut ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Valor invlid: s'esperava ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opci invlida: s'esperava una de ${util.joinValues(issue.values, \" o \")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"com a mxim\" : \"menys de\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Massa gran: s'esperava que ${issue.origin ?? \"el valor\"} contingus ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `Massa gran: s'esperava que ${issue.origin ?? \"el valor\"} fos ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"com a mnim\" : \"ms de\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Massa petit: s'esperava que ${issue.origin} contingus ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Massa petit: s'esperava que ${issue.origin} fos ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Format invlid: ha de comenar amb \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Format invlid: ha d'acabar amb \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Format invlid: ha d'incloure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Format invlid: ha de coincidir amb el patr ${_issue.pattern}`;\n                return `Format invlid per a ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nmero invlid: ha de ser mltiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Clau${issue.keys.length > 1 ? \"s\" : \"\"} no reconeguda${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Clau invlida a ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada invlida\"; // Could also be \"Tipus d'uni invlid\" but \"Entrada invlida\" is more general\n            case \"invalid_element\":\n                return `Element invlid a ${issue.origin}`;\n            default:\n                return `Entrada invlida`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znak\", verb: \"mt\" },\n        file: { unit: \"bajt\", verb: \"mt\" },\n        array: { unit: \"prvk\", verb: \"mt\" },\n        set: { unit: \"prvk\", verb: \"mt\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"regulrn vraz\",\n        email: \"e-mailov adresa\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"datum a as ve formtu ISO\",\n        date: \"datum ve formtu ISO\",\n        time: \"as ve formtu ISO\",\n        duration: \"doba trvn ISO\",\n        ipv4: \"IPv4 adresa\",\n        ipv6: \"IPv6 adresa\",\n        cidrv4: \"rozsah IPv4\",\n        cidrv6: \"rozsah IPv6\",\n        base64: \"etzec zakdovan ve formtu base64\",\n        base64url: \"etzec zakdovan ve formtu base64url\",\n        json_string: \"etzec ve formtu JSON\",\n        e164: \"slo E.164\",\n        jwt: \"JWT\",\n        template_literal: \"vstup\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"slo\",\n        string: \"etzec\",\n        function: \"funkce\",\n        array: \"pole\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Neplatn vstup: oekvno instanceof ${issue.expected}, obdreno ${received}`;\n                }\n                return `Neplatn vstup: oekvno ${expected}, obdreno ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Neplatn vstup: oekvno ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Neplatn monost: oekvna jedna z hodnot ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Hodnota je pli velk: ${issue.origin ?? \"hodnota\"} mus mt ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"prvk\"}`;\n                }\n                return `Hodnota je pli velk: ${issue.origin ?? \"hodnota\"} mus bt ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Hodnota je pli mal: ${issue.origin ?? \"hodnota\"} mus mt ${adj}${issue.minimum.toString()} ${sizing.unit ?? \"prvk\"}`;\n                }\n                return `Hodnota je pli mal: ${issue.origin ?? \"hodnota\"} mus bt ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Neplatn etzec: mus zanat na \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Neplatn etzec: mus konit na \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Neplatn etzec: mus obsahovat \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Neplatn etzec: mus odpovdat vzoru ${_issue.pattern}`;\n                return `Neplatn formt ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Neplatn slo: mus bt nsobkem ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Neznm kle: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Neplatn kl v ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Neplatn vstup\";\n            case \"invalid_element\":\n                return `Neplatn hodnota v ${issue.origin}`;\n            default:\n                return `Neplatn vstup`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tegn\", verb: \"havde\" },\n        file: { unit: \"bytes\", verb: \"havde\" },\n        array: { unit: \"elementer\", verb: \"indeholdt\" },\n        set: { unit: \"elementer\", verb: \"indeholdt\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"e-mailadresse\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dato- og klokkeslt\",\n        date: \"ISO-dato\",\n        time: \"ISO-klokkeslt\",\n        duration: \"ISO-varighed\",\n        ipv4: \"IPv4-omrde\",\n        ipv6: \"IPv6-omrde\",\n        cidrv4: \"IPv4-spektrum\",\n        cidrv6: \"IPv6-spektrum\",\n        base64: \"base64-kodet streng\",\n        base64url: \"base64url-kodet streng\",\n        json_string: \"JSON-streng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        string: \"streng\",\n        number: \"tal\",\n        boolean: \"boolean\",\n        array: \"liste\",\n        object: \"objekt\",\n        set: \"st\",\n        file: \"fil\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Ugyldigt input: forventede instanceof ${issue.expected}, fik ${received}`;\n                }\n                return `Ugyldigt input: forventede ${expected}, fik ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ugyldig vrdi: forventede ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ugyldigt valg: forventede en af flgende ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                if (sizing)\n                    return `For stor: forventede ${origin ?? \"value\"} ${sizing.verb} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"elementer\"}`;\n                return `For stor: forventede ${origin ?? \"value\"} havde ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                if (sizing) {\n                    return `For lille: forventede ${origin} ${sizing.verb} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `For lille: forventede ${origin} havde ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ugyldig streng: skal starte med \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Ugyldig streng: skal ende med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ugyldig streng: skal indeholde \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ugyldig streng: skal matche mnsteret ${_issue.pattern}`;\n                return `Ugyldig ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ugyldigt tal: skal vre deleligt med ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Ukendte ngler\" : \"Ukendt ngle\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ugyldig ngle i ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ugyldigt input: matcher ingen af de tilladte typer\";\n            case \"invalid_element\":\n                return `Ugyldig vrdi i ${issue.origin}`;\n            default:\n                return `Ugyldigt input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"Zeichen\", verb: \"zu haben\" },\n        file: { unit: \"Bytes\", verb: \"zu haben\" },\n        array: { unit: \"Elemente\", verb: \"zu haben\" },\n        set: { unit: \"Elemente\", verb: \"zu haben\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"Eingabe\",\n        email: \"E-Mail-Adresse\",\n        url: \"URL\",\n        emoji: \"Emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-Datum und -Uhrzeit\",\n        date: \"ISO-Datum\",\n        time: \"ISO-Uhrzeit\",\n        duration: \"ISO-Dauer\",\n        ipv4: \"IPv4-Adresse\",\n        ipv6: \"IPv6-Adresse\",\n        cidrv4: \"IPv4-Bereich\",\n        cidrv6: \"IPv6-Bereich\",\n        base64: \"Base64-codierter String\",\n        base64url: \"Base64-URL-codierter String\",\n        json_string: \"JSON-String\",\n        e164: \"E.164-Nummer\",\n        jwt: \"JWT\",\n        template_literal: \"Eingabe\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"Zahl\",\n        array: \"Array\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Ungltige Eingabe: erwartet instanceof ${issue.expected}, erhalten ${received}`;\n                }\n                return `Ungltige Eingabe: erwartet ${expected}, erhalten ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ungltige Eingabe: erwartet ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ungltige Option: erwartet eine von ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Zu gro: erwartet, dass ${issue.origin ?? \"Wert\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"Elemente\"} hat`;\n                return `Zu gro: erwartet, dass ${issue.origin ?? \"Wert\"} ${adj}${issue.maximum.toString()} ist`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Zu klein: erwartet, dass ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} hat`;\n                }\n                return `Zu klein: erwartet, dass ${issue.origin} ${adj}${issue.minimum.toString()} ist`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ungltiger String: muss mit \"${_issue.prefix}\" beginnen`;\n                if (_issue.format === \"ends_with\")\n                    return `Ungltiger String: muss mit \"${_issue.suffix}\" enden`;\n                if (_issue.format === \"includes\")\n                    return `Ungltiger String: muss \"${_issue.includes}\" enthalten`;\n                if (_issue.format === \"regex\")\n                    return `Ungltiger String: muss dem Muster ${_issue.pattern} entsprechen`;\n                return `Ungltig: ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ungltige Zahl: muss ein Vielfaches von ${issue.divisor} sein`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Unbekannte Schlssel\" : \"Unbekannter Schlssel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ungltiger Schlssel in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ungltige Eingabe\";\n            case \"invalid_element\":\n                return `Ungltiger Wert in ${issue.origin}`;\n            default:\n                return `Ungltige Eingabe`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"characters\", verb: \"to have\" },\n        file: { unit: \"bytes\", verb: \"to have\" },\n        array: { unit: \"items\", verb: \"to have\" },\n        set: { unit: \"items\", verb: \"to have\" },\n        map: { unit: \"entries\", verb: \"to have\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"email address\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datetime\",\n        date: \"ISO date\",\n        time: \"ISO time\",\n        duration: \"ISO duration\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        mac: \"MAC address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded string\",\n        base64url: \"base64url-encoded string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 number\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    // type names: missing keys = do not translate (use raw value via ?? fallback)\n    const TypeDictionary = {\n        // Compatibility: \"nan\" -> \"NaN\" for display\n        nan: \"NaN\",\n        // All other type names omitted - they fall back to raw values via ?? operator\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                return `Invalid input: expected ${expected}, received ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Invalid input: expected ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Invalid option: expected one of ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Too big: expected ${issue.origin ?? \"value\"} to have ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `Too big: expected ${issue.origin ?? \"value\"} to be ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Too small: expected ${issue.origin} to have ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Too small: expected ${issue.origin} to be ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Invalid string: must start with \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Invalid string: must end with \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Invalid string: must include \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Invalid string: must match pattern ${_issue.pattern}`;\n                return `Invalid ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Invalid number: must be a multiple of ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Unrecognized key${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Invalid key in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Invalid input\";\n            case \"invalid_element\":\n                return `Invalid value in ${issue.origin}`;\n            default:\n                return `Invalid input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karaktrojn\", verb: \"havi\" },\n        file: { unit: \"bajtojn\", verb: \"havi\" },\n        array: { unit: \"elementojn\", verb: \"havi\" },\n        set: { unit: \"elementojn\", verb: \"havi\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"enigo\",\n        email: \"retadreso\",\n        url: \"URL\",\n        emoji: \"emoio\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-datotempo\",\n        date: \"ISO-dato\",\n        time: \"ISO-tempo\",\n        duration: \"ISO-daro\",\n        ipv4: \"IPv4-adreso\",\n        ipv6: \"IPv6-adreso\",\n        cidrv4: \"IPv4-rango\",\n        cidrv6: \"IPv6-rango\",\n        base64: \"64-ume kodita karaktraro\",\n        base64url: \"URL-64-ume kodita karaktraro\",\n        json_string: \"JSON-karaktraro\",\n        e164: \"E.164-nombro\",\n        jwt: \"JWT\",\n        template_literal: \"enigo\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"nombro\",\n        array: \"tabelo\",\n        null: \"senvalora\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Nevalida enigo: atendiis instanceof ${issue.expected}, riceviis ${received}`;\n                }\n                return `Nevalida enigo: atendiis ${expected}, riceviis ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Nevalida enigo: atendiis ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Nevalida opcio: atendiis unu el ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Tro granda: atendiis ke ${issue.origin ?? \"valoro\"} havu ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementojn\"}`;\n                return `Tro granda: atendiis ke ${issue.origin ?? \"valoro\"} havu ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Tro malgranda: atendiis ke ${issue.origin} havu ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Tro malgranda: atendiis ke ${issue.origin} estu ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Nevalida karaktraro: devas komencii per \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Nevalida karaktraro: devas finii per \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Nevalida karaktraro: devas inkluzivi \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Nevalida karaktraro: devas kongrui kun la modelo ${_issue.pattern}`;\n                return `Nevalida ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nevalida nombro: devas esti oblo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nekonata${issue.keys.length > 1 ? \"j\" : \"\"} losilo${issue.keys.length > 1 ? \"j\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Nevalida losilo en ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Nevalida enigo\";\n            case \"invalid_element\":\n                return `Nevalida valoro en ${issue.origin}`;\n            default:\n                return `Nevalida enigo`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caracteres\", verb: \"tener\" },\n        file: { unit: \"bytes\", verb: \"tener\" },\n        array: { unit: \"elementos\", verb: \"tener\" },\n        set: { unit: \"elementos\", verb: \"tener\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"entrada\",\n        email: \"direccin de correo electrnico\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"fecha y hora ISO\",\n        date: \"fecha ISO\",\n        time: \"hora ISO\",\n        duration: \"duracin ISO\",\n        ipv4: \"direccin IPv4\",\n        ipv6: \"direccin IPv6\",\n        cidrv4: \"rango IPv4\",\n        cidrv6: \"rango IPv6\",\n        base64: \"cadena codificada en base64\",\n        base64url: \"URL codificada en base64\",\n        json_string: \"cadena JSON\",\n        e164: \"nmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        string: \"texto\",\n        number: \"nmero\",\n        boolean: \"booleano\",\n        array: \"arreglo\",\n        object: \"objeto\",\n        set: \"conjunto\",\n        file: \"archivo\",\n        date: \"fecha\",\n        bigint: \"nmero grande\",\n        symbol: \"smbolo\",\n        undefined: \"indefinido\",\n        null: \"nulo\",\n        function: \"funcin\",\n        map: \"mapa\",\n        record: \"registro\",\n        tuple: \"tupla\",\n        enum: \"enumeracin\",\n        union: \"unin\",\n        literal: \"literal\",\n        promise: \"promesa\",\n        void: \"vaco\",\n        never: \"nunca\",\n        unknown: \"desconocido\",\n        any: \"cualquiera\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Entrada invlida: se esperaba instanceof ${issue.expected}, recibido ${received}`;\n                }\n                return `Entrada invlida: se esperaba ${expected}, recibido ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entrada invlida: se esperaba ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opcin invlida: se esperaba una de ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                if (sizing)\n                    return `Demasiado grande: se esperaba que ${origin ?? \"valor\"} tuviera ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementos\"}`;\n                return `Demasiado grande: se esperaba que ${origin ?? \"valor\"} fuera ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                if (sizing) {\n                    return `Demasiado pequeo: se esperaba que ${origin} tuviera ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Demasiado pequeo: se esperaba que ${origin} fuera ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Cadena invlida: debe comenzar con \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Cadena invlida: debe terminar en \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Cadena invlida: debe incluir \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Cadena invlida: debe coincidir con el patrn ${_issue.pattern}`;\n                return `Invlido ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nmero invlido: debe ser mltiplo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Llave${issue.keys.length > 1 ? \"s\" : \"\"} desconocida${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Llave invlida en ${TypeDictionary[issue.origin] ?? issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada invlida\";\n            case \"invalid_element\":\n                return `Valor invlido en ${TypeDictionary[issue.origin] ?? issue.origin}`;\n            default:\n                return `Entrada invlida`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"   \",\n        date: \" \",\n        time: \" \",\n        duration: \"  \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64-encoded \",\n        base64url: \"base64url-encoded \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected}  ${received}  `;\n                }\n                return ` :  ${expected}  ${received}  `;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1) {\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])} `;\n                }\n                return ` :    ${util.joinValues(issue.values, \"|\")} `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"} `;\n                }\n                return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit} `;\n                }\n                return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :   \"${_issue.prefix}\"  `;\n                }\n                if (_issue.format === \"ends_with\") {\n                    return ` :   \"${_issue.suffix}\"  `;\n                }\n                if (_issue.format === \"includes\") {\n                    return ` :   \"${_issue.includes}\" `;\n                }\n                if (_issue.format === \"regex\") {\n                    return ` :    ${_issue.pattern}   `;\n                }\n                return `${FormatDictionary[_issue.format] ?? issue.format} `;\n            }\n            case \"not_multiple_of\":\n                return ` :   ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return ` `;\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"merkki\", subject: \"merkkijonon\" },\n        file: { unit: \"tavua\", subject: \"tiedoston\" },\n        array: { unit: \"alkiota\", subject: \"listan\" },\n        set: { unit: \"alkiota\", subject: \"joukon\" },\n        number: { unit: \"\", subject: \"luvun\" },\n        bigint: { unit: \"\", subject: \"suuren kokonaisluvun\" },\n        int: { unit: \"\", subject: \"kokonaisluvun\" },\n        date: { unit: \"\", subject: \"pivmrn\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"snnllinen lauseke\",\n        email: \"shkpostiosoite\",\n        url: \"URL-osoite\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-aikaleima\",\n        date: \"ISO-pivmr\",\n        time: \"ISO-aika\",\n        duration: \"ISO-kesto\",\n        ipv4: \"IPv4-osoite\",\n        ipv6: \"IPv6-osoite\",\n        cidrv4: \"IPv4-alue\",\n        cidrv6: \"IPv6-alue\",\n        base64: \"base64-koodattu merkkijono\",\n        base64url: \"base64url-koodattu merkkijono\",\n        json_string: \"JSON-merkkijono\",\n        e164: \"E.164-luku\",\n        jwt: \"JWT\",\n        template_literal: \"templaattimerkkijono\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Virheellinen tyyppi: odotettiin instanceof ${issue.expected}, oli ${received}`;\n                }\n                return `Virheellinen tyyppi: odotettiin ${expected}, oli ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Virheellinen syte: tytyy olla ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Virheellinen valinta: tytyy olla yksi seuraavista: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Liian suuri: ${sizing.subject} tytyy olla ${adj}${issue.maximum.toString()} ${sizing.unit}`.trim();\n                }\n                return `Liian suuri: arvon tytyy olla ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Liian pieni: ${sizing.subject} tytyy olla ${adj}${issue.minimum.toString()} ${sizing.unit}`.trim();\n                }\n                return `Liian pieni: arvon tytyy olla ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Virheellinen syte: tytyy alkaa \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Virheellinen syte: tytyy loppua \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Virheellinen syte: tytyy sislt \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\") {\n                    return `Virheellinen syte: tytyy vastata snnllist lauseketta ${_issue.pattern}`;\n                }\n                return `Virheellinen ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Virheellinen luku: tytyy olla luvun ${issue.divisor} monikerta`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Tuntemattomat avaimet\" : \"Tuntematon avain\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return \"Virheellinen avain tietueessa\";\n            case \"invalid_union\":\n                return \"Virheellinen unioni\";\n            case \"invalid_element\":\n                return \"Virheellinen arvo joukossa\";\n            default:\n                return `Virheellinen syte`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caractres\", verb: \"avoir\" },\n        file: { unit: \"octets\", verb: \"avoir\" },\n        array: { unit: \"lments\", verb: \"avoir\" },\n        set: { unit: \"lments\", verb: \"avoir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"entre\",\n        email: \"adresse e-mail\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"date et heure ISO\",\n        date: \"date ISO\",\n        time: \"heure ISO\",\n        duration: \"dure ISO\",\n        ipv4: \"adresse IPv4\",\n        ipv6: \"adresse IPv6\",\n        cidrv4: \"plage IPv4\",\n        cidrv6: \"plage IPv6\",\n        base64: \"chane encode en base64\",\n        base64url: \"chane encode en base64url\",\n        json_string: \"chane JSON\",\n        e164: \"numro E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entre\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"nombre\",\n        array: \"tableau\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Entre invalide : instanceof ${issue.expected} attendu, ${received} reu`;\n                }\n                return `Entre invalide : ${expected} attendu, ${received} reu`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entre invalide : ${util.stringifyPrimitive(issue.values[0])} attendu`;\n                return `Option invalide : une valeur parmi ${util.joinValues(issue.values, \"|\")} attendue`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Trop grand : ${issue.origin ?? \"valeur\"} doit ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"lment(s)\"}`;\n                return `Trop grand : ${issue.origin ?? \"valeur\"} doit tre ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Trop petit : ${issue.origin} doit ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Trop petit : ${issue.origin} doit tre ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Chane invalide : doit commencer par \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Chane invalide : doit se terminer par \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chane invalide : doit inclure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chane invalide : doit correspondre au modle ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format} invalide`;\n            }\n            case \"not_multiple_of\":\n                return `Nombre invalide : doit tre un multiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Cl${issue.keys.length > 1 ? \"s\" : \"\"} non reconnue${issue.keys.length > 1 ? \"s\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Cl invalide dans ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entre invalide\";\n            case \"invalid_element\":\n                return `Valeur invalide dans ${issue.origin}`;\n            default:\n                return `Entre invalide`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caractres\", verb: \"avoir\" },\n        file: { unit: \"octets\", verb: \"avoir\" },\n        array: { unit: \"lments\", verb: \"avoir\" },\n        set: { unit: \"lments\", verb: \"avoir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"entre\",\n        email: \"adresse courriel\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"date-heure ISO\",\n        date: \"date ISO\",\n        time: \"heure ISO\",\n        duration: \"dure ISO\",\n        ipv4: \"adresse IPv4\",\n        ipv6: \"adresse IPv6\",\n        cidrv4: \"plage IPv4\",\n        cidrv6: \"plage IPv6\",\n        base64: \"chane encode en base64\",\n        base64url: \"chane encode en base64url\",\n        json_string: \"chane JSON\",\n        e164: \"numro E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entre\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Entre invalide : attendu instanceof ${issue.expected}, reu ${received}`;\n                }\n                return `Entre invalide : attendu ${expected}, reu ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entre invalide : attendu ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Option invalide : attendu l'une des valeurs suivantes ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Trop grand : attendu que ${issue.origin ?? \"la valeur\"} ait ${adj}${issue.maximum.toString()} ${sizing.unit}`;\n                return `Trop grand : attendu que ${issue.origin ?? \"la valeur\"} soit ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Trop petit : attendu que ${issue.origin} ait ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Trop petit : attendu que ${issue.origin} soit ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Chane invalide : doit commencer par \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Chane invalide : doit se terminer par \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chane invalide : doit inclure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chane invalide : doit correspondre au motif ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format} invalide`;\n            }\n            case \"not_multiple_of\":\n                return `Nombre invalide : doit tre un multiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Cl${issue.keys.length > 1 ? \"s\" : \"\"} non reconnue${issue.keys.length > 1 ? \"s\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Cl invalide dans ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entre invalide\";\n            case \"invalid_element\":\n                return `Valeur invalide dans ${issue.origin}`;\n            default:\n                return `Entre invalide`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    // Hebrew labels + grammatical gender\n    const TypeNames = {\n        string: { label: \"\", gender: \"f\" },\n        number: { label: \"\", gender: \"m\" },\n        boolean: { label: \" \", gender: \"m\" },\n        bigint: { label: \"BigInt\", gender: \"m\" },\n        date: { label: \"\", gender: \"m\" },\n        array: { label: \"\", gender: \"m\" },\n        object: { label: \"\", gender: \"m\" },\n        null: { label: \"  (null)\", gender: \"m\" },\n        undefined: { label: \"   (undefined)\", gender: \"m\" },\n        symbol: { label: \" (Symbol)\", gender: \"m\" },\n        function: { label: \"\", gender: \"f\" },\n        map: { label: \" (Map)\", gender: \"f\" },\n        set: { label: \" (Set)\", gender: \"f\" },\n        file: { label: \"\", gender: \"m\" },\n        promise: { label: \"Promise\", gender: \"m\" },\n        NaN: { label: \"NaN\", gender: \"m\" },\n        unknown: { label: \"  \", gender: \"m\" },\n        value: { label: \"\", gender: \"m\" },\n    };\n    // Sizing units for size-related messages + localized origin labels\n    const Sizable = {\n        string: { unit: \"\", shortLabel: \"\", longLabel: \"\" },\n        file: { unit: \"\", shortLabel: \"\", longLabel: \"\" },\n        array: { unit: \"\", shortLabel: \"\", longLabel: \"\" },\n        set: { unit: \"\", shortLabel: \"\", longLabel: \"\" },\n        number: { unit: \"\", shortLabel: \"\", longLabel: \"\" }, // no unit\n    };\n    // Helpers  labels, articles, and verbs\n    const typeEntry = (t) => (t ? TypeNames[t] : undefined);\n    const typeLabel = (t) => {\n        const e = typeEntry(t);\n        if (e)\n            return e.label;\n        // fallback: show raw string if unknown\n        return t ?? TypeNames.unknown.label;\n    };\n    const withDefinite = (t) => `${typeLabel(t)}`;\n    const verbFor = (t) => {\n        const e = typeEntry(t);\n        const gender = e?.gender ?? \"m\";\n        return gender === \"f\" ? \" \" : \" \";\n    };\n    const getSizing = (origin) => {\n        if (!origin)\n            return null;\n        return Sizable[origin] ?? null;\n    };\n    const FormatDictionary = {\n        regex: { label: \"\", gender: \"m\" },\n        email: { label: \" \", gender: \"f\" },\n        url: { label: \" \", gender: \"f\" },\n        emoji: { label: \"'\", gender: \"m\" },\n        uuid: { label: \"UUID\", gender: \"m\" },\n        nanoid: { label: \"nanoid\", gender: \"m\" },\n        guid: { label: \"GUID\", gender: \"m\" },\n        cuid: { label: \"cuid\", gender: \"m\" },\n        cuid2: { label: \"cuid2\", gender: \"m\" },\n        ulid: { label: \"ULID\", gender: \"m\" },\n        xid: { label: \"XID\", gender: \"m\" },\n        ksuid: { label: \"KSUID\", gender: \"m\" },\n        datetime: { label: \"  ISO\", gender: \"m\" },\n        date: { label: \" ISO\", gender: \"m\" },\n        time: { label: \" ISO\", gender: \"m\" },\n        duration: { label: \"  ISO\", gender: \"m\" },\n        ipv4: { label: \" IPv4\", gender: \"f\" },\n        ipv6: { label: \" IPv6\", gender: \"f\" },\n        cidrv4: { label: \" IPv4\", gender: \"m\" },\n        cidrv6: { label: \" IPv6\", gender: \"m\" },\n        base64: { label: \"  64\", gender: \"f\" },\n        base64url: { label: \"  64  \", gender: \"f\" },\n        json_string: { label: \" JSON\", gender: \"f\" },\n        e164: { label: \" E.164\", gender: \"m\" },\n        jwt: { label: \"JWT\", gender: \"m\" },\n        ends_with: { label: \"\", gender: \"m\" },\n        includes: { label: \"\", gender: \"m\" },\n        lowercase: { label: \"\", gender: \"m\" },\n        starts_with: { label: \"\", gender: \"m\" },\n        uppercase: { label: \"\", gender: \"m\" },\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                // Expected type: show without definite article for clearer Hebrew\n                const expectedKey = issue.expected;\n                const expected = TypeDictionary[expectedKey ?? \"\"] ?? typeLabel(expectedKey);\n                // Received: show localized label if known, otherwise constructor/raw\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? TypeNames[receivedType]?.label ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `  :   instanceof ${issue.expected},  ${received}`;\n                }\n                return `  :   ${expected},  ${received}`;\n            }\n            case \"invalid_value\": {\n                if (issue.values.length === 1) {\n                    return `  :    ${util.stringifyPrimitive(issue.values[0])}`;\n                }\n                // Join values with proper Hebrew formatting\n                const stringified = issue.values.map((v) => util.stringifyPrimitive(v));\n                if (issue.values.length === 2) {\n                    return `  :    ${stringified[0]}  ${stringified[1]}`;\n                }\n                // For 3+ values: \"a\", \"b\"  \"c\"\n                const lastValue = stringified[stringified.length - 1];\n                const restValues = stringified.slice(0, -1).join(\", \");\n                return `  :    ${restValues}  ${lastValue}`;\n            }\n            case \"too_big\": {\n                const sizing = getSizing(issue.origin);\n                const subject = withDefinite(issue.origin ?? \"value\");\n                if (issue.origin === \"string\") {\n                    // Special handling for strings - more natural Hebrew\n                    return `${sizing?.longLabel ?? \"\"} : ${subject}   ${issue.maximum.toString()} ${sizing?.unit ?? \"\"} ${issue.inclusive ? \" \" : \" \"}`.trim();\n                }\n                if (issue.origin === \"number\") {\n                    // Natural Hebrew for numbers\n                    const comparison = issue.inclusive ? `   -${issue.maximum}` : ` -${issue.maximum}`;\n                    return ` : ${subject}   ${comparison}`;\n                }\n                if (issue.origin === \"array\" || issue.origin === \"set\") {\n                    // Natural Hebrew for arrays and sets\n                    const verb = issue.origin === \"set\" ? \"\" : \"\";\n                    const comparison = issue.inclusive\n                        ? `${issue.maximum} ${sizing?.unit ?? \"\"}  `\n                        : ` -${issue.maximum} ${sizing?.unit ?? \"\"}`;\n                    return ` : ${subject} ${verb}  ${comparison}`.trim();\n                }\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const be = verbFor(issue.origin ?? \"value\");\n                if (sizing?.unit) {\n                    return `${sizing.longLabel} : ${subject} ${be} ${adj}${issue.maximum.toString()} ${sizing.unit}`;\n                }\n                return `${sizing?.longLabel ?? \"\"} : ${subject} ${be} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const sizing = getSizing(issue.origin);\n                const subject = withDefinite(issue.origin ?? \"value\");\n                if (issue.origin === \"string\") {\n                    // Special handling for strings - more natural Hebrew\n                    return `${sizing?.shortLabel ?? \"\"} : ${subject}   ${issue.minimum.toString()} ${sizing?.unit ?? \"\"} ${issue.inclusive ? \" \" : \"\"}`.trim();\n                }\n                if (issue.origin === \"number\") {\n                    // Natural Hebrew for numbers\n                    const comparison = issue.inclusive ? `   -${issue.minimum}` : ` -${issue.minimum}`;\n                    return ` : ${subject}   ${comparison}`;\n                }\n                if (issue.origin === \"array\" || issue.origin === \"set\") {\n                    // Natural Hebrew for arrays and sets\n                    const verb = issue.origin === \"set\" ? \"\" : \"\";\n                    // Special case for singular (minimum === 1)\n                    if (issue.minimum === 1 && issue.inclusive) {\n                        const singularPhrase = issue.origin === \"set\" ? \"  \" : \"  \";\n                        return ` : ${subject} ${verb}  ${singularPhrase}`;\n                    }\n                    const comparison = issue.inclusive\n                        ? `${issue.minimum} ${sizing?.unit ?? \"\"}  `\n                        : ` -${issue.minimum} ${sizing?.unit ?? \"\"}`;\n                    return ` : ${subject} ${verb}  ${comparison}`.trim();\n                }\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const be = verbFor(issue.origin ?? \"value\");\n                if (sizing?.unit) {\n                    return `${sizing.shortLabel} : ${subject} ${be} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `${sizing?.shortLabel ?? \"\"} : ${subject} ${be} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                // These apply to strings  use feminine grammar +  \n                if (_issue.format === \"starts_with\")\n                    return `    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `    ${_issue.pattern}`;\n                // Handle gender agreement for formats\n                const nounEntry = FormatDictionary[_issue.format];\n                const noun = nounEntry?.label ?? _issue.format;\n                const gender = nounEntry?.gender ?? \"m\";\n                const adjective = gender === \"f\" ? \"\" : \"\";\n                return `${noun}  ${adjective}`;\n            }\n            case \"not_multiple_of\":\n                return `  :     ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"}  ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\": {\n                return `   `;\n            }\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\": {\n                const place = withDefinite(issue.origin ?? \"array\");\n                return `   ${place}`;\n            }\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"legyen\" },\n        file: { unit: \"byte\", verb: \"legyen\" },\n        array: { unit: \"elem\", verb: \"legyen\" },\n        set: { unit: \"elem\", verb: \"legyen\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"bemenet\",\n        email: \"email cm\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO idblyeg\",\n        date: \"ISO dtum\",\n        time: \"ISO id\",\n        duration: \"ISO idintervallum\",\n        ipv4: \"IPv4 cm\",\n        ipv6: \"IPv6 cm\",\n        cidrv4: \"IPv4 tartomny\",\n        cidrv6: \"IPv6 tartomny\",\n        base64: \"base64-kdolt string\",\n        base64url: \"base64url-kdolt string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 szm\",\n        jwt: \"JWT\",\n        template_literal: \"bemenet\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"szm\",\n        array: \"tmb\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `rvnytelen bemenet: a vrt rtk instanceof ${issue.expected}, a kapott rtk ${received}`;\n                }\n                return `rvnytelen bemenet: a vrt rtk ${expected}, a kapott rtk ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `rvnytelen bemenet: a vrt rtk ${util.stringifyPrimitive(issue.values[0])}`;\n                return `rvnytelen opci: valamelyik rtk vrt ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Tl nagy: ${issue.origin ?? \"rtk\"} mrete tl nagy ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elem\"}`;\n                return `Tl nagy: a bemeneti rtk ${issue.origin ?? \"rtk\"} tl nagy: ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Tl kicsi: a bemeneti rtk ${issue.origin} mrete tl kicsi ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Tl kicsi: a bemeneti rtk ${issue.origin} tl kicsi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `rvnytelen string: \"${_issue.prefix}\" rtkkel kell kezddnie`;\n                if (_issue.format === \"ends_with\")\n                    return `rvnytelen string: \"${_issue.suffix}\" rtkkel kell vgzdnie`;\n                if (_issue.format === \"includes\")\n                    return `rvnytelen string: \"${_issue.includes}\" rtket kell tartalmaznia`;\n                if (_issue.format === \"regex\")\n                    return `rvnytelen string: ${_issue.pattern} mintnak kell megfelelnie`;\n                return `rvnytelen ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `rvnytelen szm: ${issue.divisor} tbbszrsnek kell lennie`;\n            case \"unrecognized_keys\":\n                return `Ismeretlen kulcs${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `rvnytelen kulcs ${issue.origin}`;\n            case \"invalid_union\":\n                return \"rvnytelen bemenet\";\n            case \"invalid_element\":\n                return `rvnytelen rtk: ${issue.origin}`;\n            default:\n                return `rvnytelen bemenet`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nfunction getArmenianPlural(count, one, many) {\n    return Math.abs(count) === 1 ? one : many;\n}\nfunction withDefiniteArticle(word) {\n    if (!word)\n        return \"\";\n    const vowels = [\"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n    const lastChar = word[word.length - 1];\n    return word + (vowels.includes(lastChar) ? \"\" : \"\");\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        file: {\n            unit: {\n                one: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        array: {\n            unit: {\n                one: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        set: {\n            unit: {\n                one: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \". \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64  \",\n        base64url: \"base64url  \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `    instanceof ${issue.expected},   ${received}`;\n                }\n                return `    ${expected},   ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `    ${util.stringifyPrimitive(issue.values[1])}`;\n                return `      ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getArmenianPlural(maxValue, sizing.unit.one, sizing.unit.many);\n                    return `    ,  ${withDefiniteArticle(issue.origin ?? \"\")}  ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return `    ,  ${withDefiniteArticle(issue.origin ?? \"\")}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getArmenianPlural(minValue, sizing.unit.one, sizing.unit.many);\n                    return `    ,  ${withDefiniteArticle(issue.origin)}  ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return `    ,  ${withDefiniteArticle(issue.origin)}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `     \"${_issue.prefix}\"-`;\n                if (_issue.format === \"ends_with\")\n                    return `     \"${_issue.suffix}\"-`;\n                if (_issue.format === \"includes\")\n                    return `     \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `     ${_issue.pattern} `;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `      ${issue.divisor}-`;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}. ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `  ${withDefiniteArticle(issue.origin)}-`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `  ${withDefiniteArticle(issue.origin)}-`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"memiliki\" },\n        file: { unit: \"byte\", verb: \"memiliki\" },\n        array: { unit: \"item\", verb: \"memiliki\" },\n        set: { unit: \"item\", verb: \"memiliki\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"alamat email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"tanggal dan waktu format ISO\",\n        date: \"tanggal format ISO\",\n        time: \"jam format ISO\",\n        duration: \"durasi format ISO\",\n        ipv4: \"alamat IPv4\",\n        ipv6: \"alamat IPv6\",\n        cidrv4: \"rentang alamat IPv4\",\n        cidrv6: \"rentang alamat IPv6\",\n        base64: \"string dengan enkode base64\",\n        base64url: \"string dengan enkode base64url\",\n        json_string: \"string JSON\",\n        e164: \"angka E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Input tidak valid: diharapkan instanceof ${issue.expected}, diterima ${received}`;\n                }\n                return `Input tidak valid: diharapkan ${expected}, diterima ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input tidak valid: diharapkan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Pilihan tidak valid: diharapkan salah satu dari ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Terlalu besar: diharapkan ${issue.origin ?? \"value\"} memiliki ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elemen\"}`;\n                return `Terlalu besar: diharapkan ${issue.origin ?? \"value\"} menjadi ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Terlalu kecil: diharapkan ${issue.origin} memiliki ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Terlalu kecil: diharapkan ${issue.origin} menjadi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `String tidak valid: harus dimulai dengan \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `String tidak valid: harus berakhir dengan \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `String tidak valid: harus menyertakan \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `String tidak valid: harus sesuai pola ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format} tidak valid`;\n            }\n            case \"not_multiple_of\":\n                return `Angka tidak valid: harus kelipatan dari ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kunci tidak dikenali ${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kunci tidak valid di ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input tidak valid\";\n            case \"invalid_element\":\n                return `Nilai tidak valid di ${issue.origin}`;\n            default:\n                return `Input tidak valid`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"stafi\", verb: \"a hafa\" },\n        file: { unit: \"bti\", verb: \"a hafa\" },\n        array: { unit: \"hluti\", verb: \"a hafa\" },\n        set: { unit: \"hluti\", verb: \"a hafa\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"gildi\",\n        email: \"netfang\",\n        url: \"vefsl\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dagsetning og tmi\",\n        date: \"ISO dagsetning\",\n        time: \"ISO tmi\",\n        duration: \"ISO tmalengd\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded strengur\",\n        base64url: \"base64url-encoded strengur\",\n        json_string: \"JSON strengur\",\n        e164: \"E.164 tlugildi\",\n        jwt: \"JWT\",\n        template_literal: \"gildi\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"nmer\",\n        array: \"fylki\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Rangt gildi:  slst inn ${received} ar sem  a vera instanceof ${issue.expected}`;\n                }\n                return `Rangt gildi:  slst inn ${received} ar sem  a vera ${expected}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Rangt gildi: gert r fyrir ${util.stringifyPrimitive(issue.values[0])}`;\n                return `gilt val: m vera eitt af eftirfarandi ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Of strt: gert er r fyrir a ${issue.origin ?? \"gildi\"} hafi ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"hluti\"}`;\n                return `Of strt: gert er r fyrir a ${issue.origin ?? \"gildi\"} s ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Of lti: gert er r fyrir a ${issue.origin} hafi ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Of lti: gert er r fyrir a ${issue.origin} s ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `gildur strengur: verur a byrja  \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `gildur strengur: verur a enda  \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `gildur strengur: verur a innihalda \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `gildur strengur: verur a fylgja mynstri ${_issue.pattern}`;\n                return `Rangt ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Rng tala: verur a vera margfeldi af ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `ekkt ${issue.keys.length > 1 ? \"ir lyklar\" : \"ur lykill\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Rangur lykill  ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Rangt gildi\";\n            case \"invalid_element\":\n                return `Rangt gildi  ${issue.origin}`;\n            default:\n                return `Rangt gildi`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caratteri\", verb: \"avere\" },\n        file: { unit: \"byte\", verb: \"avere\" },\n        array: { unit: \"elementi\", verb: \"avere\" },\n        set: { unit: \"elementi\", verb: \"avere\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"indirizzo email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data e ora ISO\",\n        date: \"data ISO\",\n        time: \"ora ISO\",\n        duration: \"durata ISO\",\n        ipv4: \"indirizzo IPv4\",\n        ipv6: \"indirizzo IPv6\",\n        cidrv4: \"intervallo IPv4\",\n        cidrv6: \"intervallo IPv6\",\n        base64: \"stringa codificata in base64\",\n        base64url: \"URL codificata in base64\",\n        json_string: \"stringa JSON\",\n        e164: \"numero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"numero\",\n        array: \"vettore\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Input non valido: atteso instanceof ${issue.expected}, ricevuto ${received}`;\n                }\n                return `Input non valido: atteso ${expected}, ricevuto ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input non valido: atteso ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opzione non valida: atteso uno tra ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Troppo grande: ${issue.origin ?? \"valore\"} deve avere ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementi\"}`;\n                return `Troppo grande: ${issue.origin ?? \"valore\"} deve essere ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Troppo piccolo: ${issue.origin} deve avere ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Troppo piccolo: ${issue.origin} deve essere ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Stringa non valida: deve iniziare con \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Stringa non valida: deve terminare con \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Stringa non valida: deve includere \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Stringa non valida: deve corrispondere al pattern ${_issue.pattern}`;\n                return `Invalid ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Numero non valido: deve essere un multiplo di ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Chiav${issue.keys.length > 1 ? \"i\" : \"e\"} non riconosciut${issue.keys.length > 1 ? \"e\" : \"a\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Chiave non valida in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input non valido\";\n            case \"invalid_element\":\n                return `Valore non valido in ${issue.origin}`;\n            default:\n                return `Input non valido`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO\",\n        date: \"ISO\",\n        time: \"ISO\",\n        duration: \"ISO\",\n        ipv4: \"IPv4\",\n        ipv6: \"IPv6\",\n        cidrv4: \"IPv4\",\n        cidrv6: \"IPv6\",\n        base64: \"base64\",\n        base64url: \"base64url\",\n        json_string: \"JSON\",\n        e164: \"E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `: instanceof ${issue.expected}${received}`;\n                }\n                return `: ${expected}${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `: ${util.stringifyPrimitive(issue.values[0])}`;\n                return `: ${util.joinValues(issue.values, \"\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `: ${issue.origin ?? \"\"}${issue.maximum.toString()}${sizing.unit ?? \"\"}${adj}`;\n                return `: ${issue.origin ?? \"\"}${issue.maximum.toString()}${adj}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `: ${issue.origin}${issue.minimum.toString()}${sizing.unit}${adj}`;\n                return `: ${issue.origin}${issue.minimum.toString()}${adj}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `: \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `: \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `: \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `: ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `: ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \"\")}`;\n            case \"invalid_key\":\n                return `${issue.origin}`;\n            case \"invalid_union\":\n                return \"\";\n            case \"invalid_element\":\n                return `${issue.origin}`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"- \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"-\",\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64- \",\n        base64url: \"base64url- \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        string: \"\",\n        boolean: \"\",\n        function: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected},  ${received}`;\n                }\n                return ` :  ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :  - ${util.joinValues(issue.values, \"|\")}-`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` :  ${issue.origin ?? \"\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit}`;\n                return ` :  ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :  ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` :  ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :   \"${_issue.prefix}\"-`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` :   \"${_issue.suffix}\"-`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"-`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :   ${issue.divisor}- `;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `  ${issue.origin}-`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `  ${issue.origin}-`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"  ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \" ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IPv4\",\n        cidrv6: \" IPv6\",\n        base64: \" base64\",\n        base64url: \" base64url\",\n        json_string: \" JSON\",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \" (Array)\",\n        null: \" (null)\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `  instanceof ${issue.expected}  ${received}`;\n                }\n                return `  ${expected}  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  ${util.stringifyPrimitive(issue.values[0])}`;\n                return `  ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `  ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return `  ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `  ${issue.origin} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `  ${issue.origin} ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `  \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `  \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `  \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `  ${_issue.pattern}`;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `  ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return ` ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return ` ${issue.origin}`;\n            case \"invalid_union\":\n                return ``;\n            case \"invalid_element\":\n                return ` ${issue.origin}`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import km from \"./km.js\";\n/** @deprecated Use `km` instead. */\nexport default function () {\n    return km();\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"to have\" },\n        file: { unit: \"\", verb: \"to have\" },\n        array: { unit: \"\", verb: \"to have\" },\n        set: { unit: \"\", verb: \"to have\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64  \",\n        base64url: \"base64url  \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :   instanceof ${issue.expected},   ${received}`;\n                }\n                return ` :   ${expected},   ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}  `;\n                return ` : ${util.joinValues(issue.values, \" \")}   `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const suffix = adj === \"\" ? \" \" : \" \";\n                const sizing = getSizing(issue.origin);\n                const unit = sizing?.unit ?? \"\";\n                if (sizing)\n                    return `${issue.origin ?? \"\"}  : ${issue.maximum.toString()}${unit} ${adj}${suffix}`;\n                return `${issue.origin ?? \"\"}  : ${issue.maximum.toString()} ${adj}${suffix}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const suffix = adj === \"\" ? \" \" : \" \";\n                const sizing = getSizing(issue.origin);\n                const unit = sizing?.unit ?? \"\";\n                if (sizing) {\n                    return `${issue.origin ?? \"\"}  : ${issue.minimum.toString()}${unit} ${adj}${suffix}`;\n                }\n                return `${issue.origin ?? \"\"}  : ${issue.minimum.toString()} ${adj}${suffix}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` : \"${_issue.prefix}\"()  `;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` : \"${_issue.suffix}\"()  `;\n                if (_issue.format === \"includes\")\n                    return ` : \"${_issue.includes}\"()  `;\n                if (_issue.format === \"regex\")\n                    return ` :  ${_issue.pattern}   `;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` : ${issue.divisor}  `;\n            case \"unrecognized_keys\":\n                return `   : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return ` : ${issue.origin}`;\n            case \"invalid_union\":\n                return ` `;\n            case \"invalid_element\":\n                return ` : ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst capitalizeFirstCharacter = (text) => {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n};\nfunction getUnitTypeFromNumber(number) {\n    const abs = Math.abs(number);\n    const last = abs % 10;\n    const last2 = abs % 100;\n    if ((last2 >= 11 && last2 <= 19) || last === 0)\n        return \"many\";\n    if (last === 1)\n        return \"one\";\n    return \"few\";\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"simbolis\",\n                few: \"simboliai\",\n                many: \"simboli\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi bti ne ilgesn kaip\",\n                    notInclusive: \"turi bti trumpesn kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi bti ne trumpesn kaip\",\n                    notInclusive: \"turi bti ilgesn kaip\",\n                },\n            },\n        },\n        file: {\n            unit: {\n                one: \"baitas\",\n                few: \"baitai\",\n                many: \"bait\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi bti ne didesnis kaip\",\n                    notInclusive: \"turi bti maesnis kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi bti ne maesnis kaip\",\n                    notInclusive: \"turi bti didesnis kaip\",\n                },\n            },\n        },\n        array: {\n            unit: {\n                one: \"element\",\n                few: \"elementus\",\n                many: \"element\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi turti ne daugiau kaip\",\n                    notInclusive: \"turi turti maiau kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi turti ne maiau kaip\",\n                    notInclusive: \"turi turti daugiau kaip\",\n                },\n            },\n        },\n        set: {\n            unit: {\n                one: \"element\",\n                few: \"elementus\",\n                many: \"element\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi turti ne daugiau kaip\",\n                    notInclusive: \"turi turti maiau kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi turti ne maiau kaip\",\n                    notInclusive: \"turi turti daugiau kaip\",\n                },\n            },\n        },\n    };\n    function getSizing(origin, unitType, inclusive, targetShouldBe) {\n        const result = Sizable[origin] ?? null;\n        if (result === null)\n            return result;\n        return {\n            unit: result.unit[unitType],\n            verb: result.verb[targetShouldBe][inclusive ? \"inclusive\" : \"notInclusive\"],\n        };\n    }\n    const FormatDictionary = {\n        regex: \"vestis\",\n        email: \"el. pato adresas\",\n        url: \"URL\",\n        emoji: \"jaustukas\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO data ir laikas\",\n        date: \"ISO data\",\n        time: \"ISO laikas\",\n        duration: \"ISO trukm\",\n        ipv4: \"IPv4 adresas\",\n        ipv6: \"IPv6 adresas\",\n        cidrv4: \"IPv4 tinklo prefiksas (CIDR)\",\n        cidrv6: \"IPv6 tinklo prefiksas (CIDR)\",\n        base64: \"base64 ukoduota eilut\",\n        base64url: \"base64url ukoduota eilut\",\n        json_string: \"JSON eilut\",\n        e164: \"E.164 numeris\",\n        jwt: \"JWT\",\n        template_literal: \"vestis\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"skaiius\",\n        bigint: \"sveikasis skaiius\",\n        string: \"eilut\",\n        boolean: \"login reikm\",\n        undefined: \"neapibrta reikm\",\n        function: \"funkcija\",\n        symbol: \"simbolis\",\n        array: \"masyvas\",\n        object: \"objektas\",\n        null: \"nulin reikm\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Gautas tipas ${received}, o tiktasi - instanceof ${issue.expected}`;\n                }\n                return `Gautas tipas ${received}, o tiktasi - ${expected}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Privalo bti ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Privalo bti vienas i ${util.joinValues(issue.values, \"|\")} pasirinkim`;\n            case \"too_big\": {\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                const sizing = getSizing(issue.origin, getUnitTypeFromNumber(Number(issue.maximum)), issue.inclusive ?? false, \"smaller\");\n                if (sizing?.verb)\n                    return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} ${sizing.verb} ${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                const adj = issue.inclusive ? \"ne didesnis kaip\" : \"maesnis kaip\";\n                return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} turi bti ${adj} ${issue.maximum.toString()} ${sizing?.unit}`;\n            }\n            case \"too_small\": {\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                const sizing = getSizing(issue.origin, getUnitTypeFromNumber(Number(issue.minimum)), issue.inclusive ?? false, \"bigger\");\n                if (sizing?.verb)\n                    return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} ${sizing.verb} ${issue.minimum.toString()} ${sizing.unit ?? \"element\"}`;\n                const adj = issue.inclusive ? \"ne maesnis kaip\" : \"didesnis kaip\";\n                return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} turi bti ${adj} ${issue.minimum.toString()} ${sizing?.unit}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Eilut privalo prasidti \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Eilut privalo pasibaigti \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Eilut privalo traukti \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Eilut privalo atitikti ${_issue.pattern}`;\n                return `Neteisingas ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Skaiius privalo bti ${issue.divisor} kartotinis.`;\n            case \"unrecognized_keys\":\n                return `Neatpaint${issue.keys.length > 1 ? \"i\" : \"as\"} rakt${issue.keys.length > 1 ? \"ai\" : \"as\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return \"Rastas klaidingas raktas\";\n            case \"invalid_union\":\n                return \"Klaidinga vestis\";\n            case \"invalid_element\": {\n                const origin = TypeDictionary[issue.origin] ?? issue.origin;\n                return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} turi klaiding vest`;\n            }\n            default:\n                return \"Klaidinga vestis\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"  -\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64- \",\n        base64url: \"base64url- \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :   instanceof ${issue.expected},  ${received}`;\n                }\n                return ` :   ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Invalid input: expected ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :     \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` :     \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :    \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :      ${_issue.pattern}`;\n                return `Invalid ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :      ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \" \" : \" \"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"aksara\", verb: \"mempunyai\" },\n        file: { unit: \"bait\", verb: \"mempunyai\" },\n        array: { unit: \"elemen\", verb: \"mempunyai\" },\n        set: { unit: \"elemen\", verb: \"mempunyai\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"alamat e-mel\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"tarikh masa ISO\",\n        date: \"tarikh ISO\",\n        time: \"masa ISO\",\n        duration: \"tempoh ISO\",\n        ipv4: \"alamat IPv4\",\n        ipv6: \"alamat IPv6\",\n        cidrv4: \"julat IPv4\",\n        cidrv6: \"julat IPv6\",\n        base64: \"string dikodkan base64\",\n        base64url: \"string dikodkan base64url\",\n        json_string: \"string JSON\",\n        e164: \"nombor E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"nombor\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Input tidak sah: dijangka instanceof ${issue.expected}, diterima ${received}`;\n                }\n                return `Input tidak sah: dijangka ${expected}, diterima ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input tidak sah: dijangka ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Pilihan tidak sah: dijangka salah satu daripada ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Terlalu besar: dijangka ${issue.origin ?? \"nilai\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elemen\"}`;\n                return `Terlalu besar: dijangka ${issue.origin ?? \"nilai\"} adalah ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Terlalu kecil: dijangka ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Terlalu kecil: dijangka ${issue.origin} adalah ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `String tidak sah: mesti bermula dengan \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `String tidak sah: mesti berakhir dengan \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `String tidak sah: mesti mengandungi \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `String tidak sah: mesti sepadan dengan corak ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format} tidak sah`;\n            }\n            case \"not_multiple_of\":\n                return `Nombor tidak sah: perlu gandaan ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kunci tidak dikenali: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kunci tidak sah dalam ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input tidak sah\";\n            case \"invalid_element\":\n                return `Nilai tidak sah dalam ${issue.origin}`;\n            default:\n                return `Input tidak sah`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tekens\", verb: \"heeft\" },\n        file: { unit: \"bytes\", verb: \"heeft\" },\n        array: { unit: \"elementen\", verb: \"heeft\" },\n        set: { unit: \"elementen\", verb: \"heeft\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"invoer\",\n        email: \"emailadres\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datum en tijd\",\n        date: \"ISO datum\",\n        time: \"ISO tijd\",\n        duration: \"ISO duur\",\n        ipv4: \"IPv4-adres\",\n        ipv6: \"IPv6-adres\",\n        cidrv4: \"IPv4-bereik\",\n        cidrv6: \"IPv6-bereik\",\n        base64: \"base64-gecodeerde tekst\",\n        base64url: \"base64 URL-gecodeerde tekst\",\n        json_string: \"JSON string\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"invoer\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"getal\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Ongeldige invoer: verwacht instanceof ${issue.expected}, ontving ${received}`;\n                }\n                return `Ongeldige invoer: verwacht ${expected}, ontving ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ongeldige invoer: verwacht ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ongeldige optie: verwacht n van ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                const longName = issue.origin === \"date\" ? \"laat\" : issue.origin === \"string\" ? \"lang\" : \"groot\";\n                if (sizing)\n                    return `Te ${longName}: verwacht dat ${issue.origin ?? \"waarde\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementen\"} ${sizing.verb}`;\n                return `Te ${longName}: verwacht dat ${issue.origin ?? \"waarde\"} ${adj}${issue.maximum.toString()} is`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                const shortName = issue.origin === \"date\" ? \"vroeg\" : issue.origin === \"string\" ? \"kort\" : \"klein\";\n                if (sizing) {\n                    return `Te ${shortName}: verwacht dat ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} ${sizing.verb}`;\n                }\n                return `Te ${shortName}: verwacht dat ${issue.origin} ${adj}${issue.minimum.toString()} is`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Ongeldige tekst: moet met \"${_issue.prefix}\" beginnen`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Ongeldige tekst: moet op \"${_issue.suffix}\" eindigen`;\n                if (_issue.format === \"includes\")\n                    return `Ongeldige tekst: moet \"${_issue.includes}\" bevatten`;\n                if (_issue.format === \"regex\")\n                    return `Ongeldige tekst: moet overeenkomen met patroon ${_issue.pattern}`;\n                return `Ongeldig: ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ongeldig getal: moet een veelvoud van ${issue.divisor} zijn`;\n            case \"unrecognized_keys\":\n                return `Onbekende key${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ongeldige key in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ongeldige invoer\";\n            case \"invalid_element\":\n                return `Ongeldige waarde in ${issue.origin}`;\n            default:\n                return `Ongeldige invoer`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tegn\", verb: \" ha\" },\n        file: { unit: \"bytes\", verb: \" ha\" },\n        array: { unit: \"elementer\", verb: \" inneholde\" },\n        set: { unit: \"elementer\", verb: \" inneholde\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"input\",\n        email: \"e-postadresse\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dato- og klokkeslett\",\n        date: \"ISO-dato\",\n        time: \"ISO-klokkeslett\",\n        duration: \"ISO-varighet\",\n        ipv4: \"IPv4-omrde\",\n        ipv6: \"IPv6-omrde\",\n        cidrv4: \"IPv4-spekter\",\n        cidrv6: \"IPv6-spekter\",\n        base64: \"base64-enkodet streng\",\n        base64url: \"base64url-enkodet streng\",\n        json_string: \"JSON-streng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"tall\",\n        array: \"liste\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Ugyldig input: forventet instanceof ${issue.expected}, fikk ${received}`;\n                }\n                return `Ugyldig input: forventet ${expected}, fikk ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ugyldig verdi: forventet ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ugyldig valg: forventet en av ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `For stor(t): forventet ${issue.origin ?? \"value\"} til  ha ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementer\"}`;\n                return `For stor(t): forventet ${issue.origin ?? \"value\"} til  ha ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `For lite(n): forventet ${issue.origin} til  ha ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `For lite(n): forventet ${issue.origin} til  ha ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ugyldig streng: m starte med \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Ugyldig streng: m ende med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ugyldig streng: m inneholde \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ugyldig streng: m matche mnsteret ${_issue.pattern}`;\n                return `Ugyldig ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ugyldig tall: m vre et multiplum av ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Ukjente nkler\" : \"Ukjent nkkel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ugyldig nkkel i ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ugyldig input\";\n            case \"invalid_element\":\n                return `Ugyldig verdi i ${issue.origin}`;\n            default:\n                return `Ugyldig input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"harf\", verb: \"olmaldr\" },\n        file: { unit: \"bayt\", verb: \"olmaldr\" },\n        array: { unit: \"unsur\", verb: \"olmaldr\" },\n        set: { unit: \"unsur\", verb: \"olmaldr\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"giren\",\n        email: \"epostagh\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO hengm\",\n        date: \"ISO tarihi\",\n        time: \"ISO zaman\",\n        duration: \"ISO mddeti\",\n        ipv4: \"IPv4 nin\",\n        ipv6: \"IPv6 nin\",\n        cidrv4: \"IPv4 menzili\",\n        cidrv6: \"IPv6 menzili\",\n        base64: \"base64-ifreli metin\",\n        base64url: \"base64url-ifreli metin\",\n        json_string: \"JSON metin\",\n        e164: \"E.164 says\",\n        jwt: \"JWT\",\n        template_literal: \"giren\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"numara\",\n        array: \"saf\",\n        null: \"gayb\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Fsit giren: umulan instanceof ${issue.expected}, alnan ${received}`;\n                }\n                return `Fsit giren: umulan ${expected}, alnan ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Fsit giren: umulan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Fsit tercih: mteberler ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Fazla byk: ${issue.origin ?? \"value\"}, ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"} sahip olmalyd.`;\n                return `Fazla byk: ${issue.origin ?? \"value\"}, ${adj}${issue.maximum.toString()} olmalyd.`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fazla kk: ${issue.origin}, ${adj}${issue.minimum.toString()} ${sizing.unit} sahip olmalyd.`;\n                }\n                return `Fazla kk: ${issue.origin}, ${adj}${issue.minimum.toString()} olmalyd.`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Fsit metin: \"${_issue.prefix}\" ile balamal.`;\n                if (_issue.format === \"ends_with\")\n                    return `Fsit metin: \"${_issue.suffix}\" ile bitmeli.`;\n                if (_issue.format === \"includes\")\n                    return `Fsit metin: \"${_issue.includes}\" ihtiv etmeli.`;\n                if (_issue.format === \"regex\")\n                    return `Fsit metin: ${_issue.pattern} nakna uymal.`;\n                return `Fsit ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Fsit say: ${issue.divisor} kat olmalyd.`;\n            case \"unrecognized_keys\":\n                return `Tannmayan anahtar ${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} iin tannmayan anahtar var.`;\n            case \"invalid_union\":\n                return \"Giren tannamad.\";\n            case \"invalid_element\":\n                return `${issue.origin} iin tannmayan kymet var.`;\n            default:\n                return `Kymet tannamad.`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"\",\n        url: \"  \",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"  \",\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n        ipv4: \" IPv4 \",\n        ipv6: \" IPv6 \",\n        cidrv4: \" IPv4 \",\n        cidrv6: \" IPv6 \",\n        base64: \"base64-encoded \",\n        base64url: \"base64url-encoded \",\n        json_string: \"JSON \",\n        e164: \" E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected} ,  ${received}  `;\n                }\n                return ` :  ${expected} ,  ${received}  `;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1) {\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])} `;\n                }\n                return ` :    ${util.joinValues(issue.values, \"|\")}  `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"} `;\n                }\n                return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit} `;\n                }\n                return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :   \"${_issue.prefix}\"   `;\n                }\n                if (_issue.format === \"ends_with\") {\n                    return ` :   \"${_issue.suffix}\"    `;\n                }\n                if (_issue.format === \"includes\") {\n                    return ` :  \"${_issue.includes}\" `;\n                }\n                if (_issue.format === \"regex\") {\n                    return ` :   ${_issue.pattern}   `;\n                }\n                return `${FormatDictionary[_issue.format] ?? issue.format}  `;\n            }\n            case \"not_multiple_of\":\n                return ` :   ${issue.divisor}  `;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin} `;\n            case \"invalid_union\":\n                return ` `;\n            case \"invalid_element\":\n                return `   ${issue.origin} `;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znakw\", verb: \"mie\" },\n        file: { unit: \"bajtw\", verb: \"mie\" },\n        array: { unit: \"elementw\", verb: \"mie\" },\n        set: { unit: \"elementw\", verb: \"mie\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"wyraenie\",\n        email: \"adres email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data i godzina w formacie ISO\",\n        date: \"data w formacie ISO\",\n        time: \"godzina w formacie ISO\",\n        duration: \"czas trwania ISO\",\n        ipv4: \"adres IPv4\",\n        ipv6: \"adres IPv6\",\n        cidrv4: \"zakres IPv4\",\n        cidrv6: \"zakres IPv6\",\n        base64: \"cig znakw zakodowany w formacie base64\",\n        base64url: \"cig znakw zakodowany w formacie base64url\",\n        json_string: \"cig znakw w formacie JSON\",\n        e164: \"liczba E.164\",\n        jwt: \"JWT\",\n        template_literal: \"wejcie\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"liczba\",\n        array: \"tablica\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Nieprawidowe dane wejciowe: oczekiwano instanceof ${issue.expected}, otrzymano ${received}`;\n                }\n                return `Nieprawidowe dane wejciowe: oczekiwano ${expected}, otrzymano ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Nieprawidowe dane wejciowe: oczekiwano ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Nieprawidowa opcja: oczekiwano jednej z wartoci ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Za dua warto: oczekiwano, e ${issue.origin ?? \"warto\"} bdzie mie ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementw\"}`;\n                }\n                return `Zbyt du(y/a/e): oczekiwano, e ${issue.origin ?? \"warto\"} bdzie wynosi ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Za maa warto: oczekiwano, e ${issue.origin ?? \"warto\"} bdzie mie ${adj}${issue.minimum.toString()} ${sizing.unit ?? \"elementw\"}`;\n                }\n                return `Zbyt ma(y/a/e): oczekiwano, e ${issue.origin ?? \"warto\"} bdzie wynosi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Nieprawidowy cig znakw: musi zaczyna si od \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Nieprawidowy cig znakw: musi koczy si na \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Nieprawidowy cig znakw: musi zawiera \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Nieprawidowy cig znakw: musi odpowiada wzorcowi ${_issue.pattern}`;\n                return `Nieprawidow(y/a/e) ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nieprawidowa liczba: musi by wielokrotnoci ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nierozpoznane klucze${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Nieprawidowy klucz w ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Nieprawidowe dane wejciowe\";\n            case \"invalid_element\":\n                return `Nieprawidowa warto w ${issue.origin}`;\n            default:\n                return `Nieprawidowe dane wejciowe`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caracteres\", verb: \"ter\" },\n        file: { unit: \"bytes\", verb: \"ter\" },\n        array: { unit: \"itens\", verb: \"ter\" },\n        set: { unit: \"itens\", verb: \"ter\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"padro\",\n        email: \"endereo de e-mail\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data e hora ISO\",\n        date: \"data ISO\",\n        time: \"hora ISO\",\n        duration: \"durao ISO\",\n        ipv4: \"endereo IPv4\",\n        ipv6: \"endereo IPv6\",\n        cidrv4: \"faixa de IPv4\",\n        cidrv6: \"faixa de IPv6\",\n        base64: \"texto codificado em base64\",\n        base64url: \"URL codificada em base64\",\n        json_string: \"texto JSON\",\n        e164: \"nmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"nmero\",\n        null: \"nulo\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Tipo invlido: esperado instanceof ${issue.expected}, recebido ${received}`;\n                }\n                return `Tipo invlido: esperado ${expected}, recebido ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entrada invlida: esperado ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opo invlida: esperada uma das ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Muito grande: esperado que ${issue.origin ?? \"valor\"} tivesse ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementos\"}`;\n                return `Muito grande: esperado que ${issue.origin ?? \"valor\"} fosse ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Muito pequeno: esperado que ${issue.origin} tivesse ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Muito pequeno: esperado que ${issue.origin} fosse ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Texto invlido: deve comear com \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Texto invlido: deve terminar com \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Texto invlido: deve incluir \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Texto invlido: deve corresponder ao padro ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format} invlido`;\n            }\n            case \"not_multiple_of\":\n                return `Nmero invlido: deve ser mltiplo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Chave${issue.keys.length > 1 ? \"s\" : \"\"} desconhecida${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Chave invlida em ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada invlida\";\n            case \"invalid_element\":\n                return `Valor invlido em ${issue.origin}`;\n            default:\n                return `Campo invlido`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nfunction getRussianPlural(count, one, few, many) {\n    const absCount = Math.abs(count);\n    const lastDigit = absCount % 10;\n    const lastTwoDigits = absCount % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n        return many;\n    }\n    if (lastDigit === 1) {\n        return one;\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n        return few;\n    }\n    return many;\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        file: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        array: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        set: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"email \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"   base64\",\n        base64url: \"   base64url\",\n        json_string: \"JSON \",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected},  ${received}`;\n                }\n                return ` :  ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getRussianPlural(maxValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `  : ,  ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return `  : ,  ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getRussianPlural(minValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `  : ,  ${issue.origin}   ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return `  : ,  ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` :    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return ` :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :    ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znakov\", verb: \"imeti\" },\n        file: { unit: \"bajtov\", verb: \"imeti\" },\n        array: { unit: \"elementov\", verb: \"imeti\" },\n        set: { unit: \"elementov\", verb: \"imeti\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"vnos\",\n        email: \"e-potni naslov\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datum in as\",\n        date: \"ISO datum\",\n        time: \"ISO as\",\n        duration: \"ISO trajanje\",\n        ipv4: \"IPv4 naslov\",\n        ipv6: \"IPv6 naslov\",\n        cidrv4: \"obseg IPv4\",\n        cidrv6: \"obseg IPv6\",\n        base64: \"base64 kodiran niz\",\n        base64url: \"base64url kodiran niz\",\n        json_string: \"JSON niz\",\n        e164: \"E.164 tevilka\",\n        jwt: \"JWT\",\n        template_literal: \"vnos\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"tevilo\",\n        array: \"tabela\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Neveljaven vnos: priakovano instanceof ${issue.expected}, prejeto ${received}`;\n                }\n                return `Neveljaven vnos: priakovano ${expected}, prejeto ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Neveljaven vnos: priakovano ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Neveljavna monost: priakovano eno izmed ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Preveliko: priakovano, da bo ${issue.origin ?? \"vrednost\"} imelo ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementov\"}`;\n                return `Preveliko: priakovano, da bo ${issue.origin ?? \"vrednost\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Premajhno: priakovano, da bo ${issue.origin} imelo ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Premajhno: priakovano, da bo ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Neveljaven niz: mora se zaeti z \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Neveljaven niz: mora se konati z \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Neveljaven niz: mora vsebovati \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Neveljaven niz: mora ustrezati vzorcu ${_issue.pattern}`;\n                return `Neveljaven ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Neveljavno tevilo: mora biti vekratnik ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Neprepoznan${issue.keys.length > 1 ? \"i kljui\" : \" klju\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Neveljaven klju v ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Neveljaven vnos\";\n            case \"invalid_element\":\n                return `Neveljavna vrednost v ${issue.origin}`;\n            default:\n                return \"Neveljaven vnos\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tecken\", verb: \"att ha\" },\n        file: { unit: \"bytes\", verb: \"att ha\" },\n        array: { unit: \"objekt\", verb: \"att innehlla\" },\n        set: { unit: \"objekt\", verb: \"att innehlla\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"reguljrt uttryck\",\n        email: \"e-postadress\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-datum och tid\",\n        date: \"ISO-datum\",\n        time: \"ISO-tid\",\n        duration: \"ISO-varaktighet\",\n        ipv4: \"IPv4-intervall\",\n        ipv6: \"IPv6-intervall\",\n        cidrv4: \"IPv4-spektrum\",\n        cidrv6: \"IPv6-spektrum\",\n        base64: \"base64-kodad strng\",\n        base64url: \"base64url-kodad strng\",\n        json_string: \"JSON-strng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"mall-literal\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"antal\",\n        array: \"lista\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Ogiltig inmatning: frvntat instanceof ${issue.expected}, fick ${received}`;\n                }\n                return `Ogiltig inmatning: frvntat ${expected}, fick ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ogiltig inmatning: frvntat ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ogiltigt val: frvntade en av ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fr stor(t): frvntade ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                }\n                return `Fr stor(t): frvntat ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fr lite(t): frvntade ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Fr lite(t): frvntade ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Ogiltig strng: mste brja med \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Ogiltig strng: mste sluta med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ogiltig strng: mste innehlla \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ogiltig strng: mste matcha mnstret \"${_issue.pattern}\"`;\n                return `Ogiltig(t) ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ogiltigt tal: mste vara en multipel av ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Oknda nycklar\" : \"Oknd nyckel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ogiltig nyckel i ${issue.origin ?? \"vrdet\"}`;\n            case \"invalid_union\":\n                return \"Ogiltig input\";\n            case \"invalid_element\":\n                return `Ogiltigt vrde i ${issue.origin ?? \"vrdet\"}`;\n            default:\n                return `Ogiltig input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO  \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO  \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64-encoded \",\n        base64url: \"base64url-encoded \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n        null: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` :  instanceof ${issue.expected},  ${received}`;\n                }\n                return ` :  ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :  ${util.joinValues(issue.values, \"|\")}  `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :  ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}   `;\n                }\n                return ` :  ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()}   `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :  ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}   `; //\n                }\n                return ` :  ${issue.origin} ${adj}${issue.minimum.toString()}   `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` : \"${_issue.prefix}\"   `;\n                if (_issue.format === \"ends_with\")\n                    return ` : \"${_issue.suffix}\"   `;\n                if (_issue.format === \"includes\")\n                    return ` : \"${_issue.includes}\"   `;\n                if (_issue.format === \"regex\")\n                    return ` : ${_issue.pattern}   `;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` : ${issue.divisor}    `;\n            case \"unrecognized_keys\":\n                return `  ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin}   `;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `${issue.origin}   `;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \" ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \" ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IP  IPv4\",\n        cidrv6: \" IP  IPv6\",\n        base64: \" Base64\",\n        base64url: \" Base64  URL\",\n        json_string: \" JSON\",\n        e164: \" (E.164)\",\n        jwt: \" JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \" (Array)\",\n        null: \" (null)\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `:  instanceof ${issue.expected}  ${received}`;\n                }\n                return `:  ${expected}  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `:  ${util.stringifyPrimitive(issue.values[0])}`;\n                return `:  ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `: ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return `: ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `: ${issue.origin} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `: ${issue.origin} ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `:  \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `:  \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `:  \"${_issue.includes}\" `;\n                if (_issue.format === \"regex\")\n                    return `:  ${_issue.pattern}`;\n                return `: ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `:  ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return ` ${issue.origin}`;\n            case \"invalid_union\":\n                return \": \";\n            case \"invalid_element\":\n                return ` ${issue.origin}`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"olmal\" },\n        file: { unit: \"bayt\", verb: \"olmal\" },\n        array: { unit: \"e\", verb: \"olmal\" },\n        set: { unit: \"e\", verb: \"olmal\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"girdi\",\n        email: \"e-posta adresi\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO tarih ve saat\",\n        date: \"ISO tarih\",\n        time: \"ISO saat\",\n        duration: \"ISO sre\",\n        ipv4: \"IPv4 adresi\",\n        ipv6: \"IPv6 adresi\",\n        cidrv4: \"IPv4 aral\",\n        cidrv6: \"IPv6 aral\",\n        base64: \"base64 ile ifrelenmi metin\",\n        base64url: \"base64url ile ifrelenmi metin\",\n        json_string: \"JSON dizesi\",\n        e164: \"E.164 says\",\n        jwt: \"JWT\",\n        template_literal: \"ablon dizesi\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Geersiz deer: beklenen instanceof ${issue.expected}, alnan ${received}`;\n                }\n                return `Geersiz deer: beklenen ${expected}, alnan ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Geersiz deer: beklenen ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Geersiz seenek: aadakilerden biri olmal: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ok byk: beklenen ${issue.origin ?? \"deer\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"e\"}`;\n                return `ok byk: beklenen ${issue.origin ?? \"deer\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ok kk: beklenen ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                return `ok kk: beklenen ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Geersiz metin: \"${_issue.prefix}\" ile balamal`;\n                if (_issue.format === \"ends_with\")\n                    return `Geersiz metin: \"${_issue.suffix}\" ile bitmeli`;\n                if (_issue.format === \"includes\")\n                    return `Geersiz metin: \"${_issue.includes}\" iermeli`;\n                if (_issue.format === \"regex\")\n                    return `Geersiz metin: ${_issue.pattern} desenine uymal`;\n                return `Geersiz ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Geersiz say: ${issue.divisor} ile tam blnebilmeli`;\n            case \"unrecognized_keys\":\n                return `Tannmayan anahtar${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} iinde geersiz anahtar`;\n            case \"invalid_union\":\n                return \"Geersiz deer\";\n            case \"invalid_element\":\n                return `${issue.origin} iinde geersiz deer`;\n            default:\n                return `Geersiz deer`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \" \",\n        email: \"  \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"   ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \" ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IPv4\",\n        cidrv6: \" IPv6\",\n        base64: \"   base64\",\n        base64url: \"   base64url\",\n        json_string: \" JSON\",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \" \",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `  :  instanceof ${issue.expected},  ${received}`;\n                }\n                return `  :  ${expected},  ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` : ,  ${issue.origin ?? \"\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` : ,  ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ,  ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` : ,  ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` :    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return ` :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :    ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import uk from \"./uk.js\";\n/** @deprecated Use `uk` instead. */\nexport default function () {\n    return uk();\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \" \",\n        email: \"  \",\n        url: \"  \",\n        emoji: \"\",\n        uuid: \"   \",\n        uuidv4: \"     4\",\n        uuidv6: \"     6\",\n        nanoid: \"  \",\n        guid: \"   \",\n        cuid: \"   \",\n        cuid2: \"    2\",\n        ulid: \"   \",\n        xid: \"  \",\n        ksuid: \"    \",\n        datetime: \"    \",\n        date: \"   \",\n        time: \"   \",\n        duration: \"   \",\n        ipv4: \"   4 \",\n        ipv6: \"   6 \",\n        cidrv4: \"   4 \",\n        cidrv6: \"   6 \",\n        base64: \" 64   \",\n        base64url: \" 64      \",\n        json_string: \"    \",\n        e164: \" 164 \",\n        jwt: \"  \",\n        template_literal: \" \",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n        null: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `  : instanceof ${issue.expected}   ${received}  `;\n                }\n                return `  : ${expected}   ${received}  `;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  : ${util.stringifyPrimitive(issue.values[0])}  `;\n                return ` : ${util.joinValues(issue.values, \"|\")}     `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}   `;\n                return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}   `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit}   `;\n                }\n                return ` : ${issue.origin}  ${adj}${issue.minimum.toString()}   `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` : \"${_issue.prefix}\"    `;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` : \"${_issue.suffix}\"    `;\n                if (_issue.format === \"includes\")\n                    return ` : \"${_issue.includes}\"   `;\n                if (_issue.format === \"regex\")\n                    return ` :  ${_issue.pattern}    `;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` : ${issue.divisor}    `;\n            case \"unrecognized_keys\":\n                return `   ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \" \")}`;\n            case \"invalid_key\":\n                return `${issue.origin}   `;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `${issue.origin}   `;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"belgi\", verb: \"bolishi kerak\" },\n        file: { unit: \"bayt\", verb: \"bolishi kerak\" },\n        array: { unit: \"element\", verb: \"bolishi kerak\" },\n        set: { unit: \"element\", verb: \"bolishi kerak\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"kirish\",\n        email: \"elektron pochta manzili\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO sana va vaqti\",\n        date: \"ISO sana\",\n        time: \"ISO vaqt\",\n        duration: \"ISO davomiylik\",\n        ipv4: \"IPv4 manzil\",\n        ipv6: \"IPv6 manzil\",\n        mac: \"MAC manzil\",\n        cidrv4: \"IPv4 diapazon\",\n        cidrv6: \"IPv6 diapazon\",\n        base64: \"base64 kodlangan satr\",\n        base64url: \"base64url kodlangan satr\",\n        json_string: \"JSON satr\",\n        e164: \"E.164 raqam\",\n        jwt: \"JWT\",\n        template_literal: \"kirish\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"raqam\",\n        array: \"massiv\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `Notogri kirish: kutilgan instanceof ${issue.expected}, qabul qilingan ${received}`;\n                }\n                return `Notogri kirish: kutilgan ${expected}, qabul qilingan ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Notogri kirish: kutilgan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Notogri variant: quyidagilardan biri kutilgan ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Juda katta: kutilgan ${issue.origin ?? \"qiymat\"} ${adj}${issue.maximum.toString()} ${sizing.unit} ${sizing.verb}`;\n                return `Juda katta: kutilgan ${issue.origin ?? \"qiymat\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Juda kichik: kutilgan ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} ${sizing.verb}`;\n                }\n                return `Juda kichik: kutilgan ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Notogri satr: \"${_issue.prefix}\" bilan boshlanishi kerak`;\n                if (_issue.format === \"ends_with\")\n                    return `Notogri satr: \"${_issue.suffix}\" bilan tugashi kerak`;\n                if (_issue.format === \"includes\")\n                    return `Notogri satr: \"${_issue.includes}\" ni oz ichiga olishi kerak`;\n                if (_issue.format === \"regex\")\n                    return `Notogri satr: ${_issue.pattern} shabloniga mos kelishi kerak`;\n                return `Notogri ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Notogri raqam: ${issue.divisor} ning karralisi bolishi kerak`;\n            case \"unrecognized_keys\":\n                return `Nomalum kalit${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} dagi kalit notogri`;\n            case \"invalid_union\":\n                return \"Notogri kirish\";\n            case \"invalid_element\":\n                return `${issue.origin} da notogri qiymat`;\n            default:\n                return `Notogri kirish`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"k t\", verb: \"c\" },\n        file: { unit: \"byte\", verb: \"c\" },\n        array: { unit: \"phn t\", verb: \"c\" },\n        set: { unit: \"phn t\", verb: \"c\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"u vo\",\n        email: \"a ch email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ngy gi ISO\",\n        date: \"ngy ISO\",\n        time: \"gi ISO\",\n        duration: \"khong thi gian ISO\",\n        ipv4: \"a ch IPv4\",\n        ipv6: \"a ch IPv6\",\n        cidrv4: \"di IPv4\",\n        cidrv6: \"di IPv6\",\n        base64: \"chui m ha base64\",\n        base64url: \"chui m ha base64url\",\n        json_string: \"chui JSON\",\n        e164: \"s E.164\",\n        jwt: \"JWT\",\n        template_literal: \"u vo\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"s\",\n        array: \"mng\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `u vo khng hp l: mong i instanceof ${issue.expected}, nhn c ${received}`;\n                }\n                return `u vo khng hp l: mong i ${expected}, nhn c ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `u vo khng hp l: mong i ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ty chn khng hp l: mong i mt trong cc gi tr ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Qu ln: mong i ${issue.origin ?? \"gi tr\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"phn t\"}`;\n                return `Qu ln: mong i ${issue.origin ?? \"gi tr\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Qu nh: mong i ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Qu nh: mong i ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Chui khng hp l: phi bt u bng \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Chui khng hp l: phi kt thc bng \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chui khng hp l: phi bao gm \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chui khng hp l: phi khp vi mu ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format} khng hp l`;\n            }\n            case \"not_multiple_of\":\n                return `S khng hp l: phi l bi s ca ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kha khng c nhn dng: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kha khng hp l trong ${issue.origin}`;\n            case \"invalid_union\":\n                return \"u vo khng hp l\";\n            case \"invalid_element\":\n                return `Gi tr khng hp l trong ${issue.origin}`;\n            default:\n                return `u vo khng hp l`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO\",\n        date: \"ISO\",\n        time: \"ISO\",\n        duration: \"ISO\",\n        ipv4: \"IPv4\",\n        ipv6: \"IPv6\",\n        cidrv4: \"IPv4\",\n        cidrv6: \"IPv6\",\n        base64: \"base64\",\n        base64url: \"base64url\",\n        json_string: \"JSON\",\n        e164: \"E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"\",\n        array: \"\",\n        null: \"(null)\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` instanceof ${issue.expected} ${received}`;\n                }\n                return ` ${expected} ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` \"${_issue.prefix}\" `;\n                if (_issue.format === \"ends_with\")\n                    return ` \"${_issue.suffix}\" `;\n                if (_issue.format === \"includes\")\n                    return ` \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` ${_issue.pattern}`;\n                return `${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `(key): ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} (key)`;\n            case \"invalid_union\":\n                return \"\";\n            case \"invalid_element\":\n                return `${issue.origin} (value)`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64 \",\n        base64url: \"base64url \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return ` instanceof ${issue.expected} ${received}`;\n                }\n                return ` ${expected} ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` \"${_issue.prefix}\" `;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` \"${_issue.suffix}\" `;\n                if (_issue.format === \"includes\")\n                    return ` \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` ${_issue.pattern}`;\n                return ` ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"}${util.joinValues(issue.keys, \"\")}`;\n            case \"invalid_key\":\n                return `${issue.origin} `;\n            case \"invalid_union\":\n                return \"\";\n            case \"invalid_element\":\n                return `${issue.origin} `;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"mi\", verb: \"n\" },\n        file: { unit: \"bytes\", verb: \"n\" },\n        array: { unit: \"nkan\", verb: \"n\" },\n        set: { unit: \"nkan\", verb: \"n\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const FormatDictionary = {\n        regex: \"r bwl\",\n        email: \"drs ml\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"kk ISO\",\n        date: \"j ISO\",\n        time: \"kk ISO\",\n        duration: \"kk t p ISO\",\n        ipv4: \"drs IPv4\",\n        ipv6: \"drs IPv6\",\n        cidrv4: \"gbgb IPv4\",\n        cidrv6: \"gbgb IPv6\",\n        base64: \"r t a k n base64\",\n        base64url: \"r base64url\",\n        json_string: \"r JSON\",\n        e164: \"nmb E.164\",\n        jwt: \"JWT\",\n        template_literal: \"r bwl\",\n    };\n    const TypeDictionary = {\n        nan: \"NaN\",\n        number: \"nmb\",\n        array: \"akop\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\": {\n                const expected = TypeDictionary[issue.expected] ?? issue.expected;\n                const receivedType = util.parsedType(issue.input);\n                const received = TypeDictionary[receivedType] ?? receivedType;\n                if (/^[A-Z]/.test(issue.expected)) {\n                    return `bwl ae: a n lti fi instanceof ${issue.expected}, m a r ${received}`;\n                }\n                return `bwl ae: a n lti fi ${expected}, m a r ${received}`;\n            }\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `bwl ae: a n lti fi ${util.stringifyPrimitive(issue.values[0])}`;\n                return `yn ae: yan kan lra ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `T p j: a n lti j p ${issue.origin ?? \"iye\"} ${sizing.verb} ${adj}${issue.maximum} ${sizing.unit}`;\n                return `T p j: a n lti j ${adj}${issue.maximum}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Kr ju: a n lti j p ${issue.origin} ${sizing.verb} ${adj}${issue.minimum} ${sizing.unit}`;\n                return `Kr ju: a n lti j ${adj}${issue.minimum}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `r ae: gbd br pl \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `r ae: gbd par pl \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `r ae: gbd n \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `r ae: gbd b pr mu ${_issue.pattern}`;\n                return `Ae: ${FormatDictionary[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nmb ae: gbd j y ppn ti ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Btn m: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Btn ae nn ${issue.origin}`;\n            case \"invalid_union\":\n                return \"bwl ae\";\n            case \"invalid_element\":\n                return `Iye ae nn ${issue.origin}`;\n            default:\n                return \"bwl ae\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n", "var _a;\nexport const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\n(_a = globalThis).__zod_globalRegistry ?? (_a.__zod_globalRegistry = registry());\nexport const globalRegistry = globalThis.__zod_globalRegistry;\n", "import * as checks from \"./checks.js\";\nimport * as registries from \"./registries.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\n// @__NO_SIDE_EFFECTS__\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _mac(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"mac\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\n// @__NO_SIDE_EFFECTS__\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\n// @__NO_SIDE_EFFECTS__\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\n// @__NO_SIDE_EFFECTS__\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\n// @__NO_SIDE_EFFECTS__\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\n// @__NO_SIDE_EFFECTS__\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\n// @__NO_SIDE_EFFECTS__\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\n// @__NO_SIDE_EFFECTS__\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\n// @__NO_SIDE_EFFECTS__\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\n// @__NO_SIDE_EFFECTS__\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\n// @__NO_SIDE_EFFECTS__\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\n// @__NO_SIDE_EFFECTS__\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\n// @__NO_SIDE_EFFECTS__\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\n// slugify\n// @__NO_SIDE_EFFECTS__\nexport function _slugify() {\n    return _overwrite((input) => util.slugify(input));\n}\n// @__NO_SIDE_EFFECTS__\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xor(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        inclusive: false,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\n// @__NO_SIDE_EFFECTS__\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\n// @__NO_SIDE_EFFECTS__\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\n// @__NO_SIDE_EFFECTS__\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\n// @__NO_SIDE_EFFECTS__\nexport function _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort); // abort is always undefined, so this is always true...\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\n// @__NO_SIDE_EFFECTS__\nexport function _check(fn, params) {\n    const ch = new checks.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\n// @__NO_SIDE_EFFECTS__\nexport function describe(description) {\n    const ch = new checks.$ZodCheck({ check: \"describe\" });\n    ch._zod.onattach = [\n        (inst) => {\n            const existing = registries.globalRegistry.get(inst) ?? {};\n            registries.globalRegistry.add(inst, { ...existing, description });\n        },\n    ];\n    ch._zod.check = () => { }; // no-op check\n    return ch;\n}\n// @__NO_SIDE_EFFECTS__\nexport function meta(metadata) {\n    const ch = new checks.$ZodCheck({ check: \"meta\" });\n    ch._zod.onattach = [\n        (inst) => {\n            const existing = registries.globalRegistry.get(inst) ?? {};\n            registries.globalRegistry.add(inst, { ...existing, ...metadata });\n        },\n    ];\n    ch._zod.check = () => { }; // no-op check\n    return ch;\n}\n// @__NO_SIDE_EFFECTS__\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Codec = Classes.Codec ?? schemas.$ZodCodec;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const stringSchema = new _String({ type: \"string\", error: params.error });\n    const booleanSchema = new _Boolean({ type: \"boolean\", error: params.error });\n    const codec = new _Codec({\n        type: \"pipe\",\n        in: stringSchema,\n        out: booleanSchema,\n        transform: ((input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: codec,\n                    continue: false,\n                });\n                return {};\n            }\n        }),\n        reverseTransform: ((input, _payload) => {\n            if (input === true) {\n                return truthyArray[0] || \"true\";\n            }\n            else {\n                return falsyArray[0] || \"false\";\n            }\n        }),\n        error: params.error,\n    });\n    return codec;\n}\n// @__NO_SIDE_EFFECTS__\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n", "import { globalRegistry } from \"./registries.js\";\n// function initializeContext<T extends schemas.$ZodType>(inputs: JSONSchemaGeneratorParams<T>): ToJSONSchemaContext<T> {\n//   return {\n//     processor: inputs.processor,\n//     metadataRegistry: inputs.metadata ?? globalRegistry,\n//     target: inputs.target ?? \"draft-2020-12\",\n//     unrepresentable: inputs.unrepresentable ?? \"throw\",\n//   };\n// }\nexport function initializeContext(params) {\n    // Normalize target: convert old non-hyphenated versions to hyphenated versions\n    let target = params?.target ?? \"draft-2020-12\";\n    if (target === \"draft-4\")\n        target = \"draft-04\";\n    if (target === \"draft-7\")\n        target = \"draft-07\";\n    return {\n        processors: params.processors ?? {},\n        metadataRegistry: params?.metadata ?? globalRegistry,\n        target,\n        unrepresentable: params?.unrepresentable ?? \"throw\",\n        override: params?.override ?? (() => { }),\n        io: params?.io ?? \"output\",\n        counter: 0,\n        seen: new Map(),\n        cycles: params?.cycles ?? \"ref\",\n        reused: params?.reused ?? \"inline\",\n        external: params?.external ?? undefined,\n    };\n}\nexport function process(schema, ctx, _params = { path: [], schemaPath: [] }) {\n    var _a;\n    const def = schema._zod.def;\n    // check for schema in seens\n    const seen = ctx.seen.get(schema);\n    if (seen) {\n        seen.count++;\n        // check if cycle\n        const isCycle = _params.schemaPath.includes(schema);\n        if (isCycle) {\n            seen.cycle = _params.path;\n        }\n        return seen.schema;\n    }\n    // initialize\n    const result = { schema: {}, count: 1, cycle: undefined, path: _params.path };\n    ctx.seen.set(schema, result);\n    // custom method overrides default behavior\n    const overrideSchema = schema._zod.toJSONSchema?.();\n    if (overrideSchema) {\n        result.schema = overrideSchema;\n    }\n    else {\n        const params = {\n            ..._params,\n            schemaPath: [..._params.schemaPath, schema],\n            path: _params.path,\n        };\n        if (schema._zod.processJSONSchema) {\n            schema._zod.processJSONSchema(ctx, result.schema, params);\n        }\n        else {\n            const _json = result.schema;\n            const processor = ctx.processors[def.type];\n            if (!processor) {\n                throw new Error(`[toJSONSchema]: Non-representable type encountered: ${def.type}`);\n            }\n            processor(schema, ctx, _json, params);\n        }\n        const parent = schema._zod.parent;\n        if (parent) {\n            // Also set ref if processor didn't (for inheritance)\n            if (!result.ref)\n                result.ref = parent;\n            process(parent, ctx, params);\n            ctx.seen.get(parent).isParent = true;\n        }\n    }\n    // metadata\n    const meta = ctx.metadataRegistry.get(schema);\n    if (meta)\n        Object.assign(result.schema, meta);\n    if (ctx.io === \"input\" && isTransforming(schema)) {\n        // examples/defaults only apply to output type of pipe\n        delete result.schema.examples;\n        delete result.schema.default;\n    }\n    // set prefault as default\n    if (ctx.io === \"input\" && result.schema._prefault)\n        (_a = result.schema).default ?? (_a.default = result.schema._prefault);\n    delete result.schema._prefault;\n    // pulling fresh from ctx.seen in case it was overwritten\n    const _result = ctx.seen.get(schema);\n    return _result.schema;\n}\nexport function extractDefs(ctx, schema\n// params: EmitParams\n) {\n    // iterate over seen map;\n    const root = ctx.seen.get(schema);\n    if (!root)\n        throw new Error(\"Unprocessed schema. This is a bug in Zod.\");\n    // Track ids to detect duplicates across different schemas\n    const idToSchema = new Map();\n    for (const entry of ctx.seen.entries()) {\n        const id = ctx.metadataRegistry.get(entry[0])?.id;\n        if (id) {\n            const existing = idToSchema.get(id);\n            if (existing && existing !== entry[0]) {\n                throw new Error(`Duplicate schema id \"${id}\" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);\n            }\n            idToSchema.set(id, entry[0]);\n        }\n    }\n    // returns a ref to the schema\n    // defId will be empty if the ref points to an external schema (or #)\n    const makeURI = (entry) => {\n        // comparing the seen objects because sometimes\n        // multiple schemas map to the same seen object.\n        // e.g. lazy\n        // external is configured\n        const defsSegment = ctx.target === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n        if (ctx.external) {\n            const externalId = ctx.external.registry.get(entry[0])?.id; // ?? \"__shared\";// `__schema${ctx.counter++}`;\n            // check if schema is in the external registry\n            const uriGenerator = ctx.external.uri ?? ((id) => id);\n            if (externalId) {\n                return { ref: uriGenerator(externalId) };\n            }\n            // otherwise, add to __shared\n            const id = entry[1].defId ?? entry[1].schema.id ?? `schema${ctx.counter++}`;\n            entry[1].defId = id; // set defId so it will be reused if needed\n            return { defId: id, ref: `${uriGenerator(\"__shared\")}#/${defsSegment}/${id}` };\n        }\n        if (entry[1] === root) {\n            return { ref: \"#\" };\n        }\n        // self-contained schema\n        const uriPrefix = `#`;\n        const defUriPrefix = `${uriPrefix}/${defsSegment}/`;\n        const defId = entry[1].schema.id ?? `__schema${ctx.counter++}`;\n        return { defId, ref: defUriPrefix + defId };\n    };\n    // stored cached version in `def` property\n    // remove all properties, set $ref\n    const extractToDef = (entry) => {\n        // if the schema is already a reference, do not extract it\n        if (entry[1].schema.$ref) {\n            return;\n        }\n        const seen = entry[1];\n        const { ref, defId } = makeURI(entry);\n        seen.def = { ...seen.schema };\n        // defId won't be set if the schema is a reference to an external schema\n        // or if the schema is the root schema\n        if (defId)\n            seen.defId = defId;\n        // wipe away all properties except $ref\n        const schema = seen.schema;\n        for (const key in schema) {\n            delete schema[key];\n        }\n        schema.$ref = ref;\n    };\n    // throw on cycles\n    // break cycles\n    if (ctx.cycles === \"throw\") {\n        for (const entry of ctx.seen.entries()) {\n            const seen = entry[1];\n            if (seen.cycle) {\n                throw new Error(\"Cycle detected: \" +\n                    `#/${seen.cycle?.join(\"/\")}/<root>` +\n                    '\\n\\nSet the `cycles` parameter to `\"ref\"` to resolve cyclical schemas with defs.');\n            }\n        }\n    }\n    // extract schemas into $defs\n    for (const entry of ctx.seen.entries()) {\n        const seen = entry[1];\n        // convert root schema to # $ref\n        if (schema === entry[0]) {\n            extractToDef(entry); // this has special handling for the root schema\n            continue;\n        }\n        // extract schemas that are in the external registry\n        if (ctx.external) {\n            const ext = ctx.external.registry.get(entry[0])?.id;\n            if (schema !== entry[0] && ext) {\n                extractToDef(entry);\n                continue;\n            }\n        }\n        // extract schemas with `id` meta\n        const id = ctx.metadataRegistry.get(entry[0])?.id;\n        if (id) {\n            extractToDef(entry);\n            continue;\n        }\n        // break cycles\n        if (seen.cycle) {\n            // any\n            extractToDef(entry);\n            continue;\n        }\n        // extract reused schemas\n        if (seen.count > 1) {\n            if (ctx.reused === \"ref\") {\n                extractToDef(entry);\n                // biome-ignore lint:\n                continue;\n            }\n        }\n    }\n}\nexport function finalize(ctx, schema) {\n    const root = ctx.seen.get(schema);\n    if (!root)\n        throw new Error(\"Unprocessed schema. This is a bug in Zod.\");\n    // flatten refs - inherit properties from parent schemas\n    const flattenRef = (zodSchema) => {\n        const seen = ctx.seen.get(zodSchema);\n        // already processed\n        if (seen.ref === null)\n            return;\n        const schema = seen.def ?? seen.schema;\n        const _cached = { ...schema };\n        const ref = seen.ref;\n        seen.ref = null; // prevent infinite recursion\n        if (ref) {\n            flattenRef(ref);\n            const refSeen = ctx.seen.get(ref);\n            const refSchema = refSeen.schema;\n            // merge referenced schema into current\n            if (refSchema.$ref && (ctx.target === \"draft-07\" || ctx.target === \"draft-04\" || ctx.target === \"openapi-3.0\")) {\n                // older drafts can't combine $ref with other properties\n                schema.allOf = schema.allOf ?? [];\n                schema.allOf.push(refSchema);\n            }\n            else {\n                Object.assign(schema, refSchema);\n            }\n            // restore child's own properties (child wins)\n            Object.assign(schema, _cached);\n            const isParentRef = zodSchema._zod.parent === ref;\n            // For parent chain, child is a refinement - remove parent-only properties\n            if (isParentRef) {\n                for (const key in schema) {\n                    if (key === \"$ref\" || key === \"allOf\")\n                        continue;\n                    if (!(key in _cached)) {\n                        delete schema[key];\n                    }\n                }\n            }\n            // When ref was extracted to $defs, remove properties that match the definition\n            if (refSchema.$ref && refSeen.def) {\n                for (const key in schema) {\n                    if (key === \"$ref\" || key === \"allOf\")\n                        continue;\n                    if (key in refSeen.def && JSON.stringify(schema[key]) === JSON.stringify(refSeen.def[key])) {\n                        delete schema[key];\n                    }\n                }\n            }\n        }\n        // If parent was extracted (has $ref), propagate $ref to this schema\n        // This handles cases like: readonly().meta({id}).describe()\n        // where processor sets ref to innerType but parent should be referenced\n        const parent = zodSchema._zod.parent;\n        if (parent && parent !== ref) {\n            // Ensure parent is processed first so its def has inherited properties\n            flattenRef(parent);\n            const parentSeen = ctx.seen.get(parent);\n            if (parentSeen?.schema.$ref) {\n                schema.$ref = parentSeen.schema.$ref;\n                // De-duplicate with parent's definition\n                if (parentSeen.def) {\n                    for (const key in schema) {\n                        if (key === \"$ref\" || key === \"allOf\")\n                            continue;\n                        if (key in parentSeen.def && JSON.stringify(schema[key]) === JSON.stringify(parentSeen.def[key])) {\n                            delete schema[key];\n                        }\n                    }\n                }\n            }\n        }\n        // execute overrides\n        ctx.override({\n            zodSchema: zodSchema,\n            jsonSchema: schema,\n            path: seen.path ?? [],\n        });\n    };\n    for (const entry of [...ctx.seen.entries()].reverse()) {\n        flattenRef(entry[0]);\n    }\n    const result = {};\n    if (ctx.target === \"draft-2020-12\") {\n        result.$schema = \"https://json-schema.org/draft/2020-12/schema\";\n    }\n    else if (ctx.target === \"draft-07\") {\n        result.$schema = \"http://json-schema.org/draft-07/schema#\";\n    }\n    else if (ctx.target === \"draft-04\") {\n        result.$schema = \"http://json-schema.org/draft-04/schema#\";\n    }\n    else if (ctx.target === \"openapi-3.0\") {\n        // OpenAPI 3.0 schema objects should not include a $schema property\n    }\n    else {\n        // Arbitrary string values are allowed but won't have a $schema property set\n    }\n    if (ctx.external?.uri) {\n        const id = ctx.external.registry.get(schema)?.id;\n        if (!id)\n            throw new Error(\"Schema is missing an `id` property\");\n        result.$id = ctx.external.uri(id);\n    }\n    Object.assign(result, root.def ?? root.schema);\n    // build defs object\n    const defs = ctx.external?.defs ?? {};\n    for (const entry of ctx.seen.entries()) {\n        const seen = entry[1];\n        if (seen.def && seen.defId) {\n            defs[seen.defId] = seen.def;\n        }\n    }\n    // set definitions in result\n    if (ctx.external) {\n    }\n    else {\n        if (Object.keys(defs).length > 0) {\n            if (ctx.target === \"draft-2020-12\") {\n                result.$defs = defs;\n            }\n            else {\n                result.definitions = defs;\n            }\n        }\n    }\n    try {\n        // this \"finalizes\" this schema and ensures all cycles are removed\n        // each call to finalize() is functionally independent\n        // though the seen map is shared\n        const finalized = JSON.parse(JSON.stringify(result));\n        Object.defineProperty(finalized, \"~standard\", {\n            value: {\n                ...schema[\"~standard\"],\n                jsonSchema: {\n                    input: createStandardJSONSchemaMethod(schema, \"input\", ctx.processors),\n                    output: createStandardJSONSchemaMethod(schema, \"output\", ctx.processors),\n                },\n            },\n            enumerable: false,\n            writable: false,\n        });\n        return finalized;\n    }\n    catch (_err) {\n        throw new Error(\"Error converting schema to JSON.\");\n    }\n}\nfunction isTransforming(_schema, _ctx) {\n    const ctx = _ctx ?? { seen: new Set() };\n    if (ctx.seen.has(_schema))\n        return false;\n    ctx.seen.add(_schema);\n    const def = _schema._zod.def;\n    if (def.type === \"transform\")\n        return true;\n    if (def.type === \"array\")\n        return isTransforming(def.element, ctx);\n    if (def.type === \"set\")\n        return isTransforming(def.valueType, ctx);\n    if (def.type === \"lazy\")\n        return isTransforming(def.getter(), ctx);\n    if (def.type === \"promise\" ||\n        def.type === \"optional\" ||\n        def.type === \"nonoptional\" ||\n        def.type === \"nullable\" ||\n        def.type === \"readonly\" ||\n        def.type === \"default\" ||\n        def.type === \"prefault\") {\n        return isTransforming(def.innerType, ctx);\n    }\n    if (def.type === \"intersection\") {\n        return isTransforming(def.left, ctx) || isTransforming(def.right, ctx);\n    }\n    if (def.type === \"record\" || def.type === \"map\") {\n        return isTransforming(def.keyType, ctx) || isTransforming(def.valueType, ctx);\n    }\n    if (def.type === \"pipe\") {\n        return isTransforming(def.in, ctx) || isTransforming(def.out, ctx);\n    }\n    if (def.type === \"object\") {\n        for (const key in def.shape) {\n            if (isTransforming(def.shape[key], ctx))\n                return true;\n        }\n        return false;\n    }\n    if (def.type === \"union\") {\n        for (const option of def.options) {\n            if (isTransforming(option, ctx))\n                return true;\n        }\n        return false;\n    }\n    if (def.type === \"tuple\") {\n        for (const item of def.items) {\n            if (isTransforming(item, ctx))\n                return true;\n        }\n        if (def.rest && isTransforming(def.rest, ctx))\n            return true;\n        return false;\n    }\n    return false;\n}\n/**\n * Creates a toJSONSchema method for a schema instance.\n * This encapsulates the logic of initializing context, processing, extracting defs, and finalizing.\n */\nexport const createToJSONSchemaMethod = (schema, processors = {}) => (params) => {\n    const ctx = initializeContext({ ...params, processors });\n    process(schema, ctx);\n    extractDefs(ctx, schema);\n    return finalize(ctx, schema);\n};\nexport const createStandardJSONSchemaMethod = (schema, io, processors = {}) => (params) => {\n    const { libraryOptions, target } = params ?? {};\n    const ctx = initializeContext({ ...(libraryOptions ?? {}), target, io, processors });\n    process(schema, ctx);\n    extractDefs(ctx, schema);\n    return finalize(ctx, schema);\n};\n", "import { extractDefs, finalize, initializeContext, process, } from \"./to-json-schema.js\";\nimport { getEnumValues } from \"./util.js\";\nconst formatMap = {\n    guid: \"uuid\",\n    url: \"uri\",\n    datetime: \"date-time\",\n    json_string: \"json-string\",\n    regex: \"\", // do not set\n};\n// ==================== SIMPLE TYPE PROCESSORS ====================\nexport const stringProcessor = (schema, ctx, _json, _params) => {\n    const json = _json;\n    json.type = \"string\";\n    const { minimum, maximum, format, patterns, contentEncoding } = schema._zod\n        .bag;\n    if (typeof minimum === \"number\")\n        json.minLength = minimum;\n    if (typeof maximum === \"number\")\n        json.maxLength = maximum;\n    // custom pattern overrides format\n    if (format) {\n        json.format = formatMap[format] ?? format;\n        if (json.format === \"\")\n            delete json.format; // empty format is not valid\n        // JSON Schema format: \"time\" requires a full time with offset or Z\n        // z.iso.time() does not include timezone information, so format: \"time\" should never be used\n        if (format === \"time\") {\n            delete json.format;\n        }\n    }\n    if (contentEncoding)\n        json.contentEncoding = contentEncoding;\n    if (patterns && patterns.size > 0) {\n        const regexes = [...patterns];\n        if (regexes.length === 1)\n            json.pattern = regexes[0].source;\n        else if (regexes.length > 1) {\n            json.allOf = [\n                ...regexes.map((regex) => ({\n                    ...(ctx.target === \"draft-07\" || ctx.target === \"draft-04\" || ctx.target === \"openapi-3.0\"\n                        ? { type: \"string\" }\n                        : {}),\n                    pattern: regex.source,\n                })),\n            ];\n        }\n    }\n};\nexport const numberProcessor = (schema, ctx, _json, _params) => {\n    const json = _json;\n    const { minimum, maximum, format, multipleOf, exclusiveMaximum, exclusiveMinimum } = schema._zod.bag;\n    if (typeof format === \"string\" && format.includes(\"int\"))\n        json.type = \"integer\";\n    else\n        json.type = \"number\";\n    if (typeof exclusiveMinimum === \"number\") {\n        if (ctx.target === \"draft-04\" || ctx.target === \"openapi-3.0\") {\n            json.minimum = exclusiveMinimum;\n            json.exclusiveMinimum = true;\n        }\n        else {\n            json.exclusiveMinimum = exclusiveMinimum;\n        }\n    }\n    if (typeof minimum === \"number\") {\n        json.minimum = minimum;\n        if (typeof exclusiveMinimum === \"number\" && ctx.target !== \"draft-04\") {\n            if (exclusiveMinimum >= minimum)\n                delete json.minimum;\n            else\n                delete json.exclusiveMinimum;\n        }\n    }\n    if (typeof exclusiveMaximum === \"number\") {\n        if (ctx.target === \"draft-04\" || ctx.target === \"openapi-3.0\") {\n            json.maximum = exclusiveMaximum;\n            json.exclusiveMaximum = true;\n        }\n        else {\n            json.exclusiveMaximum = exclusiveMaximum;\n        }\n    }\n    if (typeof maximum === \"number\") {\n        json.maximum = maximum;\n        if (typeof exclusiveMaximum === \"number\" && ctx.target !== \"draft-04\") {\n            if (exclusiveMaximum <= maximum)\n                delete json.maximum;\n            else\n                delete json.exclusiveMaximum;\n        }\n    }\n    if (typeof multipleOf === \"number\")\n        json.multipleOf = multipleOf;\n};\nexport const booleanProcessor = (_schema, _ctx, json, _params) => {\n    json.type = \"boolean\";\n};\nexport const bigintProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"BigInt cannot be represented in JSON Schema\");\n    }\n};\nexport const symbolProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Symbols cannot be represented in JSON Schema\");\n    }\n};\nexport const nullProcessor = (_schema, ctx, json, _params) => {\n    if (ctx.target === \"openapi-3.0\") {\n        json.type = \"string\";\n        json.nullable = true;\n        json.enum = [null];\n    }\n    else {\n        json.type = \"null\";\n    }\n};\nexport const undefinedProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Undefined cannot be represented in JSON Schema\");\n    }\n};\nexport const voidProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Void cannot be represented in JSON Schema\");\n    }\n};\nexport const neverProcessor = (_schema, _ctx, json, _params) => {\n    json.not = {};\n};\nexport const anyProcessor = (_schema, _ctx, _json, _params) => {\n    // empty schema accepts anything\n};\nexport const unknownProcessor = (_schema, _ctx, _json, _params) => {\n    // empty schema accepts anything\n};\nexport const dateProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Date cannot be represented in JSON Schema\");\n    }\n};\nexport const enumProcessor = (schema, _ctx, json, _params) => {\n    const def = schema._zod.def;\n    const values = getEnumValues(def.entries);\n    // Number enums can have both string and number values\n    if (values.every((v) => typeof v === \"number\"))\n        json.type = \"number\";\n    if (values.every((v) => typeof v === \"string\"))\n        json.type = \"string\";\n    json.enum = values;\n};\nexport const literalProcessor = (schema, ctx, json, _params) => {\n    const def = schema._zod.def;\n    const vals = [];\n    for (const val of def.values) {\n        if (val === undefined) {\n            if (ctx.unrepresentable === \"throw\") {\n                throw new Error(\"Literal `undefined` cannot be represented in JSON Schema\");\n            }\n            else {\n                // do not add to vals\n            }\n        }\n        else if (typeof val === \"bigint\") {\n            if (ctx.unrepresentable === \"throw\") {\n                throw new Error(\"BigInt literals cannot be represented in JSON Schema\");\n            }\n            else {\n                vals.push(Number(val));\n            }\n        }\n        else {\n            vals.push(val);\n        }\n    }\n    if (vals.length === 0) {\n        // do nothing (an undefined literal was stripped)\n    }\n    else if (vals.length === 1) {\n        const val = vals[0];\n        json.type = val === null ? \"null\" : typeof val;\n        if (ctx.target === \"draft-04\" || ctx.target === \"openapi-3.0\") {\n            json.enum = [val];\n        }\n        else {\n            json.const = val;\n        }\n    }\n    else {\n        if (vals.every((v) => typeof v === \"number\"))\n            json.type = \"number\";\n        if (vals.every((v) => typeof v === \"string\"))\n            json.type = \"string\";\n        if (vals.every((v) => typeof v === \"boolean\"))\n            json.type = \"boolean\";\n        if (vals.every((v) => v === null))\n            json.type = \"null\";\n        json.enum = vals;\n    }\n};\nexport const nanProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"NaN cannot be represented in JSON Schema\");\n    }\n};\nexport const templateLiteralProcessor = (schema, _ctx, json, _params) => {\n    const _json = json;\n    const pattern = schema._zod.pattern;\n    if (!pattern)\n        throw new Error(\"Pattern not found in template literal\");\n    _json.type = \"string\";\n    _json.pattern = pattern.source;\n};\nexport const fileProcessor = (schema, _ctx, json, _params) => {\n    const _json = json;\n    const file = {\n        type: \"string\",\n        format: \"binary\",\n        contentEncoding: \"binary\",\n    };\n    const { minimum, maximum, mime } = schema._zod.bag;\n    if (minimum !== undefined)\n        file.minLength = minimum;\n    if (maximum !== undefined)\n        file.maxLength = maximum;\n    if (mime) {\n        if (mime.length === 1) {\n            file.contentMediaType = mime[0];\n            Object.assign(_json, file);\n        }\n        else {\n            Object.assign(_json, file); // shared props at root\n            _json.anyOf = mime.map((m) => ({ contentMediaType: m })); // only contentMediaType differs\n        }\n    }\n    else {\n        Object.assign(_json, file);\n    }\n};\nexport const successProcessor = (_schema, _ctx, json, _params) => {\n    json.type = \"boolean\";\n};\nexport const customProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Custom types cannot be represented in JSON Schema\");\n    }\n};\nexport const functionProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Function types cannot be represented in JSON Schema\");\n    }\n};\nexport const transformProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Transforms cannot be represented in JSON Schema\");\n    }\n};\nexport const mapProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Map cannot be represented in JSON Schema\");\n    }\n};\nexport const setProcessor = (_schema, ctx, _json, _params) => {\n    if (ctx.unrepresentable === \"throw\") {\n        throw new Error(\"Set cannot be represented in JSON Schema\");\n    }\n};\n// ==================== COMPOSITE TYPE PROCESSORS ====================\nexport const arrayProcessor = (schema, ctx, _json, params) => {\n    const json = _json;\n    const def = schema._zod.def;\n    const { minimum, maximum } = schema._zod.bag;\n    if (typeof minimum === \"number\")\n        json.minItems = minimum;\n    if (typeof maximum === \"number\")\n        json.maxItems = maximum;\n    json.type = \"array\";\n    json.items = process(def.element, ctx, { ...params, path: [...params.path, \"items\"] });\n};\nexport const objectProcessor = (schema, ctx, _json, params) => {\n    const json = _json;\n    const def = schema._zod.def;\n    json.type = \"object\";\n    json.properties = {};\n    const shape = def.shape;\n    for (const key in shape) {\n        json.properties[key] = process(shape[key], ctx, {\n            ...params,\n            path: [...params.path, \"properties\", key],\n        });\n    }\n    // required keys\n    const allKeys = new Set(Object.keys(shape));\n    const requiredKeys = new Set([...allKeys].filter((key) => {\n        const v = def.shape[key]._zod;\n        if (ctx.io === \"input\") {\n            return v.optin === undefined;\n        }\n        else {\n            return v.optout === undefined;\n        }\n    }));\n    if (requiredKeys.size > 0) {\n        json.required = Array.from(requiredKeys);\n    }\n    // catchall\n    if (def.catchall?._zod.def.type === \"never\") {\n        // strict\n        json.additionalProperties = false;\n    }\n    else if (!def.catchall) {\n        // regular\n        if (ctx.io === \"output\")\n            json.additionalProperties = false;\n    }\n    else if (def.catchall) {\n        json.additionalProperties = process(def.catchall, ctx, {\n            ...params,\n            path: [...params.path, \"additionalProperties\"],\n        });\n    }\n};\nexport const unionProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    // Exclusive unions (inclusive === false) use oneOf (exactly one match) instead of anyOf (one or more matches)\n    // This includes both z.xor() and discriminated unions\n    const isExclusive = def.inclusive === false;\n    const options = def.options.map((x, i) => process(x, ctx, {\n        ...params,\n        path: [...params.path, isExclusive ? \"oneOf\" : \"anyOf\", i],\n    }));\n    if (isExclusive) {\n        json.oneOf = options;\n    }\n    else {\n        json.anyOf = options;\n    }\n};\nexport const intersectionProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    const a = process(def.left, ctx, {\n        ...params,\n        path: [...params.path, \"allOf\", 0],\n    });\n    const b = process(def.right, ctx, {\n        ...params,\n        path: [...params.path, \"allOf\", 1],\n    });\n    const isSimpleIntersection = (val) => \"allOf\" in val && Object.keys(val).length === 1;\n    const allOf = [\n        ...(isSimpleIntersection(a) ? a.allOf : [a]),\n        ...(isSimpleIntersection(b) ? b.allOf : [b]),\n    ];\n    json.allOf = allOf;\n};\nexport const tupleProcessor = (schema, ctx, _json, params) => {\n    const json = _json;\n    const def = schema._zod.def;\n    json.type = \"array\";\n    const prefixPath = ctx.target === \"draft-2020-12\" ? \"prefixItems\" : \"items\";\n    const restPath = ctx.target === \"draft-2020-12\" ? \"items\" : ctx.target === \"openapi-3.0\" ? \"items\" : \"additionalItems\";\n    const prefixItems = def.items.map((x, i) => process(x, ctx, {\n        ...params,\n        path: [...params.path, prefixPath, i],\n    }));\n    const rest = def.rest\n        ? process(def.rest, ctx, {\n            ...params,\n            path: [...params.path, restPath, ...(ctx.target === \"openapi-3.0\" ? [def.items.length] : [])],\n        })\n        : null;\n    if (ctx.target === \"draft-2020-12\") {\n        json.prefixItems = prefixItems;\n        if (rest) {\n            json.items = rest;\n        }\n    }\n    else if (ctx.target === \"openapi-3.0\") {\n        json.items = {\n            anyOf: prefixItems,\n        };\n        if (rest) {\n            json.items.anyOf.push(rest);\n        }\n        json.minItems = prefixItems.length;\n        if (!rest) {\n            json.maxItems = prefixItems.length;\n        }\n    }\n    else {\n        json.items = prefixItems;\n        if (rest) {\n            json.additionalItems = rest;\n        }\n    }\n    // length\n    const { minimum, maximum } = schema._zod.bag;\n    if (typeof minimum === \"number\")\n        json.minItems = minimum;\n    if (typeof maximum === \"number\")\n        json.maxItems = maximum;\n};\nexport const recordProcessor = (schema, ctx, _json, params) => {\n    const json = _json;\n    const def = schema._zod.def;\n    json.type = \"object\";\n    // For looseRecord with regex patterns, use patternProperties\n    // This correctly represents \"only validate keys matching the pattern\" semantics\n    // and composes well with allOf (intersections)\n    const keyType = def.keyType;\n    const keyBag = keyType._zod.bag;\n    const patterns = keyBag?.patterns;\n    if (def.mode === \"loose\" && patterns && patterns.size > 0) {\n        // Use patternProperties for looseRecord with regex patterns\n        const valueSchema = process(def.valueType, ctx, {\n            ...params,\n            path: [...params.path, \"patternProperties\", \"*\"],\n        });\n        json.patternProperties = {};\n        for (const pattern of patterns) {\n            json.patternProperties[pattern.source] = valueSchema;\n        }\n    }\n    else {\n        // Default behavior: use propertyNames + additionalProperties\n        if (ctx.target === \"draft-07\" || ctx.target === \"draft-2020-12\") {\n            json.propertyNames = process(def.keyType, ctx, {\n                ...params,\n                path: [...params.path, \"propertyNames\"],\n            });\n        }\n        json.additionalProperties = process(def.valueType, ctx, {\n            ...params,\n            path: [...params.path, \"additionalProperties\"],\n        });\n    }\n    // Add required for keys with discrete values (enum, literal, etc.)\n    const keyValues = keyType._zod.values;\n    if (keyValues) {\n        const validKeyValues = [...keyValues].filter((v) => typeof v === \"string\" || typeof v === \"number\");\n        if (validKeyValues.length > 0) {\n            json.required = validKeyValues;\n        }\n    }\n};\nexport const nullableProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    const inner = process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    if (ctx.target === \"openapi-3.0\") {\n        seen.ref = def.innerType;\n        json.nullable = true;\n    }\n    else {\n        json.anyOf = [inner, { type: \"null\" }];\n    }\n};\nexport const nonoptionalProcessor = (schema, ctx, _json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n};\nexport const defaultProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n    json.default = JSON.parse(JSON.stringify(def.defaultValue));\n};\nexport const prefaultProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n    if (ctx.io === \"input\")\n        json._prefault = JSON.parse(JSON.stringify(def.defaultValue));\n};\nexport const catchProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n    let catchValue;\n    try {\n        catchValue = def.catchValue(undefined);\n    }\n    catch {\n        throw new Error(\"Dynamic catch values are not supported in JSON Schema\");\n    }\n    json.default = catchValue;\n};\nexport const pipeProcessor = (schema, ctx, _json, params) => {\n    const def = schema._zod.def;\n    const innerType = ctx.io === \"input\" ? (def.in._zod.def.type === \"transform\" ? def.out : def.in) : def.out;\n    process(innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = innerType;\n};\nexport const readonlyProcessor = (schema, ctx, json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n    json.readOnly = true;\n};\nexport const promiseProcessor = (schema, ctx, _json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n};\nexport const optionalProcessor = (schema, ctx, _json, params) => {\n    const def = schema._zod.def;\n    process(def.innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = def.innerType;\n};\nexport const lazyProcessor = (schema, ctx, _json, params) => {\n    const innerType = schema._zod.innerType;\n    process(innerType, ctx, params);\n    const seen = ctx.seen.get(schema);\n    seen.ref = innerType;\n};\n// ==================== ALL PROCESSORS ====================\nexport const allProcessors = {\n    string: stringProcessor,\n    number: numberProcessor,\n    boolean: booleanProcessor,\n    bigint: bigintProcessor,\n    symbol: symbolProcessor,\n    null: nullProcessor,\n    undefined: undefinedProcessor,\n    void: voidProcessor,\n    never: neverProcessor,\n    any: anyProcessor,\n    unknown: unknownProcessor,\n    date: dateProcessor,\n    enum: enumProcessor,\n    literal: literalProcessor,\n    nan: nanProcessor,\n    template_literal: templateLiteralProcessor,\n    file: fileProcessor,\n    success: successProcessor,\n    custom: customProcessor,\n    function: functionProcessor,\n    transform: transformProcessor,\n    map: mapProcessor,\n    set: setProcessor,\n    array: arrayProcessor,\n    object: objectProcessor,\n    union: unionProcessor,\n    intersection: intersectionProcessor,\n    tuple: tupleProcessor,\n    record: recordProcessor,\n    nullable: nullableProcessor,\n    nonoptional: nonoptionalProcessor,\n    default: defaultProcessor,\n    prefault: prefaultProcessor,\n    catch: catchProcessor,\n    pipe: pipeProcessor,\n    readonly: readonlyProcessor,\n    promise: promiseProcessor,\n    optional: optionalProcessor,\n    lazy: lazyProcessor,\n};\nexport function toJSONSchema(input, params) {\n    if (\"_idmap\" in input) {\n        // Registry case\n        const registry = input;\n        const ctx = initializeContext({ ...params, processors: allProcessors });\n        const defs = {};\n        // First pass: process all schemas to build the seen map\n        for (const entry of registry._idmap.entries()) {\n            const [_, schema] = entry;\n            process(schema, ctx);\n        }\n        const schemas = {};\n        const external = {\n            registry,\n            uri: params?.uri,\n            defs,\n        };\n        // Update the context with external configuration\n        ctx.external = external;\n        // Second pass: emit each schema\n        for (const entry of registry._idmap.entries()) {\n            const [key, schema] = entry;\n            extractDefs(ctx, schema);\n            schemas[key] = finalize(ctx, schema);\n        }\n        if (Object.keys(defs).length > 0) {\n            const defsSegment = ctx.target === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n            schemas.__shared = {\n                [defsSegment]: defs,\n            };\n        }\n        return { schemas };\n    }\n    // Single schema case\n    const ctx = initializeContext({ ...params, processors: allProcessors });\n    process(input, ctx);\n    extractDefs(ctx, input);\n    return finalize(ctx, input);\n}\n", "import { allProcessors } from \"./json-schema-processors.js\";\nimport { extractDefs, finalize, initializeContext, process, } from \"./to-json-schema.js\";\n/**\n * Legacy class-based interface for JSON Schema generation.\n * This class wraps the new functional implementation to provide backward compatibility.\n *\n * @deprecated Use the `toJSONSchema` function instead for new code.\n *\n * @example\n * ```typescript\n * // Legacy usage (still supported)\n * const gen = new JSONSchemaGenerator({ target: \"draft-07\" });\n * gen.process(schema);\n * const result = gen.emit(schema);\n *\n * // Preferred modern usage\n * const result = toJSONSchema(schema, { target: \"draft-07\" });\n * ```\n */\nexport class JSONSchemaGenerator {\n    /** @deprecated Access via ctx instead */\n    get metadataRegistry() {\n        return this.ctx.metadataRegistry;\n    }\n    /** @deprecated Access via ctx instead */\n    get target() {\n        return this.ctx.target;\n    }\n    /** @deprecated Access via ctx instead */\n    get unrepresentable() {\n        return this.ctx.unrepresentable;\n    }\n    /** @deprecated Access via ctx instead */\n    get override() {\n        return this.ctx.override;\n    }\n    /** @deprecated Access via ctx instead */\n    get io() {\n        return this.ctx.io;\n    }\n    /** @deprecated Access via ctx instead */\n    get counter() {\n        return this.ctx.counter;\n    }\n    set counter(value) {\n        this.ctx.counter = value;\n    }\n    /** @deprecated Access via ctx instead */\n    get seen() {\n        return this.ctx.seen;\n    }\n    constructor(params) {\n        // Normalize target for internal context\n        let normalizedTarget = params?.target ?? \"draft-2020-12\";\n        if (normalizedTarget === \"draft-4\")\n            normalizedTarget = \"draft-04\";\n        if (normalizedTarget === \"draft-7\")\n            normalizedTarget = \"draft-07\";\n        this.ctx = initializeContext({\n            processors: allProcessors,\n            target: normalizedTarget,\n            ...(params?.metadata && { metadata: params.metadata }),\n            ...(params?.unrepresentable && { unrepresentable: params.unrepresentable }),\n            ...(params?.override && { override: params.override }),\n            ...(params?.io && { io: params.io }),\n        });\n    }\n    /**\n     * Process a schema to prepare it for JSON Schema generation.\n     * This must be called before emit().\n     */\n    process(schema, _params = { path: [], schemaPath: [] }) {\n        return process(schema, this.ctx, _params);\n    }\n    /**\n     * Emit the final JSON Schema after processing.\n     * Must call process() first.\n     */\n    emit(schema, _params) {\n        // Apply emit params to the context\n        if (_params) {\n            if (_params.cycles)\n                this.ctx.cycles = _params.cycles;\n            if (_params.reused)\n                this.ctx.reused = _params.reused;\n            if (_params.external)\n                this.ctx.external = _params.external;\n        }\n        extractDefs(this.ctx, schema);\n        const result = finalize(this.ctx, schema);\n        // Strip ~standard property to match old implementation's return type\n        const { \"~standard\": _, ...plainResult } = result;\n        return plainResult;\n    }\n}\n", "export {};\n", "import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as processors from \"../core/json-schema-processors.js\";\nimport { createStandardJSONSchemaMethod, createToJSONSchemaMethod } from \"../core/to-json-schema.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    Object.assign(inst[\"~standard\"], {\n        jsonSchema: {\n            input: createStandardJSONSchemaMethod(inst, \"input\"),\n            output: createStandardJSONSchemaMethod(inst, \"output\"),\n        },\n    });\n    inst.toJSONSchema = createToJSONSchemaMethod(inst, {});\n    inst.def = def;\n    inst.type = def.type;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone(util.mergeDefs(def, {\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }), {\n            parent: true,\n        });\n    };\n    inst.with = inst.check;\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // encoding/decoding\n    inst.encode = (data, params) => parse.encode(inst, data, params);\n    inst.decode = (data, params) => parse.decode(inst, data, params);\n    inst.encodeAsync = async (data, params) => parse.encodeAsync(inst, data, params);\n    inst.decodeAsync = async (data, params) => parse.decodeAsync(inst, data, params);\n    inst.safeEncode = (data, params) => parse.safeEncode(inst, data, params);\n    inst.safeDecode = (data, params) => parse.safeDecode(inst, data, params);\n    inst.safeEncodeAsync = async (data, params) => parse.safeEncodeAsync(inst, data, params);\n    inst.safeDecodeAsync = async (data, params) => parse.safeDecodeAsync(inst, data, params);\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.exactOptional = () => exactOptional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    inst.apply = (fn) => fn(inst);\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.stringProcessor(inst, ctx, json, params);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n    inst.slugify = () => inst.check(checks.slugify());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport function httpUrl(params) {\n    return core._url(ZodURL, {\n        protocol: /^https?$/,\n        hostname: core.regexes.domain,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodMAC = /*@__PURE__*/ core.$constructor(\"ZodMAC\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodMAC.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function mac(params) {\n    return core._mac(ZodMAC, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport function hostname(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hostname\", core.regexes.hostname, _params);\n}\nexport function hex(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hex\", core.regexes.hex, _params);\n}\nexport function hash(alg, params) {\n    const enc = params?.enc ?? \"hex\";\n    const format = `${alg}_${enc}`;\n    const regex = core.regexes[format];\n    if (!regex)\n        throw new Error(`Unrecognized hash format: ${format}`);\n    return core._stringFormat(ZodCustomStringFormat, format, regex, params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.numberProcessor(inst, ctx, json, params);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.booleanProcessor(inst, ctx, json, params);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.bigintProcessor(inst, ctx, json, params);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.symbolProcessor(inst, ctx, json, params);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.undefinedProcessor(inst, ctx, json, params);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.nullProcessor(inst, ctx, json, params);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.anyProcessor(inst, ctx, json, params);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.unknownProcessor(inst, ctx, json, params);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.neverProcessor(inst, ctx, json, params);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.voidProcessor(inst, ctx, json, params);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.dateProcessor(inst, ctx, json, params);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.arrayProcessor(inst, ctx, json, params);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return _enum(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObjectJIT.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.objectProcessor(inst, ctx, json, params);\n    util.defineLazy(inst, \"shape\", () => {\n        return def.shape;\n    });\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.safeExtend = (incoming) => {\n        return util.safeExtend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        shape: shape ?? {},\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.unionProcessor(inst, ctx, json, params);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodXor = /*@__PURE__*/ core.$constructor(\"ZodXor\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodXor.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.unionProcessor(inst, ctx, json, params);\n    inst.options = def.options;\n});\n/** Creates an exclusive union (XOR) where exactly one option must match.\n * Unlike regular unions that succeed when any option matches, xor fails if\n * zero or more than one option matches the input. */\nexport function xor(options, params) {\n    return new ZodXor({\n        type: \"union\",\n        options: options,\n        inclusive: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.intersectionProcessor(inst, ctx, json, params);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.tupleProcessor(inst, ctx, json, params);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.recordProcessor(inst, ctx, json, params);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    const k = core.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function looseRecord(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        mode: \"loose\",\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.mapProcessor(inst, ctx, json, params);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.setProcessor(inst, ctx, json, params);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.enumProcessor(inst, ctx, json, params);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.literalProcessor(inst, ctx, json, params);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.fileProcessor(inst, ctx, json, params);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.transformProcessor(inst, ctx, json, params);\n    inst._zod.parse = (payload, _ctx) => {\n        if (_ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.optionalProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodExactOptional = /*@__PURE__*/ core.$constructor(\"ZodExactOptional\", (inst, def) => {\n    core.$ZodExactOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.optionalProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function exactOptional(innerType) {\n    return new ZodExactOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.nullableProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.defaultProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.prefaultProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.nonoptionalProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.successProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.catchProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.nanProcessor(inst, ctx, json, params);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.pipeProcessor(inst, ctx, json, params);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodCodec = /*@__PURE__*/ core.$constructor(\"ZodCodec\", (inst, def) => {\n    ZodPipe.init(inst, def);\n    core.$ZodCodec.init(inst, def);\n});\nexport function codec(in_, out, params) {\n    return new ZodCodec({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        transform: params.decode,\n        reverseTransform: params.encode,\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.readonlyProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.templateLiteralProcessor(inst, ctx, json, params);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.lazyProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.promiseProcessor(inst, ctx, json, params);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodFunction = /*@__PURE__*/ core.$constructor(\"ZodFunction\", (inst, def) => {\n    core.$ZodFunction.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.functionProcessor(inst, ctx, json, params);\n});\nexport function _function(params) {\n    return new ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input) ? tuple(params?.input) : (params?.input ?? array(unknown())),\n        output: params?.output ?? unknown(),\n    });\n}\nexport { _function as function };\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.processJSONSchema = (ctx, json, params) => processors.customProcessor(inst, ctx, json, params);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    return core._superRefine(fn);\n}\n// Re-export describe and meta from core\nexport const describe = core.describe;\nexport const meta = core.meta;\nfunction _instanceof(cls, params = {}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    // Override check to emit invalid_type instead of custom\n    inst._zod.check = (payload) => {\n        if (!(payload.value instanceof cls)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: cls.name,\n                input: payload.value,\n                inst,\n                path: [...(inst._zod.def.path ?? [])],\n            });\n        }\n    };\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Codec: ZodCodec,\n    Boolean: ZodBoolean,\n    String: ZodString,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n", "export { _lt as lt, _lte as lte, _gt as gt, _gte as gte, _positive as positive, _negative as negative, _nonpositive as nonpositive, _nonnegative as nonnegative, _multipleOf as multipleOf, _maxSize as maxSize, _minSize as minSize, _size as size, _maxLength as maxLength, _minLength as minLength, _length as length, _regex as regex, _lowercase as lowercase, _uppercase as uppercase, _includes as includes, _startsWith as startsWith, _endsWith as endsWith, _property as property, _mime as mime, _overwrite as overwrite, _normalize as normalize, _trim as trim, _toLowerCase as toLowerCase, _toUpperCase as toUpperCase, _slugify as slugify, } from \"../core/index.js\";\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n", "import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nimport * as util from \"../core/util.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n", "import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n// Codec functions\nexport const encode = /* @__PURE__ */ core._encode(ZodRealError);\nexport const decode = /* @__PURE__ */ core._decode(ZodRealError);\nexport const encodeAsync = /* @__PURE__ */ core._encodeAsync(ZodRealError);\nexport const decodeAsync = /* @__PURE__ */ core._decodeAsync(ZodRealError);\nexport const safeEncode = /* @__PURE__ */ core._safeEncode(ZodRealError);\nexport const safeDecode = /* @__PURE__ */ core._safeDecode(ZodRealError);\nexport const safeEncodeAsync = /* @__PURE__ */ core._safeEncodeAsync(ZodRealError);\nexport const safeDecodeAsync = /* @__PURE__ */ core._safeDecodeAsync(ZodRealError);\n", "// Zod 3 compat layer\nimport * as core from \"../core/index.js\";\n/** @deprecated Use the raw string literal codes instead, e.g. \"invalid_type\". */\nexport const ZodIssueCode = {\n    invalid_type: \"invalid_type\",\n    too_big: \"too_big\",\n    too_small: \"too_small\",\n    invalid_format: \"invalid_format\",\n    not_multiple_of: \"not_multiple_of\",\n    unrecognized_keys: \"unrecognized_keys\",\n    invalid_union: \"invalid_union\",\n    invalid_key: \"invalid_key\",\n    invalid_element: \"invalid_element\",\n    invalid_value: \"invalid_value\",\n    custom: \"custom\",\n};\nexport { $brand, config } from \"../core/index.js\";\n/** @deprecated Use `z.config(params)` instead. */\nexport function setErrorMap(map) {\n    core.config({\n        customError: map,\n    });\n}\n/** @deprecated Use `z.config()` instead. */\nexport function getErrorMap() {\n    return core.config().customError;\n}\n/** @deprecated Do not use. Stub definition, only included for zod-to-json-schema compatibility. */\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n", "import { globalRegistry } from \"../core/registries.js\";\nimport * as _checks from \"./checks.js\";\nimport * as _iso from \"./iso.js\";\nimport * as _schemas from \"./schemas.js\";\n// Local z object to avoid circular dependency with ../index.js\nconst z = {\n    ..._schemas,\n    ..._checks,\n    iso: _iso,\n};\n// Keys that are recognized and handled by the conversion logic\nconst RECOGNIZED_KEYS = new Set([\n    // Schema identification\n    \"$schema\",\n    \"$ref\",\n    \"$defs\",\n    \"definitions\",\n    // Core schema keywords\n    \"$id\",\n    \"id\",\n    \"$comment\",\n    \"$anchor\",\n    \"$vocabulary\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n    // Type\n    \"type\",\n    \"enum\",\n    \"const\",\n    // Composition\n    \"anyOf\",\n    \"oneOf\",\n    \"allOf\",\n    \"not\",\n    // Object\n    \"properties\",\n    \"required\",\n    \"additionalProperties\",\n    \"patternProperties\",\n    \"propertyNames\",\n    \"minProperties\",\n    \"maxProperties\",\n    // Array\n    \"items\",\n    \"prefixItems\",\n    \"additionalItems\",\n    \"minItems\",\n    \"maxItems\",\n    \"uniqueItems\",\n    \"contains\",\n    \"minContains\",\n    \"maxContains\",\n    // String\n    \"minLength\",\n    \"maxLength\",\n    \"pattern\",\n    \"format\",\n    // Number\n    \"minimum\",\n    \"maximum\",\n    \"exclusiveMinimum\",\n    \"exclusiveMaximum\",\n    \"multipleOf\",\n    // Already handled metadata\n    \"description\",\n    \"default\",\n    // Content\n    \"contentEncoding\",\n    \"contentMediaType\",\n    \"contentSchema\",\n    // Unsupported (error-throwing)\n    \"unevaluatedItems\",\n    \"unevaluatedProperties\",\n    \"if\",\n    \"then\",\n    \"else\",\n    \"dependentSchemas\",\n    \"dependentRequired\",\n    // OpenAPI\n    \"nullable\",\n    \"readOnly\",\n]);\nfunction detectVersion(schema, defaultTarget) {\n    const $schema = schema.$schema;\n    if ($schema === \"https://json-schema.org/draft/2020-12/schema\") {\n        return \"draft-2020-12\";\n    }\n    if ($schema === \"http://json-schema.org/draft-07/schema#\") {\n        return \"draft-7\";\n    }\n    if ($schema === \"http://json-schema.org/draft-04/schema#\") {\n        return \"draft-4\";\n    }\n    // Use defaultTarget if provided, otherwise default to draft-2020-12\n    return defaultTarget ?? \"draft-2020-12\";\n}\nfunction resolveRef(ref, ctx) {\n    if (!ref.startsWith(\"#\")) {\n        throw new Error(\"External $ref is not supported, only local refs (#/...) are allowed\");\n    }\n    const path = ref.slice(1).split(\"/\").filter(Boolean);\n    // Handle root reference \"#\"\n    if (path.length === 0) {\n        return ctx.rootSchema;\n    }\n    const defsKey = ctx.version === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n    if (path[0] === defsKey) {\n        const key = path[1];\n        if (!key || !ctx.defs[key]) {\n            throw new Error(`Reference not found: ${ref}`);\n        }\n        return ctx.defs[key];\n    }\n    throw new Error(`Reference not found: ${ref}`);\n}\nfunction convertBaseSchema(schema, ctx) {\n    // Handle unsupported features\n    if (schema.not !== undefined) {\n        // Special case: { not: {} } represents never\n        if (typeof schema.not === \"object\" && Object.keys(schema.not).length === 0) {\n            return z.never();\n        }\n        throw new Error(\"not is not supported in Zod (except { not: {} } for never)\");\n    }\n    if (schema.unevaluatedItems !== undefined) {\n        throw new Error(\"unevaluatedItems is not supported\");\n    }\n    if (schema.unevaluatedProperties !== undefined) {\n        throw new Error(\"unevaluatedProperties is not supported\");\n    }\n    if (schema.if !== undefined || schema.then !== undefined || schema.else !== undefined) {\n        throw new Error(\"Conditional schemas (if/then/else) are not supported\");\n    }\n    if (schema.dependentSchemas !== undefined || schema.dependentRequired !== undefined) {\n        throw new Error(\"dependentSchemas and dependentRequired are not supported\");\n    }\n    // Handle $ref\n    if (schema.$ref) {\n        const refPath = schema.$ref;\n        if (ctx.refs.has(refPath)) {\n            return ctx.refs.get(refPath);\n        }\n        if (ctx.processing.has(refPath)) {\n            // Circular reference - use lazy\n            return z.lazy(() => {\n                if (!ctx.refs.has(refPath)) {\n                    throw new Error(`Circular reference not resolved: ${refPath}`);\n                }\n                return ctx.refs.get(refPath);\n            });\n        }\n        ctx.processing.add(refPath);\n        const resolved = resolveRef(refPath, ctx);\n        const zodSchema = convertSchema(resolved, ctx);\n        ctx.refs.set(refPath, zodSchema);\n        ctx.processing.delete(refPath);\n        return zodSchema;\n    }\n    // Handle enum\n    if (schema.enum !== undefined) {\n        const enumValues = schema.enum;\n        // Special case: OpenAPI 3.0 null representation { type: \"string\", nullable: true, enum: [null] }\n        if (ctx.version === \"openapi-3.0\" &&\n            schema.nullable === true &&\n            enumValues.length === 1 &&\n            enumValues[0] === null) {\n            return z.null();\n        }\n        if (enumValues.length === 0) {\n            return z.never();\n        }\n        if (enumValues.length === 1) {\n            return z.literal(enumValues[0]);\n        }\n        // Check if all values are strings\n        if (enumValues.every((v) => typeof v === \"string\")) {\n            return z.enum(enumValues);\n        }\n        // Mixed types - use union of literals\n        const literalSchemas = enumValues.map((v) => z.literal(v));\n        if (literalSchemas.length < 2) {\n            return literalSchemas[0];\n        }\n        return z.union([literalSchemas[0], literalSchemas[1], ...literalSchemas.slice(2)]);\n    }\n    // Handle const\n    if (schema.const !== undefined) {\n        return z.literal(schema.const);\n    }\n    // Handle type\n    const type = schema.type;\n    if (Array.isArray(type)) {\n        // Expand type array into anyOf union\n        const typeSchemas = type.map((t) => {\n            const typeSchema = { ...schema, type: t };\n            return convertBaseSchema(typeSchema, ctx);\n        });\n        if (typeSchemas.length === 0) {\n            return z.never();\n        }\n        if (typeSchemas.length === 1) {\n            return typeSchemas[0];\n        }\n        return z.union(typeSchemas);\n    }\n    if (!type) {\n        // No type specified - empty schema (any)\n        return z.any();\n    }\n    let zodSchema;\n    switch (type) {\n        case \"string\": {\n            let stringSchema = z.string();\n            // Apply format using .check() with Zod format functions\n            if (schema.format) {\n                const format = schema.format;\n                // Map common formats to Zod check functions\n                if (format === \"email\") {\n                    stringSchema = stringSchema.check(z.email());\n                }\n                else if (format === \"uri\" || format === \"uri-reference\") {\n                    stringSchema = stringSchema.check(z.url());\n                }\n                else if (format === \"uuid\" || format === \"guid\") {\n                    stringSchema = stringSchema.check(z.uuid());\n                }\n                else if (format === \"date-time\") {\n                    stringSchema = stringSchema.check(z.iso.datetime());\n                }\n                else if (format === \"date\") {\n                    stringSchema = stringSchema.check(z.iso.date());\n                }\n                else if (format === \"time\") {\n                    stringSchema = stringSchema.check(z.iso.time());\n                }\n                else if (format === \"duration\") {\n                    stringSchema = stringSchema.check(z.iso.duration());\n                }\n                else if (format === \"ipv4\") {\n                    stringSchema = stringSchema.check(z.ipv4());\n                }\n                else if (format === \"ipv6\") {\n                    stringSchema = stringSchema.check(z.ipv6());\n                }\n                else if (format === \"mac\") {\n                    stringSchema = stringSchema.check(z.mac());\n                }\n                else if (format === \"cidr\") {\n                    stringSchema = stringSchema.check(z.cidrv4());\n                }\n                else if (format === \"cidr-v6\") {\n                    stringSchema = stringSchema.check(z.cidrv6());\n                }\n                else if (format === \"base64\") {\n                    stringSchema = stringSchema.check(z.base64());\n                }\n                else if (format === \"base64url\") {\n                    stringSchema = stringSchema.check(z.base64url());\n                }\n                else if (format === \"e164\") {\n                    stringSchema = stringSchema.check(z.e164());\n                }\n                else if (format === \"jwt\") {\n                    stringSchema = stringSchema.check(z.jwt());\n                }\n                else if (format === \"emoji\") {\n                    stringSchema = stringSchema.check(z.emoji());\n                }\n                else if (format === \"nanoid\") {\n                    stringSchema = stringSchema.check(z.nanoid());\n                }\n                else if (format === \"cuid\") {\n                    stringSchema = stringSchema.check(z.cuid());\n                }\n                else if (format === \"cuid2\") {\n                    stringSchema = stringSchema.check(z.cuid2());\n                }\n                else if (format === \"ulid\") {\n                    stringSchema = stringSchema.check(z.ulid());\n                }\n                else if (format === \"xid\") {\n                    stringSchema = stringSchema.check(z.xid());\n                }\n                else if (format === \"ksuid\") {\n                    stringSchema = stringSchema.check(z.ksuid());\n                }\n                // Note: json-string format is not currently supported by Zod\n                // Custom formats are ignored - keep as plain string\n            }\n            // Apply constraints\n            if (typeof schema.minLength === \"number\") {\n                stringSchema = stringSchema.min(schema.minLength);\n            }\n            if (typeof schema.maxLength === \"number\") {\n                stringSchema = stringSchema.max(schema.maxLength);\n            }\n            if (schema.pattern) {\n                // JSON Schema patterns are not implicitly anchored (match anywhere in string)\n                stringSchema = stringSchema.regex(new RegExp(schema.pattern));\n            }\n            zodSchema = stringSchema;\n            break;\n        }\n        case \"number\":\n        case \"integer\": {\n            let numberSchema = type === \"integer\" ? z.number().int() : z.number();\n            // Apply constraints\n            if (typeof schema.minimum === \"number\") {\n                numberSchema = numberSchema.min(schema.minimum);\n            }\n            if (typeof schema.maximum === \"number\") {\n                numberSchema = numberSchema.max(schema.maximum);\n            }\n            if (typeof schema.exclusiveMinimum === \"number\") {\n                numberSchema = numberSchema.gt(schema.exclusiveMinimum);\n            }\n            else if (schema.exclusiveMinimum === true && typeof schema.minimum === \"number\") {\n                numberSchema = numberSchema.gt(schema.minimum);\n            }\n            if (typeof schema.exclusiveMaximum === \"number\") {\n                numberSchema = numberSchema.lt(schema.exclusiveMaximum);\n            }\n            else if (schema.exclusiveMaximum === true && typeof schema.maximum === \"number\") {\n                numberSchema = numberSchema.lt(schema.maximum);\n            }\n            if (typeof schema.multipleOf === \"number\") {\n                numberSchema = numberSchema.multipleOf(schema.multipleOf);\n            }\n            zodSchema = numberSchema;\n            break;\n        }\n        case \"boolean\": {\n            zodSchema = z.boolean();\n            break;\n        }\n        case \"null\": {\n            zodSchema = z.null();\n            break;\n        }\n        case \"object\": {\n            const shape = {};\n            const properties = schema.properties || {};\n            const requiredSet = new Set(schema.required || []);\n            // Convert properties - mark optional ones\n            for (const [key, propSchema] of Object.entries(properties)) {\n                const propZodSchema = convertSchema(propSchema, ctx);\n                // If not in required array, make it optional\n                shape[key] = requiredSet.has(key) ? propZodSchema : propZodSchema.optional();\n            }\n            // Handle propertyNames\n            if (schema.propertyNames) {\n                const keySchema = convertSchema(schema.propertyNames, ctx);\n                const valueSchema = schema.additionalProperties && typeof schema.additionalProperties === \"object\"\n                    ? convertSchema(schema.additionalProperties, ctx)\n                    : z.any();\n                // Case A: No properties (pure record)\n                if (Object.keys(shape).length === 0) {\n                    zodSchema = z.record(keySchema, valueSchema);\n                    break;\n                }\n                // Case B: With properties (intersection of object and looseRecord)\n                const objectSchema = z.object(shape).passthrough();\n                const recordSchema = z.looseRecord(keySchema, valueSchema);\n                zodSchema = z.intersection(objectSchema, recordSchema);\n                break;\n            }\n            // Handle patternProperties\n            if (schema.patternProperties) {\n                // patternProperties: keys matching pattern must satisfy corresponding schema\n                // Use loose records so non-matching keys pass through\n                const patternProps = schema.patternProperties;\n                const patternKeys = Object.keys(patternProps);\n                const looseRecords = [];\n                for (const pattern of patternKeys) {\n                    const patternValue = convertSchema(patternProps[pattern], ctx);\n                    const keySchema = z.string().regex(new RegExp(pattern));\n                    looseRecords.push(z.looseRecord(keySchema, patternValue));\n                }\n                // Build intersection: object schema + all pattern property records\n                const schemasToIntersect = [];\n                if (Object.keys(shape).length > 0) {\n                    // Use passthrough so patternProperties can validate additional keys\n                    schemasToIntersect.push(z.object(shape).passthrough());\n                }\n                schemasToIntersect.push(...looseRecords);\n                if (schemasToIntersect.length === 0) {\n                    zodSchema = z.object({}).passthrough();\n                }\n                else if (schemasToIntersect.length === 1) {\n                    zodSchema = schemasToIntersect[0];\n                }\n                else {\n                    // Chain intersections: (A & B) & C & D ...\n                    let result = z.intersection(schemasToIntersect[0], schemasToIntersect[1]);\n                    for (let i = 2; i < schemasToIntersect.length; i++) {\n                        result = z.intersection(result, schemasToIntersect[i]);\n                    }\n                    zodSchema = result;\n                }\n                break;\n            }\n            // Handle additionalProperties\n            // In JSON Schema, additionalProperties defaults to true (allow any extra properties)\n            // In Zod, objects strip unknown keys by default, so we need to handle this explicitly\n            const objectSchema = z.object(shape);\n            if (schema.additionalProperties === false) {\n                // Strict mode - no extra properties allowed\n                zodSchema = objectSchema.strict();\n            }\n            else if (typeof schema.additionalProperties === \"object\") {\n                // Extra properties must match the specified schema\n                zodSchema = objectSchema.catchall(convertSchema(schema.additionalProperties, ctx));\n            }\n            else {\n                // additionalProperties is true or undefined - allow any extra properties (passthrough)\n                zodSchema = objectSchema.passthrough();\n            }\n            break;\n        }\n        case \"array\": {\n            // TODO: uniqueItems is not supported\n            // TODO: contains/minContains/maxContains are not supported\n            // Check if this is a tuple (prefixItems or items as array)\n            const prefixItems = schema.prefixItems;\n            const items = schema.items;\n            if (prefixItems && Array.isArray(prefixItems)) {\n                // Tuple with prefixItems (draft-2020-12)\n                const tupleItems = prefixItems.map((item) => convertSchema(item, ctx));\n                const rest = items && typeof items === \"object\" && !Array.isArray(items)\n                    ? convertSchema(items, ctx)\n                    : undefined;\n                if (rest) {\n                    zodSchema = z.tuple(tupleItems).rest(rest);\n                }\n                else {\n                    zodSchema = z.tuple(tupleItems);\n                }\n                // Apply minItems/maxItems constraints to tuples\n                if (typeof schema.minItems === \"number\") {\n                    zodSchema = zodSchema.check(z.minLength(schema.minItems));\n                }\n                if (typeof schema.maxItems === \"number\") {\n                    zodSchema = zodSchema.check(z.maxLength(schema.maxItems));\n                }\n            }\n            else if (Array.isArray(items)) {\n                // Tuple with items array (draft-7)\n                const tupleItems = items.map((item) => convertSchema(item, ctx));\n                const rest = schema.additionalItems && typeof schema.additionalItems === \"object\"\n                    ? convertSchema(schema.additionalItems, ctx)\n                    : undefined; // additionalItems: false means no rest, handled by default tuple behavior\n                if (rest) {\n                    zodSchema = z.tuple(tupleItems).rest(rest);\n                }\n                else {\n                    zodSchema = z.tuple(tupleItems);\n                }\n                // Apply minItems/maxItems constraints to tuples\n                if (typeof schema.minItems === \"number\") {\n                    zodSchema = zodSchema.check(z.minLength(schema.minItems));\n                }\n                if (typeof schema.maxItems === \"number\") {\n                    zodSchema = zodSchema.check(z.maxLength(schema.maxItems));\n                }\n            }\n            else if (items !== undefined) {\n                // Regular array\n                const element = convertSchema(items, ctx);\n                let arraySchema = z.array(element);\n                // Apply constraints\n                if (typeof schema.minItems === \"number\") {\n                    arraySchema = arraySchema.min(schema.minItems);\n                }\n                if (typeof schema.maxItems === \"number\") {\n                    arraySchema = arraySchema.max(schema.maxItems);\n                }\n                zodSchema = arraySchema;\n            }\n            else {\n                // No items specified - array of any\n                zodSchema = z.array(z.any());\n            }\n            break;\n        }\n        default:\n            throw new Error(`Unsupported type: ${type}`);\n    }\n    // Apply metadata\n    if (schema.description) {\n        zodSchema = zodSchema.describe(schema.description);\n    }\n    if (schema.default !== undefined) {\n        zodSchema = zodSchema.default(schema.default);\n    }\n    return zodSchema;\n}\nfunction convertSchema(schema, ctx) {\n    if (typeof schema === \"boolean\") {\n        return schema ? z.any() : z.never();\n    }\n    // Convert base schema first (ignoring composition keywords)\n    let baseSchema = convertBaseSchema(schema, ctx);\n    const hasExplicitType = schema.type || schema.enum !== undefined || schema.const !== undefined;\n    // Process composition keywords LAST (they can appear together)\n    // Handle anyOf - wrap base schema with union\n    if (schema.anyOf && Array.isArray(schema.anyOf)) {\n        const options = schema.anyOf.map((s) => convertSchema(s, ctx));\n        const anyOfUnion = z.union(options);\n        baseSchema = hasExplicitType ? z.intersection(baseSchema, anyOfUnion) : anyOfUnion;\n    }\n    // Handle oneOf - exclusive union (exactly one must match)\n    if (schema.oneOf && Array.isArray(schema.oneOf)) {\n        const options = schema.oneOf.map((s) => convertSchema(s, ctx));\n        const oneOfUnion = z.xor(options);\n        baseSchema = hasExplicitType ? z.intersection(baseSchema, oneOfUnion) : oneOfUnion;\n    }\n    // Handle allOf - wrap base schema with intersection\n    if (schema.allOf && Array.isArray(schema.allOf)) {\n        if (schema.allOf.length === 0) {\n            baseSchema = hasExplicitType ? baseSchema : z.any();\n        }\n        else {\n            let result = hasExplicitType ? baseSchema : convertSchema(schema.allOf[0], ctx);\n            const startIdx = hasExplicitType ? 0 : 1;\n            for (let i = startIdx; i < schema.allOf.length; i++) {\n                result = z.intersection(result, convertSchema(schema.allOf[i], ctx));\n            }\n            baseSchema = result;\n        }\n    }\n    // Handle nullable (OpenAPI 3.0)\n    if (schema.nullable === true && ctx.version === \"openapi-3.0\") {\n        baseSchema = z.nullable(baseSchema);\n    }\n    // Handle readOnly\n    if (schema.readOnly === true) {\n        baseSchema = z.readonly(baseSchema);\n    }\n    // Collect metadata: core schema keywords and unrecognized keys\n    const extraMeta = {};\n    // Core schema keywords that should be captured as metadata\n    const coreMetadataKeys = [\"$id\", \"id\", \"$comment\", \"$anchor\", \"$vocabulary\", \"$dynamicRef\", \"$dynamicAnchor\"];\n    for (const key of coreMetadataKeys) {\n        if (key in schema) {\n            extraMeta[key] = schema[key];\n        }\n    }\n    // Content keywords - store as metadata\n    const contentMetadataKeys = [\"contentEncoding\", \"contentMediaType\", \"contentSchema\"];\n    for (const key of contentMetadataKeys) {\n        if (key in schema) {\n            extraMeta[key] = schema[key];\n        }\n    }\n    // Unrecognized keys (custom metadata)\n    for (const key of Object.keys(schema)) {\n        if (!RECOGNIZED_KEYS.has(key)) {\n            extraMeta[key] = schema[key];\n        }\n    }\n    if (Object.keys(extraMeta).length > 0) {\n        ctx.registry.add(baseSchema, extraMeta);\n    }\n    return baseSchema;\n}\n/**\n * Converts a JSON Schema to a Zod schema. This function should be considered semi-experimental. It's behavior is liable to change. */\nexport function fromJSONSchema(schema, params) {\n    // Handle boolean schemas\n    if (typeof schema === \"boolean\") {\n        return schema ? z.any() : z.never();\n    }\n    const version = detectVersion(schema, params?.defaultTarget);\n    const defs = (schema.$defs || schema.definitions || {});\n    const ctx = {\n        version,\n        defs,\n        refs: new Map(),\n        processing: new Set(),\n        rootSchema: schema,\n        registry: params?.registry ?? globalRegistry,\n    };\n    return convertSchema(schema, ctx);\n}\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport function string(params) {\n    return core._coercedString(schemas.ZodString, params);\n}\nexport function number(params) {\n    return core._coercedNumber(schemas.ZodNumber, params);\n}\nexport function boolean(params) {\n    return core._coercedBoolean(schemas.ZodBoolean, params);\n}\nexport function bigint(params) {\n    return core._coercedBigint(schemas.ZodBigInt, params);\n}\nexport function date(params) {\n    return core._coercedDate(schemas.ZodDate, params);\n}\n", "import {\n  ModelContextProvider,\n  ModelContext,\n} from \"../../model-context/ModelContextTypes\";\nimport { Unsubscribe } from \"../../types/Unsubscribe\";\nimport { Tool } from \"assistant-stream\";\nimport { z } from \"zod\";\nimport {\n  FrameMessage,\n  FRAME_MESSAGE_CHANNEL,\n  SerializedModelContext,\n  SerializedTool,\n} from \"./AssistantFrameTypes\";\n\n/**\n * Converts tools to JSON Schema format for serialization\n */\nconst serializeTool = (tool: Tool<any, any>): SerializedTool => ({\n  ...(tool.description && { description: tool.description }),\n  parameters:\n    tool.parameters instanceof z.ZodType\n      ? ((z as any).toJSONSchema?.(tool.parameters) ?? tool.parameters)\n      : tool.parameters,\n  ...(tool.disabled !== undefined && { disabled: tool.disabled }),\n  ...(tool.type && { type: tool.type }),\n});\n\n/**\n * Serializes a ModelContext for transmission across iframe boundary\n */\nconst serializeModelContext = (\n  context: ModelContext,\n): SerializedModelContext => ({\n  ...(context.system !== undefined && { system: context.system }),\n  ...(context.tools && {\n    tools: Object.fromEntries(\n      Object.entries(context.tools).map(([name, tool]) => [\n        name,\n        serializeTool(tool),\n      ]),\n    ),\n  }),\n});\n\n/**\n * AssistantFrameProvider - Runs inside an iframe and provides ModelContextProviders\n * to the parent window's AssistantFrameHost.\n *\n * Usage example:\n * ```typescript\n * // Inside the iframe\n * // Add model context providers\n * const registry = new ModelContextRegistry();\n * AssistantFrameProvider.addModelContextProvider(registry);\n *\n * // Add tools to registry\n * registry.addTool({\n *   toolName: \"search\",\n *   description: \"Search the web\",\n *   parameters: z.object({ query: z.string() }),\n *   execute: async (args) => {\n *     // Tool implementation runs in iframe\n *     return { results: [\"...\"] };\n *   }\n * });\n * ```\n */\nexport class AssistantFrameProvider {\n  private static _instance: AssistantFrameProvider | null = null;\n\n  private _providers = new Set<ModelContextProvider>();\n  private _providerUnsubscribes = new Map<\n    ModelContextProvider,\n    Unsubscribe | undefined\n  >();\n  private _targetOrigin: string;\n\n  private constructor(targetOrigin: string = \"*\") {\n    this._targetOrigin = targetOrigin;\n    this.handleMessage = this.handleMessage.bind(this);\n    window.addEventListener(\"message\", this.handleMessage);\n\n    // Send initial update on initialization\n    setTimeout(() => this.broadcastUpdate(), 0);\n  }\n\n  private static getInstance(targetOrigin?: string): AssistantFrameProvider {\n    if (!AssistantFrameProvider._instance) {\n      AssistantFrameProvider._instance = new AssistantFrameProvider(\n        targetOrigin,\n      );\n    }\n    return AssistantFrameProvider._instance;\n  }\n\n  private handleMessage(event: MessageEvent) {\n    // Security: Validate origin if specified\n    if (this._targetOrigin !== \"*\" && event.origin !== this._targetOrigin)\n      return;\n    if (event.data?.channel !== FRAME_MESSAGE_CHANNEL) return;\n\n    const message = event.data.message as FrameMessage;\n\n    switch (message.type) {\n      case \"model-context-request\":\n        // Respond with current context\n        this.sendMessage(event, {\n          type: \"model-context-update\",\n          context: serializeModelContext(this.getModelContext()),\n        });\n        break;\n\n      case \"tool-call\":\n        this.handleToolCall(message, event);\n        break;\n    }\n  }\n\n  private async handleToolCall(\n    message: Extract<FrameMessage, { type: \"tool-call\" }>,\n    event: MessageEvent,\n  ) {\n    const tool = this.getModelContext().tools?.[message.toolName];\n\n    let result: any;\n    let error: string | undefined;\n\n    if (!tool) {\n      error = `Tool \"${message.toolName}\" not found`;\n    } else {\n      try {\n        result = tool.execute\n          ? await tool.execute(message.args, {\n              toolCallId: message.id,\n              abortSignal: new AbortController().signal,\n              human: async () => {\n                throw new Error(\n                  \"Tool human input is not supported in frame context\",\n                );\n              },\n            })\n          : undefined;\n      } catch (e) {\n        error = e instanceof Error ? e.message : String(e);\n      }\n    }\n\n    this.sendMessage(event, {\n      type: \"tool-result\",\n      id: message.id,\n      ...(error ? { error } : { result }),\n    });\n  }\n\n  private sendMessage(event: MessageEvent, message: FrameMessage) {\n    event.source?.postMessage(\n      { channel: FRAME_MESSAGE_CHANNEL, message },\n      { targetOrigin: event.origin },\n    );\n  }\n\n  private getModelContext(): ModelContext {\n    const contexts = Array.from(this._providers).map((p) =>\n      p.getModelContext(),\n    );\n\n    return contexts.reduce(\n      (merged, context) => ({\n        system: context.system\n          ? merged.system\n            ? `${merged.system}\\n\\n${context.system}`\n            : context.system\n          : merged.system,\n        tools: { ...(merged.tools || {}), ...(context.tools || {}) },\n      }),\n      {} as ModelContext,\n    );\n  }\n\n  private broadcastUpdate() {\n    // Always broadcast to parent window\n    if (window.parent && window.parent !== window) {\n      const updateMessage: FrameMessage = {\n        type: \"model-context-update\",\n        context: serializeModelContext(this.getModelContext()),\n      };\n\n      window.parent.postMessage(\n        { channel: FRAME_MESSAGE_CHANNEL, message: updateMessage },\n        this._targetOrigin,\n      );\n    }\n  }\n\n  static addModelContextProvider(\n    provider: ModelContextProvider,\n    targetOrigin?: string,\n  ): Unsubscribe {\n    const instance = AssistantFrameProvider.getInstance(targetOrigin);\n    instance._providers.add(provider);\n\n    const unsubscribe = provider.subscribe?.(() => instance.broadcastUpdate());\n    if (unsubscribe) {\n      instance._providerUnsubscribes.set(provider, unsubscribe);\n    }\n\n    instance.broadcastUpdate();\n\n    return () => {\n      instance._providers.delete(provider);\n      instance._providerUnsubscribes.get(provider)?.();\n      instance._providerUnsubscribes.delete(provider);\n      instance.broadcastUpdate();\n    };\n  }\n\n  static dispose() {\n    if (AssistantFrameProvider._instance) {\n      const instance = AssistantFrameProvider._instance;\n      window.removeEventListener(\"message\", instance.handleMessage);\n\n      // Unsubscribe from all providers\n      instance._providerUnsubscribes.forEach((unsubscribe) => unsubscribe?.());\n      instance._providerUnsubscribes.clear();\n      instance._providers.clear();\n\n      AssistantFrameProvider._instance = null;\n    }\n  }\n}\n", "\"use client\";\n\nimport { useEffect, RefObject } from \"react\";\nimport { AssistantFrameHost } from \"./AssistantFrameHost\";\nimport { Unsubscribe } from \"../../types\";\n\ntype UseAssistantFrameHostOptions = {\n  iframeRef: Readonly<RefObject<HTMLIFrameElement | null | undefined>>;\n  targetOrigin?: string;\n  register: (frameHost: AssistantFrameHost) => Unsubscribe;\n};\n\n/**\n * React hook that manages the lifecycle of an AssistantFrameHost and its binding to the current AssistantRuntime.\n *\n * Usage example:\n * ```typescript\n * function MyComponent() {\n *   const iframeRef = useRef<HTMLIFrameElement>(null);\n *\n *   useAssistantFrameHost({\n *     iframeRef,\n *     targetOrigin: \"https://trusted-domain.com\", // optional\n *   });\n *\n *   return <iframe ref={iframeRef} src=\"...\" />;\n * }\n * ```\n */\nexport const useAssistantFrameHost = ({\n  iframeRef,\n  targetOrigin = \"*\",\n  register,\n}: UseAssistantFrameHostOptions): void => {\n  useEffect(() => {\n    const iframeWindow = iframeRef.current?.contentWindow;\n    if (!iframeWindow) return;\n\n    const frameHost = new AssistantFrameHost(iframeWindow, targetOrigin);\n\n    const unsubscribe = register(frameHost);\n\n    return () => {\n      frameHost.dispose();\n      unsubscribe();\n    };\n  }, [iframeRef, targetOrigin, register]);\n};\n", "import { resource, tapEffect, tapInlineResource } from \"@assistant-ui/tap\";\nimport type { AssistantRuntime } from \"./runtime/AssistantRuntime\";\nimport { ThreadListClient } from \"./client/ThreadListRuntimeClient\";\nimport {\n  tapAssistantClientRef,\n  Derived,\n  attachDefaultPeers,\n} from \"@assistant-ui/store\";\nimport { ModelContext } from \"../client/ModelContextClient\";\nimport { Tools, Suggestions } from \"../model-context\";\n\nexport const RuntimeAdapter = resource((runtime: AssistantRuntime) => {\n  const clientRef = tapAssistantClientRef();\n\n  tapEffect(() => {\n    return runtime.registerModelContextProvider(\n      clientRef.current!.modelContext(),\n    );\n  }, [runtime, clientRef]);\n\n  return tapInlineResource(\n    ThreadListClient({\n      runtime: runtime.threads,\n      __internal_assistantRuntime: runtime,\n    }),\n  );\n});\n\nattachDefaultPeers(RuntimeAdapter, {\n  modelContext: ModelContext(),\n  tools: Tools({}),\n  suggestions: Suggestions(),\n  threadListItem: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().item(\"main\"),\n  }),\n  thread: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().thread(\"main\"),\n  }),\n  composer: Derived({\n    source: \"thread\",\n    query: {},\n    get: (aui) => aui.threads().thread(\"main\").composer,\n  }),\n});\n", "\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport {\n  makeThreadViewportStore,\n  type ThreadViewportStoreOptions,\n} from \"../stores/ThreadViewport\";\nimport {\n  ThreadViewportContext,\n  ThreadViewportContextValue,\n  useThreadViewportStore,\n} from \"../react/ThreadViewportContext\";\nimport { writableStore } from \"../ReadonlyStore\";\n\nexport type ThreadViewportProviderProps = PropsWithChildren<{\n  options?: ThreadViewportStoreOptions;\n}>;\n\nconst useThreadViewportStoreValue = (options: ThreadViewportStoreOptions) => {\n  const outerViewport = useThreadViewportStore({ optional: true });\n  const [store] = useState(() => makeThreadViewportStore(options));\n\n  // Forward scrollToBottom from outer viewport to inner viewport\n  useEffect(() => {\n    return outerViewport?.getState().onScrollToBottom(() => {\n      store.getState().scrollToBottom();\n    });\n  }, [outerViewport, store]);\n\n  useEffect(() => {\n    if (!outerViewport) return;\n    return store.subscribe((state) => {\n      if (outerViewport.getState().isAtBottom !== state.isAtBottom) {\n        writableStore(outerViewport).setState({ isAtBottom: state.isAtBottom });\n      }\n    });\n  }, [store, outerViewport]);\n\n  // Sync options to store when they change\n  useEffect(() => {\n    const nextState = {\n      turnAnchor: options.turnAnchor ?? \"bottom\",\n    };\n\n    const currentState = store.getState();\n    if (currentState.turnAnchor !== nextState.turnAnchor) {\n      writableStore(store).setState(nextState);\n    }\n  }, [store, options.turnAnchor]);\n\n  return store;\n};\n\nexport const ThreadPrimitiveViewportProvider: FC<\n  ThreadViewportProviderProps\n> = ({ children, options = {} }) => {\n  const useThreadViewport = useThreadViewportStoreValue(options);\n\n  const [context] = useState<ThreadViewportContextValue>(() => {\n    return {\n      useThreadViewport,\n    };\n  });\n\n  return (\n    <ThreadViewportContext.Provider value={context}>\n      {children}\n    </ThreadViewportContext.Provider>\n  );\n};\n", "\"use client\";\n\nimport { create } from \"zustand\";\nimport type { Unsubscribe } from \"../../types/Unsubscribe\";\n\nexport type SizeHandle = {\n  /** Update the height */\n  setHeight: (height: number) => void;\n  /** Unregister this handle */\n  unregister: Unsubscribe;\n};\n\ntype SizeRegistry = {\n  register: () => SizeHandle;\n};\n\nconst createSizeRegistry = (\n  onChange: (total: number) => void,\n): SizeRegistry => {\n  const entries = new Map<symbol, number>();\n\n  const recalculate = () => {\n    let total = 0;\n    for (const height of entries.values()) {\n      total += height;\n    }\n    onChange(total);\n  };\n\n  return {\n    register: () => {\n      const id = Symbol();\n      entries.set(id, 0);\n\n      return {\n        setHeight: (height: number) => {\n          if (entries.get(id) !== height) {\n            entries.set(id, height);\n            recalculate();\n          }\n        },\n        unregister: () => {\n          entries.delete(id);\n          recalculate();\n        },\n      };\n    },\n  };\n};\n\nexport type ThreadViewportState = {\n  readonly isAtBottom: boolean;\n  readonly scrollToBottom: (config?: {\n    behavior?: ScrollBehavior | undefined;\n  }) => void;\n  readonly onScrollToBottom: (\n    callback: ({ behavior }: { behavior: ScrollBehavior }) => void,\n  ) => Unsubscribe;\n\n  /** Controls scroll anchoring: \"top\" anchors user messages at top, \"bottom\" is classic behavior */\n  readonly turnAnchor: \"top\" | \"bottom\";\n\n  /** Raw height values from registered elements */\n  readonly height: {\n    /** Total viewport height */\n    readonly viewport: number;\n    /** Total content inset height (footer, anchor message, etc.) */\n    readonly inset: number;\n    /** Height of the anchor user message (full height) */\n    readonly userMessage: number;\n  };\n\n  /** Register a viewport and get a handle to update its height */\n  readonly registerViewport: () => SizeHandle;\n\n  /** Register a content inset (footer, anchor message, etc.) and get a handle to update its height */\n  readonly registerContentInset: () => SizeHandle;\n\n  /** Register the anchor user message height */\n  readonly registerUserMessageHeight: () => SizeHandle;\n};\n\nexport type ThreadViewportStoreOptions = {\n  turnAnchor?: \"top\" | \"bottom\" | undefined;\n};\n\nexport const makeThreadViewportStore = (\n  options: ThreadViewportStoreOptions = {},\n) => {\n  const scrollToBottomListeners = new Set<\n    (config: { behavior: ScrollBehavior }) => void\n  >();\n\n  const viewportRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        viewport: total,\n      },\n    });\n  });\n  const insetRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        inset: total,\n      },\n    });\n  });\n  const userMessageRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        userMessage: total,\n      },\n    });\n  });\n\n  const store = create<ThreadViewportState>(() => ({\n    isAtBottom: true,\n    scrollToBottom: ({ behavior = \"auto\" } = {}) => {\n      for (const listener of scrollToBottomListeners) {\n        listener({ behavior });\n      }\n    },\n    onScrollToBottom: (callback) => {\n      scrollToBottomListeners.add(callback);\n      return () => {\n        scrollToBottomListeners.delete(callback);\n      };\n    },\n\n    turnAnchor: options.turnAnchor ?? \"bottom\",\n\n    height: {\n      viewport: 0,\n      inset: 0,\n      userMessage: 0,\n    },\n\n    registerViewport: viewportRegistry.register,\n    registerContentInset: insetRegistry.register,\n    registerUserMessageHeight: userMessageRegistry.register,\n  }));\n\n  return store;\n};\n", "\"use client\";\n\nimport { createContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { UseBoundStore } from \"zustand\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { ThreadViewportState } from \"../stores\";\n\nexport type ThreadViewportContextValue = {\n  useThreadViewport: UseBoundStore<ReadonlyStore<ThreadViewportState>>;\n};\n\nexport const ThreadViewportContext =\n  createContext<ThreadViewportContextValue | null>(null);\n\nconst useThreadViewportContext = createContextHook(\n  ThreadViewportContext,\n  \"ThreadPrimitive.Viewport\",\n);\n\nexport const { useThreadViewport, useThreadViewportStore } =\n  createContextStoreHook(useThreadViewportContext, \"useThreadViewport\");\n", "\"use client\";\n\nimport { useContext, Context } from \"react\";\n\n/**\n * Creates a context hook with optional support.\n * @param context - The React context to consume.\n * @param providerName - The name of the provider for error messages.\n * @returns A hook function that provides the context value.\n */\nexport function createContextHook<T>(\n  context: Context<T | null>,\n  providerName: string,\n) {\n  function useContextHook(options?: {\n    optional?: boolean | undefined;\n  }): T | null {\n    const contextValue = useContext(context);\n    if (!options?.optional && !contextValue) {\n      throw new Error(`This component must be used within ${providerName}.`);\n    }\n    return contextValue;\n  }\n\n  return useContextHook;\n}\n", "import { AssistantClient } from \"@assistant-ui/store\";\nimport { Unsubscribe } from \"../types\";\n\nexport interface EventLog {\n  time: Date;\n  event: string;\n  data: unknown;\n}\n\ninterface DevToolsApiEntry {\n  api: Partial<AssistantClient>;\n  logs: EventLog[];\n}\n\ninterface DevToolsHook {\n  apis: Map<number, DevToolsApiEntry>;\n  nextId: number;\n  listeners: Set<(apiId: number) => void>;\n}\n\ndeclare global {\n  interface Window {\n    __ASSISTANT_UI_DEVTOOLS_HOOK__?: DevToolsHook;\n  }\n}\n\nlet cachedHook: DevToolsHook | undefined;\n\nconst getHook = (): DevToolsHook => {\n  if (cachedHook) {\n    return cachedHook;\n  }\n\n  const createHook = (): DevToolsHook => ({\n    apis: new Map(),\n    nextId: 0,\n    listeners: new Set(),\n  });\n\n  if (typeof window === \"undefined\") {\n    cachedHook = createHook();\n    return cachedHook;\n  }\n\n  const existingHook = window.__ASSISTANT_UI_DEVTOOLS_HOOK__;\n  if (existingHook) {\n    cachedHook = existingHook;\n    return existingHook;\n  }\n\n  const newHook = createHook();\n  window.__ASSISTANT_UI_DEVTOOLS_HOOK__ = newHook;\n  cachedHook = newHook;\n  return newHook;\n};\n\nexport class DevToolsHooks {\n  static subscribe(listener: () => void): Unsubscribe {\n    const hook = getHook();\n    hook.listeners.add(listener);\n    return () => {\n      hook.listeners.delete(listener);\n    };\n  }\n\n  static clearEventLogs(apiId: number): void {\n    const hook = getHook();\n    const entry = hook.apis.get(apiId);\n    if (!entry) return;\n\n    entry.logs = [];\n    DevToolsHooks.notifyListeners(apiId);\n  }\n\n  static getApis(): Map<number, DevToolsApiEntry> {\n    return getHook().apis;\n  }\n\n  private static notifyListeners(apiId: number): void {\n    const hook = getHook();\n    hook.listeners.forEach((listener) => listener(apiId));\n  }\n}\n\nexport class DevToolsProviderApi {\n  private static readonly MAX_EVENT_LOGS_PER_API = 200;\n\n  static register(aui: Partial<AssistantClient>): Unsubscribe {\n    const hook = getHook();\n\n    for (const entry of hook.apis.values()) {\n      if (entry.api === aui) {\n        return () => {};\n      }\n    }\n\n    const apiId = hook.nextId++;\n    const entry: DevToolsApiEntry = {\n      api: aui,\n      logs: [],\n    };\n\n    const eventUnsubscribe = aui.on?.(\"*\", (e) => {\n      const entry = hook.apis.get(apiId);\n      if (!entry) return;\n\n      entry.logs.push({\n        time: new Date(),\n        event: e.event,\n        data: e.payload,\n      });\n\n      if (entry.logs.length > DevToolsProviderApi.MAX_EVENT_LOGS_PER_API) {\n        entry.logs = entry.logs.slice(\n          -DevToolsProviderApi.MAX_EVENT_LOGS_PER_API,\n        );\n      }\n\n      DevToolsProviderApi.notifyListeners(apiId);\n    });\n\n    const stateUnsubscribe = aui.subscribe?.(() => {\n      DevToolsProviderApi.notifyListeners(apiId);\n    });\n\n    hook.apis.set(apiId, entry);\n    DevToolsProviderApi.notifyListeners(apiId);\n\n    return () => {\n      const hook = getHook();\n      const entry = hook.apis.get(apiId);\n      if (!entry) return;\n\n      eventUnsubscribe?.();\n      stateUnsubscribe?.();\n\n      hook.apis.delete(apiId);\n\n      DevToolsProviderApi.notifyListeners(apiId);\n    };\n  }\n\n  private static notifyListeners(apiId: number): void {\n    const hook = getHook();\n    hook.listeners.forEach((listener) => listener(apiId));\n  }\n}\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@assistant-ui/store\";\nimport type { ThreadListItemRuntime } from \"../../legacy-runtime/runtime/ThreadListItemRuntime\";\nimport { ThreadListItemClient } from \"../../legacy-runtime/client/ThreadListItemRuntimeClient\";\n\nexport const ThreadListItemByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n    archived: boolean;\n  }>\n> = ({ index, archived, children }) => {\n  const aui = useAui({\n    threadListItem: Derived({\n      source: \"threads\",\n      query: { type: \"index\", index, archived },\n      get: (aui) => aui.threads().item({ index, archived }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n\nexport const ThreadListItemRuntimeProvider: FC<\n  PropsWithChildren<{\n    runtime: ThreadListItemRuntime;\n  }>\n> = ({ runtime, children }) => {\n  const aui = useAui({\n    threadListItem: ThreadListItemClient({ runtime }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@assistant-ui/store\";\n\nexport const MessageByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    message: Derived({\n      source: \"thread\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.thread().message({ index }),\n    }),\n    composer: Derived({\n      source: \"message\",\n      query: {},\n      get: (aui) => aui.thread().message({ index }).composer,\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { AuiProvider, Derived, useAui } from \"@assistant-ui/store\";\n\nexport type SuggestionByIndexProviderProps = PropsWithChildren<{\n  index: number;\n}>;\n\nexport const SuggestionByIndexProvider: FC<SuggestionByIndexProviderProps> = ({\n  index,\n  children,\n}) => {\n  const aui = useAui({\n    suggestion: Derived({\n      source: \"suggestions\",\n      query: { index },\n      get: (aui) => aui.suggestions().suggestion({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@assistant-ui/store\";\n\nexport const PartByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    part: Derived({\n      source: \"message\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.message().part({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@assistant-ui/store\";\n\nexport const MessageAttachmentByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    attachment: Derived({\n      source: \"message\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.message().attachment({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n\nexport const ComposerAttachmentByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    attachment: Derived({\n      source: \"composer\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.composer().attachment({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, type ClientOutput } from \"@assistant-ui/store\";\nimport { PartState } from \"../../types/scopes\";\nimport { resource, tapMemo } from \"@assistant-ui/tap\";\n\nconst TextMessagePartClient = resource(\n  ({\n    text,\n    isRunning,\n  }: {\n    text: string;\n    isRunning: boolean;\n  }): ClientOutput<\"part\"> => {\n    const state = tapMemo<PartState>(\n      () => ({\n        type: \"text\",\n        text,\n        status: isRunning ? { type: \"running\" } : { type: \"complete\" },\n      }),\n      [text, isRunning],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: () => {\n          throw new Error(\"Not supported\");\n        },\n        resumeToolCall: () => {\n          throw new Error(\"Not supported\");\n        },\n      },\n    };\n  },\n);\n\nexport const TextMessagePartProvider: FC<\n  PropsWithChildren<{\n    text: string;\n    isRunning?: boolean;\n  }>\n> = ({ text, isRunning = false, children }) => {\n  const aui = useAui({\n    part: TextMessagePartClient({ text, isRunning }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\nimport { resource, tapMemo } from \"@assistant-ui/tap\";\nimport type { ClientOutput } from \"@assistant-ui/store\";\nimport type { ComposerState } from \"../types/scopes\";\n\nexport const NoOpComposerClient = resource(\n  ({ type }: { type: \"edit\" | \"thread\" }): ClientOutput<\"composer\"> => {\n    const state = tapMemo<ComposerState>(() => {\n      return {\n        isEditing: false,\n        isEmpty: true,\n        text: \"\",\n        attachmentAccept: \"*\",\n        attachments: [],\n        role: \"user\",\n        runConfig: {},\n        canCancel: false,\n        type: type,\n        dictation: undefined,\n      };\n    }, [type]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setText: () => {\n          throw new Error(\"Not supported\");\n        },\n        setRole: () => {\n          throw new Error(\"Not supported\");\n        },\n        setRunConfig: () => {\n          throw new Error(\"Not supported\");\n        },\n        addAttachment: () => {\n          throw new Error(\"Not supported\");\n        },\n        clearAttachments: () => {\n          throw new Error(\"Not supported\");\n        },\n        attachment: () => {\n          throw new Error(\"Not supported\");\n        },\n        reset: () => {\n          throw new Error(\"Not supported\");\n        },\n        send: () => {\n          throw new Error(\"Not supported\");\n        },\n        cancel: () => {\n          throw new Error(\"Not supported\");\n        },\n        startDictation: () => {\n          throw new Error(\"Not supported\");\n        },\n        stopDictation: () => {\n          throw new Error(\"Not supported\");\n        },\n        beginEdit: () => {\n          throw new Error(\"Not supported\");\n        },\n      },\n    };\n  },\n);\n", "\"use client\";\nimport {\n  resource,\n  tapMemo,\n  tapState,\n  tapInlineResource,\n  withKey,\n} from \"@assistant-ui/tap\";\nimport { type ClientOutput, tapClientLookup } from \"@assistant-ui/store\";\nimport { MessageState, PartState } from \"../types/scopes\";\nimport {\n  ThreadAssistantMessagePart,\n  ThreadUserMessagePart,\n  Attachment,\n  ThreadMessage,\n} from \"../types\";\nimport { NoOpComposerClient } from \"./NoOpComposerClient\";\n\nconst ThreadMessagePartClient = resource(\n  ({\n    part,\n  }: {\n    part: ThreadAssistantMessagePart | ThreadUserMessagePart;\n  }): ClientOutput<\"part\"> => {\n    const state = tapMemo<PartState>(() => {\n      return {\n        ...part,\n        status: { type: \"complete\" },\n      };\n    }, [part]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: () => {\n          throw new Error(\"Not supported\");\n        },\n        resumeToolCall: () => {\n          throw new Error(\"Not supported\");\n        },\n      },\n    };\n  },\n);\n\nconst ThreadMessageAttachmentClient = resource(\n  ({ attachment }: { attachment: Attachment }): ClientOutput<\"attachment\"> => {\n    return {\n      state: attachment,\n      methods: {\n        getState: () => attachment,\n        remove: () => {\n          throw new Error(\"Not supported\");\n        },\n      },\n    };\n  },\n);\nexport type ThreadMessageClientProps = {\n  message: ThreadMessage;\n  index: number;\n  isLast?: boolean;\n  branchNumber?: number;\n  branchCount?: number;\n};\n\nexport const ThreadMessageClient = resource(\n  ({\n    message,\n    index,\n    isLast = true,\n    branchNumber = 1,\n    branchCount = 1,\n  }: ThreadMessageClientProps): ClientOutput<\"message\"> => {\n    const [isCopiedState, setIsCopied] = tapState(false);\n    const [isHoveringState, setIsHovering] = tapState(false);\n\n    const parts = tapClientLookup(\n      () =>\n        message.content.map((part, idx) =>\n          withKey(\n            \"toolCallId\" in part && part.toolCallId != null\n              ? `toolCallId-${part.toolCallId}`\n              : `index-${idx}`,\n            ThreadMessagePartClient({ part }),\n          ),\n        ),\n      [message.content],\n    );\n\n    const attachments = tapClientLookup(\n      () =>\n        (message.attachments ?? []).map((attachment) =>\n          withKey(attachment.id, ThreadMessageAttachmentClient({ attachment })),\n        ),\n      [message.attachments],\n    );\n\n    const composer = tapInlineResource(NoOpComposerClient({ type: \"edit\" }));\n\n    const state = tapMemo<MessageState>(() => {\n      return {\n        ...message,\n        parts: parts.state,\n        composer: composer.state,\n        parentId: null,\n        index,\n        isLast,\n        branchNumber,\n        branchCount,\n        speech: undefined,\n        submittedFeedback: message.metadata.submittedFeedback,\n        isCopied: isCopiedState,\n        isHovering: isHoveringState,\n      };\n    }, [\n      message,\n      index,\n      isCopiedState,\n      isHoveringState,\n      isLast,\n      parts.state,\n      composer.state,\n      branchNumber,\n      branchCount,\n    ]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        composer: composer.methods,\n        part: (selector) => {\n          if (\"index\" in selector) {\n            return parts.get({ index: selector.index });\n          } else {\n            return parts.get({ key: `toolCallId-${selector.toolCallId}` });\n          }\n        },\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n        reload: () => {\n          throw new Error(\"Not supported in ThreadMessageProvider\");\n        },\n        speak: () => {\n          throw new Error(\"Not supported in ThreadMessageProvider\");\n        },\n        stopSpeaking: () => {\n          throw new Error(\"Not supported in ThreadMessageProvider\");\n        },\n        submitFeedback: () => {\n          throw new Error(\"Not supported in ThreadMessageProvider\");\n        },\n        switchToBranch: () => {\n          throw new Error(\"Not supported in ThreadMessageProvider\");\n        },\n        getCopyText: () => {\n          return message.content\n            .map((part) => {\n              if (\"text\" in part && typeof part.text === \"string\") {\n                return part.text;\n              }\n              return \"\";\n            })\n            .join(\"\\n\");\n        },\n        setIsCopied,\n        setIsHovering,\n      },\n    };\n  },\n);\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider } from \"@assistant-ui/store\";\nimport {\n  ThreadMessageClientProps,\n  ThreadMessageClient,\n} from \"../../client/ThreadMessageClient\";\n\nexport const MessageProvider: FC<\n  PropsWithChildren<ThreadMessageClientProps>\n> = ({ children, ...props }) => {\n  const aui = useAui({\n    message: ThreadMessageClient(props),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "import type { ThreadRuntimeCore } from \"../../../internal\";\n\nconst EMPTY_THREAD_ERROR = new Error(\n  \"This is the empty thread, a placeholder for the main thread. You cannot perform any actions on this thread instance. This error is probably because you tried to call a thread method in your render function. Call the method inside a `useEffect` hook instead.\",\n);\nexport const EMPTY_THREAD_CORE: ThreadRuntimeCore = {\n  getMessageById() {\n    return undefined;\n  },\n\n  getBranches() {\n    return [];\n  },\n\n  switchToBranch() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  append() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  startRun() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  resumeRun() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  cancelRun() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  addToolResult() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  resumeToolCall() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  speak() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  stopSpeaking() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  submitFeedback() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  getModelContext() {\n    return {};\n  },\n\n  exportExternalState() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  importExternalState() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  unstable_loadExternalState() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  composer: {\n    attachments: [],\n    attachmentAccept: \"*\",\n\n    async addAttachment() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    async removeAttachment() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    isEditing: true,\n\n    canCancel: false,\n    isEmpty: true,\n\n    text: \"\",\n\n    setText() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    role: \"user\",\n\n    setRole() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    runConfig: {},\n\n    setRunConfig() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    async reset() {\n      // noop\n    },\n\n    async clearAttachments() {\n      // noop\n    },\n\n    send() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    cancel() {\n      // noop\n    },\n\n    dictation: undefined,\n\n    startDictation() {\n      throw EMPTY_THREAD_ERROR;\n    },\n\n    stopDictation() {\n      // noop\n    },\n\n    subscribe() {\n      return () => {};\n    },\n\n    unstable_on() {\n      return () => {};\n    },\n  },\n\n  getEditComposer() {\n    return undefined;\n  },\n\n  beginEdit() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  speech: undefined,\n\n  capabilities: {\n    switchToBranch: false,\n    switchBranchDuringRun: false,\n    edit: false,\n    reload: false,\n    cancel: false,\n    unstable_copy: false,\n    speech: false,\n    dictation: false,\n    attachments: false,\n    feedback: false,\n  },\n\n  isDisabled: false,\n  isLoading: false,\n\n  messages: [],\n\n  state: null,\n\n  suggestions: [],\n\n  extras: undefined,\n\n  subscribe() {\n    return () => {};\n  },\n\n  import() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  export() {\n    return { messages: [] };\n  },\n\n  reset() {\n    throw EMPTY_THREAD_ERROR;\n  },\n\n  unstable_on() {\n    return () => {};\n  },\n};\n", "import { BaseSubscribable } from \"./BaseSubscribable\";\n\ntype Transform<TState, TResult> = {\n  execute: () => Promise<TResult>;\n\n  /** transform the state after the promise resolves */\n  then?: (state: TState, result: TResult) => TState;\n\n  /** transform the state during resolution and afterwards */\n  optimistic?: (state: TState) => TState;\n\n  /** transform the state only while loading */\n  loading?: (state: TState, task: Promise<TResult>) => TState;\n};\n\ntype PendingTransform<TState, TResult> = Transform<TState, TResult> & {\n  task: Promise<TResult>;\n};\n\nconst pipeTransforms = <TState, TExtra>(\n  initialState: TState,\n  extraParam: TExtra,\n  transforms: (((state: TState, extra: TExtra) => TState) | undefined)[],\n): TState => {\n  return transforms.reduce((state, transform) => {\n    return transform?.(state, extraParam) ?? state;\n  }, initialState);\n};\n\nexport class OptimisticState<TState> extends BaseSubscribable {\n  private readonly _pendingTransforms: Array<PendingTransform<TState, any>> =\n    [];\n  private _baseValue: TState;\n  private _cachedValue: TState;\n\n  public constructor(initialState: TState) {\n    super();\n    this._baseValue = initialState;\n    this._cachedValue = initialState;\n  }\n\n  private _updateState(): void {\n    this._cachedValue = this._pendingTransforms.reduce((state, transform) => {\n      return pipeTransforms(state, transform.task, [\n        transform.loading,\n        transform.optimistic,\n      ]);\n    }, this._baseValue);\n\n    this._notifySubscribers();\n  }\n\n  public get baseValue(): TState {\n    return this._baseValue;\n  }\n\n  public get value(): TState {\n    return this._cachedValue;\n  }\n\n  public update(state: TState): void {\n    this._baseValue = state;\n    this._updateState();\n  }\n\n  public async optimisticUpdate<TResult>(\n    transform: Transform<TState, TResult>,\n  ): Promise<TResult> {\n    const task = transform.execute();\n    const pendingTransform = { ...transform, task };\n    try {\n      this._pendingTransforms.push(pendingTransform);\n      this._updateState();\n\n      const result = await task;\n      this._baseValue = pipeTransforms(this._baseValue, result, [\n        transform.optimistic,\n        transform.then,\n      ]);\n      return result;\n    } finally {\n      const index = this._pendingTransforms.indexOf(pendingTransform);\n      if (index > -1) {\n        this._pendingTransforms.splice(index, 1);\n      }\n      this._updateState();\n    }\n  }\n}\n", "\"use client\";\n\nimport { ThreadListRuntimeCore } from \"../core/ThreadListRuntimeCore\";\nimport { generateId } from \"../../../internal\";\nimport {\n  RemoteThreadInitializeResponse,\n  RemoteThreadListOptions,\n} from \"./types\";\nimport { RemoteThreadListHookInstanceManager } from \"./RemoteThreadListHookInstanceManager\";\nimport { BaseSubscribable } from \"./BaseSubscribable\";\nimport { EMPTY_THREAD_CORE } from \"./EMPTY_THREAD_CORE\";\nimport { OptimisticState } from \"./OptimisticState\";\nimport { FC, Fragment, useEffect, useId } from \"react\";\nimport { create } from \"zustand\";\nimport { AssistantMessageStream } from \"assistant-stream\";\nimport { ModelContextProvider } from \"../../../model-context\";\nimport { RuntimeAdapterProvider } from \"../adapters/RuntimeAdapterProvider\";\n\ntype RemoteThreadData =\n  | {\n      readonly id: string;\n      readonly remoteId: undefined;\n      readonly externalId: undefined;\n      readonly status: \"new\";\n      readonly title: undefined;\n    }\n  | {\n      readonly id: string;\n      readonly initializeTask: Promise<RemoteThreadInitializeResponse>;\n      readonly remoteId: undefined;\n      readonly externalId: undefined;\n      readonly status: \"regular\" | \"archived\";\n      readonly title?: string | undefined;\n    }\n  | {\n      readonly id: string;\n      readonly initializeTask: Promise<RemoteThreadInitializeResponse>;\n      readonly remoteId: string;\n      readonly externalId: string | undefined;\n      readonly status: \"regular\" | \"archived\";\n      readonly title?: string | undefined;\n    };\n\ntype THREAD_MAPPING_ID = string & { __brand: \"THREAD_MAPPING_ID\" };\nfunction createThreadMappingId(id: string): THREAD_MAPPING_ID {\n  return id as THREAD_MAPPING_ID;\n}\n\ntype RemoteThreadState = {\n  readonly isLoading: boolean;\n  readonly newThreadId: string | undefined;\n  readonly threadIds: readonly string[];\n  readonly archivedThreadIds: readonly string[];\n  readonly threadIdMap: Readonly<Record<string, THREAD_MAPPING_ID>>;\n  readonly threadData: Readonly<Record<THREAD_MAPPING_ID, RemoteThreadData>>;\n};\n\nconst getThreadData = (\n  state: RemoteThreadState,\n  threadIdOrRemoteId: string,\n) => {\n  const idx = state.threadIdMap[threadIdOrRemoteId];\n  if (idx === undefined) return undefined;\n  return state.threadData[idx];\n};\n\nconst updateStatusReducer = (\n  state: RemoteThreadState,\n  threadIdOrRemoteId: string,\n  newStatus: \"regular\" | \"archived\" | \"deleted\",\n) => {\n  const data = getThreadData(state, threadIdOrRemoteId);\n  if (!data) return state;\n\n  const { id, remoteId, status: lastStatus } = data;\n  if (lastStatus === newStatus) return state;\n\n  const newState = { ...state };\n\n  // lastStatus\n  switch (lastStatus) {\n    case \"new\":\n      newState.newThreadId = undefined;\n      break;\n    case \"regular\":\n      newState.threadIds = newState.threadIds.filter((t) => t !== id);\n      break;\n    case \"archived\":\n      newState.archivedThreadIds = newState.archivedThreadIds.filter(\n        (t) => t !== id,\n      );\n      break;\n\n    default: {\n      const _exhaustiveCheck: never = lastStatus;\n      throw new Error(`Unsupported state: ${_exhaustiveCheck}`);\n    }\n  }\n\n  // newStatus\n  switch (newStatus) {\n    case \"regular\":\n      newState.threadIds = [id, ...newState.threadIds];\n      break;\n\n    case \"archived\":\n      newState.archivedThreadIds = [id, ...newState.archivedThreadIds];\n      break;\n\n    case \"deleted\":\n      newState.threadData = Object.fromEntries(\n        Object.entries(newState.threadData).filter(([key]) => key !== id),\n      );\n      newState.threadIdMap = Object.fromEntries(\n        Object.entries(newState.threadIdMap).filter(\n          ([key]) => key !== id && key !== remoteId,\n        ),\n      );\n      break;\n\n    default: {\n      const _exhaustiveCheck: never = newStatus;\n      throw new Error(`Unsupported state: ${_exhaustiveCheck}`);\n    }\n  }\n\n  if (newStatus !== \"deleted\") {\n    newState.threadData = {\n      ...newState.threadData,\n      [id]: {\n        ...data,\n        status: newStatus,\n      },\n    };\n  }\n\n  return newState;\n};\n\nexport class RemoteThreadListThreadListRuntimeCore\n  extends BaseSubscribable\n  implements ThreadListRuntimeCore\n{\n  private _options!: RemoteThreadListOptions;\n  private readonly _hookManager: RemoteThreadListHookInstanceManager;\n\n  private _loadThreadsPromise: Promise<void> | undefined;\n\n  private _mainThreadId!: string;\n  private readonly _state = new OptimisticState<RemoteThreadState>({\n    isLoading: false,\n    newThreadId: undefined,\n    threadIds: [],\n    archivedThreadIds: [],\n    threadIdMap: {},\n    threadData: {},\n  });\n\n  public get threadItems() {\n    return this._state.value.threadData;\n  }\n\n  public getLoadThreadsPromise() {\n    // TODO this needs to be cached in case this promise is loaded during suspense\n    if (!this._loadThreadsPromise) {\n      this._loadThreadsPromise = this._state\n        .optimisticUpdate({\n          execute: () => this._options.adapter.list(),\n          loading: (state) => {\n            return {\n              ...state,\n              isLoading: true,\n            };\n          },\n          then: (state, l) => {\n            const newThreadIds = [];\n            const newArchivedThreadIds = [];\n            const newThreadIdMap = {} as Record<string, THREAD_MAPPING_ID>;\n            const newThreadData = {} as Record<\n              THREAD_MAPPING_ID,\n              RemoteThreadData\n            >;\n\n            for (const thread of l.threads) {\n              switch (thread.status) {\n                case \"regular\":\n                  newThreadIds.push(thread.remoteId);\n                  break;\n                case \"archived\":\n                  newArchivedThreadIds.push(thread.remoteId);\n                  break;\n                default: {\n                  const _exhaustiveCheck: never = thread.status;\n                  throw new Error(`Unsupported state: ${_exhaustiveCheck}`);\n                }\n              }\n\n              const mappingId = createThreadMappingId(thread.remoteId);\n              newThreadIdMap[thread.remoteId] = mappingId;\n              newThreadData[mappingId] = {\n                id: thread.remoteId,\n                remoteId: thread.remoteId,\n                externalId: thread.externalId,\n                status: thread.status,\n                title: thread.title,\n                initializeTask: Promise.resolve({\n                  remoteId: thread.remoteId,\n                  externalId: thread.externalId,\n                }),\n              };\n            }\n\n            return {\n              ...state,\n              threadIds: newThreadIds,\n              archivedThreadIds: newArchivedThreadIds,\n              threadIdMap: {\n                ...state.threadIdMap,\n                ...newThreadIdMap,\n              },\n              threadData: {\n                ...state.threadData,\n                ...newThreadData,\n              },\n            };\n          },\n        })\n        .then(() => {});\n    }\n\n    return this._loadThreadsPromise;\n  }\n\n  constructor(\n    options: RemoteThreadListOptions,\n    private readonly contextProvider: ModelContextProvider,\n  ) {\n    super();\n\n    this._state.subscribe(() => this._notifySubscribers());\n    this._hookManager = new RemoteThreadListHookInstanceManager(\n      options.runtimeHook,\n      this,\n    );\n    this.useProvider = create(() => ({\n      Provider: options.adapter.unstable_Provider ?? Fragment,\n    }));\n    this.__internal_setOptions(options);\n    this.switchToNewThread();\n  }\n\n  private useProvider;\n\n  public __internal_setOptions(options: RemoteThreadListOptions) {\n    if (this._options === options) return;\n\n    this._options = options;\n\n    const Provider = options.adapter.unstable_Provider ?? Fragment;\n    if (Provider !== this.useProvider.getState().Provider) {\n      this.useProvider.setState({ Provider }, true);\n    }\n\n    this._hookManager.setRuntimeHook(options.runtimeHook);\n  }\n\n  public __internal_load() {\n    this.getLoadThreadsPromise(); // begin loading on initial bind\n  }\n\n  public get isLoading() {\n    return this._state.value.isLoading;\n  }\n\n  public get threadIds() {\n    return this._state.value.threadIds;\n  }\n\n  public get archivedThreadIds() {\n    return this._state.value.archivedThreadIds;\n  }\n\n  public get newThreadId() {\n    return this._state.value.newThreadId;\n  }\n\n  public get mainThreadId(): string {\n    return this._mainThreadId;\n  }\n\n  public getMainThreadRuntimeCore() {\n    const result = this._hookManager.getThreadRuntimeCore(this._mainThreadId);\n    if (!result) return EMPTY_THREAD_CORE;\n    return result;\n  }\n\n  public getThreadRuntimeCore(threadIdOrRemoteId: string) {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n\n    const result = this._hookManager.getThreadRuntimeCore(data.id);\n    if (!result) throw new Error(\"Thread not found\");\n    return result;\n  }\n\n  public getItemById(threadIdOrRemoteId: string) {\n    return getThreadData(this._state.value, threadIdOrRemoteId);\n  }\n\n  public async switchToThread(threadIdOrRemoteId: string): Promise<void> {\n    let data = this.getItemById(threadIdOrRemoteId);\n\n    if (!data) {\n      const remoteMetadata =\n        await this._options.adapter.fetch(threadIdOrRemoteId);\n      const state = this._state.value;\n      const mappingId = createThreadMappingId(remoteMetadata.remoteId);\n\n      const newThreadData = {\n        ...state.threadData,\n        [mappingId]: {\n          id: mappingId,\n          initializeTask: Promise.resolve({\n            remoteId: remoteMetadata.remoteId,\n            externalId: remoteMetadata.externalId,\n          }),\n          remoteId: remoteMetadata.remoteId,\n          externalId: remoteMetadata.externalId,\n          status: remoteMetadata.status,\n          title: remoteMetadata.title,\n        } as RemoteThreadData,\n      };\n\n      const newThreadIdMap = {\n        ...state.threadIdMap,\n        [remoteMetadata.remoteId]: mappingId,\n      };\n\n      const newThreadIds =\n        remoteMetadata.status === \"regular\"\n          ? [...state.threadIds, remoteMetadata.remoteId]\n          : state.threadIds;\n\n      const newArchivedThreadIds =\n        remoteMetadata.status === \"archived\"\n          ? [...state.archivedThreadIds, remoteMetadata.remoteId]\n          : state.archivedThreadIds;\n\n      this._state.update({\n        ...state,\n        threadIds: newThreadIds,\n        archivedThreadIds: newArchivedThreadIds,\n        threadIdMap: newThreadIdMap,\n        threadData: newThreadData,\n      });\n\n      data = this.getItemById(threadIdOrRemoteId);\n    }\n\n    if (!data) throw new Error(\"Thread not found\");\n    if (this._mainThreadId === data.id) return;\n\n    const task = this._hookManager.startThreadRuntime(data.id);\n    if (this.mainThreadId !== undefined) {\n      await task;\n    } else {\n      task.then(() => this._notifySubscribers());\n    }\n\n    if (data.status === \"archived\") await this.unarchive(data.id);\n    this._mainThreadId = data.id;\n\n    this._notifySubscribers();\n  }\n\n  public async switchToNewThread(): Promise<void> {\n    // an initialization transaction is in progress, wait for it to settle\n    while (\n      this._state.baseValue.newThreadId !== undefined &&\n      this._state.value.newThreadId === undefined\n    ) {\n      await this._state.waitForUpdate();\n    }\n\n    const state = this._state.value;\n    let id: string | undefined = this._state.value.newThreadId;\n    if (id === undefined) {\n      do {\n        id = `__LOCALID_${generateId()}`;\n      } while (state.threadIdMap[id]);\n\n      const mappingId = createThreadMappingId(id);\n      this._state.update({\n        ...state,\n        newThreadId: id,\n        threadIdMap: {\n          ...state.threadIdMap,\n          [id]: mappingId,\n        },\n        threadData: {\n          ...state.threadData,\n          [mappingId]: {\n            status: \"new\",\n            id,\n            remoteId: undefined,\n            externalId: undefined,\n            title: undefined,\n          } satisfies RemoteThreadData,\n        },\n      });\n    }\n\n    return this.switchToThread(id);\n  }\n\n  public initialize = async (threadId: string) => {\n    if (this._state.value.newThreadId !== threadId) {\n      const data = this.getItemById(threadId);\n      if (!data) throw new Error(\"Thread not found\");\n      if (data.status === \"new\") throw new Error(\"Unexpected new state\");\n      return data.initializeTask;\n    }\n\n    return this._state.optimisticUpdate({\n      execute: () => {\n        return this._options.adapter.initialize(threadId);\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, threadId, \"regular\");\n      },\n      loading: (state, task) => {\n        const mappingId = createThreadMappingId(threadId);\n        return {\n          ...state,\n          threadData: {\n            ...state.threadData,\n            [mappingId]: {\n              ...state.threadData[mappingId],\n              initializeTask: task,\n            },\n          },\n        };\n      },\n      then: (state, { remoteId, externalId }) => {\n        const data = getThreadData(state, threadId);\n        if (!data) return state;\n\n        const mappingId = createThreadMappingId(threadId);\n        return {\n          ...state,\n          threadIdMap: {\n            ...state.threadIdMap,\n            [remoteId]: mappingId,\n          },\n          threadData: {\n            ...state.threadData,\n            [mappingId]: {\n              ...data,\n              initializeTask: Promise.resolve({ remoteId, externalId }),\n              remoteId,\n              externalId,\n            },\n          },\n        };\n      },\n    });\n  };\n\n  public generateTitle = async (threadId: string) => {\n    const data = this.getItemById(threadId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status === \"new\") throw new Error(\"Thread is not yet initialized\");\n\n    const { remoteId } = await data.initializeTask;\n\n    const runtimeCore = this._hookManager.getThreadRuntimeCore(data.id);\n    if (!runtimeCore) return; // thread is no longer running\n\n    const messages = runtimeCore.messages;\n    const stream = await this._options.adapter.generateTitle(\n      remoteId,\n      messages,\n    );\n    const messageStream = AssistantMessageStream.fromAssistantStream(stream);\n    for await (const result of messageStream) {\n      const newTitle = result.parts.filter((c) => c.type === \"text\")[0]?.text;\n      const state = this._state.baseValue;\n      this._state.update({\n        ...state,\n        threadData: {\n          ...state.threadData,\n          [data.id]: {\n            ...data,\n            title: newTitle,\n          },\n        },\n      });\n    }\n  };\n\n  public rename(threadIdOrRemoteId: string, newTitle: string): Promise<void> {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status === \"new\") throw new Error(\"Thread is not yet initialized\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        const { remoteId } = await data.initializeTask;\n        return this._options.adapter.rename(remoteId, newTitle);\n      },\n      optimistic: (state) => {\n        const data = getThreadData(state, threadIdOrRemoteId);\n        if (!data) return state;\n\n        return {\n          ...state,\n          threadData: {\n            ...state.threadData,\n            [data.id]: {\n              ...data,\n              title: newTitle,\n            },\n          },\n        };\n      },\n    });\n  }\n\n  private async _ensureThreadIsNotMain(threadId: string) {\n    if (threadId === this.newThreadId)\n      throw new Error(\"Cannot ensure new thread is not main\");\n\n    if (threadId === this._mainThreadId) {\n      await this.switchToNewThread();\n    }\n  }\n\n  public async archive(threadIdOrRemoteId: string) {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"regular\")\n      throw new Error(\"Thread is not yet initialized or already archived\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        await this._ensureThreadIsNotMain(data.id);\n        const { remoteId } = await data.initializeTask;\n        return this._options.adapter.archive(remoteId);\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, data.id, \"archived\");\n      },\n    });\n  }\n\n  public unarchive(threadIdOrRemoteId: string): Promise<void> {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"archived\") throw new Error(\"Thread is not archived\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        try {\n          const { remoteId } = await data.initializeTask;\n          return await this._options.adapter.unarchive(remoteId);\n        } catch (error) {\n          await this._ensureThreadIsNotMain(data.id);\n          throw error;\n        }\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, data.id, \"regular\");\n      },\n    });\n  }\n\n  public async delete(threadIdOrRemoteId: string) {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"regular\" && data.status !== \"archived\")\n      throw new Error(\"Thread is not yet initialized\");\n\n    return this._state.optimisticUpdate({\n      execute: async () => {\n        await this._ensureThreadIsNotMain(data.id);\n        const { remoteId } = await data.initializeTask;\n        return await this._options.adapter.delete(remoteId);\n      },\n      optimistic: (state) => {\n        return updateStatusReducer(state, data.id, \"deleted\");\n      },\n    });\n  }\n\n  public async detach(threadIdOrRemoteId: string): Promise<void> {\n    const data = this.getItemById(threadIdOrRemoteId);\n    if (!data) throw new Error(\"Thread not found\");\n    if (data.status !== \"regular\" && data.status !== \"archived\")\n      throw new Error(\"Thread is not yet initialized\");\n\n    await this._ensureThreadIsNotMain(data.id);\n    this._hookManager.stopThreadRuntime(data.id);\n  }\n\n  private useBoundIds = create<string[]>(() => []);\n\n  public __internal_RenderComponent: FC = () => {\n    const id = useId();\n    useEffect(() => {\n      this.useBoundIds.setState((s) => [...s, id], true);\n      return () => {\n        this.useBoundIds.setState((s) => s.filter((i) => i !== id), true);\n      };\n    }, [id]);\n\n    const boundIds = this.useBoundIds();\n    const { Provider } = this.useProvider();\n\n    const adapters = {\n      modelContext: this.contextProvider,\n    };\n\n    return (\n      (boundIds.length === 0 || boundIds[0] === id) && (\n        // only render if the component is the first one mounted\n        <RuntimeAdapterProvider adapters={adapters}>\n          <this._hookManager.__internal_RenderThreadRuntimes\n            provider={Provider}\n          />\n        </RuntimeAdapterProvider>\n      )\n    );\n  };\n}\n", "\"use client\";\n\nimport { AssistantCloud } from \"assistant-cloud\";\nimport { AssistantRuntime } from \"../runtime\";\nimport { useRemoteThreadListRuntime } from \"../runtime-cores/remote-thread-list/useRemoteThreadListRuntime\";\nimport { useCloudThreadListAdapter } from \"../runtime-cores/remote-thread-list/adapter/cloud\";\n\ntype ThreadData = {\n  externalId: string;\n};\n\ntype CloudThreadListAdapter = {\n  cloud: AssistantCloud;\n\n  runtimeHook: () => AssistantRuntime;\n\n  create?(): Promise<ThreadData>;\n  delete?(threadId: string): Promise<void>;\n};\n\nexport const useCloudThreadListRuntime = ({\n  runtimeHook,\n  ...adapterOptions\n}: CloudThreadListAdapter) => {\n  const adapter = useCloudThreadListAdapter(adapterOptions);\n  const runtime = useRemoteThreadListRuntime({\n    runtimeHook: runtimeHook,\n    adapter,\n    allowNesting: true,\n  });\n\n  return runtime;\n};\n", "import { useDebugValue, useSyncExternalStore } from \"react\";\nimport { Unsubscribe } from \"../../../types\";\nimport { ensureBinding } from \"./ensureBinding\";\n\nexport type SubscribableRuntime<TState> = {\n  getState: () => TState;\n  subscribe: (callback: () => void) => Unsubscribe;\n};\n\nexport function useRuntimeStateInternal<TState, TSelected>(\n  runtime: SubscribableRuntime<TState>,\n  selector: ((state: TState) => TSelected | TState) | undefined = identity,\n): TSelected | TState {\n  // TODO move to useRuntimeState\n  ensureBinding(runtime);\n\n  const slice = useSyncExternalStore(\n    runtime.subscribe,\n    () => selector(runtime.getState()),\n    () => selector(runtime.getState()),\n  );\n  useDebugValue(slice);\n  return slice;\n}\n\nconst identity = <T>(arg: T): T => arg;\nexport function useRuntimeState<TState>(\n  runtime: SubscribableRuntime<TState>,\n): TState;\nexport function useRuntimeState<TState, TSelected>(\n  runtime: SubscribableRuntime<TState>,\n  selector: (state: TState) => TSelected,\n): TSelected;\nexport function useRuntimeState<TState, TSelected>(\n  runtime: SubscribableRuntime<TState>,\n  selector: ((state: TState) => TSelected) | undefined,\n): TSelected | TState;\nexport function useRuntimeState<TState, TSelected>(\n  runtime: SubscribableRuntime<TState>,\n  selector?: ((state: TState) => TSelected) | undefined,\n): TSelected | TState {\n  // ensure that the runtime is bound\n  // ensureBinding(runtime);\n\n  return useRuntimeStateInternal(runtime, selector);\n}\n", "type Bindable = {\n  __internal_bindMethods?: () => void;\n  __isBound?: boolean;\n};\nconst debugVerifyPrototype = (\n  runtime: Record<string, unknown>,\n  prototype: any,\n) => {\n  const unboundMethods = Object.getOwnPropertyNames(prototype).filter(\n    (methodStr) => {\n      const descriptor = Object.getOwnPropertyDescriptor(prototype, methodStr);\n      const isMethod = descriptor && typeof descriptor.value === \"function\";\n      if (!isMethod) return false;\n\n      const methodName = methodStr as keyof typeof runtime | \"constructor\";\n      return (\n        isMethod &&\n        !methodName.startsWith(\"_\") &&\n        methodName !== \"constructor\" &&\n        prototype[methodName] === runtime[methodName]\n      );\n    },\n  );\n\n  if (unboundMethods.length > 0) {\n    throw new Error(\n      `The following methods are not bound: ${JSON.stringify(unboundMethods)}`,\n    );\n  }\n\n  const prototypePrototype = Object.getPrototypeOf(prototype);\n  if (prototypePrototype && prototypePrototype !== Object.prototype) {\n    debugVerifyPrototype(runtime, prototypePrototype);\n  }\n};\nexport const ensureBinding = (r: unknown) => {\n  const runtime = r as Bindable;\n  if (runtime.__isBound) return;\n\n  runtime.__internal_bindMethods?.();\n  runtime.__isBound = true;\n\n  if (process.env[\"NODE_ENV\"] !== \"production\") {\n    debugVerifyPrototype(runtime, Object.getPrototypeOf(runtime));\n  }\n};\n", "import {\n  SubscribableRuntime,\n  useRuntimeStateInternal,\n} from \"./useRuntimeState\";\n\nexport function createStateHookForRuntime<TState>(\n  useRuntime: (options: {\n    optional: boolean | undefined;\n  }) => SubscribableRuntime<TState> | null,\n) {\n  // empty\n  function useStoreHook(): TState;\n\n  // selector\n  function useStoreHook<TSelected>(\n    selector: (state: TState) => TSelected,\n  ): TSelected;\n\n  // selector?\n  function useStoreHook<TSelected>(\n    selector: ((state: TState) => TSelected) | undefined,\n  ): TSelected | TState;\n\n  // optional=false\n  function useStoreHook(options: { optional?: false | undefined }): TState;\n\n  // optional?\n  function useStoreHook(options: {\n    optional?: boolean | undefined;\n  }): TState | null;\n\n  // optional=false, selector\n  function useStoreHook<TSelected>(options: {\n    optional?: false | undefined;\n    selector: (state: TState) => TSelected;\n  }): TSelected;\n\n  // optional=false, selector?\n  function useStoreHook<TSelected>(options: {\n    optional?: false | undefined;\n    selector: ((state: TState) => TSelected) | undefined;\n  }): TSelected | TState;\n\n  // optional?, selector\n  function useStoreHook<TSelected>(options: {\n    optional?: boolean | undefined;\n    selector: (state: TState) => TSelected;\n  }): TSelected | null;\n\n  // optional?, selector?\n  function useStoreHook<TSelected>(options: {\n    optional?: boolean | undefined;\n    selector: ((state: TState) => TSelected) | undefined;\n  }): TSelected | TState | null;\n\n  function useStoreHook<TSelected>(\n    param?:\n      | ((state: TState) => TSelected)\n      | {\n          optional?: boolean | undefined;\n          selector?: ((state: TState) => TSelected) | undefined;\n        },\n  ): TSelected | TState | null {\n    let optional = false;\n    let selector: ((state: TState) => TSelected) | undefined;\n\n    if (typeof param === \"function\") {\n      selector = param;\n    } else if (param) {\n      optional = !!param.optional;\n      selector = param.selector;\n    }\n\n    const store = useRuntime({ optional });\n    if (!store) return null;\n\n    // it is ok to call useRuntimeStateInternal conditionally because it will never become null if its available\n    return useRuntimeStateInternal(store, selector);\n  }\n\n  return useStoreHook;\n}\n", "\"use client\";\n\nimport { useAui } from \"@assistant-ui/store\";\nimport { AssistantRuntime } from \"../runtime/AssistantRuntime\";\nimport type { ThreadListRuntime } from \"../runtime/ThreadListRuntime\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\n\n/**\n * @deprecated Use `useAui()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the AssistantRuntime from the current context.\n *\n * The AssistantRuntime provides access to the top-level assistant state and actions,\n * including thread management, tool registration, and configuration.\n *\n * @param options Configuration options\n * @param options.optional Whether the hook should return null if no context is found\n * @returns The AssistantRuntime instance, or null if optional is true and no context exists\n *\n * @example\n * ```tsx\n * // Before:\n * function MyComponent() {\n *   const runtime = useAssistantRuntime();\n *   const handleNewThread = () => {\n *     runtime.switchToNewThread();\n *   };\n *   return <button onClick={handleNewThread}>New Thread</button>;\n * }\n *\n * // After:\n * function MyComponent() {\n *   const aui = useAui();\n *   const handleNewThread = () => {\n *     aui.threads().switchToNewThread();\n *   };\n *   return <button onClick={handleNewThread}>New Thread</button>;\n * }\n * ```\n */\nexport function useAssistantRuntime(options?: {\n  optional?: false | undefined;\n}): AssistantRuntime;\nexport function useAssistantRuntime(options?: {\n  optional?: boolean | undefined;\n}): AssistantRuntime | null;\nexport function useAssistantRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const aui = useAui();\n  const runtime = aui.threads().__internal_getAssistantRuntime?.() ?? null;\n\n  if (!runtime && !options?.optional) {\n    throw new Error(\"AssistantRuntime is not available\");\n  }\n\n  return runtime;\n}\n\nconst useThreadListRuntime = (opt: {\n  optional: boolean | undefined;\n}): ThreadListRuntime | null => useAssistantRuntime(opt)?.threads ?? null;\n\n/**\n * @deprecated Use `useAuiState(({ threads }) => threads)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport const useThreadList = createStateHookForRuntime(useThreadListRuntime);\n", "\"use client\";\n\nimport { AttachmentRuntime } from \"../runtime/AttachmentRuntime\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\n\n/**\n * @deprecated Use `useAui()` with `aui.attachment()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport function useAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const aui = useAui();\n  const runtime = useAuiState(() =>\n    aui.attachment.source\n      ? (aui.attachment().__internal_getRuntime?.() ?? null)\n      : null,\n  );\n  if (!runtime && !options?.optional) {\n    throw new Error(\"AttachmentRuntime is not available\");\n  }\n  return runtime;\n}\n\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime<\"thread-composer\">;\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime<\"thread-composer\"> | null;\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime<\"thread-composer\"> | null {\n  const attachmentRuntime = useAttachmentRuntime(options);\n  if (!attachmentRuntime) return null;\n  if (attachmentRuntime.source !== \"thread-composer\")\n    throw new Error(\n      \"This component must be used within a thread's ComposerPrimitive.Attachments component.\",\n    );\n  return attachmentRuntime as AttachmentRuntime<\"thread-composer\">;\n}\n\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime<\"edit-composer\">;\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime<\"edit-composer\"> | null;\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime<\"edit-composer\"> | null {\n  const attachmentRuntime = useAttachmentRuntime(options);\n  if (!attachmentRuntime) return null;\n  if (attachmentRuntime.source !== \"edit-composer\")\n    throw new Error(\n      \"This component must be used within a message's ComposerPrimitive.Attachments component.\",\n    );\n\n  return attachmentRuntime as AttachmentRuntime<\"edit-composer\">;\n}\n\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime<\"message\">;\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime<\"message\"> | null;\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime<\"message\"> | null {\n  const attachmentRuntime = useAttachmentRuntime(options);\n  if (!attachmentRuntime) return null;\n  if (attachmentRuntime.source !== \"message\")\n    throw new Error(\n      \"This component must be used within a MessagePrimitive.Attachments component.\",\n    );\n  return attachmentRuntime as AttachmentRuntime<\"message\">;\n}\n\n/**\n * @deprecated Use `useAuiState(({ attachment }) => attachment)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport const useAttachment = createStateHookForRuntime(useAttachmentRuntime);\n\nexport const useThreadComposerAttachment = createStateHookForRuntime(\n  useThreadComposerAttachmentRuntime,\n);\nexport const useEditComposerAttachment = createStateHookForRuntime(\n  useEditComposerAttachmentRuntime,\n);\nexport const useMessageAttachment = createStateHookForRuntime(\n  useMessageAttachmentRuntime,\n);\n", "\"use client\";\n\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport { ComposerRuntime } from \"../runtime/ComposerRuntime\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\n\n/**\n * @deprecated Use `useAui()` with `aui.composer()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the ComposerRuntime from the current context.\n *\n * The ComposerRuntime provides access to composer state and actions for message\n * composition, including text input, attachments, and sending functionality.\n * This hook automatically resolves to either the message's edit composer or\n * the thread's main composer depending on the context.\n *\n * @param options Configuration options\n * @param options.optional Whether the hook should return null if no context is found\n * @returns The ComposerRuntime instance, or null if optional is true and no context exists\n *\n * @example\n * ```tsx\n * // Before:\n * function ComposerActions() {\n *   const runtime = useComposerRuntime();\n *   const handleSend = () => {\n *     if (runtime.getState().canSend) {\n *       runtime.send();\n *     }\n *   };\n *   const handleCancel = () => {\n *     if (runtime.getState().canCancel) {\n *       runtime.cancel();\n *     }\n *   };\n *   return (\n *     <div>\n *       <button onClick={handleSend}>Send</button>\n *       <button onClick={handleCancel}>Cancel</button>\n *     </div>\n *   );\n * }\n *\n * // After:\n * function ComposerActions() {\n *   const aui = useAui();\n *   const canSend = useAuiState(({ composer }) => composer.canSend);\n *   const canCancel = useAuiState(({ composer }) => composer.canCancel);\n *   const handleSend = () => {\n *     if (canSend) {\n *       aui.composer().send();\n *     }\n *   };\n *   const handleCancel = () => {\n *     if (canCancel) {\n *       aui.composer().cancel();\n *     }\n *   };\n *   return (\n *     <div>\n *       <button onClick={handleSend}>Send</button>\n *       <button onClick={handleCancel}>Cancel</button>\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useComposerRuntime(options?: {\n  optional?: false | undefined;\n}): ComposerRuntime;\nexport function useComposerRuntime(options?: {\n  optional?: boolean | undefined;\n}): ComposerRuntime | null;\nexport function useComposerRuntime(options?: {\n  optional?: boolean | undefined;\n}): ComposerRuntime | null {\n  const aui = useAui();\n  const runtime = useAuiState(() =>\n    aui.composer.source\n      ? (aui.composer().__internal_getRuntime?.() ?? null)\n      : null,\n  );\n  if (!runtime && !options?.optional) {\n    throw new Error(\"ComposerRuntime is not available\");\n  }\n  return runtime;\n}\n\n/**\n * @deprecated Use `useAuiState(({ composer }) => composer)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the current composer state.\n *\n * This hook provides reactive access to the composer's state, including text content,\n * attachments, editing status, and send/cancel capabilities.\n *\n * @param selector Optional selector function to pick specific state properties\n * @returns The selected composer state or the entire composer state if no selector provided\n *\n * @example\n * ```tsx\n * // Before:\n * function ComposerStatus() {\n *   const text = useComposer((state) => state.text);\n *   const canSend = useComposer((state) => state.canSend);\n *   const attachmentCount = useComposer((state) => state.attachments.length);\n *   return (\n *     <div>\n *       Text: {text.length} chars,\n *       Attachments: {attachmentCount},\n *       Can send: {canSend}\n *     </div>\n *   );\n * }\n *\n * // After:\n * function ComposerStatus() {\n *   const text = useAuiState(({ composer }) => composer.text);\n *   const canSend = useAuiState(({ composer }) => composer.canSend);\n *   const attachmentCount = useAuiState(({ composer }) => composer.attachments.length);\n *   return (\n *     <div>\n *       Text: {text.length} chars,\n *       Attachments: {attachmentCount},\n *       Can send: {canSend}\n *     </div>\n *   );\n * }\n * ```\n */\nexport const useComposer = createStateHookForRuntime(useComposerRuntime);\n", "\"use client\";\n\nimport { MessageRuntime } from \"../runtime/MessageRuntime\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\nimport { EditComposerRuntime } from \"../runtime\";\n\n/**\n * @deprecated Use `useAui()` with `aui.message()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the MessageRuntime from the current context.\n *\n * The MessageRuntime provides access to message-level state and actions,\n * including message content, status, editing capabilities, and branching.\n *\n * @param options Configuration options\n * @param options.optional Whether the hook should return null if no context is found\n * @returns The MessageRuntime instance, or null if optional is true and no context exists\n *\n * @example\n * ```tsx\n * // Before:\n * function MessageActions() {\n *   const runtime = useMessageRuntime();\n *   const handleReload = () => {\n *     runtime.reload();\n *   };\n *   const handleEdit = () => {\n *     runtime.startEdit();\n *   };\n *   return (\n *     <div>\n *       <button onClick={handleReload}>Reload</button>\n *       <button onClick={handleEdit}>Edit</button>\n *     </div>\n *   );\n * }\n *\n * // After:\n * function MessageActions() {\n *   const aui = useAui();\n *   const handleReload = () => {\n *     aui.message().reload();\n *   };\n *   const handleEdit = () => {\n *     aui.message().startEdit();\n *   };\n *   return (\n *     <div>\n *       <button onClick={handleReload}>Reload</button>\n *       <button onClick={handleEdit}>Edit</button>\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useMessageRuntime(options?: {\n  optional?: false | undefined;\n}): MessageRuntime;\nexport function useMessageRuntime(options?: {\n  optional?: boolean | undefined;\n}): MessageRuntime | null;\nexport function useMessageRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const aui = useAui();\n  const runtime = useAuiState(() =>\n    aui.message.source\n      ? (aui.message().__internal_getRuntime?.() ?? null)\n      : null,\n  );\n  if (!runtime && !options?.optional) {\n    throw new Error(\"MessageRuntime is not available\");\n  }\n  return runtime;\n}\n\n/**\n * @deprecated Use `useAuiState(({ message }) => message)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the current message state.\n *\n * This hook provides reactive access to the message's state, including content,\n * role, status, and other message-level properties.\n *\n * @param selector Optional selector function to pick specific state properties\n * @returns The selected message state or the entire message state if no selector provided\n *\n * @example\n * ```tsx\n * // Before:\n * function MessageContent() {\n *   const role = useMessage((state) => state.role);\n *   const content = useMessage((state) => state.content);\n *   const isLoading = useMessage((state) => state.status.type === \"running\");\n *   return (\n *     <div className={`message-${role}`}>\n *       {isLoading ? \"Loading...\" : content.map(part => part.text).join(\"\")}\n *     </div>\n *   );\n * }\n *\n * // After:\n * function MessageContent() {\n *   const role = useAuiState(({ message }) => message.role);\n *   const content = useAuiState(({ message }) => message.content);\n *   const isLoading = useAuiState(({ message }) => message.status.type === \"running\");\n *   return (\n *     <div className={`message-${role}`}>\n *       {isLoading ? \"Loading...\" : content.map(part => part.text).join(\"\")}\n *     </div>\n *   );\n * }\n * ```\n */\nexport const useMessage = createStateHookForRuntime(useMessageRuntime);\n\nconst useEditComposerRuntime = (opt: {\n  optional: boolean | undefined;\n}): EditComposerRuntime | null => useMessageRuntime(opt)?.composer ?? null;\n\n/**\n * @deprecated Use `useAuiState(({ message }) => message.composer)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport const useEditComposer = createStateHookForRuntime(\n  useEditComposerRuntime,\n);\n", "\"use client\";\n\nimport { MessagePartRuntime } from \"../runtime/MessagePartRuntime\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\n\n/**\n * @deprecated Use `useAui()` with `aui.part()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport function useMessagePartRuntime(options?: {\n  optional?: false | undefined;\n}): MessagePartRuntime;\nexport function useMessagePartRuntime(options?: {\n  optional?: boolean | undefined;\n}): MessagePartRuntime | null;\nexport function useMessagePartRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const aui = useAui();\n  const runtime = useAuiState(() =>\n    aui.part.source ? (aui.part().__internal_getRuntime?.() ?? null) : null,\n  );\n  if (!runtime && !options?.optional) {\n    throw new Error(\"MessagePartRuntime is not available\");\n  }\n  return runtime;\n}\n\n/**\n * @deprecated Use `useAuiState(({ part }) => part)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport const useMessagePart = createStateHookForRuntime(useMessagePartRuntime);\n", "\"use client\";\n\nimport { useState } from \"react\";\nimport { ThreadRuntime } from \"../runtime/ThreadRuntime\";\nimport { ModelContext } from \"../../model-context\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\nimport { ThreadComposerRuntime } from \"../runtime\";\nimport { useAui, useAuiEvent, useAuiState } from \"@assistant-ui/store\";\n\n/**\n * @deprecated Use `useAui()` with `aui.thread()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the ThreadRuntime from the current context.\n *\n * The ThreadRuntime provides access to thread-level state and actions,\n * including message management, thread state, and composer functionality.\n *\n * @param options Configuration options\n * @param options.optional Whether the hook should return null if no context is found\n * @returns The ThreadRuntime instance, or null if optional is true and no context exists\n *\n * @example\n * ```tsx\n * // Before:\n * function MyComponent() {\n *   const runtime = useThreadRuntime();\n *   const handleSendMessage = (text: string) => {\n *     runtime.append({ role: \"user\", content: [{ type: \"text\", text }] });\n *   };\n *   return <button onClick={() => handleSendMessage(\"Hello!\")}>Send</button>;\n * }\n *\n * // After:\n * function MyComponent() {\n *   const aui = useAui();\n *   const handleSendMessage = (text: string) => {\n *     aui.thread().append({ role: \"user\", content: [{ type: \"text\", text }] });\n *   };\n *   return <button onClick={() => handleSendMessage(\"Hello!\")}>Send</button>;\n * }\n * ```\n */\nexport function useThreadRuntime(options?: {\n  optional?: false | undefined;\n}): ThreadRuntime;\nexport function useThreadRuntime(options?: {\n  optional?: boolean | undefined;\n}): ThreadRuntime | null;\nexport function useThreadRuntime(options?: { optional?: boolean | undefined }) {\n  const aui = useAui();\n  const runtime = useAuiState(() =>\n    aui.thread.source ? (aui.thread().__internal_getRuntime?.() ?? null) : null,\n  );\n  if (!runtime && !options?.optional) {\n    throw new Error(\"ThreadRuntime is not available\");\n  }\n  return runtime;\n}\n\n/**\n * @deprecated Use `useAuiState(({ thread }) => thread)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n *\n * Hook to access the current thread state.\n *\n * This hook provides reactive access to the thread's state, including messages,\n * running status, capabilities, and other thread-level properties.\n *\n * @param selector Optional selector function to pick specific state properties\n * @returns The selected thread state or the entire thread state if no selector provided\n *\n * @example\n * ```tsx\n * // Before:\n * function ThreadStatus() {\n *   const isRunning = useThread((state) => state.isRunning);\n *   const messageCount = useThread((state) => state.messages.length);\n *   return <div>Running: {isRunning}, Messages: {messageCount}</div>;\n * }\n *\n * // After:\n * function ThreadStatus() {\n *   const isRunning = useAuiState(({ thread }) => thread.isRunning);\n *   const messageCount = useAuiState(({ thread }) => thread.messages.length);\n *   return <div>Running: {isRunning}, Messages: {messageCount}</div>;\n * }\n * ```\n */\nexport const useThread = createStateHookForRuntime(useThreadRuntime);\n\nconst useThreadComposerRuntime = (opt: {\n  optional: boolean | undefined;\n}): ThreadComposerRuntime | null => useThreadRuntime(opt)?.composer ?? null;\n\n/**\n * @deprecated Use `useAuiState(({ thread }) => thread.composer)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport const useThreadComposer = createStateHookForRuntime(\n  useThreadComposerRuntime,\n);\n\n/**\n * @deprecated Use `useAuiState(({ thread }) => thread.modelContext)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport function useThreadModelContext(options?: {\n  optional?: false | undefined;\n}): ModelContext;\nexport function useThreadModelContext(options?: {\n  optional?: boolean | undefined;\n}): ModelContext | null;\nexport function useThreadModelContext(options?: {\n  optional?: boolean | undefined;\n}): ModelContext | null {\n  const [, rerender] = useState({});\n\n  const runtime = useThreadRuntime(options);\n  useAuiEvent(\"thread.modelContextUpdate\", () => rerender({}));\n\n  if (!runtime) return null;\n  return runtime?.getModelContext();\n}\n", "\"use client\";\n\nimport { ThreadListItemRuntime } from \"../runtime/ThreadListItemRuntime\";\nimport { createStateHookForRuntime } from \"../../context/react/utils/createStateHookForRuntime\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\n\n/**\n * @deprecated Use `useAui()` with `aui.threadListItem()` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport function useThreadListItemRuntime(options?: {\n  optional?: false | undefined;\n}): ThreadListItemRuntime;\nexport function useThreadListItemRuntime(options?: {\n  optional?: boolean | undefined;\n}): ThreadListItemRuntime | null;\nexport function useThreadListItemRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const aui = useAui();\n  const runtime = useAuiState(() =>\n    aui.threadListItem.source\n      ? (aui.threadListItem().__internal_getRuntime?.() ?? null)\n      : null,\n  );\n  if (!runtime && !options?.optional) {\n    throw new Error(\"ThreadListItemRuntime is not available\");\n  }\n  return runtime;\n}\n\n/**\n * @deprecated Use `useAuiState(({ threadListItem }) => threadListItem)` instead. See migration guide: https://assistant-ui.com/docs/migrations/v0-12\n */\nexport const useThreadListItem = createStateHookForRuntime(\n  useThreadListItemRuntime,\n);\n", "export { ActionBarPrimitiveRoot as Root } from \"./ActionBarRoot\";\nexport { ActionBarPrimitiveCopy as Copy } from \"./ActionBarCopy\";\nexport { ActionBarPrimitiveReload as Reload } from \"./ActionBarReload\";\nexport { ActionBarPrimitiveEdit as Edit } from \"./ActionBarEdit\";\nexport { ActionBarPrimitiveSpeak as Speak } from \"./ActionBarSpeak\";\nexport { ActionBarPrimitiveStopSpeaking as StopSpeaking } from \"./ActionBarStopSpeaking\";\nexport { ActionBarPrimitiveFeedbackPositive as FeedbackPositive } from \"./ActionBarFeedbackPositive\";\nexport { ActionBarPrimitiveFeedbackNegative as FeedbackNegative } from \"./ActionBarFeedbackNegative\";\nexport { ActionBarPrimitiveExportMarkdown as ExportMarkdown } from \"./ActionBarExportMarkdown\";\n", "import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { createSlot } from '@radix-ui/react-slot';\n\nconst NODES = [\n  'a',\n  'button',\n  'div',\n  'form',\n  'h2',\n  'h3',\n  'img',\n  'input',\n  'label',\n  'li',\n  'nav',\n  'ol',\n  'p',\n  'select',\n  'span',\n  'svg',\n  'ul',\n] as const;\n\ntype Primitives = { [E in (typeof NODES)[number]]: PrimitiveForwardRefComponent<E> };\ntype PrimitivePropsWithRef<E extends React.ElementType> = React.ComponentPropsWithRef<E> & {\n  asChild?: boolean;\n};\n\ninterface PrimitiveForwardRefComponent<E extends React.ElementType>\n  extends React.ForwardRefExoticComponent<PrimitivePropsWithRef<E>> {}\n\n/* -------------------------------------------------------------------------------------------------\n * Primitive\n * -----------------------------------------------------------------------------------------------*/\n\nconst Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props: PrimitivePropsWithRef<typeof node>, forwardedRef: any) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp: any = asChild ? Slot : node;\n\n    if (typeof window !== 'undefined') {\n      (window as any)[Symbol.for('radix-ui')] = true;\n    }\n\n    return <Comp {...primitiveProps} ref={forwardedRef} />;\n  });\n\n  Node.displayName = `Primitive.${node}`;\n\n  return { ...primitive, [node]: Node };\n}, {} as Primitives);\n\n/* -------------------------------------------------------------------------------------------------\n * Utils\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * Flush custom event dispatch\n * https://github.com/radix-ui/primitives/pull/1378\n *\n * React batches *all* event handlers since version 18, this introduces certain considerations when using custom event types.\n *\n * Internally, React prioritises events in the following order:\n *  - discrete\n *  - continuous\n *  - default\n *\n * https://github.com/facebook/react/blob/a8a4742f1c54493df00da648a3f9d26e3db9c8b5/packages/react-dom/src/events/ReactDOMEventListener.js#L294-L350\n *\n * `discrete` is an  important distinction as updates within these events are applied immediately.\n * React however, is not able to infer the priority of custom event types due to how they are detected internally.\n * Because of this, it's possible for updates from custom events to be unexpectedly batched when\n * dispatched by another `discrete` event.\n *\n * In order to ensure that updates from custom events are applied predictably, we need to manually flush the batch.\n * This utility should be used when dispatching a custom event from within another `discrete` event, this utility\n * is not necessary when dispatching known event types, or if dispatching a custom type inside a non-discrete event.\n * For example:\n *\n * dispatching a known click \uD83D\uDC4E\n * target.dispatchEvent(new Event(\u2018click\u2019))\n *\n * dispatching a custom type within a non-discrete event \uD83D\uDC4E\n * onScroll={(event) => event.target.dispatchEvent(new CustomEvent(\u2018customType\u2019))}\n *\n * dispatching a custom type within a `discrete` event \uD83D\uDC4D\n * onPointerDown={(event) => dispatchDiscreteCustomEvent(event.target, new CustomEvent(\u2018customType\u2019))}\n *\n * Note: though React classifies `focus`, `focusin` and `focusout` events as `discrete`, it's  not recommended to use\n * this utility with them. This is because it's possible for those handlers to be called implicitly during render\n * e.g. when focus is within a component as it is unmounted, or when managing focus on mount.\n */\n\nfunction dispatchDiscreteCustomEvent<E extends CustomEvent>(target: E['target'], event: E) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\n\n/* -----------------------------------------------------------------------------------------------*/\n\nconst Root = Primitive;\n\nexport {\n  Primitive,\n  //\n  Root,\n  //\n  dispatchDiscreteCustomEvent,\n};\nexport type { PrimitivePropsWithRef };\n", "import * as React from 'react';\nimport { composeRefs } from '@radix-ui/react-compose-refs';\n\ndeclare module 'react' {\n  interface ReactElement {\n    $$typeof?: symbol | string;\n  }\n}\n\nconst REACT_LAZY_TYPE = Symbol.for('react.lazy');\n\ninterface LazyReactElement extends React.ReactElement {\n  $$typeof: typeof REACT_LAZY_TYPE;\n  _payload: PromiseLike<Exclude<React.ReactNode, PromiseLike<any>>>;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Slot\n * -----------------------------------------------------------------------------------------------*/\n\nexport type Usable<T> = PromiseLike<T> | React.Context<T>;\nconst use: typeof React.use | undefined = (React as any)[' use '.trim().toString()];\n\ninterface SlotProps extends React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\n\nfunction isPromiseLike(value: unknown): value is PromiseLike<unknown> {\n  return typeof value === 'object' && value !== null && 'then' in value;\n}\n\nfunction isLazyComponent(element: React.ReactNode): element is LazyReactElement {\n  return (\n    element != null &&\n    typeof element === 'object' &&\n    '$$typeof' in element &&\n    element.$$typeof === REACT_LAZY_TYPE &&\n    '_payload' in element &&\n    isPromiseLike(element._payload)\n  );\n}\n\n/* @__NO_SIDE_EFFECTS__ */ export function createSlot(ownerName: string) {\n  const SlotClone = createSlotClone(ownerName);\n  const Slot = React.forwardRef<HTMLElement, SlotProps>((props, forwardedRef) => {\n    let { children, ...slotProps } = props;\n    if (isLazyComponent(children) && typeof use === 'function') {\n      children = use(children._payload);\n    }\n    const childrenArray = React.Children.toArray(children);\n    const slottable = childrenArray.find(isSlottable);\n\n    if (slottable) {\n      // the new element to render is the one passed as a child of `Slottable`\n      const newElement = slottable.props.children;\n\n      const newChildren = childrenArray.map((child) => {\n        if (child === slottable) {\n          // because the new element will be the one rendered, we are only interested\n          // in grabbing its children (`newElement.props.children`)\n          if (React.Children.count(newElement) > 1) return React.Children.only(null);\n          return React.isValidElement(newElement)\n            ? (newElement.props as { children: React.ReactNode }).children\n            : null;\n        } else {\n          return child;\n        }\n      });\n\n      return (\n        <SlotClone {...slotProps} ref={forwardedRef}>\n          {React.isValidElement(newElement)\n            ? React.cloneElement(newElement, undefined, newChildren)\n            : null}\n        </SlotClone>\n      );\n    }\n\n    return (\n      <SlotClone {...slotProps} ref={forwardedRef}>\n        {children}\n      </SlotClone>\n    );\n  });\n\n  Slot.displayName = `${ownerName}.Slot`;\n  return Slot;\n}\n\nconst Slot = createSlot('Slot');\n\n/* -------------------------------------------------------------------------------------------------\n * SlotClone\n * -----------------------------------------------------------------------------------------------*/\n\ninterface SlotCloneProps {\n  children: React.ReactNode;\n}\n\n/* @__NO_SIDE_EFFECTS__ */ function createSlotClone(ownerName: string) {\n  const SlotClone = React.forwardRef<any, SlotCloneProps>((props, forwardedRef) => {\n    let { children, ...slotProps } = props;\n    if (isLazyComponent(children) && typeof use === 'function') {\n      children = use(children._payload);\n    }\n\n    if (React.isValidElement(children)) {\n      const childrenRef = getElementRef(children);\n      const props = mergeProps(slotProps, children.props as AnyProps);\n      // do not pass ref to React.Fragment for React 19 compatibility\n      if (children.type !== React.Fragment) {\n        props.ref = forwardedRef ? composeRefs(forwardedRef, childrenRef) : childrenRef;\n      }\n      return React.cloneElement(children, props);\n    }\n\n    return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n  });\n\n  SlotClone.displayName = `${ownerName}.SlotClone`;\n  return SlotClone;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Slottable\n * -----------------------------------------------------------------------------------------------*/\n\nconst SLOTTABLE_IDENTIFIER = Symbol('radix.slottable');\n\ninterface SlottableProps {\n  children: React.ReactNode;\n}\n\ninterface SlottableComponent extends React.FC<SlottableProps> {\n  __radixId: symbol;\n}\n\n/* @__NO_SIDE_EFFECTS__ */ export function createSlottable(ownerName: string) {\n  const Slottable: SlottableComponent = ({ children }) => {\n    return <>{children}</>;\n  };\n  Slottable.displayName = `${ownerName}.Slottable`;\n  Slottable.__radixId = SLOTTABLE_IDENTIFIER;\n  return Slottable;\n}\n\nconst Slottable = createSlottable('Slottable');\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype AnyProps = Record<string, any>;\n\nfunction isSlottable(\n  child: React.ReactNode,\n): child is React.ReactElement<SlottableProps, typeof Slottable> {\n  return (\n    React.isValidElement(child) &&\n    typeof child.type === 'function' &&\n    '__radixId' in child.type &&\n    child.type.__radixId === SLOTTABLE_IDENTIFIER\n  );\n}\n\nfunction mergeProps(slotProps: AnyProps, childProps: AnyProps) {\n  // all child props should override\n  const overrideProps = { ...childProps };\n\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      // if the handler exists on both, we compose them\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args: unknown[]) => {\n          const result = childPropValue(...args);\n          slotPropValue(...args);\n          return result;\n        };\n      }\n      // but if it exists only on the slot, we use only this one\n      else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    }\n    // if it's `style`, we merge them\n    else if (propName === 'style') {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === 'className') {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(' ');\n    }\n  }\n\n  return { ...slotProps, ...overrideProps };\n}\n\n// Before React 19 accessing `element.props.ref` will throw a warning and suggest using `element.ref`\n// After React 19 accessing `element.ref` does the opposite.\n// https://github.com/facebook/react/pull/28348\n//\n// Access the ref using the method that doesn't yield a warning.\nfunction getElementRef(element: React.ReactElement) {\n  // React <=18 in DEV\n  let getter = Object.getOwnPropertyDescriptor(element.props, 'ref')?.get;\n  let mayWarn = getter && 'isReactWarning' in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return (element as any).ref;\n  }\n\n  // React 19 in DEV\n  getter = Object.getOwnPropertyDescriptor(element, 'ref')?.get;\n  mayWarn = getter && 'isReactWarning' in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return (element.props as { ref?: React.Ref<unknown> }).ref;\n  }\n\n  // Not DEV\n  return (element.props as { ref?: React.Ref<unknown> }).ref || (element as any).ref;\n}\n\nexport {\n  Slot,\n  Slottable,\n  //\n  Slot as Root,\n};\nexport type { SlotProps };\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport {\n  useActionBarFloatStatus,\n  HideAndFloatStatus,\n} from \"./useActionBarFloatStatus\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ActionBarPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps & {\n    /**\n     * Whether to hide the action bar when the thread is running.\n     * @default false\n     */\n    hideWhenRunning?: boolean | undefined;\n    /**\n     * Controls when the action bar should automatically hide.\n     * - \"always\": Always hide unless hovered\n     * - \"not-last\": Hide unless this is the last message\n     * - \"never\": Never auto-hide\n     * @default \"never\"\n     */\n    autohide?: \"always\" | \"not-last\" | \"never\" | undefined;\n    /**\n     * Controls floating behavior when auto-hidden.\n     * - \"always\": Always float when hidden\n     * - \"single-branch\": Float only for single-branch messages\n     * - \"never\": Never float\n     * @default \"never\"\n     */\n    autohideFloat?: \"always\" | \"single-branch\" | \"never\" | undefined;\n  };\n}\n\n/**\n * The root container for action bar components.\n *\n * This component provides intelligent visibility and floating behavior for action bars,\n * automatically hiding and showing based on message state, hover status, and configuration.\n * It supports floating mode for better UX when space is limited.\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Root\n *   hideWhenRunning={true}\n *   autohide=\"not-last\"\n *   autohideFloat=\"single-branch\"\n * >\n *   <ActionBarPrimitive.Copy />\n *   <ActionBarPrimitive.Edit />\n *   <ActionBarPrimitive.Reload />\n * </ActionBarPrimitive.Root>\n * ```\n */\nexport const ActionBarPrimitiveRoot = forwardRef<\n  ActionBarPrimitiveRoot.Element,\n  ActionBarPrimitiveRoot.Props\n>(({ hideWhenRunning, autohide, autohideFloat, ...rest }, ref) => {\n  const hideAndfloatStatus = useActionBarFloatStatus({\n    hideWhenRunning,\n    autohide,\n    autohideFloat,\n  });\n\n  if (hideAndfloatStatus === HideAndFloatStatus.Hidden) return null;\n\n  return (\n    <Primitive.div\n      {...(hideAndfloatStatus === HideAndFloatStatus.Floating\n        ? { \"data-floating\": \"true\" }\n        : null)}\n      {...rest}\n      ref={ref}\n    />\n  );\n});\n\nActionBarPrimitiveRoot.displayName = \"ActionBarPrimitive.Root\";\n", "\"use client\";\n\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport enum HideAndFloatStatus {\n  Hidden = \"hidden\",\n  Floating = \"floating\",\n  Normal = \"normal\",\n}\n\nexport type UseActionBarFloatStatusProps = {\n  hideWhenRunning?: boolean | undefined;\n  autohide?: \"always\" | \"not-last\" | \"never\" | undefined;\n  autohideFloat?: \"always\" | \"single-branch\" | \"never\" | undefined;\n};\n\nexport const useActionBarFloatStatus = ({\n  hideWhenRunning,\n  autohide,\n  autohideFloat,\n}: UseActionBarFloatStatusProps) => {\n  return useAuiState(({ thread, message }) => {\n    if (hideWhenRunning && thread.isRunning) return HideAndFloatStatus.Hidden;\n\n    const autohideEnabled =\n      autohide === \"always\" || (autohide === \"not-last\" && !message.isLast);\n\n    // normal status\n    if (!autohideEnabled) return HideAndFloatStatus.Normal;\n\n    // hidden status\n    if (!message.isHovering) return HideAndFloatStatus.Hidden;\n\n    // floating status\n    if (\n      autohideFloat === \"always\" ||\n      (autohideFloat === \"single-branch\" && message.branchCount <= 1)\n    )\n      return HideAndFloatStatus.Floating;\n\n    return HideAndFloatStatus.Normal;\n  });\n};\n", "\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\n/**\n * Hook that provides copy functionality for action bar buttons.\n *\n * This hook returns a callback function that copies message content to the clipboard,\n * or null if copying is not available. It handles both regular message content and\n * composer text when in editing mode.\n *\n * @param options Configuration options\n * @param options.copiedDuration Duration in milliseconds to show the copied state\n * @returns A copy callback function, or null if copying is disabled\n *\n * @example\n * ```tsx\n * function CustomCopyButton() {\n *   const copy = useActionBarPrimitiveCopy({ copiedDuration: 2000 });\n *\n *   return (\n *     <button onClick={copy} disabled={!copy}>\n *       {copy ? \"Copy\" : \"Cannot Copy\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useActionBarPrimitiveCopy = ({\n  copiedDuration = 3000,\n}: {\n  copiedDuration?: number | undefined;\n} = {}) => {\n  const aui = useAui();\n  const hasCopyableContent = useAuiState(({ message }) => {\n    return (\n      (message.role !== \"assistant\" || message.status?.type !== \"running\") &&\n      message.parts.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  const isEditing = useAuiState(({ composer }) => composer.isEditing);\n  const composerValue = useAuiState(({ composer }) => composer.text);\n\n  const callback = useCallback(() => {\n    const valueToCopy = isEditing ? composerValue : aui.message().getCopyText();\n\n    if (!valueToCopy) return;\n\n    navigator.clipboard.writeText(valueToCopy).then(() => {\n      aui.message().setIsCopied(true);\n      setTimeout(() => aui.message().setIsCopied(false), copiedDuration);\n    });\n  }, [aui, isEditing, composerValue, copiedDuration]);\n\n  if (!hasCopyableContent) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveCopy {\n  export type Element = HTMLButtonElement;\n  /**\n   * Props for the ActionBarPrimitive.Copy component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useActionBarPrimitiveCopy>;\n}\n\n/**\n * A button component that copies message content to the clipboard.\n *\n * This component automatically handles copying message text to the clipboard\n * and provides visual feedback through the data-copied attribute. It's disabled\n * when there's no copyable content available.\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Copy copiedDuration={2000}>\n *   Copy Message\n * </ActionBarPrimitive.Copy>\n * ```\n */\nexport const ActionBarPrimitiveCopy = forwardRef<\n  ActionBarPrimitiveCopy.Element,\n  ActionBarPrimitiveCopy.Props\n>(({ copiedDuration, onClick, disabled, ...props }, forwardedRef) => {\n  const isCopied = useAuiState(({ message }) => message.isCopied);\n  const callback = useActionBarPrimitiveCopy({ copiedDuration });\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isCopied ? { \"data-copied\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveCopy.displayName = \"ActionBarPrimitive.Copy\";\n", "import {\n  ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  MouseEventHandler,\n} from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\ntype ActionButtonCallback<TProps> = (\n  props: TProps,\n) => MouseEventHandler<HTMLButtonElement> | null;\n\ntype PrimitiveButtonProps = ComponentPropsWithoutRef<typeof Primitive.button>;\n\nexport type ActionButtonProps<THook> = PrimitiveButtonProps &\n  (THook extends (props: infer TProps) => unknown ? TProps : never);\n\nexport type ActionButtonElement = ComponentRef<typeof Primitive.button>;\n\nexport const createActionButton = <TProps,>(\n  displayName: string,\n  useActionButton: ActionButtonCallback<TProps>,\n  forwardProps: (keyof NonNullable<TProps>)[] = [],\n) => {\n  const ActionButton = forwardRef<\n    ActionButtonElement,\n    PrimitiveButtonProps & TProps\n  >((props, forwardedRef) => {\n    const forwardedProps = {} as TProps;\n    const primitiveProps = {} as PrimitiveButtonProps;\n\n    (Object.keys(props) as Array<keyof typeof props>).forEach((key) => {\n      if (forwardProps.includes(key as keyof TProps)) {\n        (forwardedProps as any)[key] = props[key];\n      } else {\n        (primitiveProps as any)[key] = props[key];\n      }\n    });\n\n    const callback = useActionButton(forwardedProps as TProps) ?? undefined;\n    return (\n      <Primitive.button\n        type=\"button\"\n        {...primitiveProps}\n        ref={forwardedRef}\n        disabled={primitiveProps.disabled || !callback}\n        onClick={composeEventHandlers(primitiveProps.onClick, callback)}\n      />\n    );\n  });\n\n  ActionButton.displayName = displayName;\n\n  return ActionButton;\n};\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\n/**\n * Hook that provides reload functionality for action bar buttons.\n *\n * This hook returns a callback function that reloads/regenerates the current assistant message,\n * or null if reloading is not available (e.g., thread is running, disabled, or message is not from assistant).\n *\n * @returns A reload callback function, or null if reloading is disabled\n *\n * @example\n * ```tsx\n * function CustomReloadButton() {\n *   const reload = useActionBarReload();\n *\n *   return (\n *     <button onClick={reload} disabled={!reload}>\n *       {reload ? \"Reload Message\" : \"Cannot Reload\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useActionBarReload = () => {\n  const aui = useAui();\n\n  const disabled = useAuiState(\n    (s) =>\n      s.thread.isRunning ||\n      s.thread.isDisabled ||\n      s.message.role !== \"assistant\",\n  );\n\n  const callback = useCallback(() => {\n    aui.message().reload();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveReload {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ActionBarPrimitive.Reload component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useActionBarReload>;\n}\n\n/**\n * A button component that reloads/regenerates the current assistant message.\n *\n * This component automatically handles reloading the current assistant message\n * and is disabled when reloading is not available (e.g., thread is running,\n * disabled, or message is not from assistant).\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Reload>\n *   Reload Message\n * </ActionBarPrimitive.Reload>\n * ```\n */\nexport const ActionBarPrimitiveReload = createActionButton(\n  \"ActionBarPrimitive.Reload\",\n  useActionBarReload,\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\n/**\n * Hook that provides edit functionality for action bar buttons.\n *\n * This hook returns a callback function that starts editing the current message,\n * or null if editing is not available (e.g., already in editing mode).\n *\n * @returns An edit callback function, or null if editing is disabled\n *\n * @example\n * ```tsx\n * function CustomEditButton() {\n *   const edit = useActionBarEdit();\n *\n *   return (\n *     <button onClick={edit} disabled={!edit}>\n *       {edit ? \"Edit Message\" : \"Cannot Edit\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useActionBarEdit = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ composer }) => composer.isEditing);\n\n  const callback = useCallback(() => {\n    aui.composer().beginEdit();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveEdit {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ActionBarPrimitive.Edit component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useActionBarEdit>;\n}\n\n/**\n * A button component that starts editing the current message.\n *\n * This component automatically handles starting the edit mode for the current message\n * and is disabled when editing is not available (e.g., already in editing mode).\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Edit>\n *   Edit Message\n * </ActionBarPrimitive.Edit>\n * ```\n */\nexport const ActionBarPrimitiveEdit = createActionButton(\n  \"ActionBarPrimitive.Edit\",\n  useActionBarEdit,\n);\n", "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nconst useActionBarSpeak = () => {\n  const aui = useAui();\n  const callback = useCallback(async () => {\n    aui.message().speak();\n  }, [aui]);\n\n  const hasSpeakableContent = useAuiState(({ message }) => {\n    return (\n      (message.role !== \"assistant\" || message.status?.type !== \"running\") &&\n      message.parts.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  if (!hasSpeakableContent) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveSpeak {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarSpeak>;\n}\n\nexport const ActionBarPrimitiveSpeak = createActionButton(\n  \"ActionBarPrimitive.Speak\",\n  useActionBarSpeak,\n);\n", "\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useActionBarStopSpeaking = () => {\n  const aui = useAui();\n  const isSpeaking = useAuiState(({ message }) => message.speech != null);\n\n  const callback = useCallback(() => {\n    aui.message().stopSpeaking();\n  }, [aui]);\n\n  if (!isSpeaking) return null;\n\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveStopSpeaking {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarStopSpeaking>;\n}\n\nexport const ActionBarPrimitiveStopSpeaking = forwardRef<\n  ActionBarPrimitiveStopSpeaking.Element,\n  ActionBarPrimitiveStopSpeaking.Props\n>((props, ref) => {\n  const callback = useActionBarStopSpeaking();\n\n  // TODO this stops working if the user is not hovering over an older message\n  useEscapeKeydown((e) => {\n    if (callback) {\n      e.preventDefault();\n      callback();\n    }\n  });\n\n  return (\n    <Primitive.button\n      type=\"button\"\n      disabled={!callback}\n      {...props}\n      ref={ref}\n      onClick={composeEventHandlers(props.onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveStopSpeaking.displayName = \"ActionBarPrimitive.StopSpeaking\";\n", "\"use client\";\n\nimport { forwardRef, useCallback } from \"react\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\nconst useActionBarFeedbackPositive = () => {\n  const aui = useAui();\n\n  const callback = useCallback(() => {\n    aui.message().submitFeedback({ type: \"positive\" });\n  }, [aui]);\n\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveFeedbackPositive {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarFeedbackPositive>;\n}\n\nexport const ActionBarPrimitiveFeedbackPositive = forwardRef<\n  ActionBarPrimitiveFeedbackPositive.Element,\n  ActionBarPrimitiveFeedbackPositive.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isSubmitted = useAuiState(\n    (s) => s.message.metadata.submittedFeedback?.type === \"positive\",\n  );\n  const callback = useActionBarFeedbackPositive();\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isSubmitted ? { \"data-submitted\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveFeedbackPositive.displayName =\n  \"ActionBarPrimitive.FeedbackPositive\";\n", "\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useActionBarFeedbackNegative = () => {\n  const aui = useAui();\n\n  const callback = useCallback(() => {\n    aui.message().submitFeedback({ type: \"negative\" });\n  }, [aui]);\n\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveFeedbackNegative {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarFeedbackNegative>;\n}\n\nexport const ActionBarPrimitiveFeedbackNegative = forwardRef<\n  ActionBarPrimitiveFeedbackNegative.Element,\n  ActionBarPrimitiveFeedbackNegative.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isSubmitted = useAuiState(\n    (s) => s.message.metadata.submittedFeedback?.type === \"negative\",\n  );\n  const callback = useActionBarFeedbackNegative();\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isSubmitted ? { \"data-submitted\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveFeedbackNegative.displayName =\n  \"ActionBarPrimitive.FeedbackNegative\";\n", "\"use client\";\n\nimport { forwardRef, useCallback } from \"react\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useActionBarExportMarkdown = ({\n  filename,\n  onExport,\n}: {\n  filename?: string | undefined;\n  onExport?: ((content: string) => void | Promise<void>) | undefined;\n} = {}) => {\n  const aui = useAui();\n  const hasExportableContent = useAuiState(({ message }) => {\n    return (\n      (message.role !== \"assistant\" || message.status?.type !== \"running\") &&\n      message.parts.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  const callback = useCallback(async () => {\n    const content = aui.message().getCopyText();\n    if (!content) return;\n\n    if (onExport) {\n      await onExport(content);\n      return;\n    }\n\n    const blob = new Blob([content], { type: \"text/markdown\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename ?? `message-${Date.now()}.md`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }, [aui, filename, onExport]);\n\n  if (!hasExportableContent) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveExportMarkdown {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarExportMarkdown>;\n}\n\nexport const ActionBarPrimitiveExportMarkdown = forwardRef<\n  ActionBarPrimitiveExportMarkdown.Element,\n  ActionBarPrimitiveExportMarkdown.Props\n>(({ filename, onExport, onClick, disabled, ...props }, forwardedRef) => {\n  const callback = useActionBarExportMarkdown({ filename, onExport });\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveExportMarkdown.displayName =\n  \"ActionBarPrimitive.ExportMarkdown\";\n", "export { ActionBarMorePrimitiveRoot as Root } from \"./ActionBarMoreRoot\";\nexport { ActionBarMorePrimitiveTrigger as Trigger } from \"./ActionBarMoreTrigger\";\nexport { ActionBarMorePrimitiveContent as Content } from \"./ActionBarMoreContent\";\nexport { ActionBarMorePrimitiveItem as Item } from \"./ActionBarMoreItem\";\nexport { ActionBarMorePrimitiveSeparator as Separator } from \"./ActionBarMoreSeparator\";\n", "import * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport const useDropdownMenuScope: ReturnType<\n  typeof DropdownMenuPrimitive.createDropdownMenuScope\n> = DropdownMenuPrimitive.createDropdownMenuScope();\n\nexport type ScopedProps<P> = P & { __scopeActionBarMore?: Scope };\n", "\"use client\";\n\nimport { FC } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveRoot {\n  export type Props = DropdownMenuPrimitive.DropdownMenuProps;\n}\n\nexport const ActionBarMorePrimitiveRoot: FC<\n  ActionBarMorePrimitiveRoot.Props\n> = ({\n  __scopeActionBarMore,\n  ...rest\n}: ScopedProps<ActionBarMorePrimitiveRoot.Props>) => {\n  const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n  return <DropdownMenuPrimitive.Root {...scope} {...rest} />;\n};\n\nActionBarMorePrimitiveRoot.displayName = \"ActionBarMorePrimitive.Root\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveTrigger {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Trigger\n  >;\n}\n\nexport const ActionBarMorePrimitiveTrigger = forwardRef<\n  ActionBarMorePrimitiveTrigger.Element,\n  ActionBarMorePrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      ...rest\n    }: ScopedProps<ActionBarMorePrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return <DropdownMenuPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nActionBarMorePrimitiveTrigger.displayName = \"ActionBarMorePrimitive.Trigger\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveContent {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Content\n  > & {\n    portalProps?:\n      | ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Portal>\n      | undefined;\n  };\n}\n\nexport const ActionBarMorePrimitiveContent = forwardRef<\n  ActionBarMorePrimitiveContent.Element,\n  ActionBarMorePrimitiveContent.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      portalProps,\n      sideOffset = 4,\n      ...props\n    }: ScopedProps<ActionBarMorePrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return (\n      <DropdownMenuPrimitive.Portal {...scope} {...portalProps}>\n        <DropdownMenuPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          sideOffset={sideOffset}\n        />\n      </DropdownMenuPrimitive.Portal>\n    );\n  },\n);\n\nActionBarMorePrimitiveContent.displayName = \"ActionBarMorePrimitive.Content\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveItem {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Item>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Item\n  >;\n}\n\nexport const ActionBarMorePrimitiveItem = forwardRef<\n  ActionBarMorePrimitiveItem.Element,\n  ActionBarMorePrimitiveItem.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      ...rest\n    }: ScopedProps<ActionBarMorePrimitiveItem.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return <DropdownMenuPrimitive.Item {...scope} {...rest} ref={ref} />;\n  },\n);\n\nActionBarMorePrimitiveItem.displayName = \"ActionBarMorePrimitive.Item\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveSeparator {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Separator>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Separator\n  >;\n}\n\nexport const ActionBarMorePrimitiveSeparator = forwardRef<\n  ActionBarMorePrimitiveSeparator.Element,\n  ActionBarMorePrimitiveSeparator.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      ...rest\n    }: ScopedProps<ActionBarMorePrimitiveSeparator.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return <DropdownMenuPrimitive.Separator {...scope} {...rest} ref={ref} />;\n  },\n);\n\nActionBarMorePrimitiveSeparator.displayName =\n  \"ActionBarMorePrimitive.Separator\";\n", "export { AssistantModalPrimitiveRoot as Root } from \"./AssistantModalRoot\";\nexport { AssistantModalPrimitiveTrigger as Trigger } from \"./AssistantModalTrigger\";\nexport { AssistantModalPrimitiveContent as Content } from \"./AssistantModalContent\";\nexport { AssistantModalPrimitiveAnchor as Anchor } from \"./AssistantModalAnchor\";\n", "\"use client\";\n\nimport { FC, useEffect, useState } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\nimport { useAui } from \"@assistant-ui/store\";\n\nexport namespace AssistantModalPrimitiveRoot {\n  export type Props = PopoverPrimitive.PopoverProps & {\n    unstable_openOnRunStart?: boolean | undefined;\n  };\n}\n\nconst useAssistantModalOpenState = ({\n  defaultOpen = false,\n  unstable_openOnRunStart = true,\n}: {\n  defaultOpen?: boolean | undefined;\n  unstable_openOnRunStart?: boolean | undefined;\n}) => {\n  const state = useState(defaultOpen);\n\n  const [, setOpen] = state;\n  const aui = useAui();\n  useEffect(() => {\n    if (!unstable_openOnRunStart) return undefined;\n\n    return aui.on(\"thread.runStart\", () => {\n      setOpen(true);\n    });\n  }, [unstable_openOnRunStart, aui]);\n\n  return state;\n};\n\nexport const AssistantModalPrimitiveRoot: FC<\n  AssistantModalPrimitiveRoot.Props\n> = ({\n  __scopeAssistantModal,\n  defaultOpen,\n  unstable_openOnRunStart,\n  open,\n  onOpenChange,\n  ...rest\n}: ScopedProps<AssistantModalPrimitiveRoot.Props>) => {\n  const scope = usePopoverScope(__scopeAssistantModal);\n\n  const [modalOpen, setOpen] = useAssistantModalOpenState({\n    defaultOpen,\n    unstable_openOnRunStart,\n  });\n\n  const openChangeHandler = (open: boolean) => {\n    onOpenChange?.(open);\n    setOpen(open);\n  };\n\n  return (\n    <PopoverPrimitive.Root\n      {...scope}\n      open={open === undefined ? modalOpen : open}\n      onOpenChange={openChangeHandler}\n      {...rest}\n    />\n  );\n};\n\nAssistantModalPrimitiveRoot.displayName = \"AssistantModalPrimitive.Root\";\n", "import * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport const usePopoverScope: ReturnType<\n  typeof PopoverPrimitive.createPopoverScope\n> = PopoverPrimitive.createPopoverScope();\nexport type ScopedProps<P> = P & { __scopeAssistantModal?: Scope };\n", "import { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\n\nexport namespace AssistantModalPrimitiveTrigger {\n  export type Element = ComponentRef<typeof PopoverPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<typeof PopoverPrimitive.Trigger>;\n}\n\nexport const AssistantModalPrimitiveTrigger = forwardRef<\n  AssistantModalPrimitiveTrigger.Element,\n  AssistantModalPrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeAssistantModal,\n      ...rest\n    }: ScopedProps<AssistantModalPrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = usePopoverScope(__scopeAssistantModal);\n\n    return <PopoverPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nAssistantModalPrimitiveTrigger.displayName = \"AssistantModalPrimitive.Trigger\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\nexport namespace AssistantModalPrimitiveContent {\n  export type Element = ComponentRef<typeof PopoverPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof PopoverPrimitive.Content\n  > & {\n    portalProps?:\n      | ComponentPropsWithoutRef<typeof PopoverPrimitive.Portal>\n      | undefined;\n    dissmissOnInteractOutside?: boolean | undefined;\n  };\n}\n\nexport const AssistantModalPrimitiveContent = forwardRef<\n  AssistantModalPrimitiveContent.Element,\n  AssistantModalPrimitiveContent.Props\n>(\n  (\n    {\n      __scopeAssistantModal,\n      side,\n      align,\n      onInteractOutside,\n      dissmissOnInteractOutside = false,\n      portalProps,\n      ...props\n    }: ScopedProps<AssistantModalPrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = usePopoverScope(__scopeAssistantModal);\n\n    return (\n      <PopoverPrimitive.Portal {...scope} {...portalProps}>\n        <PopoverPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          side={side ?? \"top\"}\n          align={align ?? \"end\"}\n          onInteractOutside={composeEventHandlers(\n            onInteractOutside,\n            dissmissOnInteractOutside ? undefined : (e) => e.preventDefault(),\n          )}\n        />\n      </PopoverPrimitive.Portal>\n    );\n  },\n);\n\nAssistantModalPrimitiveContent.displayName = \"AssistantModalPrimitive.Content\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\n\nexport namespace AssistantModalPrimitiveAnchor {\n  export type Element = ComponentRef<typeof PopoverPrimitive.Anchor>;\n  export type Props = ComponentPropsWithoutRef<typeof PopoverPrimitive.Anchor>;\n}\n\nexport const AssistantModalPrimitiveAnchor = forwardRef<\n  AssistantModalPrimitiveAnchor.Element,\n  AssistantModalPrimitiveAnchor.Props\n>(\n  (\n    {\n      __scopeAssistantModal,\n      ...rest\n    }: ScopedProps<AssistantModalPrimitiveAnchor.Props>,\n    ref,\n  ) => {\n    const scope = usePopoverScope(__scopeAssistantModal);\n\n    return <PopoverPrimitive.Anchor {...scope} {...rest} ref={ref} />;\n  },\n);\nAssistantModalPrimitiveAnchor.displayName = \"AssistantModalPrimitive.Anchor\";\n", "export { AttachmentPrimitiveRoot as Root } from \"./AttachmentRoot\";\nexport { AttachmentPrimitiveThumb as unstable_Thumb } from \"./AttachmentThumb\";\nexport { AttachmentPrimitiveName as Name } from \"./AttachmentName\";\nexport { AttachmentPrimitiveRemove as Remove } from \"./AttachmentRemove\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace AttachmentPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  /**\n   * Props for the AttachmentPrimitive.Root component.\n   * Accepts all standard div element props.\n   */\n  export type Props = PrimitiveDivProps;\n}\n\n/**\n * The root container component for an attachment.\n *\n * This component provides the foundational wrapper for attachment-related components\n * and content. It serves as the context provider for attachment state and actions.\n *\n * @example\n * ```tsx\n * <AttachmentPrimitive.Root>\n *   <AttachmentPrimitive.Name />\n *   <AttachmentPrimitive.Remove />\n * </AttachmentPrimitive.Root>\n * ```\n */\nexport const AttachmentPrimitiveRoot = forwardRef<\n  AttachmentPrimitiveRoot.Element,\n  AttachmentPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nAttachmentPrimitiveRoot.displayName = \"AttachmentPrimitive.Root\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type ComponentRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace AttachmentPrimitiveThumb {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const AttachmentPrimitiveThumb = forwardRef<\n  AttachmentPrimitiveThumb.Element,\n  AttachmentPrimitiveThumb.Props\n>((props, ref) => {\n  const ext = useAuiState(({ attachment }) => {\n    const parts = attachment.name.split(\".\");\n    return parts.length > 1 ? parts.pop()! : \"\";\n  });\n  return (\n    <Primitive.div {...props} ref={ref}>\n      .{ext}\n    </Primitive.div>\n  );\n});\n\nAttachmentPrimitiveThumb.displayName = \"AttachmentPrimitive.Thumb\";\n", "\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace AttachmentPrimitiveName {\n  export type Props = Record<string, never>;\n}\n\nexport const AttachmentPrimitiveName: FC<\n  AttachmentPrimitiveName.Props\n> = () => {\n  const name = useAuiState(({ attachment }) => attachment.name);\n  return <>{name}</>;\n};\n\nAttachmentPrimitiveName.displayName = \"AttachmentPrimitive.Name\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\n\nconst useAttachmentRemove = () => {\n  const aui = useAui();\n\n  const handleRemoveAttachment = useCallback(() => {\n    aui.attachment().remove();\n  }, [aui]);\n\n  return handleRemoveAttachment;\n};\n\nexport namespace AttachmentPrimitiveRemove {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useAttachmentRemove>;\n}\n\nexport const AttachmentPrimitiveRemove = createActionButton(\n  \"AttachmentPrimitive.Remove\",\n  useAttachmentRemove,\n);\n", "export { BranchPickerPrimitiveNext as Next } from \"./BranchPickerNext\";\nexport { BranchPickerPrimitivePrevious as Previous } from \"./BranchPickerPrevious\";\nexport { BranchPickerPrimitiveCount as Count } from \"./BranchPickerCount\";\nexport { BranchPickerPrimitiveNumber as Number } from \"./BranchPickerNumber\";\nexport { BranchPickerPrimitiveRoot as Root } from \"./BranchPickerRoot\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useBranchPickerNext = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread, message }) => {\n    // Disabled if no next branch\n    if (message.branchNumber >= message.branchCount) return true;\n\n    // Disabled if running and capability not supported\n    if (thread.isRunning && !thread.capabilities.switchBranchDuringRun) {\n      return true;\n    }\n\n    return false;\n  });\n\n  const callback = useCallback(() => {\n    aui.message().switchToBranch({ position: \"next\" });\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace BranchPickerPrimitiveNext {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the BranchPickerPrimitive.Next component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useBranchPickerNext>;\n}\n\n/**\n * A button component that navigates to the next branch in the message tree.\n *\n * This component automatically handles switching to the next available branch\n * and is disabled when there are no more branches to navigate to.\n *\n * @example\n * ```tsx\n * <BranchPickerPrimitive.Next>\n *   Next \n * </BranchPickerPrimitive.Next>\n * ```\n */\nexport const BranchPickerPrimitiveNext = createActionButton(\n  \"BranchPickerPrimitive.Next\",\n  useBranchPickerNext,\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\n/**\n * Hook that provides navigation to the previous branch functionality.\n *\n * This hook returns a callback function that switches to the previous branch\n * in the message branch tree, or null if there is no previous branch available.\n *\n * @returns A previous branch callback function, or null if navigation is disabled\n *\n * @example\n * ```tsx\n * function CustomPreviousButton() {\n *   const previous = useBranchPickerPrevious();\n *\n *   return (\n *     <button onClick={previous} disabled={!previous}>\n *       {previous ? \"Previous Branch\" : \"No Previous Branch\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useBranchPickerPrevious = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread, message }) => {\n    // Disabled if no previous branch\n    if (message.branchNumber <= 1) return true;\n\n    // Disabled if running and capability not supported\n    if (thread.isRunning && !thread.capabilities.switchBranchDuringRun) {\n      return true;\n    }\n\n    return false;\n  });\n\n  const callback = useCallback(() => {\n    aui.message().switchToBranch({ position: \"previous\" });\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace BranchPickerPrimitivePrevious {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the BranchPickerPrimitive.Previous component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useBranchPickerPrevious>;\n}\n\n/**\n * A button component that navigates to the previous branch in the message tree.\n *\n * This component automatically handles switching to the previous available branch\n * and is disabled when there are no previous branches to navigate to.\n *\n * @example\n * ```tsx\n * <BranchPickerPrimitive.Previous>\n *    Previous\n * </BranchPickerPrimitive.Previous>\n * ```\n */\nexport const BranchPickerPrimitivePrevious = createActionButton(\n  \"BranchPickerPrimitive.Previous\",\n  useBranchPickerPrevious,\n);\n", "\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nconst useBranchPickerCount = () => {\n  const branchCount = useAuiState(({ message }) => message.branchCount);\n  return branchCount;\n};\n\nexport namespace BranchPickerPrimitiveCount {\n  /**\n   * Props for the BranchPickerPrimitive.Count component.\n   * This component takes no props.\n   */\n  export type Props = Record<string, never>;\n}\n\n/**\n * A component that displays the total number of branches for the current message.\n *\n * This component renders the branch count as plain text, useful for showing\n * users how many alternative responses are available.\n *\n * @example\n * ```tsx\n * <div>\n *   Branch <BranchPickerPrimitive.Count /> of {totalBranches}\n * </div>\n * ```\n */\nexport const BranchPickerPrimitiveCount: FC<\n  BranchPickerPrimitiveCount.Props\n> = () => {\n  const branchCount = useBranchPickerCount();\n  return <>{branchCount}</>;\n};\n\nBranchPickerPrimitiveCount.displayName = \"BranchPickerPrimitive.Count\";\n", "\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nconst useBranchPickerNumber = () => {\n  const branchNumber = useAuiState(({ message }) => message.branchNumber);\n  return branchNumber;\n};\n\nexport namespace BranchPickerPrimitiveNumber {\n  export type Props = Record<string, never>;\n}\n\nexport const BranchPickerPrimitiveNumber: FC<\n  BranchPickerPrimitiveNumber.Props\n> = () => {\n  const branchNumber = useBranchPickerNumber();\n  return <>{branchNumber}</>;\n};\n\nBranchPickerPrimitiveNumber.displayName = \"BranchPickerPrimitive.Number\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { If } from \"../message\";\n\nexport namespace BranchPickerPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div> & {\n    /**\n     * Whether to hide the branch picker when there's only one branch available.\n     * When true, the component will only render when multiple branches exist.\n     * @default false\n     */\n    hideWhenSingleBranch?: boolean | undefined;\n  };\n}\n\n/**\n * The root container for branch picker components.\n *\n * This component provides a container for branch navigation controls,\n * with optional conditional rendering based on the number of available branches.\n * It integrates with the message branching system to allow users to navigate\n * between different response variations.\n *\n * @example\n * ```tsx\n * <BranchPickerPrimitive.Root hideWhenSingleBranch={true}>\n *   <BranchPickerPrimitive.Previous />\n *   <BranchPickerPrimitive.Count />\n *   <BranchPickerPrimitive.Next />\n * </BranchPickerPrimitive.Root>\n * ```\n */\nexport const BranchPickerPrimitiveRoot = forwardRef<\n  BranchPickerPrimitiveRoot.Element,\n  BranchPickerPrimitiveRoot.Props\n>(({ hideWhenSingleBranch, ...rest }, ref) => {\n  return (\n    <If hasBranches={hideWhenSingleBranch ? true : undefined}>\n      <Primitive.div {...rest} ref={ref} />\n    </If>\n  );\n});\n\nBranchPickerPrimitiveRoot.displayName = \"BranchPickerPrimitive.Root\";\n", "export { MessagePrimitiveRoot as Root } from \"./MessageRoot\";\nexport { MessagePrimitiveParts as Parts } from \"./MessageParts\";\nexport { MessagePrimitivePartByIndex as PartByIndex } from \"./MessageParts\";\nexport { MessagePrimitiveParts as Content } from \"./MessageParts\";\nexport { MessagePrimitiveIf as If } from \"./MessageIf\";\nexport { MessagePrimitiveAttachments as Attachments } from \"./MessageAttachments\";\nexport { MessagePrimitiveAttachmentByIndex as AttachmentByIndex } from \"./MessageAttachments\";\nexport { MessagePrimitiveError as Error } from \"./MessageError\";\nexport {\n  MessagePrimitiveUnstable_PartsGrouped as Unstable_PartsGrouped,\n  MessagePrimitiveUnstable_PartsGroupedByParentId as Unstable_PartsGroupedByParentId,\n} from \"./MessagePartsGrouped\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport { useManagedRef } from \"../../utils/hooks/useManagedRef\";\nimport { useSizeHandle } from \"../../utils/hooks/useSizeHandle\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useThreadViewport } from \"../../context/react/ThreadViewportContext\";\nimport { ThreadPrimitiveViewportSlack } from \"../thread/ThreadViewportSlack\";\n\nconst useIsHoveringRef = () => {\n  const aui = useAui();\n  const message = useAuiState(() => aui.message());\n\n  const callbackRef = useCallback(\n    (el: HTMLElement) => {\n      const handleMouseEnter = () => {\n        message.setIsHovering(true);\n      };\n      const handleMouseLeave = () => {\n        message.setIsHovering(false);\n      };\n\n      el.addEventListener(\"mouseenter\", handleMouseEnter);\n      el.addEventListener(\"mouseleave\", handleMouseLeave);\n\n      if (el.matches(\":hover\")) {\n        // TODO this is needed for SSR to work, figure out why\n        queueMicrotask(() => message.setIsHovering(true));\n      }\n\n      return () => {\n        el.removeEventListener(\"mouseenter\", handleMouseEnter);\n        el.removeEventListener(\"mouseleave\", handleMouseLeave);\n        message.setIsHovering(false);\n      };\n    },\n    [message],\n  );\n\n  return useManagedRef(callbackRef);\n};\n\n/**\n * Hook that registers the anchor user message as a content inset.\n * Only registers if: user message, at index messages.length-2, and last message is assistant.\n */\nconst useMessageViewportRef = () => {\n  const turnAnchor = useThreadViewport((s) => s.turnAnchor);\n  const registerUserHeight = useThreadViewport(\n    (s) => s.registerUserMessageHeight,\n  );\n\n  // inset rules:\n  // - the previous user message before the last assistant message registers its full height\n  const shouldRegisterAsInset = useAuiState(\n    ({ thread, message }) =>\n      turnAnchor === \"top\" &&\n      message.role === \"user\" &&\n      message.index === thread.messages.length - 2 &&\n      thread.messages.at(-1)?.role === \"assistant\",\n  );\n\n  const getHeight = useCallback((el: HTMLElement) => el.offsetHeight, []);\n\n  return useSizeHandle(\n    shouldRegisterAsInset ? registerUserHeight : null,\n    getHeight,\n  );\n};\n\nexport namespace MessagePrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  /**\n   * Props for the MessagePrimitive.Root component.\n   * Accepts all standard div element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\n/**\n * The root container component for a message.\n *\n * This component provides the foundational wrapper for message content and handles\n * hover state management for the message. It automatically tracks when the user\n * is hovering over the message, which can be used by child components like action bars.\n *\n * When `turnAnchor=\"top\"` is set on the viewport, this component\n * registers itself as the scroll anchor if it's the last user message.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.Root>\n *   <MessagePrimitive.Content />\n *   <ActionBarPrimitive.Root>\n *     <ActionBarPrimitive.Copy />\n *     <ActionBarPrimitive.Edit />\n *   </ActionBarPrimitive.Root>\n * </MessagePrimitive.Root>\n * ```\n */\nexport const MessagePrimitiveRoot = forwardRef<\n  MessagePrimitiveRoot.Element,\n  MessagePrimitiveRoot.Props\n>((props, forwardRef) => {\n  const isHoveringRef = useIsHoveringRef();\n  const anchorUserMessageRef = useMessageViewportRef();\n  const ref = useComposedRefs<HTMLDivElement>(\n    forwardRef,\n    isHoveringRef,\n    anchorUserMessageRef,\n  );\n\n  return (\n    <ThreadPrimitiveViewportSlack>\n      <Primitive.div {...props} ref={ref} />\n    </ThreadPrimitiveViewportSlack>\n  );\n});\n\nMessagePrimitiveRoot.displayName = \"MessagePrimitive.Root\";\n", "import { useCallback, useRef } from \"react\";\n\nexport const useManagedRef = <TNode>(\n  callback: (node: TNode) => (() => void) | void,\n) => {\n  const cleanupRef = useRef<(() => void) | void>(undefined);\n\n  const ref = useCallback(\n    (el: TNode | null) => {\n      // Call the previous cleanup function\n      if (cleanupRef.current) {\n        cleanupRef.current();\n      }\n\n      // Call the new callback and store its cleanup function\n      if (el) {\n        cleanupRef.current = callback(el);\n      }\n    },\n    [callback],\n  );\n\n  return ref;\n};\n", "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useManagedRef } from \"./useManagedRef\";\nimport type { SizeHandle } from \"../../context/stores/ThreadViewport\";\n\n/**\n * Hook that creates a ref for tracking element size via a SizeHandle.\n * Automatically sets up ResizeObserver and reports height changes.\n *\n * @param register - Function that returns a SizeHandle (e.g., registerContentInset)\n * @param getHeight - Optional function to compute height (defaults to el.offsetHeight)\n * @returns A ref callback to attach to the element\n */\nexport const useSizeHandle = (\n  register: (() => SizeHandle) | null | undefined,\n  getHeight?: (el: HTMLElement) => number,\n) => {\n  const callbackRef = useCallback(\n    (el: HTMLElement) => {\n      if (!register) return;\n\n      const sizeHandle = register();\n\n      const updateHeight = () => {\n        const height = getHeight ? getHeight(el) : el.offsetHeight;\n        sizeHandle.setHeight(height);\n      };\n\n      const ro = new ResizeObserver(updateHeight);\n      ro.observe(el);\n      updateHeight();\n\n      return () => {\n        ro.disconnect();\n        sizeHandle.unregister();\n      };\n    },\n    [register, getHeight],\n  );\n\n  return useManagedRef(callbackRef);\n};\n", "\"use client\";\n\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n  createContext,\n  type FC,\n  type ReactNode,\n  useCallback,\n  useContext,\n} from \"react\";\nimport { useThreadViewportStore } from \"../../context/react/ThreadViewportContext\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { useManagedRef } from \"../../utils/hooks/useManagedRef\";\n\nconst SlackNestingContext = createContext(false);\n\nconst parseCssLength = (value: string, element: HTMLElement): number => {\n  const match = value.match(/^([\\d.]+)(em|px|rem)$/);\n  if (!match) return 0;\n\n  const num = parseFloat(match[1]!);\n  const unit = match[2];\n\n  if (unit === \"px\") return num;\n  if (unit === \"em\") {\n    const fontSize = parseFloat(getComputedStyle(element).fontSize) || 16;\n    return num * fontSize;\n  }\n  if (unit === \"rem\") {\n    const rootFontSize =\n      parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;\n    return num * rootFontSize;\n  }\n  return 0;\n};\n\nexport type ThreadViewportSlackProps = {\n  /** Threshold at which the user message height clamps to the offset */\n  fillClampThreshold?: string;\n  /** Offset used when clamping large user messages */\n  fillClampOffset?: string;\n  children: ReactNode;\n};\n\n/**\n * A slot component that provides minimum height to enable scroll anchoring.\n *\n * When using `turnAnchor=\"top\"`, this component ensures there is\n * enough scroll room below the anchor point (last user message) for it to scroll\n * to the top of the viewport. The min-height is applied only to the last\n * assistant message.\n *\n * This component is used internally by MessagePrimitive.Root.\n */\nexport const ThreadPrimitiveViewportSlack: FC<ThreadViewportSlackProps> = ({\n  children,\n  fillClampThreshold = \"10em\",\n  fillClampOffset = \"6em\",\n}) => {\n  const shouldApplySlack = useAuiState(\n    // only add slack to the last assistant message following a user message (valid turn)\n    ({ thread, message }) =>\n      message.isLast &&\n      message.role === \"assistant\" &&\n      message.index >= 1 &&\n      thread.messages.at(message.index - 1)?.role === \"user\",\n  );\n  const threadViewportStore = useThreadViewportStore({ optional: true });\n  const isNested = useContext(SlackNestingContext);\n\n  const callback = useCallback(\n    (el: HTMLElement) => {\n      if (!threadViewportStore || isNested) return;\n\n      const updateMinHeight = () => {\n        const state = threadViewportStore.getState();\n        if (state.turnAnchor === \"top\" && shouldApplySlack) {\n          const { viewport, inset, userMessage } = state.height;\n          const threshold = parseCssLength(fillClampThreshold, el);\n          const offset = parseCssLength(fillClampOffset, el);\n          const clampAdjustment =\n            userMessage <= threshold ? userMessage : offset;\n\n          const minHeight = Math.max(0, viewport - inset - clampAdjustment);\n          el.style.minHeight = `${minHeight}px`;\n          el.style.flexShrink = \"0\";\n          el.style.transition = \"min-height 0s\";\n        } else {\n          el.style.minHeight = \"\";\n          el.style.flexShrink = \"\";\n          el.style.transition = \"\";\n        }\n      };\n\n      updateMinHeight();\n      return threadViewportStore.subscribe(updateMinHeight);\n    },\n    [\n      threadViewportStore,\n      shouldApplySlack,\n      isNested,\n      fillClampThreshold,\n      fillClampOffset,\n    ],\n  );\n\n  const ref = useManagedRef<HTMLElement>(callback);\n\n  return (\n    <SlackNestingContext.Provider value={true}>\n      <Slot ref={ref}>{children}</Slot>\n    </SlackNestingContext.Provider>\n  );\n};\n\nThreadPrimitiveViewportSlack.displayName = \"ThreadPrimitive.ViewportSlack\";\n", "\"use client\";\n\nimport {\n  type ComponentType,\n  type FC,\n  memo,\n  PropsWithChildren,\n  useMemo,\n} from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\nimport {\n  PartByIndexProvider,\n  TextMessagePartProvider,\n} from \"../../context/providers\";\nimport { ChainOfThoughtByIndicesProvider } from \"../../context/providers/ChainOfThoughtByIndicesProvider\";\nimport { MessagePartPrimitiveText } from \"../messagePart/MessagePartText\";\nimport { MessagePartPrimitiveImage } from \"../messagePart/MessagePartImage\";\nimport type {\n  Unstable_AudioMessagePartComponent,\n  EmptyMessagePartComponent,\n  TextMessagePartComponent,\n  ImageMessagePartComponent,\n  SourceMessagePartComponent,\n  ToolCallMessagePartComponent,\n  ToolCallMessagePartProps,\n  FileMessagePartComponent,\n  ReasoningMessagePartComponent,\n  ReasoningGroupComponent,\n} from \"../../types/MessagePartComponentTypes\";\nimport { MessagePartPrimitiveInProgress } from \"../messagePart/MessagePartInProgress\";\nimport { MessagePartStatus } from \"../../types/AssistantTypes\";\nimport { useShallow } from \"zustand/shallow\";\n\ntype MessagePartRange =\n  | { type: \"single\"; index: number }\n  | { type: \"toolGroup\"; startIndex: number; endIndex: number }\n  | { type: \"reasoningGroup\"; startIndex: number; endIndex: number }\n  | { type: \"chainOfThoughtGroup\"; startIndex: number; endIndex: number };\n\n/**\n * Creates a group state manager for a specific part type.\n * Returns functions to start, end, and finalize groups.\n */\nconst createGroupState = <\n  T extends \"toolGroup\" | \"reasoningGroup\" | \"chainOfThoughtGroup\",\n>(\n  groupType: T,\n) => {\n  let start = -1;\n\n  return {\n    startGroup: (index: number) => {\n      if (start === -1) {\n        start = index;\n      }\n    },\n    endGroup: (endIndex: number, ranges: MessagePartRange[]) => {\n      if (start !== -1) {\n        ranges.push({\n          type: groupType,\n          startIndex: start,\n          endIndex,\n        } as MessagePartRange);\n        start = -1;\n      }\n    },\n    finalize: (endIndex: number, ranges: MessagePartRange[]) => {\n      if (start !== -1) {\n        ranges.push({\n          type: groupType,\n          startIndex: start,\n          endIndex,\n        } as MessagePartRange);\n      }\n    },\n  };\n};\n\n/**\n * Groups consecutive tool-call and reasoning message parts into ranges.\n * Always groups tool calls and reasoning parts, even if there's only one.\n * When useChainOfThought is true, groups tool-call and reasoning parts together.\n */\nconst groupMessageParts = (\n  messageTypes: readonly string[],\n  useChainOfThought: boolean,\n): MessagePartRange[] => {\n  const ranges: MessagePartRange[] = [];\n\n  if (useChainOfThought) {\n    const chainOfThoughtGroup = createGroupState(\"chainOfThoughtGroup\");\n\n    for (let i = 0; i < messageTypes.length; i++) {\n      const type = messageTypes[i];\n\n      if (type === \"tool-call\" || type === \"reasoning\") {\n        chainOfThoughtGroup.startGroup(i);\n      } else {\n        chainOfThoughtGroup.endGroup(i - 1, ranges);\n        ranges.push({ type: \"single\", index: i });\n      }\n    }\n\n    chainOfThoughtGroup.finalize(messageTypes.length - 1, ranges);\n  } else {\n    const toolGroup = createGroupState(\"toolGroup\");\n    const reasoningGroup = createGroupState(\"reasoningGroup\");\n\n    for (let i = 0; i < messageTypes.length; i++) {\n      const type = messageTypes[i];\n\n      if (type === \"tool-call\") {\n        reasoningGroup.endGroup(i - 1, ranges);\n        toolGroup.startGroup(i);\n      } else if (type === \"reasoning\") {\n        toolGroup.endGroup(i - 1, ranges);\n        reasoningGroup.startGroup(i);\n      } else {\n        toolGroup.endGroup(i - 1, ranges);\n        reasoningGroup.endGroup(i - 1, ranges);\n        ranges.push({ type: \"single\", index: i });\n      }\n    }\n\n    toolGroup.finalize(messageTypes.length - 1, ranges);\n    reasoningGroup.finalize(messageTypes.length - 1, ranges);\n  }\n\n  return ranges;\n};\n\nconst useMessagePartsGroups = (\n  useChainOfThought: boolean,\n): MessagePartRange[] => {\n  const messageTypes = useAuiState(\n    useShallow((s) => s.message.parts.map((c: any) => c.type)),\n  );\n\n  return useMemo(() => {\n    if (messageTypes.length === 0) {\n      return [];\n    }\n    return groupMessageParts(messageTypes, useChainOfThought);\n  }, [messageTypes, useChainOfThought]);\n};\n\nexport namespace MessagePrimitiveParts {\n  type BaseComponents = {\n    /** Component for rendering empty messages */\n    Empty?: EmptyMessagePartComponent | undefined;\n    /** Component for rendering text content */\n    Text?: TextMessagePartComponent | undefined;\n    /** Component for rendering source content */\n    Source?: SourceMessagePartComponent | undefined;\n    /** Component for rendering image content */\n    Image?: ImageMessagePartComponent | undefined;\n    /** Component for rendering file content */\n    File?: FileMessagePartComponent | undefined;\n    /** Component for rendering audio content (experimental) */\n    Unstable_Audio?: Unstable_AudioMessagePartComponent | undefined;\n  };\n\n  type ToolsConfig =\n    | {\n        /** Map of tool names to their specific components */\n        by_name?:\n          | Record<string, ToolCallMessagePartComponent | undefined>\n          | undefined;\n        /** Fallback component for unregistered tools */\n        Fallback?: ComponentType<ToolCallMessagePartProps> | undefined;\n      }\n    | {\n        /** Override component that handles all tool calls */\n        Override: ComponentType<ToolCallMessagePartProps>;\n      };\n\n  /**\n   * Standard component configuration for rendering reasoning and tool-call parts\n   * individually (with optional grouping).\n   *\n   * Cannot be combined with `ChainOfThought`.\n   */\n  type StandardComponents = BaseComponents & {\n    /** Component for rendering reasoning content (typically hidden) */\n    Reasoning?: ReasoningMessagePartComponent | undefined;\n    /** Configuration for tool call rendering */\n    tools?: ToolsConfig | undefined;\n\n    /**\n     * Component for rendering grouped consecutive tool calls.\n     *\n     * When provided, this component will automatically wrap consecutive tool-call\n     * message parts, allowing you to create collapsible sections, custom styling,\n     * or other grouped presentations for multiple tool calls.\n     *\n     * The component receives:\n     * - `startIndex`: The index of the first tool call in the group\n     * - `endIndex`: The index of the last tool call in the group\n     * - `children`: The rendered tool call components\n     *\n     * @example\n     * ```tsx\n     * // Collapsible tool group\n     * ToolGroup: ({ startIndex, endIndex, children }) => (\n     *   <details className=\"tool-group\">\n     *     <summary>\n     *       {endIndex - startIndex + 1} tool calls\n     *     </summary>\n     *     <div className=\"tool-group-content\">\n     *       {children}\n     *     </div>\n     *   </details>\n     * )\n     * ```\n     *\n     * @param startIndex - Index of the first tool call in the group\n     * @param endIndex - Index of the last tool call in the group\n     * @param children - Rendered tool call components to display within the group\n     *\n     * @deprecated This feature is still experimental and subject to change.\n     */\n    ToolGroup?: ComponentType<\n      PropsWithChildren<{ startIndex: number; endIndex: number }>\n    >;\n\n    /**\n     * Component for rendering grouped reasoning parts.\n     *\n     * When provided, this component will automatically wrap reasoning message parts\n     * (one or more consecutive) in a group container. Each reasoning part inside\n     * renders its own text independently - no text merging occurs.\n     *\n     * The component receives:\n     * - `startIndex`: The index of the first reasoning part in the group\n     * - `endIndex`: The index of the last reasoning part in the group\n     * - `children`: The rendered Reasoning components (one per part)\n     *\n     * @example\n     * ```tsx\n     * // Collapsible reasoning group\n     * ReasoningGroup: ({ children }) => (\n     *   <details className=\"reasoning-group\">\n     *     <summary>Reasoning</summary>\n     *     <div className=\"reasoning-content\">\n     *       {children}\n     *     </div>\n     *   </details>\n     * )\n     * ```\n     *\n     * @param startIndex - Index of the first reasoning part in the group\n     * @param endIndex - Index of the last reasoning part in the group\n     * @param children - Rendered reasoning part components\n     */\n    ReasoningGroup?: ReasoningGroupComponent;\n\n    ChainOfThought?: never;\n  };\n\n  /**\n   * Chain of thought component configuration.\n   *\n   * When `ChainOfThought` is set, it takes control of rendering ALL reasoning and\n   * tool-call parts in the message. The `Reasoning`, `tools`, `ReasoningGroup`, and\n   * `ToolGroup` components cannot be used alongside it.\n   *\n   * The component is automatically wrapped in a ChainOfThoughtByIndicesProvider\n   * that sets up the chainOfThought client scope with the correct parts.\n   *\n   * @example\n   * ```tsx\n   * // Chain of thought with accordion\n   * ChainOfThought: () => (\n   *   <ChainOfThoughtPrimitive.Root>\n   *     <ChainOfThoughtPrimitive.AccordionTrigger>\n   *       Toggle reasoning\n   *     </ChainOfThoughtPrimitive.AccordionTrigger>\n   *     <ChainOfThoughtPrimitive.Parts />\n   *   </ChainOfThoughtPrimitive.Root>\n   * )\n   * ```\n   */\n  type ChainOfThoughtComponents = BaseComponents & {\n    ChainOfThought: ComponentType;\n\n    Reasoning?: never;\n    tools?: never;\n    ToolGroup?: never;\n    ReasoningGroup?: never;\n  };\n\n  export type Props = {\n    /**\n     * Component configuration for rendering different types of message content.\n     *\n     * You can provide custom components for each content type (text, image, file, etc.)\n     * and configure tool rendering behavior. If not provided, default components will be used.\n     *\n     * Use either `Reasoning`/`tools`/`ToolGroup`/`ReasoningGroup` for standard rendering,\n     * or `ChainOfThought` to group all reasoning and tool-call parts into a single\n     * collapsible component. These two modes are mutually exclusive.\n     */\n    components?: StandardComponents | ChainOfThoughtComponents | undefined;\n    /**\n     * When enabled, shows the Empty component if the last part in the message\n     * is anything other than Text or Reasoning.\n     *\n     * This can be useful to ensure there's always a visible element at the end\n     * of messages that end with non-text content like tool calls or images.\n     *\n     * @experimental This API is experimental and may change in future versions.\n     * @default true\n     */\n    unstable_showEmptyOnNonTextEnd?: boolean | undefined;\n  };\n}\n\nconst ToolUIDisplay = ({\n  Fallback,\n  ...props\n}: {\n  Fallback: ToolCallMessagePartComponent | undefined;\n} & ToolCallMessagePartProps) => {\n  const Render = useAuiState(({ tools }) => {\n    const Render = tools.tools[props.toolName] ?? Fallback;\n    if (Array.isArray(Render)) return Render[0] ?? Fallback;\n    return Render;\n  });\n  if (!Render) return null;\n  return <Render {...props} />;\n};\n\nconst defaultComponents = {\n  Text: () => (\n    <p style={{ whiteSpace: \"pre-line\" }}>\n      <MessagePartPrimitiveText />\n      <MessagePartPrimitiveInProgress>\n        <span style={{ fontFamily: \"revert\" }}>{\" \\u25CF\"}</span>\n      </MessagePartPrimitiveInProgress>\n    </p>\n  ),\n  Reasoning: () => null,\n  Source: () => null,\n  Image: () => <MessagePartPrimitiveImage />,\n  File: () => null,\n  Unstable_Audio: () => null,\n  ToolGroup: ({ children }) => children,\n  ReasoningGroup: ({ children }) => children,\n} satisfies MessagePrimitiveParts.Props[\"components\"];\n\ntype MessagePartComponentProps = {\n  components: MessagePrimitiveParts.Props[\"components\"];\n};\n\nexport const MessagePartComponent: FC<MessagePartComponentProps> = ({\n  components: {\n    Text = defaultComponents.Text,\n    Reasoning = defaultComponents.Reasoning,\n    Image = defaultComponents.Image,\n    Source = defaultComponents.Source,\n    File = defaultComponents.File,\n    Unstable_Audio: Audio = defaultComponents.Unstable_Audio,\n    tools = {},\n  } = {},\n}) => {\n  const aui = useAui();\n  const part = useAuiState(({ part }) => part);\n\n  const type = part.type;\n  if (type === \"tool-call\") {\n    const addResult = aui.part().addToolResult;\n    const resume = aui.part().resumeToolCall;\n    if (\"Override\" in tools)\n      return <tools.Override {...part} addResult={addResult} resume={resume} />;\n    const Tool = tools.by_name?.[part.toolName] ?? tools.Fallback;\n    return (\n      <ToolUIDisplay\n        {...part}\n        Fallback={Tool}\n        addResult={addResult}\n        resume={resume}\n      />\n    );\n  }\n\n  if (part.status?.type === \"requires-action\")\n    throw new Error(\"Encountered unexpected requires-action status\");\n\n  switch (type) {\n    case \"text\":\n      return <Text {...part} />;\n\n    case \"reasoning\":\n      return <Reasoning {...part} />;\n\n    case \"source\":\n      return <Source {...part} />;\n\n    case \"image\":\n      return <Image {...part} />;\n\n    case \"file\":\n      return <File {...part} />;\n\n    case \"audio\":\n      return <Audio {...part} />;\n\n    case \"data\":\n      return null;\n\n    default:\n      const unhandledType: never = type;\n      throw new Error(`Unknown message part type: ${unhandledType}`);\n  }\n};\n\nexport namespace MessagePrimitivePartByIndex {\n  export type Props = {\n    index: number;\n    components: MessagePrimitiveParts.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single message part at the specified index.\n *\n * This component provides direct access to render a specific message part\n * within the current message context, using the provided component configuration.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.PartByIndex\n *   index={0}\n *   components={{\n *     Text: MyTextComponent,\n *     Image: MyImageComponent\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitivePartByIndex: FC<MessagePrimitivePartByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <PartByIndexProvider index={index}>\n          <MessagePartComponent components={components} />\n        </PartByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components?.Text === next.components?.Text &&\n      prev.components?.Reasoning === next.components?.Reasoning &&\n      prev.components?.Source === next.components?.Source &&\n      prev.components?.Image === next.components?.Image &&\n      prev.components?.File === next.components?.File &&\n      prev.components?.Unstable_Audio === next.components?.Unstable_Audio &&\n      prev.components?.tools === next.components?.tools &&\n      prev.components?.ToolGroup === next.components?.ToolGroup &&\n      prev.components?.ReasoningGroup === next.components?.ReasoningGroup,\n  );\n\nMessagePrimitivePartByIndex.displayName = \"MessagePrimitive.PartByIndex\";\n\nconst EmptyPartFallback: FC<{\n  status: MessagePartStatus;\n  component: TextMessagePartComponent;\n}> = ({ status, component: Component }) => {\n  return (\n    <TextMessagePartProvider text=\"\" isRunning={status.type === \"running\"}>\n      <Component type=\"text\" text=\"\" status={status} />\n    </TextMessagePartProvider>\n  );\n};\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nconst EmptyPartsImpl: FC<MessagePartComponentProps> = ({ components }) => {\n  const status = useAuiState(\n    (s) => (s.message.status ?? COMPLETE_STATUS) as MessagePartStatus,\n  );\n\n  if (components?.Empty) return <components.Empty status={status} />;\n\n  return (\n    <EmptyPartFallback\n      status={status}\n      component={components?.Text ?? defaultComponents.Text}\n    />\n  );\n};\n\nconst EmptyParts = memo(\n  EmptyPartsImpl,\n  (prev, next) =>\n    prev.components?.Empty === next.components?.Empty &&\n    prev.components?.Text === next.components?.Text,\n);\n\nconst ConditionalEmptyImpl: FC<{\n  components: MessagePrimitiveParts.Props[\"components\"];\n  enabled: boolean;\n}> = ({ components, enabled }) => {\n  const shouldShowEmpty = useAuiState(({ message }) => {\n    if (!enabled) return false;\n    if (message.parts.length === 0) return false;\n\n    const lastPart = message.parts[message.parts.length - 1];\n    return lastPart?.type !== \"text\" && lastPart?.type !== \"reasoning\";\n  });\n\n  if (!shouldShowEmpty) return null;\n  return <EmptyParts components={components} />;\n};\n\nconst ConditionalEmpty = memo(\n  ConditionalEmptyImpl,\n  (prev, next) =>\n    prev.enabled === next.enabled &&\n    prev.components?.Empty === next.components?.Empty &&\n    prev.components?.Text === next.components?.Text,\n);\n\n/**\n * Renders the parts of a message with support for multiple content types.\n *\n * This component automatically handles different types of message content including\n * text, images, files, tool calls, and more. It provides a flexible component\n * system for customizing how each content type is rendered.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.Parts\n *   components={{\n *     Text: ({ text }) => <p className=\"message-text\">{text}</p>,\n *     Image: ({ image }) => <img src={image} alt=\"Message image\" />,\n *     tools: {\n *       by_name: {\n *         calculator: CalculatorTool,\n *         weather: WeatherTool,\n *       },\n *       Fallback: DefaultToolComponent\n *     }\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitiveParts: FC<MessagePrimitiveParts.Props> = ({\n  components,\n  unstable_showEmptyOnNonTextEnd = true,\n}) => {\n  const contentLength = useAuiState(({ message }) => message.parts.length);\n  const useChainOfThought = !!components?.ChainOfThought;\n  const messageRanges = useMessagePartsGroups(useChainOfThought);\n\n  const partsElements = useMemo(() => {\n    if (contentLength === 0) {\n      return <EmptyParts components={components} />;\n    }\n\n    return messageRanges.map((range) => {\n      if (range.type === \"single\") {\n        return (\n          <MessagePrimitivePartByIndex\n            key={range.index}\n            index={range.index}\n            components={components}\n          />\n        );\n      } else if (range.type === \"chainOfThoughtGroup\") {\n        const ChainOfThoughtComponent = components?.ChainOfThought;\n        if (!ChainOfThoughtComponent) return null;\n        return (\n          <ChainOfThoughtByIndicesProvider\n            key={`chainOfThought-${range.startIndex}`}\n            startIndex={range.startIndex}\n            endIndex={range.endIndex}\n          >\n            <ChainOfThoughtComponent />\n          </ChainOfThoughtByIndicesProvider>\n        );\n      } else if (range.type === \"toolGroup\") {\n        const ToolGroupComponent =\n          components?.ToolGroup ?? defaultComponents.ToolGroup;\n        return (\n          <ToolGroupComponent\n            key={`tool-${range.startIndex}`}\n            startIndex={range.startIndex}\n            endIndex={range.endIndex}\n          >\n            {Array.from(\n              { length: range.endIndex - range.startIndex + 1 },\n              (_, i) => (\n                <MessagePrimitivePartByIndex\n                  key={i}\n                  index={range.startIndex + i}\n                  components={components}\n                />\n              ),\n            )}\n          </ToolGroupComponent>\n        );\n      } else {\n        // reasoningGroup\n        const ReasoningGroupComponent =\n          components?.ReasoningGroup ?? defaultComponents.ReasoningGroup;\n        return (\n          <ReasoningGroupComponent\n            key={`reasoning-${range.startIndex}`}\n            startIndex={range.startIndex}\n            endIndex={range.endIndex}\n          >\n            {Array.from(\n              { length: range.endIndex - range.startIndex + 1 },\n              (_, i) => (\n                <MessagePrimitivePartByIndex\n                  key={i}\n                  index={range.startIndex + i}\n                  components={components}\n                />\n              ),\n            )}\n          </ReasoningGroupComponent>\n        );\n      }\n    });\n  }, [messageRanges, components, contentLength]);\n\n  return (\n    <>\n      {partsElements}\n      <ConditionalEmpty\n        components={components}\n        enabled={unstable_showEmptyOnNonTextEnd}\n      />\n    </>\n  );\n};\n\nMessagePrimitiveParts.displayName = \"MessagePrimitive.Parts\";\n", "import { resource, tapMemo, tapState } from \"@assistant-ui/tap\";\nimport { type ClientOutput } from \"@assistant-ui/store\";\nimport type {\n  ChainOfThoughtState,\n  ChainOfThoughtPart,\n} from \"../types/scopes/chainOfThought\";\nimport type { MessagePartStatus } from \"../types/AssistantTypes\";\nimport type { PartMethods } from \"../types/scopes/part\";\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nexport const ChainOfThoughtClient = resource(\n  ({\n    parts,\n    getMessagePart,\n  }: {\n    parts: readonly ChainOfThoughtPart[];\n    getMessagePart: (selector: { index: number }) => PartMethods;\n  }): ClientOutput<\"chainOfThought\"> => {\n    const [collapsed, setCollapsed] = tapState(true);\n\n    const status = tapMemo(() => {\n      const lastPart = parts[parts.length - 1];\n      return lastPart?.status ?? COMPLETE_STATUS;\n    }, [parts]);\n\n    const state = tapMemo<ChainOfThoughtState>(\n      () => ({ parts, collapsed, status }),\n      [parts, collapsed, status],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setCollapsed,\n        part: getMessagePart,\n      },\n    };\n  },\n);\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, useAuiState, AuiProvider } from \"@assistant-ui/store\";\nimport { ChainOfThoughtClient } from \"../../client/ChainOfThoughtClient\";\nimport type { ChainOfThoughtPart } from \"../../types/scopes/chainOfThought\";\n\nexport const ChainOfThoughtByIndicesProvider: FC<\n  PropsWithChildren<{\n    startIndex: number;\n    endIndex: number;\n  }>\n> = ({ startIndex, endIndex, children }) => {\n  const parts = useAuiState(({ message }) => message.parts).slice(\n    startIndex,\n    endIndex + 1,\n  ) as ChainOfThoughtPart[];\n\n  const parentAui = useAui();\n\n  const aui = useAui({\n    chainOfThought: ChainOfThoughtClient({\n      parts,\n      getMessagePart: ({ index }) => {\n        if (index < 0 || index >= parts.length) {\n          throw new Error(\n            `ChainOfThought part index ${index} is out of bounds (0..${parts.length - 1})`,\n          );\n        }\n        return parentAui.message().part({ index: startIndex + index });\n      },\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  ElementType,\n} from \"react\";\nimport { useMessagePartText } from \"./useMessagePartText\";\nimport { useSmooth } from \"../../utils/smooth/useSmooth\";\n\nexport namespace MessagePartPrimitiveText {\n  export type Element = ComponentRef<typeof Primitive.span>;\n  export type Props = Omit<\n    ComponentPropsWithoutRef<typeof Primitive.span>,\n    \"children\" | \"asChild\"\n  > & {\n    /**\n     * Whether to enable smooth text streaming animation.\n     * When enabled, text appears with a typing effect as it streams in.\n     * @default true\n     */\n    smooth?: boolean;\n    /**\n     * The HTML element or React component to render as.\n     * @default \"span\"\n     */\n    component?: ElementType;\n  };\n}\n\n/**\n * Renders the text content of a message part with optional smooth streaming.\n *\n * This component displays text content from the current message part context,\n * with support for smooth streaming animation that shows text appearing\n * character by character as it's generated.\n *\n * @example\n * ```tsx\n * <MessagePartPrimitive.Text\n *   smooth={true}\n *   component=\"p\"\n *   className=\"message-text\"\n * />\n * ```\n */\nexport const MessagePartPrimitiveText = forwardRef<\n  MessagePartPrimitiveText.Element,\n  MessagePartPrimitiveText.Props\n>(({ smooth = true, component: Component = \"span\", ...rest }, forwardedRef) => {\n  const { text, status } = useSmooth(useMessagePartText(), smooth);\n\n  return (\n    <Component data-status={status.type} {...rest} ref={forwardedRef}>\n      {text}\n    </Component>\n  );\n});\n\nMessagePartPrimitiveText.displayName = \"MessagePartPrimitive.Text\";\n", "\"use client\";\n\nimport { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { TextMessagePart, ReasoningMessagePart } from \"../../types\";\n\nexport const useMessagePartText = () => {\n  const text = useAuiState(({ part }) => {\n    if (part.type !== \"text\" && part.type !== \"reasoning\")\n      throw new Error(\n        \"MessagePartText can only be used inside text or reasoning message parts.\",\n      );\n\n    return part as MessagePartState & (TextMessagePart | ReasoningMessagePart);\n  });\n\n  return text;\n};\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useMessagePartImage } from \"./useMessagePartImage\";\n\nexport namespace MessagePartPrimitiveImage {\n  export type Element = ComponentRef<typeof Primitive.img>;\n  /**\n   * Props for the MessagePartPrimitive.Image component.\n   * Accepts all standard img element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.img>;\n}\n\n/**\n * Renders an image from the current message part context.\n *\n * This component displays image content from the current message part,\n * automatically setting the src attribute from the message part's image data.\n *\n * @example\n * ```tsx\n * <MessagePartPrimitive.Image\n *   alt=\"Generated image\"\n *   className=\"message-image\"\n *   style={{ maxWidth: '100%' }}\n * />\n * ```\n */\nexport const MessagePartPrimitiveImage = forwardRef<\n  MessagePartPrimitiveImage.Element,\n  MessagePartPrimitiveImage.Props\n>((props, forwardedRef) => {\n  const { image } = useMessagePartImage();\n  return <Primitive.img src={image} {...props} ref={forwardedRef} />;\n});\n\nMessagePartPrimitiveImage.displayName = \"MessagePartPrimitive.Image\";\n", "\"use client\";\n\nimport { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { ImageMessagePart } from \"../../types\";\n\nexport const useMessagePartImage = () => {\n  const image = useAuiState(({ part }) => {\n    if (part.type !== \"image\")\n      throw new Error(\n        \"MessagePartImage can only be used inside image message parts.\",\n      );\n\n    return part as MessagePartState & ImageMessagePart;\n  });\n\n  return image;\n};\n", "\"use client\";\n\nimport { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace MessagePartPrimitiveInProgress {\n  export type Props = PropsWithChildren;\n}\n\n// TODO should this be renamed to IsRunning?\nexport const MessagePartPrimitiveInProgress: FC<\n  MessagePartPrimitiveInProgress.Props\n> = ({ children }) => {\n  const isInProgress = useAuiState(\n    ({ part }) => part.status.type === \"running\",\n  );\n\n  return isInProgress ? children : null;\n};\n\nMessagePartPrimitiveInProgress.displayName = \"MessagePartPrimitive.InProgress\";\n", "\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport type { RequireAtLeastOne } from \"../../utils/RequireAtLeastOne\";\n\ntype MessageIfFilters = {\n  user: boolean | undefined;\n  assistant: boolean | undefined;\n  system: boolean | undefined;\n  hasBranches: boolean | undefined;\n  copied: boolean | undefined;\n  lastOrHover: boolean | undefined;\n  last: boolean | undefined;\n  speaking: boolean | undefined;\n  hasAttachments: boolean | undefined;\n  hasContent: boolean | undefined;\n  submittedFeedback: \"positive\" | \"negative\" | null | undefined;\n};\ntype UseMessageIfProps = RequireAtLeastOne<MessageIfFilters>;\n\nconst useMessageIf = (props: UseMessageIfProps) => {\n  return useAuiState(({ message }) => {\n    const {\n      role,\n      attachments,\n      parts,\n      branchCount,\n      isLast,\n      speech,\n      isCopied,\n      isHovering,\n    } = message;\n\n    if (props.hasBranches === true && branchCount < 2) return false;\n\n    if (props.user && role !== \"user\") return false;\n    if (props.assistant && role !== \"assistant\") return false;\n    if (props.system && role !== \"system\") return false;\n\n    if (props.lastOrHover === true && !isHovering && !isLast) return false;\n    if (props.last !== undefined && props.last !== isLast) return false;\n\n    if (props.copied === true && !isCopied) return false;\n    if (props.copied === false && isCopied) return false;\n\n    if (props.speaking === true && speech == null) return false;\n    if (props.speaking === false && speech != null) return false;\n\n    if (\n      props.hasAttachments === true &&\n      (role !== \"user\" || !attachments?.length)\n    )\n      return false;\n    if (\n      props.hasAttachments === false &&\n      role === \"user\" &&\n      !!attachments?.length\n    )\n      return false;\n\n    if (props.hasContent === true && parts.length === 0) return false;\n    if (props.hasContent === false && parts.length > 0) return false;\n\n    if (\n      props.submittedFeedback !== undefined &&\n      (message.metadata.submittedFeedback?.type ?? null) !==\n        props.submittedFeedback\n    )\n      return false;\n\n    return true;\n  });\n};\n\nexport namespace MessagePrimitiveIf {\n  export type Props = PropsWithChildren<UseMessageIfProps>;\n}\n\n/**\n * @deprecated Use `<AuiIf condition={({ message }) => ...} />` instead.\n */\nexport const MessagePrimitiveIf: FC<MessagePrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useMessageIf(query);\n  return result ? children : null;\n};\n\nMessagePrimitiveIf.displayName = \"MessagePrimitive.If\";\n", "\"use client\";\n\nimport { ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { MessageAttachmentByIndexProvider } from \"../../context/providers\";\nimport { CompleteAttachment } from \"../../types\";\n\nexport namespace MessagePrimitiveAttachments {\n  export type Props = {\n    components:\n      | {\n          Image?: ComponentType | undefined;\n          Document?: ComponentType | undefined;\n          File?: ComponentType | undefined;\n          Attachment?: ComponentType | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst getComponent = (\n  components: MessagePrimitiveAttachments.Props[\"components\"],\n  attachment: CompleteAttachment,\n) => {\n  const type = attachment.type;\n  switch (type) {\n    case \"image\":\n      return components?.Image ?? components?.Attachment;\n    case \"document\":\n      return components?.Document ?? components?.Attachment;\n    case \"file\":\n      return components?.File ?? components?.Attachment;\n    default:\n      const _exhaustiveCheck: never = type;\n      throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n  }\n};\n\nconst AttachmentComponent: FC<{\n  components: MessagePrimitiveAttachments.Props[\"components\"];\n}> = ({ components }) => {\n  const attachment = useAuiState(({ attachment }) => attachment);\n  if (!attachment) return null;\n\n  const Component = getComponent(components, attachment as CompleteAttachment);\n  if (!Component) return null;\n  return <Component />;\n};\n\nexport namespace MessagePrimitiveAttachmentByIndex {\n  export type Props = {\n    index: number;\n    components?: MessagePrimitiveAttachments.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single attachment at the specified index within the current message.\n *\n * This component provides direct access to render a specific attachment\n * from the message's attachment list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.AttachmentByIndex\n *   index={0}\n *   components={{\n *     Image: MyImageAttachment,\n *     Document: MyDocumentAttachment\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitiveAttachmentByIndex: FC<MessagePrimitiveAttachmentByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <MessageAttachmentByIndexProvider index={index}>\n          <AttachmentComponent components={components} />\n        </MessageAttachmentByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components?.Image === next.components?.Image &&\n      prev.components?.Document === next.components?.Document &&\n      prev.components?.File === next.components?.File &&\n      prev.components?.Attachment === next.components?.Attachment,\n  );\n\nMessagePrimitiveAttachmentByIndex.displayName =\n  \"MessagePrimitive.AttachmentByIndex\";\n\nexport const MessagePrimitiveAttachments: FC<\n  MessagePrimitiveAttachments.Props\n> = ({ components }) => {\n  const attachmentsCount = useAuiState(({ message }) => {\n    if (message.role !== \"user\") return 0;\n    return message.attachments.length;\n  });\n\n  const attachmentElements = useMemo(() => {\n    return Array.from({ length: attachmentsCount }, (_, index) => (\n      <MessagePrimitiveAttachmentByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [attachmentsCount, components]);\n\n  return attachmentElements;\n};\n\nMessagePrimitiveAttachments.displayName = \"MessagePrimitive.Attachments\";\n", "\"use client\";\n\nimport { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport const MessagePrimitiveError: FC<PropsWithChildren> = ({ children }) => {\n  const hasError = useAuiState(\n    ({ message }) =>\n      message.status?.type === \"incomplete\" &&\n      message.status.reason === \"error\",\n  );\n  return hasError ? children : null;\n};\n\nMessagePrimitiveError.displayName = \"MessagePrimitive.Error\";\n", "\"use client\";\n\nimport {\n  type ComponentType,\n  type FC,\n  memo,\n  PropsWithChildren,\n  useMemo,\n} from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\nimport {\n  PartByIndexProvider,\n  TextMessagePartProvider,\n} from \"../../context/providers\";\nimport { MessagePartPrimitiveText } from \"../messagePart/MessagePartText\";\nimport { MessagePartPrimitiveImage } from \"../messagePart/MessagePartImage\";\nimport type {\n  Unstable_AudioMessagePartComponent,\n  EmptyMessagePartComponent,\n  TextMessagePartComponent,\n  ImageMessagePartComponent,\n  SourceMessagePartComponent,\n  ToolCallMessagePartComponent,\n  ToolCallMessagePartProps,\n  FileMessagePartComponent,\n  ReasoningMessagePartComponent,\n} from \"../../types/MessagePartComponentTypes\";\nimport { MessagePartPrimitiveInProgress } from \"../messagePart/MessagePartInProgress\";\nimport { MessagePartStatus } from \"../../types/AssistantTypes\";\n\ntype MessagePartGroup = {\n  groupKey: string | undefined;\n  indices: number[];\n};\n\nexport type GroupingFunction = (parts: readonly any[]) => MessagePartGroup[];\n\n/**\n * Groups message parts by their parent ID.\n * Parts without a parent ID appear in their chronological position as individual groups.\n * Parts with the same parent ID are grouped together at the position of their first occurrence.\n */\nconst groupMessagePartsByParentId: GroupingFunction = (\n  parts: readonly any[],\n): MessagePartGroup[] => {\n  // Map maintains insertion order, so groups appear in order of first occurrence\n  const groupMap = new Map<string, number[]>();\n\n  // Process each part in order\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    const parentId = part?.parentId as string | undefined;\n\n    // For parts without parentId, assign a unique group ID to maintain their position\n    const groupId = parentId ?? `__ungrouped_${i}`;\n\n    // Get or create the indices array for this group\n    const indices = groupMap.get(groupId) ?? [];\n    indices.push(i);\n    groupMap.set(groupId, indices);\n  }\n\n  // Convert map to array of groups\n  const groups: MessagePartGroup[] = [];\n  for (const [groupId, indices] of groupMap) {\n    // Extract parentId (undefined for ungrouped parts)\n    const groupKey = groupId.startsWith(\"__ungrouped_\") ? undefined : groupId;\n    groups.push({ groupKey, indices });\n  }\n\n  return groups;\n};\n\nconst useMessagePartsGrouped = (\n  groupingFunction: GroupingFunction,\n): MessagePartGroup[] => {\n  const parts = useAuiState(({ message }) => message.parts);\n\n  return useMemo(() => {\n    if (parts.length === 0) {\n      return [];\n    }\n    return groupingFunction(parts);\n  }, [parts, groupingFunction]);\n};\n\nexport namespace MessagePrimitiveUnstable_PartsGrouped {\n  export type Props = {\n    /**\n     * Function that takes an array of message parts and returns an array of groups.\n     * Each group contains a key (for identification) and an array of indices.\n     *\n     * @example\n     * ```tsx\n     * // Group by parent ID (default behavior)\n     * groupingFunction={(parts) => {\n     *   const groups = new Map<string, number[]>();\n     *   parts.forEach((part, i) => {\n     *     const key = part.parentId ?? `__ungrouped_${i}`;\n     *     const indices = groups.get(key) ?? [];\n     *     indices.push(i);\n     *     groups.set(key, indices);\n     *   });\n     *   return Array.from(groups.entries()).map(([key, indices]) => ({\n     *     key: key.startsWith(\"__ungrouped_\") ? undefined : key,\n     *     indices\n     *   }));\n     * }}\n     * ```\n     *\n     * @example\n     * ```tsx\n     * // Group by tool name\n     * import { groupMessagePartsByToolName } from \"@assistant-ui/react\";\n     *\n     * <MessagePrimitive.Unstable_PartsGrouped\n     *   groupingFunction={groupMessagePartsByToolName}\n     *   components={{\n     *     Group: ({ key, indices, children }) => {\n     *       if (!key) return <>{children}</>;\n     *       return (\n     *         <div className=\"tool-group\">\n     *           <h4>Tool: {key}</h4>\n     *           {children}\n     *         </div>\n     *       );\n     *     }\n     *   }}\n     * />\n     * ```\n     */\n    groupingFunction: GroupingFunction;\n\n    /**\n     * Component configuration for rendering different types of message content.\n     *\n     * You can provide custom components for each content type (text, image, file, etc.)\n     * and configure tool rendering behavior. If not provided, default components will be used.\n     */\n    components:\n      | {\n          /** Component for rendering empty messages */\n          Empty?: EmptyMessagePartComponent | undefined;\n          /** Component for rendering text content */\n          Text?: TextMessagePartComponent | undefined;\n          /** Component for rendering reasoning content (typically hidden) */\n          Reasoning?: ReasoningMessagePartComponent | undefined;\n          /** Component for rendering source content */\n          Source?: SourceMessagePartComponent | undefined;\n          /** Component for rendering image content */\n          Image?: ImageMessagePartComponent | undefined;\n          /** Component for rendering file content */\n          File?: FileMessagePartComponent | undefined;\n          /** Component for rendering audio content (experimental) */\n          Unstable_Audio?: Unstable_AudioMessagePartComponent | undefined;\n          /** Configuration for tool call rendering */\n          tools?:\n            | {\n                /** Map of tool names to their specific components */\n                by_name?:\n                  | Record<string, ToolCallMessagePartComponent | undefined>\n                  | undefined;\n                /** Fallback component for unregistered tools */\n                Fallback?: ComponentType<ToolCallMessagePartProps> | undefined;\n              }\n            | {\n                /** Override component that handles all tool calls */\n                Override: ComponentType<ToolCallMessagePartProps>;\n              }\n            | undefined;\n\n          /**\n           * Component for rendering grouped message parts.\n           *\n           * When provided, this component will automatically wrap message parts that share\n           * the same group key as determined by the groupingFunction.\n           *\n           * The component receives:\n           * - `groupKey`: The group key (or undefined for ungrouped parts)\n           * - `indices`: Array of indices for the parts in this group\n           * - `children`: The rendered message part components\n           *\n           * @example\n           * ```tsx\n           * // Collapsible group\n           * Group: ({ groupKey, indices, children }) => {\n           *   if (!groupKey) return <>{children}</>;\n           *   return (\n           *     <details className=\"message-group\">\n           *       <summary>\n           *         Group {groupKey} ({indices.length} parts)\n           *       </summary>\n           *       <div className=\"group-content\">\n           *         {children}\n           *       </div>\n           *     </details>\n           *   );\n           * }\n           * ```\n           *\n           * @param groupKey - The group key (undefined for ungrouped parts)\n           * @param indices - Array of indices for the parts in this group\n           * @param children - Rendered message part components to display within the group\n           */\n          Group?: ComponentType<\n            PropsWithChildren<{\n              groupKey: string | undefined;\n              indices: number[];\n            }>\n          >;\n        }\n      | undefined;\n  };\n}\n\nconst ToolUIDisplay = ({\n  Fallback,\n  ...props\n}: {\n  Fallback: ToolCallMessagePartComponent | undefined;\n} & ToolCallMessagePartProps) => {\n  const Render = useAuiState(({ tools }) => {\n    const Render = tools.tools[props.toolName] ?? Fallback;\n    if (Array.isArray(Render)) return Render[0] ?? Fallback;\n    return Render;\n  });\n  if (!Render) return null;\n  return <Render {...props} />;\n};\n\nconst defaultComponents = {\n  Text: () => (\n    <p style={{ whiteSpace: \"pre-line\" }}>\n      <MessagePartPrimitiveText />\n      <MessagePartPrimitiveInProgress>\n        <span style={{ fontFamily: \"revert\" }}>{\" \\u25CF\"}</span>\n      </MessagePartPrimitiveInProgress>\n    </p>\n  ),\n  Reasoning: () => null,\n  Source: () => null,\n  Image: () => <MessagePartPrimitiveImage />,\n  File: () => null,\n  Unstable_Audio: () => null,\n  Group: ({ children }) => children,\n} satisfies MessagePrimitiveUnstable_PartsGrouped.Props[\"components\"];\n\ntype MessagePartComponentProps = {\n  components: MessagePrimitiveUnstable_PartsGrouped.Props[\"components\"];\n};\n\nconst MessagePartComponent: FC<MessagePartComponentProps> = ({\n  components: {\n    Text = defaultComponents.Text,\n    Reasoning = defaultComponents.Reasoning,\n    Image = defaultComponents.Image,\n    Source = defaultComponents.Source,\n    File = defaultComponents.File,\n    Unstable_Audio: Audio = defaultComponents.Unstable_Audio,\n    tools = {},\n  } = {},\n}) => {\n  const aui = useAui();\n  const part = useAuiState(({ part }) => part);\n\n  const type = part.type;\n  if (type === \"tool-call\") {\n    const addResult = aui.part().addToolResult;\n    const resume = aui.part().resumeToolCall;\n    if (\"Override\" in tools)\n      return <tools.Override {...part} addResult={addResult} resume={resume} />;\n    const Tool = tools.by_name?.[part.toolName] ?? tools.Fallback;\n    return (\n      <ToolUIDisplay\n        {...part}\n        Fallback={Tool}\n        addResult={addResult}\n        resume={resume}\n      />\n    );\n  }\n\n  if (part.status?.type === \"requires-action\")\n    throw new Error(\"Encountered unexpected requires-action status\");\n\n  switch (type) {\n    case \"text\":\n      return <Text {...part} />;\n\n    case \"reasoning\":\n      return <Reasoning {...part} />;\n\n    case \"source\":\n      return <Source {...part} />;\n\n    case \"image\":\n      return <Image {...part} />;\n\n    case \"file\":\n      return <File {...part} />;\n\n    case \"audio\":\n      return <Audio {...part} />;\n\n    case \"data\":\n      return null;\n\n    default:\n      const unhandledType: never = type;\n      throw new Error(`Unknown message part type: ${unhandledType}`);\n  }\n};\n\ntype MessagePartProps = {\n  partIndex: number;\n  components: MessagePrimitiveUnstable_PartsGrouped.Props[\"components\"];\n};\n\nconst MessagePartImpl: FC<MessagePartProps> = ({ partIndex, components }) => {\n  return (\n    <PartByIndexProvider index={partIndex}>\n      <MessagePartComponent components={components} />\n    </PartByIndexProvider>\n  );\n};\n\nconst MessagePart = memo(\n  MessagePartImpl,\n  (prev, next) =>\n    prev.partIndex === next.partIndex &&\n    prev.components?.Text === next.components?.Text &&\n    prev.components?.Reasoning === next.components?.Reasoning &&\n    prev.components?.Source === next.components?.Source &&\n    prev.components?.Image === next.components?.Image &&\n    prev.components?.File === next.components?.File &&\n    prev.components?.Unstable_Audio === next.components?.Unstable_Audio &&\n    prev.components?.tools === next.components?.tools &&\n    prev.components?.Group === next.components?.Group,\n);\n\nconst EmptyPartFallback: FC<{\n  status: MessagePartStatus;\n  component: TextMessagePartComponent;\n}> = ({ status, component: Component }) => {\n  return (\n    <TextMessagePartProvider text=\"\" isRunning={status.type === \"running\"}>\n      <Component type=\"text\" text=\"\" status={status} />\n    </TextMessagePartProvider>\n  );\n};\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nconst EmptyPartsImpl: FC<MessagePartComponentProps> = ({ components }) => {\n  const status = useAuiState(\n    (s) => (s.message.status ?? COMPLETE_STATUS) as MessagePartStatus,\n  );\n\n  if (components?.Empty) return <components.Empty status={status} />;\n\n  return (\n    <EmptyPartFallback\n      status={status}\n      component={components?.Text ?? defaultComponents.Text}\n    />\n  );\n};\n\nconst EmptyParts = memo(\n  EmptyPartsImpl,\n  (prev, next) =>\n    prev.components?.Empty === next.components?.Empty &&\n    prev.components?.Text === next.components?.Text,\n);\n\n/**\n * Renders the parts of a message grouped by a custom grouping function.\n *\n * This component allows you to group message parts based on any criteria you define.\n * The grouping function receives all message parts and returns an array of groups,\n * where each group has a key and an array of part indices.\n *\n * @example\n * ```tsx\n * // Group by parent ID (default behavior)\n * <MessagePrimitive.Unstable_PartsGrouped\n *   components={{\n *     Text: ({ text }) => <p className=\"message-text\">{text}</p>,\n *     Image: ({ image }) => <img src={image} alt=\"Message image\" />,\n *     Group: ({ groupKey, indices, children }) => {\n *       if (!groupKey) return <>{children}</>;\n *       return (\n *         <div className=\"parent-group border rounded p-4\">\n *           <h4>Parent ID: {groupKey}</h4>\n *           {children}\n *         </div>\n *       );\n *     }\n *   }}\n * />\n * ```\n *\n * @example\n * ```tsx\n * // Group by tool name\n * import { groupMessagePartsByToolName } from \"@assistant-ui/react\";\n *\n * <MessagePrimitive.Unstable_PartsGrouped\n *   groupingFunction={groupMessagePartsByToolName}\n *   components={{\n *     Group: ({ groupKey, indices, children }) => {\n *       if (!groupKey) return <>{children}</>;\n *       return (\n *         <div className=\"tool-group\">\n *           <h4>Tool: {groupKey}</h4>\n *           {children}\n *         </div>\n *       );\n *     }\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitiveUnstable_PartsGrouped: FC<\n  MessagePrimitiveUnstable_PartsGrouped.Props\n> = ({ groupingFunction, components }) => {\n  const contentLength = useAuiState(({ message }) => message.parts.length);\n  const messageGroups = useMessagePartsGrouped(groupingFunction);\n\n  const partsElements = useMemo(() => {\n    if (contentLength === 0) {\n      return <EmptyParts components={components} />;\n    }\n\n    return messageGroups.map((group, groupIndex) => {\n      const GroupComponent = components?.Group ?? defaultComponents.Group;\n\n      return (\n        <GroupComponent\n          key={`group-${groupIndex}-${group.groupKey ?? \"ungrouped\"}`}\n          groupKey={group.groupKey}\n          indices={group.indices}\n        >\n          {group.indices.map((partIndex) => (\n            <MessagePart\n              key={partIndex}\n              partIndex={partIndex}\n              components={components}\n            />\n          ))}\n        </GroupComponent>\n      );\n    });\n  }, [messageGroups, components, contentLength]);\n\n  return <>{partsElements}</>;\n};\n\nMessagePrimitiveUnstable_PartsGrouped.displayName =\n  \"MessagePrimitive.Unstable_PartsGrouped\";\n\n/**\n * Renders the parts of a message grouped by their parent ID.\n * This is a convenience wrapper around Unstable_PartsGrouped with parent ID grouping.\n *\n * @deprecated Use MessagePrimitive.Unstable_PartsGrouped instead for more flexibility\n */\nexport const MessagePrimitiveUnstable_PartsGroupedByParentId: FC<\n  Omit<MessagePrimitiveUnstable_PartsGrouped.Props, \"groupingFunction\">\n> = ({ components, ...props }) => {\n  return (\n    <MessagePrimitiveUnstable_PartsGrouped\n      {...props}\n      components={components}\n      groupingFunction={groupMessagePartsByParentId}\n    />\n  );\n};\n\nMessagePrimitiveUnstable_PartsGroupedByParentId.displayName =\n  \"MessagePrimitive.Unstable_PartsGroupedByParentId\";\n", "export {\n  ChainOfThoughtPrimitiveRoot as Root,\n  type ChainOfThoughtPrimitiveRoot as RootPrimitive,\n} from \"./ChainOfThoughtRoot\";\n\nexport {\n  ChainOfThoughtPrimitiveAccordionTrigger as AccordionTrigger,\n  type ChainOfThoughtPrimitiveAccordionTrigger as AccordionTriggerPrimitive,\n} from \"./ChainOfThoughtAccordionTrigger\";\n\nexport {\n  ChainOfThoughtPrimitiveParts as Parts,\n  type ChainOfThoughtPrimitiveParts as PartsPrimitive,\n} from \"./ChainOfThoughtParts\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ChainOfThoughtPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\n/**\n * The root container for chain of thought components.\n *\n * This component provides a wrapper for chain of thought content,\n * including reasoning and tool-call parts that can be collapsed in an accordion.\n *\n * @example\n * ```tsx\n * <ChainOfThoughtPrimitive.Root>\n *   <ChainOfThoughtPrimitive.AccordionTrigger>\n *     Toggle reasoning\n *   </ChainOfThoughtPrimitive.AccordionTrigger>\n *   <ChainOfThoughtPrimitive.Parts />\n * </ChainOfThoughtPrimitive.Root>\n * ```\n */\nexport const ChainOfThoughtPrimitiveRoot = forwardRef<\n  ChainOfThoughtPrimitiveRoot.Element,\n  ChainOfThoughtPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nChainOfThoughtPrimitiveRoot.displayName = \"ChainOfThoughtPrimitive.Root\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useChainOfThoughtAccordionTrigger = () => {\n  const aui = useAui();\n  const collapsed = useAuiState(\n    ({ chainOfThought }) => chainOfThought.collapsed,\n  );\n\n  const callback = useCallback(() => {\n    aui.chainOfThought().setCollapsed(!collapsed);\n  }, [aui, collapsed]);\n\n  return callback;\n};\n\nexport namespace ChainOfThoughtPrimitiveAccordionTrigger {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ChainOfThoughtPrimitive.AccordionTrigger component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<\n    typeof useChainOfThoughtAccordionTrigger\n  >;\n}\n\n/**\n * A button component that toggles the collapsed state of the chain of thought accordion.\n *\n * This component automatically handles the toggle functionality, expanding or collapsing\n * the chain of thought parts when clicked.\n *\n * @example\n * ```tsx\n * <ChainOfThoughtPrimitive.AccordionTrigger>\n *   Toggle Reasoning\n * </ChainOfThoughtPrimitive.AccordionTrigger>\n * ```\n */\nexport const ChainOfThoughtPrimitiveAccordionTrigger = createActionButton(\n  \"ChainOfThoughtPrimitive.AccordionTrigger\",\n  useChainOfThoughtAccordionTrigger,\n);\n", "\"use client\";\n\nimport {\n  type ComponentType,\n  type FC,\n  type PropsWithChildren,\n  useMemo,\n} from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { ChainOfThoughtPartByIndexProvider } from \"../../context/providers/ChainOfThoughtPartByIndexProvider\";\nimport { MessagePartComponent } from \"../message/MessageParts\";\nimport type {\n  ReasoningMessagePartComponent,\n  ToolCallMessagePartComponent,\n} from \"../../types/MessagePartComponentTypes\";\n\nexport namespace ChainOfThoughtPrimitiveParts {\n  export type Props = {\n    /**\n     * Component configuration for rendering chain of thought parts.\n     */\n    components?: {\n      /** Component for rendering reasoning parts */\n      Reasoning?: ReasoningMessagePartComponent | undefined;\n      /** Fallback component for tool-call parts */\n      tools?: {\n        Fallback?: ToolCallMessagePartComponent | undefined;\n      };\n      /** Layout component to wrap the rendered parts when expanded */\n      Layout?: ComponentType<PropsWithChildren> | undefined;\n    };\n  };\n}\n\n/**\n * Renders the parts within a chain of thought, with support for collapsed/expanded states.\n *\n * When collapsed, no parts are shown. When expanded, all parts are rendered\n * using the provided component configuration through the part scope mechanism.\n *\n * @example\n * ```tsx\n * <ChainOfThoughtPrimitive.Parts\n *   components={{\n *     Reasoning: ({ text }) => <p className=\"reasoning\">{text}</p>,\n *     tools: {\n *       Fallback: ({ toolName }) => <div>Tool: {toolName}</div>\n *     }\n *   }}\n * />\n * ```\n */\nexport const ChainOfThoughtPrimitiveParts: FC<\n  ChainOfThoughtPrimitiveParts.Props\n> = ({ components }) => {\n  const partsLength = useAuiState(\n    ({ chainOfThought }) => chainOfThought.parts.length,\n  );\n\n  const messageComponents = useMemo(\n    () => ({\n      Reasoning: components?.Reasoning,\n      tools: {\n        Fallback: components?.tools?.Fallback,\n      },\n    }),\n    [components?.Reasoning, components?.tools?.Fallback],\n  );\n\n  const Layout = components?.Layout;\n\n  const elements = useMemo(() => {\n    return Array.from({ length: partsLength }, (_, index) => (\n      <ChainOfThoughtPartByIndexProvider key={index} index={index}>\n        {Layout ? (\n          <Layout>\n            <MessagePartComponent components={messageComponents} />\n          </Layout>\n        ) : (\n          <MessagePartComponent components={messageComponents} />\n        )}\n      </ChainOfThoughtPartByIndexProvider>\n    ));\n  }, [partsLength, messageComponents, Layout]);\n\n  return <>{elements}</>;\n};\n\nChainOfThoughtPrimitiveParts.displayName = \"ChainOfThoughtPrimitive.Parts\";\n", "\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@assistant-ui/store\";\n\nexport const ChainOfThoughtPartByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    part: Derived({\n      source: \"chainOfThought\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.chainOfThought().part({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n", "export { ComposerPrimitiveRoot as Root } from \"./ComposerRoot\";\nexport { ComposerPrimitiveInput as Input } from \"./ComposerInput\";\nexport { ComposerPrimitiveSend as Send } from \"./ComposerSend\";\nexport { ComposerPrimitiveCancel as Cancel } from \"./ComposerCancel\";\nexport { ComposerPrimitiveAddAttachment as AddAttachment } from \"./ComposerAddAttachment\";\nexport { ComposerPrimitiveAttachments as Attachments } from \"./ComposerAttachments\";\nexport { ComposerPrimitiveAttachmentByIndex as AttachmentByIndex } from \"./ComposerAttachments\";\nexport { ComposerPrimitiveAttachmentDropzone as AttachmentDropzone } from \"./ComposerAttachmentDropzone\";\nexport { ComposerPrimitiveDictate as Dictate } from \"./ComposerDictate\";\nexport { ComposerPrimitiveStopDictation as StopDictation } from \"./ComposerStopDictation\";\nexport { ComposerPrimitiveDictationTranscript as DictationTranscript } from \"./ComposerDictationTranscript\";\nexport { ComposerPrimitiveIf as If } from \"./ComposerIf\";\n", "\"use client\";\n\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  type FormEvent,\n  forwardRef,\n  ComponentPropsWithoutRef,\n} from \"react\";\nimport { useComposerSend } from \"./ComposerSend\";\n\nexport namespace ComposerPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.form>;\n  /**\n   * Props for the ComposerPrimitive.Root component.\n   * Accepts all standard form element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.form>;\n}\n\n/**\n * The root form container for message composition.\n *\n * This component provides a form wrapper that handles message submission when the form\n * is submitted (e.g., via Enter key or submit button). It automatically prevents the\n * default form submission and triggers the composer's send functionality.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Root>\n *   <ComposerPrimitive.Input placeholder=\"Type your message...\" />\n *   <ComposerPrimitive.Send>Send</ComposerPrimitive.Send>\n * </ComposerPrimitive.Root>\n * ```\n */\nexport const ComposerPrimitiveRoot = forwardRef<\n  ComposerPrimitiveRoot.Element,\n  ComposerPrimitiveRoot.Props\n>(({ onSubmit, ...rest }, forwardedRef) => {\n  const send = useComposerSend();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n\n    if (!send) return;\n    send();\n  };\n\n  return (\n    <Primitive.form\n      {...rest}\n      ref={forwardedRef}\n      onSubmit={composeEventHandlers(onSubmit, handleSubmit)}\n    />\n  );\n});\n\nComposerPrimitiveRoot.displayName = \"ComposerPrimitive.Root\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nexport const useComposerSend = () => {\n  const aui = useAui();\n\n  const disabled = useAuiState(\n    (s) => s.thread.isRunning || !s.composer.isEditing || s.composer.isEmpty,\n  );\n\n  const callback = useCallback(() => {\n    aui.composer().send();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveSend {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ComposerPrimitive.Send component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useComposerSend>;\n}\n\n/**\n * A button component that sends the current message in the composer.\n *\n * This component automatically handles the send functionality and is disabled\n * when sending is not available (e.g., when the thread is running, the composer\n * is empty, or not in editing mode).\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Send>\n *   Send Message\n * </ComposerPrimitive.Send>\n * ```\n */\nexport const ComposerPrimitiveSend = createActionButton(\n  \"ComposerPrimitive.Send\",\n  useComposerSend,\n);\n", "\"use client\";\n\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n  ClipboardEvent,\n  type KeyboardEvent,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n} from \"react\";\nimport TextareaAutosize, {\n  type TextareaAutosizeProps,\n} from \"react-textarea-autosize\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { useOnScrollToBottom } from \"../../utils/hooks/useOnScrollToBottom\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\nimport { flushResourcesSync } from \"@assistant-ui/tap\";\n\nexport namespace ComposerPrimitiveInput {\n  export type Element = HTMLTextAreaElement;\n  export type Props = TextareaAutosizeProps & {\n    /**\n     * Whether to render as a child component using Slot.\n     * When true, the component will merge its props with its child.\n     */\n    asChild?: boolean | undefined;\n    /**\n     * Whether to submit the message when Enter is pressed (without Shift).\n     * @default true\n     */\n    submitOnEnter?: boolean | undefined;\n    /**\n     * Whether to cancel message composition when Escape is pressed.\n     * @default true\n     */\n    cancelOnEscape?: boolean | undefined;\n    /**\n     * Whether to automatically focus the input when a new run starts.\n     * @default true\n     */\n    unstable_focusOnRunStart?: boolean | undefined;\n    /**\n     * Whether to automatically focus the input when scrolling to bottom.\n     * @default true\n     */\n    unstable_focusOnScrollToBottom?: boolean | undefined;\n    /**\n     * Whether to automatically focus the input when switching threads.\n     * @default true\n     */\n    unstable_focusOnThreadSwitched?: boolean | undefined;\n    /**\n     * Whether to automatically add pasted files as attachments.\n     * @default true\n     */\n    addAttachmentOnPaste?: boolean | undefined;\n  };\n}\n\n/**\n * A text input component for composing messages.\n *\n * This component provides a rich text input experience with automatic resizing,\n * keyboard shortcuts, file paste support, and intelligent focus management.\n * It integrates with the composer context to manage message state and submission.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Input\n *   placeholder=\"Type your message...\"\n *   submitOnEnter={true}\n *   addAttachmentOnPaste={true}\n * />\n * ```\n */\nexport const ComposerPrimitiveInput = forwardRef<\n  ComposerPrimitiveInput.Element,\n  ComposerPrimitiveInput.Props\n>(\n  (\n    {\n      autoFocus = false,\n      asChild,\n      disabled: disabledProp,\n      onChange,\n      onKeyDown,\n      onPaste,\n      submitOnEnter = true,\n      cancelOnEscape = true,\n      unstable_focusOnRunStart = true,\n      unstable_focusOnScrollToBottom = true,\n      unstable_focusOnThreadSwitched = true,\n      addAttachmentOnPaste = true,\n      ...rest\n    },\n    forwardedRef,\n  ) => {\n    const aui = useAui();\n\n    const value = useAuiState(({ composer }) => {\n      if (!composer.isEditing) return \"\";\n      return composer.text;\n    });\n\n    const Component = asChild ? Slot : TextareaAutosize;\n\n    const isDisabled =\n      useAuiState(\n        ({ thread, composer }) =>\n          thread.isDisabled || composer.dictation?.inputDisabled,\n      ) || disabledProp;\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n    const ref = useComposedRefs(forwardedRef, textareaRef);\n\n    useEscapeKeydown((e) => {\n      if (!cancelOnEscape) return;\n\n      // Only handle ESC if it originated from within this input\n      if (!textareaRef.current?.contains(e.target as Node)) return;\n\n      const composer = aui.composer();\n      if (composer.getState().canCancel) {\n        composer.cancel();\n        e.preventDefault();\n      }\n    });\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (isDisabled || !submitOnEnter) return;\n\n      // ignore IME composition events\n      if (e.nativeEvent.isComposing) return;\n\n      if (e.key === \"Enter\" && e.shiftKey === false) {\n        const isRunning = aui.thread().getState().isRunning;\n\n        if (!isRunning) {\n          e.preventDefault();\n\n          textareaRef.current?.closest(\"form\")?.requestSubmit();\n        }\n      }\n    };\n\n    const handlePaste = async (e: ClipboardEvent<HTMLTextAreaElement>) => {\n      if (!addAttachmentOnPaste) return;\n      const threadCapabilities = aui.thread().getState().capabilities;\n      const files = Array.from(e.clipboardData?.files || []);\n\n      if (threadCapabilities.attachments && files.length > 0) {\n        try {\n          e.preventDefault();\n          await Promise.all(\n            files.map((file) => aui.composer().addAttachment(file)),\n          );\n        } catch (error) {\n          console.error(\"Error adding attachment:\", error);\n        }\n      }\n    };\n\n    const autoFocusEnabled = autoFocus && !isDisabled;\n    const focus = useCallback(() => {\n      const textarea = textareaRef.current;\n      if (!textarea || !autoFocusEnabled) return;\n\n      textarea.focus({ preventScroll: true });\n      textarea.setSelectionRange(textarea.value.length, textarea.value.length);\n    }, [autoFocusEnabled]);\n\n    useEffect(() => focus(), [focus]);\n\n    useOnScrollToBottom(() => {\n      if (\n        aui.composer().getState().type === \"thread\" &&\n        unstable_focusOnScrollToBottom\n      ) {\n        focus();\n      }\n    });\n\n    useEffect(() => {\n      if (\n        aui.composer().getState().type !== \"thread\" ||\n        !unstable_focusOnRunStart\n      )\n        return undefined;\n\n      return aui.on(\"thread.runStart\", focus);\n    }, [unstable_focusOnRunStart, focus, aui]);\n\n    useEffect(() => {\n      if (\n        aui.composer().getState().type !== \"thread\" ||\n        !unstable_focusOnThreadSwitched\n      )\n        return undefined;\n\n      return aui.on(\"threadListItem.switchedTo\", focus);\n    }, [unstable_focusOnThreadSwitched, focus, aui]);\n\n    return (\n      <Component\n        name=\"input\"\n        value={value}\n        {...rest}\n        ref={ref as React.ForwardedRef<HTMLTextAreaElement>}\n        disabled={isDisabled}\n        onChange={composeEventHandlers(onChange, (e) => {\n          if (!aui.composer().getState().isEditing) return;\n          flushResourcesSync(() => {\n            aui.composer().setText(e.target.value);\n          });\n        })}\n        onKeyDown={composeEventHandlers(onKeyDown, handleKeyPress)}\n        onPaste={composeEventHandlers(onPaste, handlePaste)}\n      />\n    );\n  },\n);\n\nComposerPrimitiveInput.displayName = \"ComposerPrimitive.Input\";\n", "function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };", "function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };", "import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as React from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0',\n  display: 'block'\n};\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\nvar forceHiddenStyles$1 = forceHiddenStyles;\n\nvar hiddenTextarea = null;\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  }\n\n  // remove padding, since height = content\n  return height - sizingData.paddingSize;\n};\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles$1(hiddenTextarea);\n  }\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n  var paddingSize = sizingData.paddingSize,\n    borderSize = sizingData.borderSize,\n    sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles$1(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData);\n  // Double set and calc due to Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1795904\n  hiddenTextarea.value = value;\n  height = getHeight(hiddenTextarea, sizingData);\n\n  // measure height of a textarea with a single row\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop',\n// non-standard\n'tabSize', 'textIndent',\n// non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak', 'wordSpacing', 'scrollbarGutter'];\nvar isIE = !!document.documentElement.currentStyle ;\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n  if (style === null) {\n    return null;\n  }\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing;\n\n  // probably node is detached from DOM, can't read computed dimensions\n  if (boxSizing === '') {\n    return null;\n  }\n\n  // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\nvar getSizingData$1 = getSizingData;\n\nfunction useListener(target, type, listener) {\n  var latestListener = useLatest(listener);\n  React.useLayoutEffect(function () {\n    var handler = function handler(ev) {\n      return latestListener.current(ev);\n    };\n    // might happen if document.fonts is not defined, for instance\n    if (!target) {\n      return;\n    }\n    target.addEventListener(type, handler);\n    return function () {\n      return target.removeEventListener(type, handler);\n    };\n  }, []);\n}\nvar useFormResetListener = function useFormResetListener(libRef, listener) {\n  useListener(document.body, 'reset', function (ev) {\n    if (libRef.current.form === ev.target) {\n      listener(ev);\n    }\n  });\n};\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  useListener(window, 'resize', listener);\n};\nvar useFontsLoadedListener = function useFontsLoadedListener(listener) {\n  useListener(document.fonts, 'loadingdone', listener);\n};\n\nvar _excluded = [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"];\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n    maxRows = _ref.maxRows,\n    minRows = _ref.minRows,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n    _ref$onHeightChange = _ref.onHeightChange,\n    onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  if (props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n  var isControlled = props.value !== undefined;\n  var libRef = React.useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = React.useRef(0);\n  var measurementsCacheRef = React.useRef();\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData$1(node);\n    if (!nodeSizingData) {\n      return;\n    }\n    measurementsCacheRef.current = nodeSizingData;\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n      height = _calculateNodeHeight[0],\n      rowHeight = _calculateNodeHeight[1];\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n    onChange(event);\n  };\n  {\n    React.useLayoutEffect(resizeTextarea);\n    useFormResetListener(libRef, function () {\n      if (!isControlled) {\n        var currentValue = libRef.current.value;\n        requestAnimationFrame(function () {\n          var node = libRef.current;\n          if (node && currentValue !== node.value) {\n            resizeTextarea();\n          }\n        });\n      }\n    });\n    useWindowResizeListener(resizeTextarea);\n    useFontsLoadedListener(resizeTextarea);\n    return /*#__PURE__*/React.createElement(\"textarea\", _extends({}, props, {\n      onChange: handleChange,\n      ref: ref\n    }));\n  }\n};\nvar index = /* #__PURE__ */React.forwardRef(TextareaAutosize);\n\nexport { index as default };\n", "import React from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = React.useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport { useLatest as default };\n", "import { useLayoutEffect } from 'react';\n\nvar index = useLayoutEffect ;\n\nexport { index as default };\n", "import React from 'react';\n\n// basically Exclude<React.ClassAttributes<T>[\"ref\"], string>\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = React.useRef();\n  return React.useCallback(function (instance) {\n    libRef.current = instance;\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n    prevUserRef.current = userRef;\n    if (!userRef) {\n      return;\n    }\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport { useComposedRef as default };\n", "\"use client\";\n\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useEffect } from \"react\";\nimport { useThreadViewport } from \"../../context/react/ThreadViewportContext\";\n\nexport const useOnScrollToBottom = (\n  callback: (config: { behavior: ScrollBehavior }) => void,\n) => {\n  const callbackRef = useCallbackRef(callback);\n  const onScrollToBottom = useThreadViewport((vp) => vp.onScrollToBottom);\n\n  useEffect(() => {\n    return onScrollToBottom(callbackRef);\n  }, [onScrollToBottom, callbackRef]);\n};\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useComposerCancel = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ composer }) => !composer.canCancel);\n\n  const callback = useCallback(() => {\n    aui.composer().cancel();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveCancel {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ComposerPrimitive.Cancel component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useComposerCancel>;\n}\n\n/**\n * A button component that cancels the current message composition.\n *\n * This component automatically handles the cancel functionality and is disabled\n * when canceling is not available.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Cancel>\n *   Cancel\n * </ComposerPrimitive.Cancel>\n * ```\n */\nexport const ComposerPrimitiveCancel = createActionButton(\n  \"ComposerPrimitive.Cancel\",\n  useComposerCancel,\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useComposerAddAttachment = ({\n  multiple = true,\n}: {\n  /** allow selecting multiple files */\n  multiple?: boolean | undefined;\n} = {}) => {\n  const disabled = useAuiState(({ composer }) => !composer.isEditing);\n  const aui = useAui();\n\n  const callback = useCallback(() => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.multiple = multiple;\n    input.hidden = true;\n\n    const attachmentAccept = aui.composer().getState().attachmentAccept;\n    if (attachmentAccept !== \"*\") {\n      input.accept = attachmentAccept;\n    }\n\n    document.body.appendChild(input);\n\n    input.onchange = (e) => {\n      const fileList = (e.target as HTMLInputElement).files;\n      if (!fileList) return;\n      for (const file of fileList) {\n        aui.composer().addAttachment(file);\n      }\n\n      document.body.removeChild(input);\n    };\n\n    input.oncancel = () => {\n      if (!input.files || input.files.length === 0) {\n        document.body.removeChild(input);\n      }\n    };\n\n    input.click();\n  }, [aui, multiple]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveAddAttachment {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerAddAttachment>;\n}\n\nexport const ComposerPrimitiveAddAttachment = createActionButton(\n  \"ComposerPrimitive.AddAttachment\",\n  useComposerAddAttachment,\n  [\"multiple\"],\n);\n", "\"use client\";\n\nimport { ComponentType, type FC, memo, useMemo } from \"react\";\nimport { Attachment } from \"../../types\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { ComposerAttachmentByIndexProvider } from \"../../context/providers\";\n\nexport namespace ComposerPrimitiveAttachments {\n  export type Props = {\n    components:\n      | {\n          Image?: ComponentType | undefined;\n          Document?: ComponentType | undefined;\n          File?: ComponentType | undefined;\n          Attachment?: ComponentType | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst getComponent = (\n  components: ComposerPrimitiveAttachments.Props[\"components\"],\n  attachment: Attachment,\n) => {\n  const type = attachment.type;\n  switch (type) {\n    case \"image\":\n      return components?.Image ?? components?.Attachment;\n    case \"document\":\n      return components?.Document ?? components?.Attachment;\n    case \"file\":\n      return components?.File ?? components?.Attachment;\n    default:\n      const _exhaustiveCheck: never = type;\n      throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n  }\n};\n\nconst AttachmentComponent: FC<{\n  components: ComposerPrimitiveAttachments.Props[\"components\"];\n}> = ({ components }) => {\n  const attachment = useAuiState(({ attachment }) => attachment);\n  if (!attachment) return null;\n\n  const Component = getComponent(components, attachment);\n  if (!Component) return null;\n  return <Component />;\n};\n\nexport namespace ComposerPrimitiveAttachmentByIndex {\n  export type Props = {\n    index: number;\n    components?: ComposerPrimitiveAttachments.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single attachment at the specified index within the composer.\n *\n * This component provides direct access to render a specific attachment\n * from the composer's attachment list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.AttachmentByIndex\n *   index={0}\n *   components={{\n *     Image: MyImageAttachment,\n *     Document: MyDocumentAttachment\n *   }}\n * />\n * ```\n */\nexport const ComposerPrimitiveAttachmentByIndex: FC<ComposerPrimitiveAttachmentByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <ComposerAttachmentByIndexProvider index={index}>\n          <AttachmentComponent components={components} />\n        </ComposerAttachmentByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components?.Image === next.components?.Image &&\n      prev.components?.Document === next.components?.Document &&\n      prev.components?.File === next.components?.File &&\n      prev.components?.Attachment === next.components?.Attachment,\n  );\n\nComposerPrimitiveAttachmentByIndex.displayName =\n  \"ComposerPrimitive.AttachmentByIndex\";\n\nexport const ComposerPrimitiveAttachments: FC<\n  ComposerPrimitiveAttachments.Props\n> = ({ components }) => {\n  const attachmentsCount = useAuiState((s) => s.composer.attachments.length);\n\n  const attachmentElements = useMemo(() => {\n    return Array.from({ length: attachmentsCount }, (_, index) => (\n      <ComposerPrimitiveAttachmentByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [attachmentsCount, components]);\n\n  return attachmentElements;\n};\n\nComposerPrimitiveAttachments.displayName = \"ComposerPrimitive.Attachments\";\n", "\"use client\";\n\nimport { forwardRef, useCallback, useState } from \"react\";\n\nimport { Slot } from \"@radix-ui/react-slot\";\nimport React from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\n\nexport namespace ComposerPrimitiveAttachmentDropzone {\n  export type Element = HTMLDivElement;\n  export type Props = React.HTMLAttributes<HTMLDivElement> & {\n    asChild?: boolean | undefined;\n    disabled?: boolean | undefined;\n  };\n}\n\nexport const ComposerPrimitiveAttachmentDropzone = forwardRef<\n  HTMLDivElement,\n  ComposerPrimitiveAttachmentDropzone.Props\n>(({ disabled, asChild = false, children, ...rest }, ref) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const aui = useAui();\n\n  const handleDragEnterCapture = useCallback(\n    (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      setIsDragging(true);\n    },\n    [disabled],\n  );\n\n  const handleDragOverCapture = useCallback(\n    (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      if (!isDragging) setIsDragging(true);\n    },\n    [disabled, isDragging],\n  );\n\n  const handleDragLeaveCapture = useCallback(\n    (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      const next = e.relatedTarget as Node | null;\n      if (next && e.currentTarget.contains(next)) {\n        return;\n      }\n      setIsDragging(false);\n    },\n    [disabled],\n  );\n\n  const handleDrop = useCallback(\n    async (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      setIsDragging(false);\n      for (const file of e.dataTransfer.files) {\n        try {\n          await aui.composer().addAttachment(file);\n        } catch (error) {\n          console.error(\"Failed to add attachment:\", error);\n        }\n      }\n    },\n    [disabled, aui],\n  );\n\n  const dragProps = {\n    onDragEnterCapture: handleDragEnterCapture,\n    onDragOverCapture: handleDragOverCapture,\n    onDragLeaveCapture: handleDragLeaveCapture,\n    onDropCapture: handleDrop,\n  };\n\n  const Comp = asChild ? Slot : \"div\";\n\n  return (\n    <Comp\n      {...(isDragging ? { \"data-dragging\": \"true\" } : null)}\n      ref={ref}\n      {...dragProps}\n      {...rest}\n    >\n      {children}\n    </Comp>\n  );\n});\n\nComposerPrimitiveAttachmentDropzone.displayName =\n  \"ComposerPrimitive.AttachmentDropzone\";\n", "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useAui, useAuiState } from \"@assistant-ui/store\";\nimport type {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/createActionButton\";\nimport { createActionButton } from \"../../utils/createActionButton\";\n\nconst useComposerDictate = () => {\n  const aui = useAui();\n  const disabled = useAuiState(\n    ({ thread, composer }) =>\n      composer.dictation != null ||\n      !thread.capabilities.dictation ||\n      !composer.isEditing,\n  );\n\n  const callback = useCallback(() => {\n    aui.composer().startDictation();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveDictate {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerDictate>;\n}\n\n/**\n * A button that starts dictation to convert voice to text.\n *\n * Requires a DictationAdapter to be configured in the runtime.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Dictate>\n *   <MicIcon />\n * </ComposerPrimitive.Dictate>\n * ```\n */\nexport const ComposerPrimitiveDictate = createActionButton(\n  \"ComposerPrimitive.Dictate\",\n  useComposerDictate,\n);\n", "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useAui } from \"@assistant-ui/store\";\nimport type {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/createActionButton\";\nimport { createActionButton } from \"../../utils/createActionButton\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nconst useComposerStopDictation = () => {\n  const aui = useAui();\n  const isDictating = useAuiState(({ composer }) => composer.dictation != null);\n\n  const callback = useCallback(() => {\n    aui.composer().stopDictation();\n  }, [aui]);\n\n  if (!isDictating) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveStopDictation {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerStopDictation>;\n}\n\n/**\n * A button that stops the current dictation session.\n *\n * Only rendered when dictation is active.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.StopDictation>\n *   <StopIcon />\n * </ComposerPrimitive.StopDictation>\n * ```\n */\nexport const ComposerPrimitiveStopDictation = createActionButton(\n  \"ComposerPrimitive.StopDictation\",\n  useComposerStopDictation,\n);\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace ComposerPrimitiveDictationTranscript {\n  export type Element = ComponentRef<typeof Primitive.span>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.span>;\n}\n\n/**\n * Renders the current interim (partial) transcript while dictation is active.\n *\n * This component displays real-time feedback of what the user is saying before\n * the transcription is finalized and committed to the composer input.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.If dictation>\n *   <div className=\"dictation-preview\">\n *     <ComposerPrimitive.DictationTranscript />\n *   </div>\n * </ComposerPrimitive.If>\n * ```\n */\nexport const ComposerPrimitiveDictationTranscript = forwardRef<\n  ComposerPrimitiveDictationTranscript.Element,\n  ComposerPrimitiveDictationTranscript.Props\n>(({ children, ...props }, forwardRef) => {\n  const transcript = useAuiState(\n    ({ composer }) => composer.dictation?.transcript,\n  );\n\n  if (!transcript) return null;\n\n  return (\n    <Primitive.span {...props} ref={forwardRef}>\n      {children ?? transcript}\n    </Primitive.span>\n  );\n});\n\nComposerPrimitiveDictationTranscript.displayName =\n  \"ComposerPrimitive.DictationTranscript\";\n", "\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport type { RequireAtLeastOne } from \"../../utils/RequireAtLeastOne\";\n\ntype ComposerIfFilters = {\n  /** Whether the composer is in editing mode */\n  editing: boolean | undefined;\n  /** Whether dictation is currently active */\n  dictation: boolean | undefined;\n};\n\nexport type UseComposerIfProps = RequireAtLeastOne<ComposerIfFilters>;\n\nconst useComposerIf = (props: UseComposerIfProps) => {\n  return useAuiState(({ composer }) => {\n    if (props.editing === true && !composer.isEditing) return false;\n    if (props.editing === false && composer.isEditing) return false;\n\n    const isDictating = composer.dictation != null;\n    if (props.dictation === true && !isDictating) return false;\n    if (props.dictation === false && isDictating) return false;\n\n    return true;\n  });\n};\n\nexport namespace ComposerPrimitiveIf {\n  export type Props = PropsWithChildren<UseComposerIfProps>;\n}\n\n/**\n * @deprecated Use `<AuiIf condition={({ composer }) => ...} />` instead.\n */\nexport const ComposerPrimitiveIf: FC<ComposerPrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useComposerIf(query);\n  return result ? children : null;\n};\n\nComposerPrimitiveIf.displayName = \"ComposerPrimitive.If\";\n", "export { MessagePartPrimitiveText as Text } from \"./MessagePartText\";\nexport { MessagePartPrimitiveImage as Image } from \"./MessagePartImage\";\nexport { MessagePartPrimitiveInProgress as InProgress } from \"./MessagePartInProgress\";\n", "export { ErrorPrimitiveRoot as Root } from \"./ErrorRoot\";\nexport { ErrorPrimitiveMessage as Message } from \"./ErrorMessage\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\n\nexport namespace ErrorPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\nexport const ErrorPrimitiveRoot = forwardRef<\n  ErrorPrimitiveRoot.Element,\n  ErrorPrimitiveRoot.Props\n>((props, forwardRef) => {\n  return <Primitive.div role=\"alert\" {...props} ref={forwardRef} />;\n});\n\nErrorPrimitiveRoot.displayName = \"ErrorPrimitive.Root\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace ErrorPrimitiveMessage {\n  export type Element = ComponentRef<typeof Primitive.span>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.span>;\n}\n\nexport const ErrorPrimitiveMessage = forwardRef<\n  ErrorPrimitiveMessage.Element,\n  ErrorPrimitiveMessage.Props\n>(({ children, ...props }, forwardRef) => {\n  const error = useAuiState(({ message }) => {\n    return message.status?.type === \"incomplete\" &&\n      message.status.reason === \"error\"\n      ? message.status.error\n      : undefined;\n  });\n\n  if (error === undefined) return null;\n\n  return (\n    <Primitive.span {...props} ref={forwardRef}>\n      {children ?? String(error)}\n    </Primitive.span>\n  );\n});\n\nErrorPrimitiveMessage.displayName = \"ErrorPrimitive.Message\";\n", "export { ThreadPrimitiveRoot as Root } from \"./ThreadRoot\";\nexport { ThreadPrimitiveEmpty as Empty } from \"./ThreadEmpty\";\nexport { ThreadPrimitiveIf as If } from \"./ThreadIf\";\nexport { ThreadPrimitiveViewport as Viewport } from \"./ThreadViewport\";\nexport { ThreadPrimitiveViewportProvider as ViewportProvider } from \"../../context/providers/ThreadViewportProvider\";\nexport { ThreadPrimitiveViewportFooter as ViewportFooter } from \"./ThreadViewportFooter\";\nexport { ThreadPrimitiveViewportSlack as ViewportSlack } from \"./ThreadViewportSlack\";\nexport { ThreadPrimitiveMessages as Messages } from \"./ThreadMessages\";\nexport { ThreadPrimitiveMessageByIndex as MessageByIndex } from \"./ThreadMessages\";\nexport { ThreadPrimitiveScrollToBottom as ScrollToBottom } from \"./ThreadScrollToBottom\";\nexport { ThreadPrimitiveSuggestion as Suggestion } from \"./ThreadSuggestion\";\nexport {\n  ThreadPrimitiveSuggestions as Suggestions,\n  ThreadPrimitiveSuggestionByIndex as SuggestionByIndex,\n} from \"./ThreadSuggestions\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\n\nexport namespace ThreadPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  /**\n   * Props for the ThreadPrimitive.Root component.\n   * Accepts all standard div element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\n/**\n * The root container component for a thread.\n *\n * This component serves as the foundational wrapper for all thread-related components.\n * It provides the basic structure and context needed for thread functionality.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Root>\n *   <ThreadPrimitive.Viewport>\n *     <ThreadPrimitive.Messages components={{ Message: MyMessage }} />\n *   </ThreadPrimitive.Viewport>\n * </ThreadPrimitive.Root>\n * ```\n */\nexport const ThreadPrimitiveRoot = forwardRef<\n  ThreadPrimitiveRoot.Element,\n  ThreadPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadPrimitiveRoot.displayName = \"ThreadPrimitive.Root\";\n", "\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace ThreadPrimitiveEmpty {\n  export type Props = PropsWithChildren;\n}\n\nexport const ThreadPrimitiveEmpty: FC<ThreadPrimitiveEmpty.Props> = ({\n  children,\n}) => {\n  const empty = useAuiState(\n    ({ thread }) => thread.messages.length === 0 && !thread.isLoading,\n  );\n  return empty ? children : null;\n};\n\nThreadPrimitiveEmpty.displayName = \"ThreadPrimitive.Empty\";\n", "\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport type { RequireAtLeastOne } from \"../../utils/RequireAtLeastOne\";\n\ntype ThreadIfFilters = {\n  empty: boolean | undefined;\n  running: boolean | undefined;\n  disabled: boolean | undefined;\n};\n\ntype UseThreadIfProps = RequireAtLeastOne<ThreadIfFilters>;\n\nconst useThreadIf = (props: UseThreadIfProps) => {\n  return useAuiState(({ thread }) => {\n    if (props.empty === true && !thread.isEmpty) return false;\n    if (props.empty === false && thread.isEmpty) return false;\n\n    if (props.running === true && !thread.isRunning) return false;\n    if (props.running === false && thread.isRunning) return false;\n    if (props.disabled === true && !thread.isDisabled) return false;\n    if (props.disabled === false && thread.isDisabled) return false;\n\n    return true;\n  });\n};\n\nexport namespace ThreadPrimitiveIf {\n  export type Props = PropsWithChildren<UseThreadIfProps>;\n}\n\n/**\n * @deprecated Use `<AuiIf condition={({ thread }) => ...} />` instead.\n */\nexport const ThreadPrimitiveIf: FC<ThreadPrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useThreadIf(query);\n  return result ? children : null;\n};\n\nThreadPrimitiveIf.displayName = \"ThreadPrimitive.If\";\n", "\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useThreadViewportAutoScroll } from \"./useThreadViewportAutoScroll\";\nimport { ThreadPrimitiveViewportProvider } from \"../../context/providers/ThreadViewportProvider\";\nimport { useSizeHandle } from \"../../utils/hooks/useSizeHandle\";\nimport { useThreadViewport } from \"../../context/react/ThreadViewportContext\";\n\nexport namespace ThreadPrimitiveViewport {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div> & {\n    /**\n     * Whether to automatically scroll to the bottom when new messages are added.\n     * When enabled, the viewport will automatically scroll to show the latest content.\n     *\n     * Default false if `turnAnchor` is \"top\", otherwise defaults to true.\n     */\n    autoScroll?: boolean | undefined;\n\n    /**\n     * Controls scroll anchoring behavior for new messages.\n     * - \"bottom\" (default): Messages anchor at the bottom, classic chat behavior.\n     * - \"top\": New user messages anchor at the top of the viewport for a focused reading experience.\n     */\n    turnAnchor?: \"top\" | \"bottom\" | undefined;\n\n    /**\n     * Whether to scroll to bottom when a new run starts.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnRunStart?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when thread history is first loaded.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnInitialize?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when switching to a different thread.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnThreadSwitch?: boolean | undefined;\n  };\n}\n\nconst useViewportSizeRef = () => {\n  const register = useThreadViewport((s) => s.registerViewport);\n  const getHeight = useCallback((el: HTMLElement) => el.clientHeight, []);\n  return useSizeHandle(register, getHeight);\n};\n\nconst ThreadPrimitiveViewportScrollable = forwardRef<\n  ThreadPrimitiveViewport.Element,\n  ThreadPrimitiveViewport.Props\n>(\n  (\n    {\n      autoScroll,\n      scrollToBottomOnRunStart,\n      scrollToBottomOnInitialize,\n      scrollToBottomOnThreadSwitch,\n      children,\n      ...rest\n    },\n    forwardedRef,\n  ) => {\n    const autoScrollRef = useThreadViewportAutoScroll<HTMLDivElement>({\n      autoScroll,\n      scrollToBottomOnRunStart,\n      scrollToBottomOnInitialize,\n      scrollToBottomOnThreadSwitch,\n    });\n    const viewportSizeRef = useViewportSizeRef();\n    const ref = useComposedRefs(forwardedRef, autoScrollRef, viewportSizeRef);\n\n    return (\n      <Primitive.div {...rest} ref={ref}>\n        {children}\n      </Primitive.div>\n    );\n  },\n);\n\nThreadPrimitiveViewportScrollable.displayName =\n  \"ThreadPrimitive.ViewportScrollable\";\n\n/**\n * A scrollable viewport container for thread messages.\n *\n * This component provides a scrollable area for displaying thread messages with\n * automatic scrolling capabilities. It manages the viewport state and provides\n * context for child components to access viewport-related functionality.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Viewport turnAnchor=\"top\">\n *   <ThreadPrimitive.Messages components={{ Message: MyMessage }} />\n * </ThreadPrimitive.Viewport>\n * ```\n */\nexport const ThreadPrimitiveViewport = forwardRef<\n  ThreadPrimitiveViewport.Element,\n  ThreadPrimitiveViewport.Props\n>(({ turnAnchor, ...props }, ref) => {\n  return (\n    <ThreadPrimitiveViewportProvider options={{ turnAnchor }}>\n      <ThreadPrimitiveViewportScrollable {...props} ref={ref} />\n    </ThreadPrimitiveViewportProvider>\n  );\n});\n\nThreadPrimitiveViewport.displayName = \"ThreadPrimitive.Viewport\";\n", "\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useCallback, useRef, type RefCallback } from \"react\";\nimport { useAuiEvent } from \"@assistant-ui/store\";\nimport { useOnResizeContent } from \"../../utils/hooks/useOnResizeContent\";\nimport { useOnScrollToBottom } from \"../../utils/hooks/useOnScrollToBottom\";\nimport { useManagedRef } from \"../../utils/hooks/useManagedRef\";\nimport { writableStore } from \"../../context/ReadonlyStore\";\nimport { useThreadViewportStore } from \"../../context/react/ThreadViewportContext\";\n\nexport namespace useThreadViewportAutoScroll {\n  export type Options = {\n    /**\n     * Whether to automatically scroll to the bottom when new messages are added.\n     * When enabled, the viewport will automatically scroll to show the latest content.\n     *\n     * Default false if `turnAnchor` is \"top\", otherwise defaults to true.\n     */\n    autoScroll?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when a new run starts.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnRunStart?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when thread history is first loaded.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnInitialize?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when switching to a different thread.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnThreadSwitch?: boolean | undefined;\n  };\n}\n\nexport const useThreadViewportAutoScroll = <TElement extends HTMLElement>({\n  autoScroll,\n  scrollToBottomOnRunStart = true,\n  scrollToBottomOnInitialize = true,\n  scrollToBottomOnThreadSwitch = true,\n}: useThreadViewportAutoScroll.Options): RefCallback<TElement> => {\n  const divRef = useRef<TElement>(null);\n\n  const threadViewportStore = useThreadViewportStore();\n  if (autoScroll === undefined) {\n    autoScroll = threadViewportStore.getState().turnAnchor !== \"top\";\n  }\n\n  const lastScrollTop = useRef<number>(0);\n\n  // bug: when ScrollToBottom's button changes its disabled state, the scroll stops\n  // fix: delay the state change until the scroll is done\n  // stores the scroll behavior to reuse during content resize, or null if not scrolling\n  const scrollingToBottomBehaviorRef = useRef<ScrollBehavior | null>(null);\n\n  const scrollToBottom = useCallback((behavior: ScrollBehavior) => {\n    const div = divRef.current;\n    if (!div) return;\n\n    scrollingToBottomBehaviorRef.current = behavior;\n    div.scrollTo({ top: div.scrollHeight, behavior });\n  }, []);\n\n  const handleScroll = () => {\n    const div = divRef.current;\n    if (!div) return;\n\n    const isAtBottom = threadViewportStore.getState().isAtBottom;\n    const newIsAtBottom =\n      Math.abs(div.scrollHeight - div.scrollTop - div.clientHeight) < 1 ||\n      div.scrollHeight <= div.clientHeight;\n\n    if (!newIsAtBottom && lastScrollTop.current < div.scrollTop) {\n      // ignore scroll down\n    } else {\n      if (newIsAtBottom) {\n        scrollingToBottomBehaviorRef.current = null;\n      }\n\n      const shouldUpdate =\n        newIsAtBottom || scrollingToBottomBehaviorRef.current === null;\n\n      if (shouldUpdate && newIsAtBottom !== isAtBottom) {\n        writableStore(threadViewportStore).setState({\n          isAtBottom: newIsAtBottom,\n        });\n      }\n    }\n\n    lastScrollTop.current = div.scrollTop;\n  };\n\n  const resizeRef = useOnResizeContent(() => {\n    const scrollBehavior = scrollingToBottomBehaviorRef.current;\n    if (scrollBehavior) {\n      scrollToBottom(scrollBehavior);\n    } else if (autoScroll && threadViewportStore.getState().isAtBottom) {\n      scrollToBottom(\"instant\");\n    }\n\n    handleScroll();\n  });\n\n  const scrollRef = useManagedRef<HTMLElement>((el) => {\n    el.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      el.removeEventListener(\"scroll\", handleScroll);\n    };\n  });\n\n  useOnScrollToBottom(({ behavior }) => {\n    scrollToBottom(behavior);\n  });\n\n  // autoscroll on run start\n  useAuiEvent(\"thread.runStart\", () => {\n    if (!scrollToBottomOnRunStart) return;\n    scrollingToBottomBehaviorRef.current = \"auto\";\n    requestAnimationFrame(() => {\n      scrollToBottom(\"auto\");\n    });\n  });\n\n  // scroll to bottom instantly when thread history is first loaded\n  useAuiEvent(\"thread.initialize\", () => {\n    if (!scrollToBottomOnInitialize) return;\n    scrollingToBottomBehaviorRef.current = \"instant\";\n    requestAnimationFrame(() => {\n      scrollToBottom(\"instant\");\n    });\n  });\n\n  // scroll to bottom instantly when switching threads\n  useAuiEvent(\"threadListItem.switchedTo\", () => {\n    if (!scrollToBottomOnThreadSwitch) return;\n    scrollingToBottomBehaviorRef.current = \"instant\";\n    requestAnimationFrame(() => {\n      scrollToBottom(\"instant\");\n    });\n  });\n\n  const autoScrollRef = useComposedRefs<TElement>(resizeRef, scrollRef, divRef);\n  return autoScrollRef as RefCallback<TElement>;\n};\n", "import { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useCallback } from \"react\";\nimport { useManagedRef } from \"./useManagedRef\";\n\nexport const useOnResizeContent = (callback: () => void) => {\n  const callbackRef = useCallbackRef(callback);\n\n  const refCallback = useCallback(\n    (el: HTMLElement) => {\n      const resizeObserver = new ResizeObserver(() => {\n        callbackRef();\n      });\n\n      const mutationObserver = new MutationObserver((mutations) => {\n        // Filter out style-only attribute mutations to prevent feedback loops\n        // with components like ThreadViewportSlack that write styles in response\n        // to viewport changes\n        const hasRelevantMutation = mutations.some(\n          (m) => m.type !== \"attributes\" || m.attributeName !== \"style\",\n        );\n        if (hasRelevantMutation) {\n          callbackRef();\n        }\n      });\n\n      resizeObserver.observe(el);\n      mutationObserver.observe(el, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        characterData: true,\n      });\n\n      return () => {\n        resizeObserver.disconnect();\n        mutationObserver.disconnect();\n      };\n    },\n    [callbackRef],\n  );\n\n  return useManagedRef(refCallback);\n};\n", "\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useSizeHandle } from \"../../utils/hooks/useSizeHandle\";\nimport { useThreadViewport } from \"../../context/react/ThreadViewportContext\";\n\nexport namespace ThreadPrimitiveViewportFooter {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\n/**\n * A footer container that measures its height for scroll calculations.\n *\n * This component measures its height and provides it to the viewport context\n * for use in scroll calculations (e.g., ViewportSlack min-height).\n *\n * Multiple ViewportFooter components can be used - their heights are summed.\n *\n * Typically used with `className=\"sticky bottom-0\"` to keep the footer\n * visible at the bottom of the viewport while scrolling.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Viewport>\n *   <ThreadPrimitive.Messages components={{ ... }} />\n *   <ThreadPrimitive.ViewportFooter className=\"sticky bottom-0\">\n *     <Composer />\n *   </ThreadPrimitive.ViewportFooter>\n * </ThreadPrimitive.Viewport>\n * ```\n */\nexport const ThreadPrimitiveViewportFooter = forwardRef<\n  ThreadPrimitiveViewportFooter.Element,\n  ThreadPrimitiveViewportFooter.Props\n>((props, forwardedRef) => {\n  const register = useThreadViewport((s) => s.registerContentInset);\n  const getHeight = useCallback((el: HTMLElement) => {\n    const marginTop = parseFloat(getComputedStyle(el).marginTop) || 0;\n    return el.offsetHeight + marginTop;\n  }, []);\n\n  const resizeRef = useSizeHandle(register, getHeight);\n\n  const ref = useComposedRefs(forwardedRef, resizeRef);\n\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadPrimitiveViewportFooter.displayName = \"ThreadPrimitive.ViewportFooter\";\n", "\"use client\";\n\nimport { type ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { MessageByIndexProvider } from \"../../context/providers\";\nimport { ThreadMessage as ThreadMessageType } from \"../../types\";\n\nexport namespace ThreadPrimitiveMessages {\n  export type Props = {\n    /**\n     * Component configuration for rendering different types of messages and composers.\n     *\n     * You can provide either:\n     * 1. A single `Message` component that handles all message types\n     * 2. Specific components for `UserMessage` and `AssistantMessage` (with optional `SystemMessage`)\n     *\n     * Optional edit composer components can be provided to customize the editing experience\n     * for different message types when users edit their messages.\n     */\n    components:\n      | {\n          /** Component used to render all message types */\n          Message: ComponentType;\n          /** Component used when editing any message type */\n          EditComposer?: ComponentType | undefined;\n          /** Component used when editing user messages specifically */\n          UserEditComposer?: ComponentType | undefined;\n          /** Component used when editing assistant messages specifically */\n          AssistantEditComposer?: ComponentType | undefined;\n          /** Component used when editing system messages specifically */\n          SystemEditComposer?: ComponentType | undefined;\n          /** Component used to render user messages specifically */\n          UserMessage?: ComponentType | undefined;\n          /** Component used to render assistant messages specifically */\n          AssistantMessage?: ComponentType | undefined;\n          /** Component used to render system messages specifically */\n          SystemMessage?: ComponentType | undefined;\n        }\n      | {\n          /** Component used to render all message types (fallback) */\n          Message?: ComponentType | undefined;\n          /** Component used when editing any message type */\n          EditComposer?: ComponentType | undefined;\n          /** Component used when editing user messages specifically */\n          UserEditComposer?: ComponentType | undefined;\n          /** Component used when editing assistant messages specifically */\n          AssistantEditComposer?: ComponentType | undefined;\n          /** Component used when editing system messages specifically */\n          SystemEditComposer?: ComponentType | undefined;\n          /** Component used to render user messages */\n          UserMessage: ComponentType;\n          /** Component used to render assistant messages */\n          AssistantMessage: ComponentType;\n          /** Component used to render system messages */\n          SystemMessage?: ComponentType | undefined;\n        };\n  };\n}\n\nconst isComponentsSame = (\n  prev: ThreadPrimitiveMessages.Props[\"components\"],\n  next: ThreadPrimitiveMessages.Props[\"components\"],\n) => {\n  return (\n    prev.Message === next.Message &&\n    prev.EditComposer === next.EditComposer &&\n    prev.UserEditComposer === next.UserEditComposer &&\n    prev.AssistantEditComposer === next.AssistantEditComposer &&\n    prev.SystemEditComposer === next.SystemEditComposer &&\n    prev.UserMessage === next.UserMessage &&\n    prev.AssistantMessage === next.AssistantMessage &&\n    prev.SystemMessage === next.SystemMessage\n  );\n};\n\nconst DEFAULT_SYSTEM_MESSAGE = () => null;\n\nconst getComponent = (\n  components: ThreadPrimitiveMessages.Props[\"components\"],\n  role: ThreadMessageType[\"role\"],\n  isEditing: boolean,\n) => {\n  switch (role) {\n    case \"user\":\n      if (isEditing) {\n        return (\n          components.UserEditComposer ??\n          components.EditComposer ??\n          components.UserMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return components.UserMessage ?? (components.Message as ComponentType);\n      }\n    case \"assistant\":\n      if (isEditing) {\n        return (\n          components.AssistantEditComposer ??\n          components.EditComposer ??\n          components.AssistantMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return (\n          components.AssistantMessage ?? (components.Message as ComponentType)\n        );\n      }\n    case \"system\":\n      if (isEditing) {\n        return (\n          components.SystemEditComposer ??\n          components.EditComposer ??\n          components.SystemMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return components.SystemMessage ?? DEFAULT_SYSTEM_MESSAGE;\n      }\n    default:\n      const _exhaustiveCheck: never = role;\n      throw new Error(`Unknown message role: ${_exhaustiveCheck}`);\n  }\n};\n\ntype ThreadMessageComponentProps = {\n  components: ThreadPrimitiveMessages.Props[\"components\"];\n};\n\nconst ThreadMessageComponent: FC<ThreadMessageComponentProps> = ({\n  components,\n}) => {\n  const role = useAuiState(({ message }) => message.role);\n  const isEditing = useAuiState(({ message }) => message.composer.isEditing);\n  const Component = getComponent(components, role, isEditing);\n\n  return <Component />;\n};\nexport namespace ThreadPrimitiveMessageByIndex {\n  export type Props = {\n    index: number;\n    components: ThreadPrimitiveMessages.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single message at the specified index in the current thread.\n *\n * This component provides message context for a specific message in the thread\n * and renders it using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.MessageByIndex\n *   index={0}\n *   components={{\n *     UserMessage: MyUserMessage,\n *     AssistantMessage: MyAssistantMessage\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveMessageByIndex: FC<ThreadPrimitiveMessageByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <MessageByIndexProvider index={index}>\n          <ThreadMessageComponent components={components} />\n        </MessageByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      isComponentsSame(prev.components, next.components),\n  );\n\nThreadPrimitiveMessageByIndex.displayName = \"ThreadPrimitive.MessageByIndex\";\n\n/**\n * Renders all messages in the current thread using the provided component configuration.\n *\n * This component automatically renders all messages in the thread, providing the appropriate\n * message context for each message. It handles different message types (user, assistant, system)\n * and supports editing mode through the provided edit composer components.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Messages\n *   components={{\n *     UserMessage: MyUserMessage,\n *     AssistantMessage: MyAssistantMessage,\n *     EditComposer: MyEditComposer\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveMessagesImpl: FC<ThreadPrimitiveMessages.Props> = ({\n  components,\n}) => {\n  const messagesLength = useAuiState(({ thread }) => thread.messages.length);\n\n  const messageElements = useMemo(() => {\n    if (messagesLength === 0) return null;\n    return Array.from({ length: messagesLength }, (_, index) => (\n      <ThreadPrimitiveMessageByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [messagesLength, components]);\n\n  return messageElements;\n};\n\nThreadPrimitiveMessagesImpl.displayName = \"ThreadPrimitive.Messages\";\n\nexport const ThreadPrimitiveMessages = memo(\n  ThreadPrimitiveMessagesImpl,\n  (prev, next) => isComponentsSame(prev.components, next.components),\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport {\n  useThreadViewport,\n  useThreadViewportStore,\n} from \"../../context/react/ThreadViewportContext\";\n\nexport namespace useThreadScrollToBottom {\n  export type Options = {\n    behavior?: ScrollBehavior | undefined;\n  };\n}\n\nconst useThreadScrollToBottom = ({\n  behavior,\n}: useThreadScrollToBottom.Options = {}) => {\n  const isAtBottom = useThreadViewport((s) => s.isAtBottom);\n\n  const threadViewportStore = useThreadViewportStore();\n\n  const handleScrollToBottom = useCallback(() => {\n    threadViewportStore.getState().scrollToBottom({ behavior });\n  }, [threadViewportStore, behavior]);\n\n  if (isAtBottom) return null;\n  return handleScrollToBottom;\n};\n\nexport namespace ThreadPrimitiveScrollToBottom {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadScrollToBottom>;\n}\n\nexport const ThreadPrimitiveScrollToBottom = createActionButton(\n  \"ThreadPrimitive.ScrollToBottom\",\n  useThreadScrollToBottom,\n  [\"behavior\"],\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useThreadSuggestion = ({\n  prompt,\n  send,\n  clearComposer = true,\n  autoSend,\n  method: _method,\n}: {\n  /** The suggestion prompt. */\n  prompt: string;\n\n  /**\n   * When true, automatically sends the message.\n   * When false, replaces or appends the composer text with the suggestion - depending on the value of `clearComposer`.\n   */\n  send?: boolean | undefined;\n\n  /**\n   * Whether to clear the composer after sending.\n   * When send is set to false, determines if composer text is replaced with suggestion (true, default),\n   * or if it's appended to the composer text (false).\n   *\n   * @default true\n   */\n  clearComposer?: boolean | undefined;\n\n  /** @deprecated Use `send` instead. */\n  autoSend?: boolean | undefined;\n\n  /** @deprecated Use `clearComposer` instead. */\n  method?: \"replace\";\n}) => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread }) => thread.isDisabled);\n\n  // ========== Deprecation Mapping ==========\n  const resolvedSend = send ?? autoSend ?? false;\n  // ==========================================\n\n  const callback = useCallback(() => {\n    const isRunning = aui.thread().getState().isRunning;\n\n    if (resolvedSend && !isRunning) {\n      aui.thread().append(prompt);\n      if (clearComposer) {\n        aui.composer().setText(\"\");\n      }\n    } else {\n      if (clearComposer) {\n        aui.composer().setText(prompt);\n      } else {\n        const currentText = aui.composer().getState().text;\n        aui\n          .composer()\n          .setText(currentText.trim() ? `${currentText} ${prompt}` : prompt);\n      }\n    }\n  }, [aui, resolvedSend, clearComposer, prompt]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ThreadPrimitiveSuggestion {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadSuggestion>;\n}\n\nexport const ThreadPrimitiveSuggestion = createActionButton(\n  \"ThreadPrimitive.Suggestion\",\n  useThreadSuggestion,\n  [\"prompt\", \"send\", \"clearComposer\", \"autoSend\", \"method\"],\n);\n", "\"use client\";\n\nimport { type ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { SuggestionByIndexProvider } from \"../../context/providers\";\n\nexport namespace ThreadPrimitiveSuggestions {\n  export type Props = {\n    /**\n     * Component to render for each suggestion.\n     */\n    components: {\n      /** Component used to render each suggestion */\n      Suggestion: ComponentType;\n    };\n  };\n}\n\ntype SuggestionComponentProps = {\n  components: ThreadPrimitiveSuggestions.Props[\"components\"];\n};\n\nconst SuggestionComponent: FC<SuggestionComponentProps> = ({ components }) => {\n  const Component = components.Suggestion;\n  return <Component />;\n};\n\nexport namespace ThreadPrimitiveSuggestionByIndex {\n  export type Props = {\n    index: number;\n    components: ThreadPrimitiveSuggestions.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single suggestion at the specified index.\n *\n * This component provides suggestion context for a specific suggestion\n * and renders it using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.SuggestionByIndex\n *   index={0}\n *   components={{\n *     Suggestion: MySuggestion\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveSuggestionByIndex: FC<ThreadPrimitiveSuggestionByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <SuggestionByIndexProvider index={index}>\n          <SuggestionComponent components={components} />\n        </SuggestionByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components.Suggestion === next.components.Suggestion,\n  );\n\nThreadPrimitiveSuggestionByIndex.displayName =\n  \"ThreadPrimitive.SuggestionByIndex\";\n\n/**\n * Renders all suggestions using the provided component configuration.\n *\n * This component automatically renders all suggestions from the suggestions scope,\n * providing the appropriate suggestion context for each one.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Suggestions\n *   components={{\n *     Suggestion: MySuggestion\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveSuggestionsImpl: FC<\n  ThreadPrimitiveSuggestions.Props\n> = ({ components }) => {\n  const suggestionsLength = useAuiState(\n    ({ suggestions }) => suggestions.suggestions.length,\n  );\n\n  const suggestionElements = useMemo(() => {\n    if (suggestionsLength === 0) return null;\n    return Array.from({ length: suggestionsLength }, (_, index) => (\n      <ThreadPrimitiveSuggestionByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [suggestionsLength, components]);\n\n  return suggestionElements;\n};\n\nThreadPrimitiveSuggestionsImpl.displayName = \"ThreadPrimitive.Suggestions\";\n\nexport const ThreadPrimitiveSuggestions = memo(\n  ThreadPrimitiveSuggestionsImpl,\n  (prev, next) => prev.components.Suggestion === next.components.Suggestion,\n);\n", "export { SuggestionPrimitiveTitle as Title } from \"./SuggestionTitle\";\nexport { SuggestionPrimitiveDescription as Description } from \"./SuggestionDescription\";\nexport { SuggestionPrimitiveTrigger as Trigger } from \"./SuggestionTrigger\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace SuggestionPrimitiveTitle {\n  export type Element = ElementRef<typeof Primitive.span>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.span>;\n}\n\n/**\n * Renders the title of the suggestion.\n *\n * @example\n * ```tsx\n * <SuggestionPrimitive.Title />\n * ```\n */\nexport const SuggestionPrimitiveTitle = forwardRef<\n  SuggestionPrimitiveTitle.Element,\n  SuggestionPrimitiveTitle.Props\n>((props, ref) => {\n  const title = useAuiState(({ suggestion }) => suggestion.title);\n\n  return (\n    <Primitive.span {...props} ref={ref}>\n      {props.children ?? title}\n    </Primitive.span>\n  );\n});\n\nSuggestionPrimitiveTitle.displayName = \"SuggestionPrimitive.Title\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace SuggestionPrimitiveDescription {\n  export type Element = ElementRef<typeof Primitive.span>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.span>;\n}\n\n/**\n * Renders the description/label of the suggestion.\n *\n * @example\n * ```tsx\n * <SuggestionPrimitive.Description />\n * ```\n */\nexport const SuggestionPrimitiveDescription = forwardRef<\n  SuggestionPrimitiveDescription.Element,\n  SuggestionPrimitiveDescription.Props\n>((props, ref) => {\n  const label = useAuiState(({ suggestion }) => suggestion.label);\n\n  return (\n    <Primitive.span {...props} ref={ref}>\n      {props.children ?? label}\n    </Primitive.span>\n  );\n});\n\nSuggestionPrimitiveDescription.displayName = \"SuggestionPrimitive.Description\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nconst useSuggestionTrigger = ({\n  send,\n  clearComposer = true,\n}: {\n  /**\n   * When true, automatically sends the message.\n   * When false, replaces or appends the composer text with the suggestion - depending on the value of `clearComposer`.\n   */\n  send?: boolean | undefined;\n\n  /**\n   * Whether to clear the composer after sending.\n   * When send is set to false, determines if composer text is replaced with suggestion (true, default),\n   * or if it's appended to the composer text (false).\n   *\n   * @default true\n   */\n  clearComposer?: boolean | undefined;\n}) => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread }) => thread.isDisabled);\n  const prompt = useAuiState(({ suggestion }) => suggestion.prompt);\n\n  const resolvedSend = send ?? false;\n\n  const callback = useCallback(() => {\n    const isRunning = aui.thread().getState().isRunning;\n\n    if (resolvedSend && !isRunning) {\n      aui.thread().append(prompt);\n      if (clearComposer) {\n        aui.composer().setText(\"\");\n      }\n    } else {\n      if (clearComposer) {\n        aui.composer().setText(prompt);\n      } else {\n        const currentText = aui.composer().getState().text;\n        aui\n          .composer()\n          .setText(currentText.trim() ? `${currentText} ${prompt}` : prompt);\n      }\n    }\n  }, [aui, resolvedSend, clearComposer, prompt]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace SuggestionPrimitiveTrigger {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useSuggestionTrigger>;\n}\n\n/**\n * A button that triggers the suggestion action (send or insert into composer).\n *\n * @example\n * ```tsx\n * <SuggestionPrimitive.Trigger send>\n *   Click me\n * </SuggestionPrimitive.Trigger>\n * ```\n */\nexport const SuggestionPrimitiveTrigger = createActionButton(\n  \"SuggestionPrimitive.Trigger\",\n  useSuggestionTrigger,\n  [\"send\", \"clearComposer\"],\n);\n", "export { ThreadListPrimitiveNew as New } from \"./ThreadListNew\";\nexport { ThreadListPrimitiveItems as Items } from \"./ThreadListItems\";\nexport { ThreadListPrimitiveItemByIndex as ItemByIndex } from \"./ThreadListItems\";\nexport { ThreadListPrimitiveRoot as Root } from \"./ThreadListRoot\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/createActionButton\";\nimport { forwardRef } from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useAuiState, useAui } from \"@assistant-ui/store\";\n\nexport namespace ThreadListPrimitiveNew {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<() => void>;\n}\n\nexport const ThreadListPrimitiveNew = forwardRef<\n  ThreadListPrimitiveNew.Element,\n  ThreadListPrimitiveNew.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isMain = useAuiState(\n    ({ threads }) => threads.newThreadId === threads.mainThreadId,\n  );\n\n  const aui = useAui();\n\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isMain ? { \"data-active\": \"true\", \"aria-current\": \"true\" } : null)}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled}\n      onClick={composeEventHandlers(onClick, () => {\n        aui.threads().switchToNewThread();\n      })}\n    />\n  );\n});\n\nThreadListPrimitiveNew.displayName = \"ThreadListPrimitive.New\";\n", "\"use client\";\n\nimport { ComponentType, FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { ThreadListItemByIndexProvider } from \"../../context/providers\";\n\nexport namespace ThreadListPrimitiveItems {\n  export type Props = {\n    archived?: boolean | undefined;\n    components: {\n      ThreadListItem: ComponentType;\n    };\n  };\n}\n\nexport namespace ThreadListPrimitiveItemByIndex {\n  export type Props = {\n    index: number;\n    archived?: boolean | undefined;\n    components: ThreadListPrimitiveItems.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single thread list item at the specified index.\n *\n * This component provides direct access to render a specific thread\n * from the thread list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadListPrimitive.ItemByIndex\n *   index={0}\n *   components={{\n *     ThreadListItem: MyThreadListItem\n *   }}\n * />\n * ```\n */\nexport const ThreadListPrimitiveItemByIndex: FC<ThreadListPrimitiveItemByIndex.Props> =\n  memo(\n    ({ index, archived = false, components }) => {\n      const ThreadListItemComponent = components.ThreadListItem;\n\n      return (\n        <ThreadListItemByIndexProvider index={index} archived={archived}>\n          <ThreadListItemComponent />\n        </ThreadListItemByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.archived === next.archived &&\n      prev.components.ThreadListItem === next.components.ThreadListItem,\n  );\n\nThreadListPrimitiveItemByIndex.displayName = \"ThreadListPrimitive.ItemByIndex\";\n\nexport const ThreadListPrimitiveItems: FC<ThreadListPrimitiveItems.Props> = ({\n  archived = false,\n  components,\n}) => {\n  const contentLength = useAuiState(({ threads }) =>\n    archived ? threads.archivedThreadIds.length : threads.threadIds.length,\n  );\n\n  const listElements = useMemo(() => {\n    return Array.from({ length: contentLength }, (_, index) => (\n      <ThreadListPrimitiveItemByIndex\n        key={index}\n        index={index}\n        archived={archived}\n        components={components}\n      />\n    ));\n  }, [contentLength, archived, components]);\n\n  return listElements;\n};\n\nThreadListPrimitiveItems.displayName = \"ThreadListPrimitive.Items\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ThreadListPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const ThreadListPrimitiveRoot = forwardRef<\n  ThreadListPrimitiveRoot.Element,\n  ThreadListPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadListPrimitiveRoot.displayName = \"ThreadListPrimitive.Root\";\n", "export { ThreadListItemPrimitiveRoot as Root } from \"./ThreadListItemRoot\";\nexport { ThreadListItemPrimitiveArchive as Archive } from \"./ThreadListItemArchive\";\nexport { ThreadListItemPrimitiveUnarchive as Unarchive } from \"./ThreadListItemUnarchive\";\nexport { ThreadListItemPrimitiveDelete as Delete } from \"./ThreadListItemDelete\";\nexport { ThreadListItemPrimitiveTrigger as Trigger } from \"./ThreadListItemTrigger\";\nexport { ThreadListItemPrimitiveTitle as Title } from \"./ThreadListItemTitle\";\n", "\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ThreadListItemPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const ThreadListItemPrimitiveRoot = forwardRef<\n  ThreadListItemPrimitiveRoot.Element,\n  ThreadListItemPrimitiveRoot.Props\n>((props, ref) => {\n  const isMain = useAuiState(\n    ({ threads, threadListItem }) => threads.mainThreadId === threadListItem.id,\n  );\n\n  return (\n    <Primitive.div\n      {...(isMain ? { \"data-active\": \"true\", \"aria-current\": \"true\" } : null)}\n      {...props}\n      ref={ref}\n    />\n  );\n});\n\nThreadListItemPrimitiveRoot.displayName = \"ThreadListItemPrimitive.Root\";\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemArchive = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().archive();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveArchive {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemArchive>;\n}\n\nexport const ThreadListItemPrimitiveArchive = createActionButton(\n  \"ThreadListItemPrimitive.Archive\",\n  useThreadListItemArchive,\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemUnarchive = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().unarchive();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveUnarchive {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemUnarchive>;\n}\n\nexport const ThreadListItemPrimitiveUnarchive = createActionButton(\n  \"ThreadListItemPrimitive.Unarchive\",\n  useThreadListItemUnarchive,\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemDelete = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().delete();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveDelete {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemDelete>;\n}\n\nexport const ThreadListItemPrimitiveDelete = createActionButton(\n  \"ThreadListItemPrimitive.Delete\",\n  useThreadListItemDelete,\n);\n", "\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useAui } from \"@assistant-ui/store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemTrigger = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().switchTo();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveTrigger {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemTrigger>;\n}\n\nexport const ThreadListItemPrimitiveTrigger = createActionButton(\n  \"ThreadListItemPrimitive.Trigger\",\n  useThreadListItemTrigger,\n);\n", "\"use client\";\n\nimport type { FC, ReactNode } from \"react\";\nimport { useAuiState } from \"@assistant-ui/store\";\n\nexport namespace ThreadListItemPrimitiveTitle {\n  export type Props = {\n    fallback?: ReactNode;\n  };\n}\n\nexport const ThreadListItemPrimitiveTitle: FC<\n  ThreadListItemPrimitiveTitle.Props\n> = ({ fallback }) => {\n  const title = useAuiState(({ threadListItem }) => threadListItem.title);\n  return <>{title || fallback}</>;\n};\n\nThreadListItemPrimitiveTitle.displayName = \"ThreadListItemPrimitive.Title\";\n", "export { ThreadListItemMorePrimitiveRoot as Root } from \"./ThreadListItemMoreRoot\";\nexport { ThreadListItemMorePrimitiveTrigger as Trigger } from \"./ThreadListItemMoreTrigger\";\nexport { ThreadListItemMorePrimitiveContent as Content } from \"./ThreadListItemMoreContent\";\nexport { ThreadListItemMorePrimitiveItem as Item } from \"./ThreadListItemMoreItem\";\nexport { ThreadListItemMorePrimitiveSeparator as Separator } from \"./ThreadListItemMoreSeparator\";\n", "import * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport const useDropdownMenuScope: ReturnType<\n  typeof DropdownMenuPrimitive.createDropdownMenuScope\n> = DropdownMenuPrimitive.createDropdownMenuScope();\n\nexport type ScopedProps<P> = P & { __scopeThreadListItemMore?: Scope };\n", "\"use client\";\n\nimport { FC } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveRoot {\n  export type Props = DropdownMenuPrimitive.DropdownMenuProps;\n}\n\nexport const ThreadListItemMorePrimitiveRoot: FC<\n  ThreadListItemMorePrimitiveRoot.Props\n> = ({\n  __scopeThreadListItemMore,\n  ...rest\n}: ScopedProps<ThreadListItemMorePrimitiveRoot.Props>) => {\n  const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n  return <DropdownMenuPrimitive.Root {...scope} {...rest} />;\n};\n\nThreadListItemMorePrimitiveRoot.displayName =\n  \"ThreadListItemMorePrimitive.Root\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveTrigger {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Trigger\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveTrigger = forwardRef<\n  ThreadListItemMorePrimitiveTrigger.Element,\n  ThreadListItemMorePrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveTrigger.displayName =\n  \"ThreadListItemMorePrimitive.Trigger\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveContent {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Content\n  > & {\n    portalProps?:\n      | ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Portal>\n      | undefined;\n  };\n}\n\nexport const ThreadListItemMorePrimitiveContent = forwardRef<\n  ThreadListItemMorePrimitiveContent.Element,\n  ThreadListItemMorePrimitiveContent.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      portalProps,\n      sideOffset = 4,\n      ...props\n    }: ScopedProps<ThreadListItemMorePrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return (\n      <DropdownMenuPrimitive.Portal {...scope} {...portalProps}>\n        <DropdownMenuPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          sideOffset={sideOffset}\n        />\n      </DropdownMenuPrimitive.Portal>\n    );\n  },\n);\n\nThreadListItemMorePrimitiveContent.displayName =\n  \"ThreadListItemMorePrimitive.Content\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveItem {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Item>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Item\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveItem = forwardRef<\n  ThreadListItemMorePrimitiveItem.Element,\n  ThreadListItemMorePrimitiveItem.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveItem.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Item {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveItem.displayName =\n  \"ThreadListItemMorePrimitive.Item\";\n", "\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveSeparator {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Separator>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Separator\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveSeparator = forwardRef<\n  ThreadListItemMorePrimitiveSeparator.Element,\n  ThreadListItemMorePrimitiveSeparator.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveSeparator.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Separator {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveSeparator.displayName =\n  \"ThreadListItemMorePrimitive.Separator\";\n", "\"use client\";\n\nimport { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { ReasoningMessagePart } from \"../../types\";\n\nexport const useMessagePartReasoning = () => {\n  const text = useAuiState(({ part }) => {\n    if (part.type !== \"reasoning\")\n      throw new Error(\n        \"MessagePartReasoning can only be used inside reasoning message parts.\",\n      );\n\n    return part as MessagePartState & ReasoningMessagePart;\n  });\n\n  return text;\n};\n", "\"use client\";\n\nimport type { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { SourceMessagePart } from \"../../types\";\n\nexport const useMessagePartSource = () => {\n  const source = useAuiState(({ part }) => {\n    if (part.type !== \"source\")\n      throw new Error(\n        \"MessagePartSource can only be used inside source message parts.\",\n      );\n\n    return part as MessagePartState & SourceMessagePart;\n  });\n\n  return source;\n};\n", "\"use client\";\n\nimport { MessagePartState } from \"../../legacy-runtime/runtime/MessagePartRuntime\";\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { FileMessagePart } from \"../../types\";\n\nexport const useMessagePartFile = () => {\n  const file = useAuiState(({ part }) => {\n    if (part.type !== \"file\")\n      throw new Error(\n        \"MessagePartFile can only be used inside file message parts.\",\n      );\n\n    return part as MessagePartState & FileMessagePart;\n  });\n\n  return file;\n};\n", "\"use client\";\n\nimport { useAuiState } from \"@assistant-ui/store\";\nimport { DataMessagePart } from \"../../types\";\n\nexport const useMessagePartData = <T = any>(name?: string) => {\n  const part = useAuiState(({ part }) => {\n    if (part.type !== \"data\") {\n      return null;\n    }\n    return part as DataMessagePart<T>;\n  });\n\n  if (!part) {\n    return null;\n  }\n\n  if (name && part.name !== name) {\n    return null;\n  }\n\n  return part;\n};\n", "\"use client\";\n\nimport { type RefObject, useCallback, useEffect, useRef } from \"react\";\n\n/**\n * Locks scroll position during collapsible/height animations and hides scrollbar.\n *\n * This utility prevents page jumps when content height changes during animations,\n * providing a smooth user experience. It finds the nearest scrollable ancestor and\n * temporarily locks its scroll position while the animation completes.\n *\n * - Prevents forced reflows: no layout reads, mutations scoped to scrollable parent only\n * - Reactive: only intercepts scroll events when browser actually adjusts\n * - Cleans up automatically after animation duration\n *\n * @param animatedElementRef - Ref to the animated element\n * @param animationDuration - Lock duration in milliseconds\n * @returns Function to activate the scroll lock\n *\n * @example\n * ```tsx\n * const collapsibleRef = useRef<HTMLDivElement>(null);\n * const lockScroll = useScrollLock(collapsibleRef, 200);\n *\n * const handleCollapse = () => {\n *   lockScroll(); // Lock scroll before collapsing\n *   setIsOpen(false);\n * };\n * ```\n */\nexport const useScrollLock = <T extends HTMLElement = HTMLElement>(\n  animatedElementRef: RefObject<T | null>,\n  animationDuration: number,\n) => {\n  const scrollContainerRef = useRef<HTMLElement | null>(null);\n  const cleanupRef = useRef<(() => void) | null>(null);\n\n  useEffect(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, []);\n\n  const lockScroll = useCallback(() => {\n    cleanupRef.current?.();\n\n    (function findScrollableAncestor() {\n      if (scrollContainerRef.current || !animatedElementRef.current) return;\n\n      let el: HTMLElement | null = animatedElementRef.current;\n      while (el) {\n        const { overflowY } = getComputedStyle(el);\n        if (overflowY === \"scroll\" || overflowY === \"auto\") {\n          scrollContainerRef.current = el;\n          break;\n        }\n        el = el.parentElement;\n      }\n    })();\n\n    const scrollContainer = scrollContainerRef.current;\n    if (!scrollContainer) return;\n\n    const scrollPosition = scrollContainer.scrollTop;\n    const scrollbarWidth = scrollContainer.style.scrollbarWidth;\n\n    scrollContainer.style.scrollbarWidth = \"none\";\n\n    const resetPosition = () => (scrollContainer.scrollTop = scrollPosition);\n    scrollContainer.addEventListener(\"scroll\", resetPosition);\n\n    const timeoutId = setTimeout(() => {\n      scrollContainer.removeEventListener(\"scroll\", resetPosition);\n      scrollContainer.style.scrollbarWidth = scrollbarWidth;\n      cleanupRef.current = null;\n    }, animationDuration);\n\n    cleanupRef.current = () => {\n      clearTimeout(timeoutId);\n      scrollContainer.removeEventListener(\"scroll\", resetPosition);\n      scrollContainer.style.scrollbarWidth = scrollbarWidth;\n    };\n  }, [animationDuration, animatedElementRef]);\n\n  return lockScroll;\n};\n", "import {\n  resource,\n  tapState,\n  tapMemo,\n  tapEffect,\n  tapEffectEvent,\n} from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  attachDefaultPeers,\n  tapClientResource,\n  Derived,\n} from \"@assistant-ui/store\";\nimport { withKey } from \"@assistant-ui/tap\";\nimport type { Attachment } from \"../types/AttachmentTypes\";\nimport { ModelContext } from \"./ModelContextClient\";\nimport { Tools } from \"./Tools\";\nimport { Suggestions } from \"./Suggestions\";\nimport {\n  ThreadAssistantMessagePart,\n  ThreadUserMessagePart,\n} from \"../types/MessagePartTypes\";\nimport type { ThreadMessage } from \"../types\";\n\nexport type ExternalThreadMessage = ThreadMessage & {\n  id: string;\n};\n\nexport type ExternalThreadProps = {\n  messages: readonly ExternalThreadMessage[];\n  isRunning?: boolean;\n  onNew?: (message: any) => void;\n  onEdit?: (message: any) => void;\n  onReload?: (parentId: string | null) => void;\n  onStartRun?: () => void;\n  onCancel?: () => void;\n};\n\ntype MessageClientProps = {\n  message: ExternalThreadMessage;\n  index: number;\n  onEdit?: (message: any) => void;\n  onReload?: () => void;\n};\n\n// Message Client - minimal implementation\nconst MessageClient = resource(\n  ({\n    message,\n    index,\n    onEdit,\n    onReload,\n  }: MessageClientProps): ClientOutput<\"message\"> => {\n    const [isCopied, setIsCopied] = tapState(false);\n    const [isHovering, setIsHovering] = tapState(false);\n    const [isEditing, setIsEditing] = tapState(false);\n\n    const partClients = tapClientLookup(\n      () =>\n        message.content.map((part, idx) =>\n          withKey(idx, PartResource({ part })),\n        ),\n      [message.content],\n    );\n\n    const attachmentClients = tapClientLookup(\n      () =>\n        (message.attachments ?? []).map((attachment) =>\n          withKey(\n            attachment.id,\n            AttachmentResource({\n              attachment,\n              onRemove: () => {},\n            }),\n          ),\n        ),\n      [message.attachments],\n    );\n\n    const handleBeginEdit = () => {\n      setIsEditing(true);\n    };\n\n    const handleCancelEdit = () => {\n      setIsEditing(false);\n    };\n\n    const handleSendEdit = (msg: any) => {\n      onEdit?.({\n        ...msg,\n        parentId: message.id,\n        sourceId: message.id,\n      });\n      setIsEditing(false);\n    };\n\n    const composerClient = tapClientResource(\n      ComposerClientResource({\n        type: \"edit\",\n        isEditing,\n        canCancel: true,\n        onCancel: handleCancelEdit,\n        onBeginEdit: handleBeginEdit,\n        onSend: handleSendEdit,\n        message,\n      }),\n    );\n\n    const state = tapMemo(() => {\n      return {\n        ...message,\n        attachments: message.attachments ?? [],\n        parentId: null,\n        isLast: false, // Will be set by thread\n        branchNumber: 1,\n        branchCount: 1,\n        speech: undefined,\n        submittedFeedback: undefined,\n        parts: partClients.state,\n        isCopied,\n        isHovering,\n        index,\n        composer: composerClient.state,\n      };\n    }, [\n      message,\n      isCopied,\n      isHovering,\n      index,\n      composerClient.state,\n      partClients.state,\n    ]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        composer: composerClient.methods,\n        reload: () => {\n          onReload?.();\n        },\n        speak: () => {},\n        stopSpeaking: () => {},\n        submitFeedback: () => {},\n        switchToBranch: () => {},\n        getCopyText: () =>\n          message.content.map((c) => (\"text\" in c ? c.text : \"\")).join(\"\"),\n        part: (selector) => {\n          if (\"index\" in selector) {\n            return partClients.get(selector);\n          }\n          const partIndex = state.parts.findIndex(\n            (p) =>\n              p.type === \"tool-call\" && p.toolCallId === selector.toolCallId,\n          );\n          return partClients.get({ index: partIndex });\n        },\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachmentClients.get({ key: selector.id });\n          }\n          return attachmentClients.get(selector);\n        },\n        setIsCopied,\n        setIsHovering,\n      },\n    };\n  },\n);\n\ntype PartResourceProps = {\n  part: ThreadAssistantMessagePart | ThreadUserMessagePart;\n};\n\n// Part Client - minimal implementation\nconst PartResource = resource(\n  ({ part }: PartResourceProps): ClientOutput<\"part\"> => {\n    const state = tapMemo(\n      () => ({\n        ...part,\n        status: { type: \"complete\" as const },\n      }),\n      [part],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: () => {},\n        resumeToolCall: () => {},\n      },\n    };\n  },\n);\n\ntype AttachmentResourceProps = {\n  attachment: Attachment;\n  onRemove?: () => void;\n};\n\n// Attachment Client - minimal implementation\nconst AttachmentResource = resource(\n  ({\n    attachment,\n    onRemove,\n  }: AttachmentResourceProps): ClientOutput<\"attachment\"> => {\n    return {\n      state: attachment,\n      methods: {\n        getState: () => attachment,\n        remove: async () => {\n          onRemove?.();\n        },\n      },\n    };\n  },\n);\n\ntype ComposerClientResourceProps = {\n  type: \"thread\" | \"edit\";\n  isEditing: boolean;\n  canCancel: boolean;\n  onCancel: () => void;\n  onBeginEdit?: () => void;\n  onSend?: (message: any) => void;\n  message?: ExternalThreadMessage;\n};\n\n// Composer Client - minimal implementation\nconst ComposerClientResource = resource(\n  ({\n    type,\n    isEditing,\n    canCancel,\n    onCancel,\n    onBeginEdit,\n    onSend,\n    message,\n  }: ComposerClientResourceProps): ClientOutput<\"composer\"> => {\n    const [text, setText] = tapState(\"\");\n    const [role, setRole] = tapState<\"user\" | \"assistant\" | \"system\">(\"user\");\n    const [runConfig, setRunConfig] = tapState<Record<string, unknown>>({});\n    const [attachments, setAttachments] = tapState<readonly Attachment[]>([]);\n\n    // Update composer values when editing begins\n    const updateFromMessage = tapEffectEvent(() => {\n      if (message) {\n        // Extract text from message content (text parts only)\n        const textParts = message.content.filter(\n          (part) => part.type === \"text\",\n        );\n        const messageText = textParts\n          .map((part) => (\"text\" in part ? part.text : \"\"))\n          .join(\"\\n\\n\");\n\n        setText(messageText);\n        setRole(message.role);\n        setAttachments(message.attachments ?? []);\n      }\n    });\n\n    tapEffect(() => {\n      if (isEditing) {\n        updateFromMessage();\n      }\n    }, [isEditing]);\n\n    const attachmentClients = tapClientLookup(\n      () =>\n        attachments.map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            AttachmentResource({\n              attachment,\n              onRemove: () => {\n                setAttachments(attachments.filter((_, i) => i !== idx));\n              },\n            }),\n          ),\n        ),\n      [attachments],\n    );\n\n    const state = tapMemo(\n      () => ({\n        text,\n        role,\n        attachments: attachmentClients.state,\n        runConfig,\n        isEditing,\n        canCancel,\n        attachmentAccept: \"*\",\n        isEmpty: !text.trim() && !attachments.length,\n        type,\n        dictation: undefined,\n      }),\n      [\n        text,\n        role,\n        attachmentClients.state,\n        runConfig,\n        isEditing,\n        canCancel,\n        type,\n        attachments.length,\n      ],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setText,\n        setRole,\n        setRunConfig,\n        addAttachment: async (file: File) => {\n          const newAttachment: Attachment = {\n            id: Math.random().toString(36).substring(7),\n            type: \"file\",\n            name: file.name,\n            contentType: file.type,\n            file,\n            status: { type: \"complete\" },\n            content: [],\n          };\n          setAttachments([...attachments, newAttachment]);\n        },\n        clearAttachments: async () => {\n          setAttachments([]);\n        },\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachmentClients.get({ key: selector.id });\n          }\n          return attachmentClients.get(selector);\n        },\n        reset: async () => {\n          setText(\"\");\n          setRole(\"user\");\n          setRunConfig({});\n          setAttachments([]);\n        },\n        send: () => {\n          const message = {\n            role,\n            content: text ? [{ type: \"text\" as const, text }] : [],\n            attachments: attachments as any,\n            createdAt: new Date(),\n            runConfig,\n          };\n          onSend?.(message);\n          setText(\"\");\n          setAttachments([]);\n        },\n        cancel: onCancel,\n        beginEdit: () => {\n          onBeginEdit?.();\n        },\n        startDictation: () => {},\n        stopDictation: () => {},\n      },\n    };\n  },\n);\n\n// External Thread Client\nexport const ExternalThread = resource(\n  ({\n    messages,\n    isRunning = false,\n    onNew,\n    onEdit,\n    onReload,\n    onStartRun,\n    onCancel,\n  }: ExternalThreadProps): ClientOutput<\"thread\"> => {\n    const handleReload = (messageId: string) => {\n      const messageIndex = messages.findIndex((m) => m.id === messageId);\n      if (messageIndex === -1) return;\n\n      const parentId = messageIndex > 0 ? messages[messageIndex - 1]!.id : null;\n      onReload?.(parentId);\n    };\n\n    const messageClients = tapClientLookup(\n      () =>\n        messages.map((msg, index) => {\n          const props: MessageClientProps = {\n            message: msg,\n            index,\n            onReload: () => handleReload(msg.id),\n          };\n          if (onEdit) props.onEdit = onEdit;\n          return withKey(msg.id, MessageClient(props));\n        }),\n      [messages, onEdit],\n    );\n\n    const handleCancelRun = () => {\n      onCancel?.();\n    };\n\n    const handleSendNew = (message: any) => {\n      onNew?.(message);\n    };\n\n    const composerClient = tapClientResource(\n      ComposerClientResource({\n        type: \"thread\",\n        isEditing: true,\n        canCancel: isRunning,\n        onCancel: handleCancelRun,\n        onSend: handleSendNew,\n      }),\n    );\n\n    const state = tapMemo(() => {\n      const messageStates = messageClients.state.map((s, idx, arr) => ({\n        ...s,\n        isLast: idx === arr.length - 1,\n      }));\n\n      return {\n        isEmpty: messages.length === 0,\n        isDisabled: false,\n        isLoading: false,\n        isRunning,\n        capabilities: {\n          edit: false,\n          reload: false,\n          cancel: isRunning,\n          speech: false,\n          attachments: false,\n          feedback: false,\n          switchToBranch: false,\n          switchBranchDuringRun: false,\n          unstable_copy: false,\n          dictation: false,\n        },\n        messages: messageStates,\n        state: {},\n        suggestions: [],\n        extras: undefined,\n        speech: undefined,\n        composer: composerClient.state,\n      };\n    }, [messages, isRunning, messageClients.state, composerClient.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        composer: composerClient.methods,\n        append: (message) => {\n          onNew?.(message);\n        },\n        startRun: () => {\n          onStartRun?.();\n        },\n        unstable_resumeRun: () => {},\n        cancelRun: handleCancelRun,\n        getModelContext: () => ({ tools: {}, config: {} }),\n        export: () => ({ messages: [] }),\n        import: () => {},\n        reset: () => {},\n        message: (selector) => {\n          if (\"id\" in selector) {\n            return messageClients.get({ key: selector.id });\n          }\n          return messageClients.get(selector);\n        },\n        stopSpeaking: () => {},\n        startVoice: async () => {},\n        stopVoice: async () => {},\n      },\n    };\n  },\n);\n\nattachDefaultPeers(ExternalThread, {\n  modelContext: ModelContext(),\n  tools: Tools({}),\n  suggestions: Suggestions(),\n  composer: Derived({\n    source: \"thread\",\n    query: {},\n    get: (aui) => aui.thread().composer,\n  }),\n});\n", "import { resource, tapState, tapMemo } from \"@assistant-ui/tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  Derived,\n  attachDefaultPeers,\n  tapClientResource,\n} from \"@assistant-ui/store\";\nimport { withKey } from \"@assistant-ui/tap\";\nimport type { ResourceElement } from \"@assistant-ui/tap\";\nimport type { ThreadState } from \"../types/scopes/thread\";\nimport { Suggestions } from \"./Suggestions\";\nimport { ModelContext } from \"./ModelContextClient\";\nimport { Tools } from \"./Tools\";\n\nexport type InMemoryThreadListProps = {\n  thread: (threadId: string) => ResourceElement<ClientOutput<\"thread\">>;\n  onSwitchToThread?: (threadId: string) => void;\n  onSwitchToNewThread?: () => void;\n};\n\ntype ThreadData = {\n  id: string;\n  title?: string;\n  status: \"regular\" | \"archived\";\n};\n\n// ThreadListItem Client\nconst ThreadListItemClient = resource(\n  (props: {\n    data: ThreadData;\n    onSwitchTo: () => void;\n    onArchive: () => void;\n    onUnarchive: () => void;\n    onDelete: () => void;\n  }): ClientOutput<\"threadListItem\"> => {\n    const { data, onSwitchTo, onArchive, onUnarchive, onDelete } = props;\n    const state = tapMemo(\n      () => ({\n        id: data.id,\n        remoteId: undefined,\n        externalId: undefined,\n        title: data.title,\n        status: data.status,\n      }),\n      [data.id, data.title, data.status],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        switchTo: onSwitchTo,\n        rename: () => {},\n        archive: onArchive,\n        unarchive: onUnarchive,\n        delete: onDelete,\n        generateTitle: () => {},\n        initialize: async () => ({ remoteId: data.id, externalId: undefined }),\n        detach: () => {},\n      },\n    };\n  },\n);\n\n// InMemoryThreadList Client\nexport const InMemoryThreadList = resource(\n  (props: InMemoryThreadListProps): ClientOutput<\"threads\"> => {\n    const {\n      thread: threadFactory,\n      onSwitchToThread,\n      onSwitchToNewThread,\n    } = props;\n\n    const [mainThreadId, setMainThreadId] = tapState(\"main\");\n    const [threads, setThreads] = tapState<readonly ThreadData[]>(() => [\n      { id: \"main\", title: \"Main Thread\", status: \"regular\" },\n    ]);\n\n    const handleSwitchToThread = (threadId: string) => {\n      setMainThreadId(threadId);\n      onSwitchToThread?.(threadId);\n    };\n\n    const handleArchive = (threadId: string) => {\n      setThreads((prev) =>\n        prev.map((t) =>\n          t.id === threadId ? { ...t, status: \"archived\" as const } : t,\n        ),\n      );\n    };\n\n    const handleUnarchive = (threadId: string) => {\n      setThreads((prev) =>\n        prev.map((t) =>\n          t.id === threadId ? { ...t, status: \"regular\" as const } : t,\n        ),\n      );\n    };\n\n    const handleDelete = (threadId: string) => {\n      setThreads((prev) => prev.filter((t) => t.id !== threadId));\n      if (mainThreadId === threadId) {\n        const remaining = threads.filter((t) => t.id !== threadId);\n        setMainThreadId(remaining[0]?.id || \"main\");\n      }\n    };\n\n    const handleSwitchToNewThread = () => {\n      const newId = `thread-${Date.now()}`;\n      setThreads((prev) => [\n        ...prev,\n        { id: newId, title: \"New Thread\", status: \"regular\" },\n      ]);\n      setMainThreadId(newId);\n      onSwitchToNewThread?.();\n    };\n\n    const threadListItems = tapClientLookup(\n      () =>\n        threads.map((t) =>\n          withKey(\n            t.id,\n            ThreadListItemClient({\n              data: t,\n              onSwitchTo: () => handleSwitchToThread(t.id),\n              onArchive: () => handleArchive(t.id),\n              onUnarchive: () => handleUnarchive(t.id),\n              onDelete: () => handleDelete(t.id),\n            }),\n          ),\n        ),\n      [threads],\n    );\n\n    // Create the main thread\n    const mainThreadClient = tapClientResource(threadFactory(mainThreadId));\n\n    const state = tapMemo(() => {\n      const regularThreads = threads.filter((t) => t.status === \"regular\");\n      const archivedThreads = threads.filter((t) => t.status === \"archived\");\n      const mainThreadState = mainThreadClient.state as ThreadState;\n\n      return {\n        mainThreadId,\n        newThreadId: null,\n        isLoading: false,\n        threadIds: regularThreads.map((t) => t.id),\n        archivedThreadIds: archivedThreads.map((t) => t.id),\n        threadItems: threadListItems.state,\n        main: mainThreadState,\n      };\n    }, [mainThreadId, threads, threadListItems.state, mainThreadClient.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        switchToThread: handleSwitchToThread,\n        switchToNewThread: handleSwitchToNewThread,\n        item: (selector) => {\n          if (selector === \"main\") {\n            const index = threads.findIndex((t) => t.id === mainThreadId);\n            return threadListItems.get({ index: index === -1 ? 0 : index });\n          }\n          if (\"id\" in selector) {\n            const index = threads.findIndex((t) => t.id === selector.id);\n            return threadListItems.get({ index });\n          }\n          return threadListItems.get(selector);\n        },\n        thread: () => mainThreadClient.methods,\n      },\n    };\n  },\n);\n\nattachDefaultPeers(InMemoryThreadList, {\n  thread: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().thread(\"main\"),\n  }),\n  threadListItem: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().item(\"main\"),\n  }),\n  composer: Derived({\n    source: \"thread\",\n    query: {},\n    get: (aui) => aui.threads().thread(\"main\").composer,\n  }),\n  modelContext: ModelContext(),\n  tools: Tools({}),\n  suggestions: Suggestions(),\n});\n"],
  "mappings": "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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAAC;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAAC;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAAC;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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",
  "names": ["_parse", "parse", "safeParse", "error", "_a", "resource", "version", "index", "index", "_a", "error", "version", "version", "error", "context", "import_react", "index", "_jsx", "resource", "object", "set", "error", "array", "index", "memo", "meta", "client", "import_react", "import_react", "React", "resource", "index", "import_react", "config", "_a", "tool", "_a", "error", "_a", "file", "index", "subscribers", "_a", "error", "json", "sjson", "meta", "_a", "promise", "item", "_a", "_a", "transform", "DataStreamStreamChunkType", "index", "transform", "customAlphabet", "generateId", "customAlphabet", "_a", "generateId", "promise", "_a", "error", "_a", "_a", "config", "_a", "EMPTY_ARRAY", "file", "nextState", "_a", "generateId", "controller", "transform", "SSEEventStream", "import_secure_json_parse", "_a", "array", "error", "promise", "transform", "controller", "promise", "_a", "sjson", "tool", "context", "_a", "context", "tool", "SSEEventStream", "_a", "_a", "_a", "config", "index", "callback", "file", "error", "file", "error", "file", "file", "url", "error", "_a", "error", "import_react", "context", "_jsx", "import_react", "EMPTY_ARRAY", "_a", "cached", "_a", "_a", "subscribers", "EMPTY_ARRAY", "_a", "config", "_a", "import_react", "import_react", "import_react", "import_react", "config", "_a", "error", "import_react", "import_react", "controller", "transform", "_a", "_a", "context", "error", "import_react", "_a", "error", "result", "cached", "import_react", "_a", "_a", "promise", "_b", "_c", "_d", "steps", "context", "error", "EMPTY_ARRAY", "DEFAULT_THREAD_ID", "DEFAULT_THREAD_DATA", "import_react", "jwt", "base64", "error", "baseUrl", "response", "data", "access_token", "refresh_token", "config", "url", "config", "import_react", "_a", "_jsx", "_a", "import_react", "import_react", "partial", "import_react", "React", "context", "optional", "useSmoothStatus", "context", "_jsx", "text", "import_react", "import_react", "index", "index", "config", "_a", "index", "import_react", "tool", "context", "tool", "import_react", "tool", "tool", "import_react", "config", "import_react", "tool", "import_react", "config", "_a", "_jsx", "_a", "tool", "index", "tool", "context", "config", "_a", "unsubscribe", "tool", "_a", "context", "error", "_default", "base64", "base64url", "bigint", "boolean", "_catch", "cidrv4", "cidrv6", "core_exports", "cuid", "cuid2", "date", "decode", "decodeAsync", "describe", "e164", "email", "emoji", "encode", "encodeAsync", "_enum", "guid", "hex", "hostname", "ipv4", "ipv6", "ksuid", "mac", "meta", "nanoid", "_null", "nullish", "number", "parse", "parseAsync", "safeDecode", "safeDecodeAsync", "safeEncode", "safeEncodeAsync", "safeParse", "safeParseAsync", "string", "toJSONSchema", "ulid", "_undefined", "uuid", "_void", "xid", "core_exports", "_emoji", "_null", "_undefined", "process", "toJSONSchema", "version", "initializer", "_a", "array", "set", "object", "_a", "Class", "config", "base64", "base64url", "hex", "error", "issue", "_a", "version", "time", "_a", "inst", "result", "version", "_a", "version", "checks", "checkResult", "canary", "result", "_", "url", "base64", "index", "r", "isObject", "allowsEval", "results", "map", "left", "right", "keyResult", "valueResult", "output", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "_a", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "number", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "error", "issue", "_a", "meta", "Class", "_emoji", "_undefined", "_null", "Class", "issue", "codec", "process", "_a", "meta", "id", "schema", "json", "file", "process", "_a", "toJSONSchema", "registry", "ctx", "process", "schemas_exports", "_default", "base64", "base64url", "bigint", "boolean", "_catch", "cidrv4", "cidrv6", "cuid", "cuid2", "date", "describe", "e164", "email", "emoji", "_enum", "guid", "hex", "hostname", "ipv4", "ipv6", "ksuid", "mac", "meta", "nanoid", "_null", "nullish", "number", "string", "ulid", "_undefined", "uuid", "_void", "xid", "checks_exports", "date", "datetime", "duration", "time", "datetime", "date", "time", "duration", "initializer", "issue", "issues", "parse", "parseAsync", "safeParse", "safeParseAsync", "encode", "decode", "encodeAsync", "decodeAsync", "safeEncode", "safeDecode", "safeEncodeAsync", "safeDecodeAsync", "def", "meta", "parse", "safeParse", "parseAsync", "safeParseAsync", "encode", "decode", "encodeAsync", "decodeAsync", "safeEncode", "safeDecode", "safeEncodeAsync", "safeDecodeAsync", "check", "_default", "_catch", "_a", "json", "_emoji", "datetime", "date", "time", "duration", "string", "email", "guid", "uuid", "emoji", "nanoid", "cuid", "cuid2", "ulid", "xid", "ksuid", "ipv4", "mac", "ipv6", "cidrv4", "cidrv6", "base64", "base64url", "e164", "hostname", "hex", "number", "boolean", "bigint", "_undefined", "json", "_null", "json", "_void", "json", "date", "_enum", "json", "issue", "output", "nullish", "_default", "_catch", "json", "json", "describe", "meta", "string", "number", "boolean", "_null", "map", "ZodFirstPartyTypeKind", "schemas_exports", "checks_exports", "zodSchema", "objectSchema", "version", "bigint", "boolean", "date", "number", "string", "string", "number", "boolean", "bigint", "date", "tool", "_a", "context", "error", "import_react", "_a", "import_react", "import_react", "import_react", "context", "contextValue", "useThreadViewport", "context", "_jsx", "_a", "entry", "hook", "_a", "_jsxs", "_jsx", "index", "aui", "_jsx", "index", "aui", "_jsx", "index", "aui", "_jsx", "index", "aui", "_jsx", "index", "aui", "_jsx", "_jsx", "index", "_jsx", "_jsx", "transform", "index", "import_react", "_a", "_jsx", "data", "error", "import_react", "_a", "identity", "optional", "_a", "_a", "_a", "_a", "_a", "import_react", "_a", "_a", "React", "React", "import_jsx_runtime", "React", "Slot", "props", "Slottable", "Fragment", "_a", "import_jsx_runtime", "Slot", "import_react", "HideAndFloatStatus", "_jsx", "import_react", "import_react", "_a", "_jsx", "import_react", "_jsx", "import_react", "import_react", "import_react", "_a", "import_react", "import_react", "_jsx", "import_react", "_a", "_jsx", "import_react", "import_react", "_a", "_jsx", "import_react", "_a", "url", "_jsx", "_jsx", "import_react", "_jsx", "import_react", "_jsx", "import_react", "_jsx", "import_react", "_jsx", "import_react", "open", "_jsx", "Root2", "import_react", "_jsx", "Trigger", "import_react", "_jsx", "Content2", "import_react", "_jsx", "import_react", "_jsx", "import_react", "_jsxs", "_jsx", "_Fragment", "import_react", "import_react", "import_react", "_jsx", "_Fragment", "_jsx", "_Fragment", "import_react", "import_react", "import_react", "import_react", "getHeight", "import_react", "_a", "_jsx", "_a", "getHeight", "forwardRef", "_jsx", "import_react", "COMPLETE_STATUS", "index", "_jsx", "import_react", "_jsx", "import_react", "_jsx", "index", "Render", "_jsx", "_jsxs", "File", "_a", "part", "COMPLETE_STATUS", "_Fragment", "_a", "import_react", "attachment", "_jsx", "index", "_a", "_a", "import_react", "ToolUIDisplay", "Render", "_jsx", "defaultComponents", "_jsxs", "MessagePartComponent", "File", "_a", "part", "EmptyPartFallback", "COMPLETE_STATUS", "EmptyPartsImpl", "EmptyParts", "_Fragment", "_jsx", "import_react", "_jsx", "import_react", "import_react", "index", "aui", "_jsx", "_a", "index", "_jsx", "_Fragment", "import_react", "import_react", "_jsx", "import_react", "React", "import_react", "import_react", "useLatest", "React", "import_react", "updateRef", "useComposedRef", "React", "forceHiddenStyles", "getHeight", "noop", "pick", "getSizingData", "handler", "useFormResetListener", "useWindowResizeListener", "useFontsLoadedListener", "TextareaAutosize", "resizeTextarea", "handleChange", "index", "import_react", "index", "_a", "file", "error", "_jsx", "import_react", "import_react", "file", "import_react", "getComponent", "AttachmentComponent", "attachment", "_jsx", "index", "_a", "import_react", "file", "error", "_jsx", "import_react", "import_react", "import_react", "forwardRef", "_a", "_jsx", "import_react", "forwardRef", "_jsx", "import_react", "forwardRef", "error", "_a", "_jsx", "import_react", "_jsx", "import_react", "import_react", "import_react", "getHeight", "_jsx", "import_react", "getHeight", "_jsx", "import_react", "getComponent", "_jsx", "index", "import_react", "import_react", "import_react", "_jsx", "index", "import_react", "_jsx", "import_react", "_jsx", "import_react", "import_react", "_jsx", "import_react", "index", "_jsx", "import_react", "_jsx", "import_react", "_jsx", "import_react", "import_react", "import_react", "import_react", "_jsx", "_Fragment", "useDropdownMenuScope", "useDropdownMenuScope", "_jsx", "import_react", "useDropdownMenuScope", "_jsx", "import_react", "useDropdownMenuScope", "_jsx", "import_react", "useDropdownMenuScope", "_jsx", "import_react", "useDropdownMenuScope", "_jsx", "file", "part", "import_react", "_a", "MessageClient", "index", "file", "message", "ThreadListItemClient", "_a", "index"]
}
