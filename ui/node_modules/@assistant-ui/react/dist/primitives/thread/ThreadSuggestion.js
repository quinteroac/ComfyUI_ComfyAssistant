"use client";
import { createActionButton, } from "../../utils/createActionButton.js";
import { useCallback } from "react";
import { useAuiState, useAui } from "@assistant-ui/store";
const useThreadSuggestion = ({ prompt, send, clearComposer = true, autoSend, method: _method, }) => {
    const aui = useAui();
    const disabled = useAuiState(({ thread }) => thread.isDisabled);
    // ========== Deprecation Mapping ==========
    const resolvedSend = send ?? autoSend ?? false;
    // ==========================================
    const callback = useCallback(() => {
        const isRunning = aui.thread().getState().isRunning;
        if (resolvedSend && !isRunning) {
            aui.thread().append(prompt);
            if (clearComposer) {
                aui.composer().setText("");
            }
        }
        else {
            if (clearComposer) {
                aui.composer().setText(prompt);
            }
            else {
                const currentText = aui.composer().getState().text;
                aui
                    .composer()
                    .setText(currentText.trim() ? `${currentText} ${prompt}` : prompt);
            }
        }
    }, [aui, resolvedSend, clearComposer, prompt]);
    if (disabled)
        return null;
    return callback;
};
export const ThreadPrimitiveSuggestion = createActionButton("ThreadPrimitive.Suggestion", useThreadSuggestion, ["prompt", "send", "clearComposer", "autoSend", "method"]);
//# sourceMappingURL=ThreadSuggestion.js.map