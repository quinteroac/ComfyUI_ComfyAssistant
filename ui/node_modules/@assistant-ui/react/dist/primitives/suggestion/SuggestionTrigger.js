"use client";
import { createActionButton, } from "../../utils/createActionButton.js";
import { useCallback } from "react";
import { useAuiState, useAui } from "@assistant-ui/store";
const useSuggestionTrigger = ({ send, clearComposer = true, }) => {
    const aui = useAui();
    const disabled = useAuiState(({ thread }) => thread.isDisabled);
    const prompt = useAuiState(({ suggestion }) => suggestion.prompt);
    const resolvedSend = send ?? false;
    const callback = useCallback(() => {
        const isRunning = aui.thread().getState().isRunning;
        if (resolvedSend && !isRunning) {
            aui.thread().append(prompt);
            if (clearComposer) {
                aui.composer().setText("");
            }
        }
        else {
            if (clearComposer) {
                aui.composer().setText(prompt);
            }
            else {
                const currentText = aui.composer().getState().text;
                aui
                    .composer()
                    .setText(currentText.trim() ? `${currentText} ${prompt}` : prompt);
            }
        }
    }, [aui, resolvedSend, clearComposer, prompt]);
    if (disabled)
        return null;
    return callback;
};
/**
 * A button that triggers the suggestion action (send or insert into composer).
 *
 * @example
 * ```tsx
 * <SuggestionPrimitive.Trigger send>
 *   Click me
 * </SuggestionPrimitive.Trigger>
 * ```
 */
export const SuggestionPrimitiveTrigger = createActionButton("SuggestionPrimitive.Trigger", useSuggestionTrigger, ["send", "clearComposer"]);
//# sourceMappingURL=SuggestionTrigger.js.map