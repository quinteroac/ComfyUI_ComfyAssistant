"use client";
import { jsx as _jsx, Fragment as _Fragment } from "react/jsx-runtime";
import { useMemo, } from "react";
import { useAuiState } from "@assistant-ui/store";
import { ChainOfThoughtPartByIndexProvider } from "../../context/providers/ChainOfThoughtPartByIndexProvider.js";
import { MessagePartComponent } from "../message/MessageParts.js";
/**
 * Renders the parts within a chain of thought, with support for collapsed/expanded states.
 *
 * When collapsed, no parts are shown. When expanded, all parts are rendered
 * using the provided component configuration through the part scope mechanism.
 *
 * @example
 * ```tsx
 * <ChainOfThoughtPrimitive.Parts
 *   components={{
 *     Reasoning: ({ text }) => <p className="reasoning">{text}</p>,
 *     tools: {
 *       Fallback: ({ toolName }) => <div>Tool: {toolName}</div>
 *     }
 *   }}
 * />
 * ```
 */
export const ChainOfThoughtPrimitiveParts = ({ components }) => {
    const partsLength = useAuiState(({ chainOfThought }) => chainOfThought.parts.length);
    const messageComponents = useMemo(() => ({
        Reasoning: components?.Reasoning,
        tools: {
            Fallback: components?.tools?.Fallback,
        },
    }), [components?.Reasoning, components?.tools?.Fallback]);
    const Layout = components?.Layout;
    const elements = useMemo(() => {
        return Array.from({ length: partsLength }, (_, index) => (_jsx(ChainOfThoughtPartByIndexProvider, { index: index, children: Layout ? (_jsx(Layout, { children: _jsx(MessagePartComponent, { components: messageComponents }) })) : (_jsx(MessagePartComponent, { components: messageComponents })) }, index)));
    }, [partsLength, messageComponents, Layout]);
    return _jsx(_Fragment, { children: elements });
};
ChainOfThoughtPrimitiveParts.displayName = "ChainOfThoughtPrimitive.Parts";
//# sourceMappingURL=ChainOfThoughtParts.js.map